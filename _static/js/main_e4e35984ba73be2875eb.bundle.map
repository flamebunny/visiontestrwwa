{"version":3,"sources":["webpack:///./Scripts/src/Foundation/Navigation/Nav.js","webpack:///./Scripts/src/Foundation/Services/MessageBusService.js","webpack:///./Scripts/src/Foundation/Common.js","webpack:///./Scripts/src/Foundation/TabTouch.js","webpack:///./Scripts/src/Foundation/Services/Preferences/PreferencesService.js","webpack:///./Scripts/src/Foundation/Error.js","webpack:///./Scripts/src/Foundation/Lock.js","webpack:///./Scripts/src/Foundation/LocationDetailsAppender.js","webpack:///./Scripts/src/Foundation/Notification.js","webpack:///./Scripts/src/Foundation/TupleSpace.js","webpack:///./~/jquery-todictionary/jquery-todictionary.js","webpack:///./Scripts/src/Betting-v1/RaceReplay.js","webpack:///./Scripts/src/Foundation/Components/Blackbook/myblackbook-add-viewbinding.js","webpack:///./Scripts/src/Foundation/Components/Blackbook/myblackbook-add-viewcontroller.js","webpack:///./Scripts/vendor/numeral-1.5.3.js","webpack:///./~/crypto-js/md5.js","webpack:///./Scripts/vendor/swipe-2.0.js","webpack:///./Scripts/src/Foundation/Services/LoggingService.js","webpack:///./~/tslib/tslib.es6.js","webpack:///./~/js-cookie/src/js.cookie.js","webpack:///./Scripts/src/Foundation/Analytics/AnalyticsDataLayer.js","webpack:///./Scripts/src/Foundation/Services/FeatureService.js","webpack:///./Scripts/src/Foundation/Logon.js","webpack:///./Scripts/src/Foundation/ViewModels/ToteSports/ToteSports.js","webpack:///external \"requirejs\"","webpack:///./Scripts/src/Betting-v1/Tipping/Tipping.js","webpack:///./Scripts/src/Foundation/Services/Location/CheckInService.js","webpack:///./Scripts/src/Foundation/Services/ApiService.js","webpack:///./Scripts/src/Foundation/Math.js","webpack:///./Scripts/src/Foundation/ViewModels/AccountViewModel.js","webpack:///./Scripts/src/Foundation/Modal/Modal.js","webpack:///./~/rwwa-rx-state-machine/dist/stream-driver.js","webpack:///./Scripts/src/Foundation/Components/Authentication/Utils/defineDelegate.js","webpack:///./Scripts/src/Foundation/Services/Device/DeviceIdentificationService.js","webpack:///./Scripts/src/Foundation/Analytics/AnalyticsService.js","webpack:///./Scripts/src/Specials/Store/PyosStore.ts","webpack:///./Scripts/src/Foundation/Services/Location/LocationService.js","webpack:///./Scripts/src/Specials/IOC/inversify.config.ts","webpack:///./Scripts/src/Foundation/Analytics/AdobeDTMService.js","webpack:///./Scripts/src/Foundation/Services/Location/LbsConfigService.js","webpack:///./Scripts/vendor/Base64.js","webpack:///./Scripts/src/Foundation/MultiBet/viewmodel/multi-viewmodel.js","webpack:///external \"define\"","webpack:///./Scripts/src/Foundation/Services/AccountMonitoringService.js","webpack:///./Scripts/src/AppUtils/Framework/Components/koComponentRegistration.ts","webpack:///./Scripts/src/Foundation/Components/Calculator/Model/betamount-viewmodel.js","webpack:///./Scripts/src/Foundation/Components/MysteryBet/Model/numberofbets-component-viewmodel.js","webpack:///./Scripts/src/Foundation/Services/Location/LocationProvider.js","webpack:///./Scripts/src/Specials/Components/ProjectedPay/register.ts","webpack:///./Scripts/src/Specials/Components/PyosMessage/register.ts","webpack:///./Scripts/src/Specials/Components/PyosSelect/register.ts","webpack:///./Scripts/src/Foundation/JockeyJS/JockeyJSMessageService.js","webpack:///./Scripts/src/Foundation/Router.js","webpack:///./Scripts/src/Foundation/ViewModels/PrimaryMenuViewModel-Extension.js","webpack:///./Scripts/src/AppUtils/Framework/Intent/navigation.js","webpack:///./Scripts/src/Foundation/ViewModels/Location/LbsViewModel.js","webpack:///./~/jockeyjs/jockey.js","webpack:///./Scripts/src/AppUtils/inline-require.ts","webpack:///./Scripts/src/Foundation/Components/Authentication/Neo/register.js","webpack:///./Scripts/src/Foundation/Components/Blackbook/myblackbook-service.js","webpack:///./Scripts/src/Foundation/Components/Blackbook/myblackbook-viewbinding.js","webpack:///./Scripts/src/Foundation/Components/Blackbook/myblackbook-viewcontroller.js","webpack:///./Scripts/src/Foundation/Components/Calculator/register.js","webpack:///./Scripts/src/Foundation/Components/MysteryBet/Model/bettypes-component-viewmodel.js","webpack:///./Scripts/src/Foundation/Components/MysteryBet/Model/customisebetpage-component-viewmodel.js","webpack:///./Scripts/src/Foundation/Components/MysteryBet/Model/options-component-viewmodel.js","webpack:///./Scripts/src/Foundation/Components/MysteryBet/Model/quickpickpage-component-viewmodel.js","webpack:///./Scripts/src/Foundation/Components/MysteryBet/Model/quickpicks-component-viewmodel.js","webpack:///./Scripts/src/Foundation/Components/MysteryBet/Model/tabs-component-viewmodel.js","webpack:///./Scripts/src/Foundation/Components/MysteryBet/register.js","webpack:///./Scripts/src/Foundation/DateProvider.js","webpack:///./Scripts/src/Foundation/KnockoutExtensions/Bindings/currency-binding.js","webpack:///./Scripts/src/Foundation/KnockoutExtensions/Bindings/scrollto-binding.js","webpack:///./Scripts/src/Foundation/MultiBet/viewmodel/multiinvestment-viewmodel.js","webpack:///./Scripts/src/Foundation/MultiBet/viewmodel/multipropose-viewmodel.js","webpack:///./Scripts/src/Foundation/MultiBet/viewmodel/multireceipt-viewmodel.js","webpack:///./Scripts/src/Foundation/MultiBet/viewmodel/multiview-viewmodel.js","webpack:///./Scripts/src/Foundation/Services/Location/CheckInStore.js","webpack:///./Scripts/src/Foundation/Services/Location/GeoFenceService.js","webpack:///./Scripts/src/Foundation/Services/Location/GpsStore.js","webpack:///./Scripts/src/Foundation/Services/Location/LocationStore.js","webpack:///./Scripts/src/Foundation/Version.js","webpack:///./Scripts/src/Foundation/ViewModels/AccountActivityViewModel.js","webpack:///./Scripts/src/Foundation/ViewModels/AccountChangePasswordViewModel.js","webpack:///./Scripts/src/Foundation/ViewModels/AccountDepositPayconnectViewModel.js","webpack:///./Scripts/src/Foundation/ViewModels/AccountDepositViewModel.js","webpack:///./Scripts/src/Foundation/ViewModels/AccountPrecommitmentViewModel.js","webpack:///./Scripts/src/Foundation/ViewModels/AccountTransactionViewModel.js","webpack:///./Scripts/src/Foundation/ViewModels/AccountWithdrawalViewModel.js","webpack:///./Scripts/src/Foundation/ViewModels/AppDownloadViewModel.js","webpack:///./Scripts/src/Foundation/ViewModels/Fob/fob-singlebetreceipt.js","webpack:///./Scripts/src/Foundation/ViewModels/Fob/foo-propose.js","webpack:///./Scripts/src/Foundation/ViewModels/HomeViewModel.js","webpack:///./Scripts/src/Foundation/ViewModels/MarketingCommsViewModel.js","webpack:///./Scripts/src/Foundation/ViewModels/MysteryViewModel.js","webpack:///./Scripts/src/Foundation/ViewModels/SettingsViewModel.js","webpack:///./Scripts/src/Foundation/ViewModels/StartersPageViewModel.js","webpack:///./Scripts/src/Foundation/ViewModels/TabLocatorViewModel.js","webpack:///./Scripts/src/Foundation/ViewModels/ToteSports/ToteSportsCurrent.js","webpack:///./Scripts/src/Foundation/ViewModels/ToteSports/ToteSportsError.js","webpack:///./Scripts/src/Foundation/ViewModels/ToteSports/ToteSportsGames.js","webpack:///./Scripts/src/Foundation/ViewModels/ToteSports/ToteSportsGamesResults.js","webpack:///./Scripts/src/Foundation/ViewModels/ToteSports/ToteSportsPropose.js","webpack:///./Scripts/src/Foundation/ViewModels/ToteSports/ToteSportsResults.js","webpack:///./Scripts/src/Foundation/Window.js","webpack:///./Scripts/src/Betting-v1/betslipservice.legacy.js","webpack:///./Scripts/src/Betting-v1/betwalletservice.legacy.js","webpack:///./Scripts/src/Betting-v1/quinellalegin.legacy.js","webpack:///./Scripts/src/Specials/Model/LegTypeCode.ts","webpack:///./Scripts/src/Specials/Model/PriceDetails.ts","webpack:///./Scripts/src/Specials/Model/Stake.ts","webpack:///./Scripts/src/Specials/Store/PyosExtensions.ts","webpack:///./Scripts/src/Betting-v1/InlineRequireDefinitions.js","webpack:///./Scripts/src/Foundation/AppDynamics.js","webpack:///./Scripts/src/Foundation/ContentManagementSystem.js","webpack:///./Scripts/src/Foundation/InlineRequireDefinitions.js","webpack:///./Scripts/src/Foundation/RaceBettingPageRouteHandler.js","webpack:///./Scripts/src/Foundation/ViewModels/PrimaryMenuViewModel.js","webpack:///./Scripts/src/entry-require.js","webpack:///./Scripts/src/include-legacy.js","webpack:///./Scripts/src/AppUtils/Framework/Guard.ts","webpack:///./Scripts/src/AppUtils/Framework/Disposable/Disposable.ts","webpack:///./Scripts/src/AppUtils/Framework/Messaging/EventAggregator.ts","webpack:///./Scripts/src/AppUtils/Framework/WindowManagement/AppWindow.ts","webpack:///./Scripts/src/AppUtils/Framework/Utils/PreferencesServiceWrapper.ts","webpack:///./Scripts/src/AppUtils/Framework/Map.ts","webpack:///./Scripts/src/AppUtils/Framework/Utils/LogInHelper.ts","webpack:///./Scripts/src/AppUtils/Framework/Intent/modal.js","webpack:///./Scripts/src/AppUtils/Framework/ProgressIndicator/ProgressIndicator.ts","webpack:///./Scripts/src/AppUtils/Framework/Timers/CountdownTimer.ts","webpack:///./Scripts/src/AppUtils/Utils/CurrencyConverter.ts","webpack:///./Scripts/src/Betting-v2/Model/ServiceError.ts","webpack:///./Scripts/src/Betting-v1/Tipping/TippingError.js","webpack:///./Scripts/src/Betting-v1/Tipping/TippingGame.js","webpack:///./Scripts/src/Betting-v1/Tipping/TippingPool.js","webpack:///./Scripts/src/Betting-v1/Tipping/TippingPropose.js","webpack:///./Scripts/src/Betting-v1/Tipping/TippingReceipt.js","webpack:///./Scripts/src/Betting-v1/Tipping/TippingResults.js","webpack:///./Scripts/src/Foundation/Components/Authentication/ChangePassword/ChangePasswordViewModel.js","webpack:///./Scripts/src/Foundation/Components/Authentication/ChangePassword/register.js","webpack:///./Scripts/src/Foundation/Components/Authentication/Logon/LogonViewModel.js","webpack:///./Scripts/src/Foundation/Components/Authentication/Logon/register.js","webpack:///./Scripts/src/Foundation/Components/Authentication/Neo/NeoViewModel.js","webpack:///./Scripts/src/Foundation/Components/Authentication/Progress/ProgressViewModel.js","webpack:///./Scripts/src/Foundation/Components/Authentication/Progress/register.js","webpack:///./Scripts/src/Foundation/Components/Authentication/RecoverAccountNumber/RecoverAccountNumberViewModel.js","webpack:///./Scripts/src/Foundation/Components/Authentication/RecoverAccountNumber/register.js","webpack:///./Scripts/src/Foundation/Components/Authentication/RecoverPassword/RecoverPasswordViewModel.js","webpack:///./Scripts/src/Foundation/Components/Authentication/RecoverPassword/register.js","webpack:///./Scripts/src/Foundation/Components/Calculator/Model/amountinput-component-viewmodel.js","webpack:///./Scripts/src/Foundation/Components/Calculator/Model/betamount-calculator.js","webpack:///./Scripts/src/Foundation/Components/Calculator/Model/calculator-component-viewmodel.js","webpack:///./Scripts/src/Foundation/Components/Calculator/Model/numberpad-component-viewmodel.js","webpack:///./Scripts/src/Foundation/Components/MysteryBet/Model/bettype-viewmodel.js","webpack:///./Scripts/src/Foundation/Components/MysteryBet/Model/numberofbets-viewmodel.js","webpack:///./Scripts/src/Foundation/Components/MysteryBet/Model/option-viewmodel.js","webpack:///./Scripts/src/Foundation/Components/MysteryBet/Model/quickpick-viewmodel.js","webpack:///./Scripts/src/Foundation/Components/MysteryBet/Model/tab-viewmodel.js","webpack:///./Scripts/src/Foundation/KnockoutExtensions/Bindings/css2.js","webpack:///./Scripts/src/Foundation/KnockoutExtensions/Extenders/pattern.js","webpack:///./Scripts/src/Foundation/Modal/modal-component.js","webpack:///./Scripts/src/Foundation/Modal/remote-component.js","webpack:///./Scripts/src/Foundation/MultiBet/services/ProjectedPayCalculator.js","webpack:///./Scripts/src/Foundation/MultiBet/services/multi-store.js","webpack:///./Scripts/src/Foundation/MultiBet/services/multiformulasummary-builder.js","webpack:///./Scripts/src/Foundation/MultiBet/viewmodel/calculator-viewmodel.js","webpack:///./Scripts/src/Foundation/MultiBet/viewmodel/formula-viewmodel.js","webpack:///./Scripts/src/Foundation/MultiBet/viewmodel/multiformula-viewmodel.js","webpack:///./Scripts/src/Foundation/Navigation/NavigationLoading.js","webpack:///./Scripts/src/Foundation/Navigation/NavigationRules.js","webpack:///./Scripts/src/Foundation/Redirect.js","webpack:///./Scripts/src/Foundation/Services/HttpService.js","webpack:///./Scripts/src/Foundation/Services/Location/BeaconLocationService.js","webpack:///./Scripts/src/Foundation/Services/Location/GeoLocationService.js","webpack:///./Scripts/src/Foundation/Services/NavigationService.js","webpack:///./Scripts/src/Foundation/Services/Preferences/PreferencesStore.js","webpack:///./Scripts/src/Foundation/Services/RemoteComponentService.js","webpack:///./Scripts/src/Foundation/Services/StorageService.js","webpack:///./Scripts/src/Foundation/StringExtensions.js","webpack:///./Scripts/src/Foundation/TimeProvider.js","webpack:///./Scripts/src/Foundation/ViewModels/Location/AtTheRacesViewModel.js","webpack:///./~/countdown/countdown.js","webpack:///./~/crypto-js/core.js","webpack:///./Scripts/vendor/adrum.js","webpack:///./Scripts/vendor/require.min.js","webpack:///./Scripts/src/Betting-v1/BettingCalculator.legacy.js","webpack:///./Scripts/src/Betting-v1/betslip.legacy.js","webpack:///./Scripts/src/Betting-v1/betslipstore.legacy.js","webpack:///./Scripts/src/Betting-v1/betwallet.legacy.js","webpack:///./Scripts/src/Betting-v1/betwalletindicator.legacy.js","webpack:///./Scripts/src/Betting-v1/betwalletstore.legacy.js","webpack:///./Scripts/src/Betting-v1/cash-ui-toggler.legacy.js","webpack:///./Scripts/src/Betting-v1/collections.legacy.js","webpack:///./Scripts/src/Betting-v1/configuration-service.legacy.js","webpack:///./Scripts/src/Betting-v1/confirmation.legacy.js","webpack:///./Scripts/src/Betting-v1/controller-addbetslip.legacy.js","webpack:///./Scripts/src/Betting-v1/controller-betslip.legacy.js","webpack:///./Scripts/src/Betting-v1/controller-tote-calculator.legacy.js","webpack:///./Scripts/src/Betting-v1/controllers.legacy.js","webpack:///./Scripts/src/Betting-v1/downloadXml.legacy.js","webpack:///./Scripts/src/Betting-v1/favouritenumbers.legacy.js","webpack:///./Scripts/src/Betting-v1/feature-detection-service.legacy.js","webpack:///./Scripts/src/Betting-v1/flexiservice.legacy.js","webpack:///./Scripts/src/Betting-v1/fob.legacy.js","webpack:///./Scripts/src/Betting-v1/fobracing-calculator.legacy.js","webpack:///./Scripts/src/Betting-v1/fobracing.legacy.js","webpack:///./Scripts/src/Betting-v1/maps.legacy.js","webpack:///./Scripts/src/Betting-v1/modal-service.legacy.js","webpack:///./Scripts/src/Betting-v1/models.legacy.js","webpack:///./Scripts/src/Betting-v1/namespace.legacy.js","webpack:///./Scripts/src/Betting-v1/offers.legacy.js","webpack:///./Scripts/src/Betting-v1/popupservice.legacy.js","webpack:///./Scripts/src/Betting-v1/specials.legacy.js","webpack:///./Scripts/src/Betting-v1/summarypanel.legacy.js","webpack:///./Scripts/src/Betting-v1/tote.legacy.js","webpack:///./Scripts/src/Betting-v1/totebettingservice.legacy.js","webpack:///./Scripts/src/Betting-v1/totecalculator.legacy.js","webpack:///./Scripts/src/Betting-v1/toteselections.legacy.js","webpack:///./Scripts/src/Foundation/Components/Authentication/ChangePassword/ChangePassword.tpl.html","webpack:///./Scripts/src/Foundation/Components/Authentication/Logon/Logon.tpl.html","webpack:///./Scripts/src/Foundation/Components/Authentication/Neo/Neo.tpl.html","webpack:///./Scripts/src/Foundation/Components/Authentication/Progress/Progress.tpl.html","webpack:///./Scripts/src/Foundation/Components/Authentication/RecoverAccountNumber/RecoverAccountNumber.tpl.html","webpack:///./Scripts/src/Foundation/Components/Authentication/RecoverPassword/RecoverPassword.tpl.html","webpack:///./Scripts/src/Foundation/Components/Calculator/View/amountinput.tmpl.html","webpack:///./Scripts/src/Foundation/Components/Calculator/View/calculator.tmpl.html","webpack:///./Scripts/src/Foundation/Components/Calculator/View/numberpad.tmpl.html","webpack:///./Scripts/src/Foundation/Components/MysteryBet/View/bettype.tmpl.html","webpack:///./Scripts/src/Foundation/Components/MysteryBet/View/customisebetpage.tmpl.html","webpack:///./Scripts/src/Foundation/Components/MysteryBet/View/numberofbets.tmpl.html","webpack:///./Scripts/src/Foundation/Components/MysteryBet/View/options.tmpl.html","webpack:///./Scripts/src/Foundation/Components/MysteryBet/View/quickpick.tmpl.html","webpack:///./Scripts/src/Foundation/Components/MysteryBet/View/quickpickpage.tmpl.html","webpack:///./Scripts/src/Foundation/Components/MysteryBet/View/tabs.tmpl.html","webpack:///./Scripts/src/Foundation/Modal/modal-template.html","webpack:///./Scripts/src/Foundation/Modal/remote-template.html","webpack:///./Scripts/src/Specials/Components/ProjectedPay/projected-pay.tmpl.html","webpack:///./Scripts/src/Specials/Components/PyosMessage/pyos-message.tmpl.html","webpack:///./Scripts/src/Specials/Components/PyosSelect/pyosselect.tmpl.html","webpack:///./Scripts/src/AppUtils/Framework/CustomBindings/slideVisible.ts","webpack:///./Scripts/src/AppUtils/Framework/Exceptions/InvariantFailureException.ts","webpack:///./Scripts/src/AppUtils/Framework/IOC/inversify.config.ts","webpack:///./Scripts/src/AppUtils/Framework/IOC/services.config.ts","webpack:///./Scripts/src/AppUtils/Framework/Lock.ts","webpack:///./Scripts/src/AppUtils/Framework/ProgressIndicator/ProgressIndicatorBase.ts","webpack:///./Scripts/src/Specials/Components/ProjectedPay/ProjectedPayViewModel.ts","webpack:///./Scripts/src/Specials/Components/PyosMessage/PyosMessageViewModel.ts","webpack:///./Scripts/src/Specials/Components/PyosSelect/PyosSelectViewModel.ts","webpack:///./Scripts/src/Specials/Components/Tokens/FobSpecialTokensViewModel.ts","webpack:///./Scripts/src/Specials/Components/Tokens/TokensMapper.ts","webpack:///./Scripts/src/Specials/Dtos/PyosServiceRequestDto.ts","webpack:///./Scripts/src/Specials/IOC/services.config.ts","webpack:///./Scripts/src/Specials/IOC/viewmodels.config.ts","webpack:///./Scripts/src/Specials/Model/BetSpecialOffer.ts","webpack:///./Scripts/src/Specials/Model/SpecialTokenModel.ts","webpack:///./Scripts/src/Specials/Services/PyosService.ts","webpack:///./Scripts/src/Specials/Store/PyosRewardCalculator.ts","webpack:///./Scripts/src/Specials/Utils/SpecialsUrlProvider.ts","webpack:///./Scripts/src/entry-main.js"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;;AAGA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA,yBAAyB;;AAEzB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA,aAAa;;AAEb;AACA;;AAEA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA,SAAS;;AAET;AACA,wBAAwB;;AAExB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,oDAAoD,wBAAwB;AAC5E;AACA,SAAS;;AAET;AACA;AACA;AACA,SAAS;;AAET;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,4CAA4C,wBAAwB;AACpE;AACA,SAAS;AACT;;;AAGA;AACA;AACA,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA,eAAe,OAAO;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;;AAEA;AACA;;AAEA;AACA;AACA,SAAS,IAAI;AACb;AACA,SAAS;AACT;AACA,SAAS;AACT;;;AAGA;AACA;AACA,eAAe,OAAO;AACtB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,sCAAsC,oFAAoF,iBAAiB,eAAe;;AAE1J;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;;AAGA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB,eAAe,SAAS;AACxB,eAAe,OAAO;AACtB,eAAe,QAAQ;AACvB;AACA;AACA;;AAEA;AACA,sCAAsC,qEAAqE,eAAe;;AAE1H;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,6BAA6B;;AAEhF;;AAEA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;;AAGA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,SAAS;AACxB,eAAe,OAAO,YAAY;AAClC,eAAe,SAAS;AACxB,eAAe,SAAS;AACxB;AACA;AACA;AACA,sCAAsC,oBAAoB,eAAe;;AAEzE,yCAAyC;AACzC;;AAEA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,QAAQ;AACR;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,iCAAiC,mCAAmC;AACpE,qCAAqC,mCAAmC;AACxE;;;AAGA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,OAAO,EAAE;AACxB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,aAAa;AACb;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA,eAAe,SAAS;AACxB,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB,kB;AACA;AACA;AACA;;AAEA;AACA;;AAEA,+DAA+D,kCAAkC,EAAE;;AAEnG;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA,gBAAgB;AAChB,kB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;;;AAGA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;;AAGA;AACA;AACA,eAAe,SAAS;AACxB;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA,eAAe,OAAO;AACtB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;;AAGA;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB;AACjB,SAAS;AACT;;;AAGA;AACA;AACA,eAAe,SAAS;AACxB;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA,eAAe,OAAO;AACtB;AACA;AACA;AACA;;;AAGA;AACA;AACA,eAAe,OAAO;AACtB,iBAAiB;AACjB;AACA;AACA;AACA;;;AAGA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;;;AAGA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB,eAAe,QAAQ;AACvB,iBAAiB,Q;AACjB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,iBAAiB;AACjB;AACA;AACA;AACA;;;AAGA;AACA;AACA,eAAe,OAAO;AACtB;AACA;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAAA,qG;;;;;;ACrzBD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA,SAAS;AACT,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,CAAC;AAAA,qG;;;;;;ACvCD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,wCAAwC;AACxC;AACA,0BAA0B,2BAA2B;AACrD,mDAAmD,eAAe;;AAElE;;AAEA;AACA,8CAA8C,sCAAsC;;AAEpF;AACA;AACA;AACA,mDAAmD,sBAAsB;AACzE;AACA,SAAS;AACT;;AAEA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,4BAA4B,kDAAkD,EAAE;AAChF;;AAEA;;AAEA;AACA;AACA,mEAAmE,iBAAiB;AACpF;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA,4CAA4C,EAAE,IAAI,EAAE;AACpD;AACA,yFAAyF,gBAAgB;AACzG,mEAAmE;;AAEnE;AACA;AACA;AACA;AACA;;AAEA;AACA,4CAA4C,EAAE,KAAK,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE;AAC7E;AACA;AACA;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA;AACA;AACA,sEAAsE,EAAE;AACxE;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,0CAA0C,EAAE,IAAI,EAAE;AAClD;AACA,+EAA+E,gBAAgB;AAC/F,uEAAuE;;AAEvE;AACA;AACA;AACA;AACA;;AAEA;AACA,0CAA0C,EAAE,KAAK,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE;AAC3E;AACA;AACA;AACA;AACA,qBAAqB;;AAErB;AACA;AACA;AACA;AACA,0EAA0E,EAAE;AAC5E;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAAA,qG;;;;;;;gECjSD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,oEAAoE;;AAEpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAAA,qG;;;;;;ACrID;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,CAAC;AAAA,qG;;;;;;ACvCD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,CAAC;AAAA,qG;;;;;;ACtED;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,CAAC;AAAA,qG;;;;;;AC1CD;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,0DAA0D,wCAAwC,4CAA4C,GAAG;AACjJ;AACA;AACA;;AAEA;AACA;AACA;AACA,oEAAoE,wCAAwC,4CAA4C,GAAG;AAC3J;AACA;AACA;AACA;;AAEA;AACA,CAAC;AAAA,qG;;;;;;AC/BD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA,CAAC;AAAA,qG;;;;;;AC3DD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,2BAA2B,qBAAqB;AAChD;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,2BAA2B,sBAAsB;AACjD;AACA;AACA;AACA;;AAEA;AACA;AACA,2BAA2B,sBAAsB;AACjD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,2BAA2B,sBAAsB;AACjD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,2BAA2B,sBAAsB;AACjD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,2BAA2B,sBAAsB;AACjD;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAAA,qG;;;;;;ACtED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,YAAY;AACzD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,YAAY;AAClD;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,EAAE,EAAE,EAAE;AACpD,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,2CAA2C;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,2BAA2B;AAC5D;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,KAAK;AACL,CAAC,U;;;;;;;gECnID;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,6CAA6C,qBAAqB,eAAe,EAAE;AACnF,aAAa;AACb,SAAS;AACT;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,6FAA6F,aAAa;AAC1G;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,qBAAqB;;AAErB;AACA;AACA;AACA,qBAAqB;;AAErB;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,oEAAoE,iCAAiC;;AAErG;AACA;;AAEA;AACA;;AAEA;AACA,yDAAyD,qBAAqB,eAAe,EAAE;AAC/F;;AAEA;AACA,qBAAqB;AACrB;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA,iBAAiB,GAAG,gCAAgC,mGAAmG,EAAE,EAAE;AAC3J;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;AAAA,qG;;;;;;AC/HD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,iBAAiB;;AAEjB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA,yBAAyB;AACzB,iBAAiB;AACjB;AACA;AACA,CAAC;AAAA,qG;;;;;;ACtCD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,wDAAwD;AACxD;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA,aAAa;AACb;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAAA;;;;;;;ACtFD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,4CAA4C,oBAAoB;AAChE;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,uCAAuC;AACvC;AACA,SAAS,qCAAqC;AAC9C;AACA,SAAS,qCAAqC;AAC9C;AACA,SAAS,OAAO;AAChB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;AACA,aAAa;AACb;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,+BAA+B,0BAA0B;AACzD;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;;AAEA,+BAA+B,0BAA0B;AACzD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;;AAEA;;AAEA;AACA;AACA,iBAAiB;AACjB;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,qDAAqD,EAAE;AACvD;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,2BAA2B,gBAAgB;AAC3C;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,K;;;AAGA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA,oF;AACA,mC;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA,SAAS;;AAET;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA,uF;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA,6D;AACA;AACA,SAAS;;AAET;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AAAA;AACT;AACA,CAAC;;;;;;;ACtqBD,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,wBAAwB,QAAQ;AAChC;AACA;AACA,MAAM;;AAEN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;;AAEV;AACA;AACA,4BAA4B,QAAQ;AACpC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,UAAU;;AAEV;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,4BAA4B,OAAO;AACnC;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,UAAU;;AAEV;AACA;AACA;;AAEA;AACA;AACA,MAAM;;AAEN;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAgB,iBAAiB;AACjC;AACA,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAgB,iBAAiB;AACjC,gBAAgB,iBAAiB;AACjC;AACA,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;;AAEA,CAAC,G;;;;;;AC3QD;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA,2BAA2B;AAC3B,gCAAgC,6BAA6B;;AAE7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA,sDAAsD;;AAEtD;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA,oFAAoF;;AAEpF,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA,KAAK;;AAEL;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA,6CAA6C;AAC7C,2CAA2C;AAC3C,oDAAoD;AACpD;AACA;AACA;AACA;AACA,mEAAmE;AACnE,wCAAwC;AACxC;;AAEA;;AAEA,KAAK;AACL;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,KAAK;AACL;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,iCAAiC;;AAEjC;AACA;AACA;;AAEA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;;AAEpB;AACA;AACA;AACA;AACA;;AAEA;;AAEA,KAAK;AACL;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,2CAA2C;;AAE3C;AACA;AACA;AACA,yDAAyD;;AAEzD;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA,qCAAqC;;AAErC;AACA;;AAEA,aAAa;AACb;AACA;;AAEA;AACA;AACA;;AAEA,WAAW;AACX,qCAAqC;;AAErC;AACA;;AAEA,aAAa;AACb;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA,SAAS;;AAET;;AAEA;AACA;AACA;;AAEA,WAAW;;AAEX;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA,KAAK;AACL;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,GAAG;;AAEH,mCAAmC,WAAW;;AAE9C;;AAEA;AACA;AACA;;AAEA;;AAEA,KAAK;AACL;;AAEA;AACA;;AAEA;;AAEA,KAAK;AACL;;AAEA;AACA;;AAEA;;AAEA,KAAK;AACL;;AAEA;AACA;;AAEA;;AAEA,KAAK;AACL;;AAEA;AACA;;AAEA,KAAK;AACL;;AAEA;AACA;;AAEA,KAAK;AACL;;AAEA;AACA;AACA,KAAK;AACL;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,GAAG;AACH;;;;;;;;;;AC5jBA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;;AAEA;AACA,4BAA4B;AAC5B,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA,+BAA+B;AAC/B;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,CAAC;AAAA,qG;;;;;;;;;;;;;;;AC9HD;AAAA;AACA;AACA,+DAA+D;AAC/D;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,MAAM,gBAAgB,sCAAsC,iBAAiB,EAAE;AAC/E,qBAAqB,uDAAuD;;AAE5E;AACA;AACA,mBAAmB,sBAAsB;AACzC;AACA;;AAEA;AACA,4CAA4C,OAAO;AACnD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,4DAA4D,cAAc;AAC1E;AACA;AACA;;AAEA;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;;AAEA;AACA,mCAAmC,oCAAoC;AACvE;;AAEA;AACA;AACA;;AAEA;AACA;AACA,mCAAmC,MAAM,6BAA6B,EAAE,YAAY,WAAW,EAAE;AACjG,kCAAkC,MAAM,8BAA8B,EAAE,YAAY,WAAW,EAAE;AACjG,+BAA+B,iEAAiE,uBAAuB,EAAE,4BAA4B;AACrJ;AACA,KAAK;AACL;;AAEA;AACA,aAAa,6BAA6B,0BAA0B,aAAa,EAAE,qBAAqB;AACxG,YAAY;AACZ,sBAAsB,sBAAsB,qBAAqB,GAAG;AACpE;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC,kCAAkC,SAAS;AAC3C,kCAAkC,WAAW,UAAU;AACvD,yCAAyC,cAAc;AACvD;AACA,6GAA6G,OAAO,UAAU;AAC9H,gFAAgF,iBAAiB,OAAO;AACxG,wDAAwD,gBAAgB,QAAQ,OAAO;AACvF,8CAA8C,gBAAgB,gBAAgB,OAAO;AACrF;AACA,iCAAiC;AACjC;AACA;AACA,SAAS,YAAY,aAAa,OAAO,EAAE,UAAU,WAAW;AAChE,mCAAmC,SAAS;AAC5C;AACA,E;;;;;;;;;AC9FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,QAAQ,sBAAsB;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,cAAc;AACd;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,4BAA4B;AAC5B,yBAAyB;AACzB,2BAA2B;AAC3B,2BAA2B;AAC3B;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,2DAA2D;AAC3D,6BAA6B,EAAE;AAC/B;;AAEA,SAAS,oBAAoB;AAC7B;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;;AAEA;;AAEA;AACA;;AAEA,2BAA2B;AAC3B,CAAC;;;;;;;gEC3JD;AACA;;AAEA;;AAEA;AACA;AACA,sBAAsB,UAAU;AAChC,mBAAmB,8CAA8C;AACjE,0BAA0B,gCAAgC;AAC1D,qBAAqB,6FAA6F;AAClH;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,QAAQ,8BAA8B,UAAU,8BAA8B,EAAE;AACzG,yBAAyB,QAAQ,8BAA8B,UAAU,8BAA8B,EAAE;AACzG,wBAAwB,SAAS,8BAA8B,EAAE;AACjE;AACA,aAAa;AACb,sBAAsB,YAAY;AAClC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;;AAEA;AACA;AACA;AACA,mCAAmC,4CAA4C;AAC/E;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,CAAC;AAAA,qG;;;;;;;ACxLD;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,CAAC;AAAA,qG;;;;;;gECjDD;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,4BAA4B,gCAAgC;AAC5D;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB;AACjB;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;;AAET;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,kDAAkD,eAAe;AACjE,iDAAiD,eAAe;AAChE;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAAA,qG;;;;;;;gECvRD;AACA,kBAAkB;;AAElB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,wC;AACA;AACA;AACA;;AAEA,mC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gCAAgC,6BAA6B;AAC7D,iB;AACA;AACA,8DAA8D,yCAAyC;;AAEvG;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAAA,qG;;;;;;;;;ACzFD,2B;;;;;;;;gECAA;AACA,kBAAkB;;AAElB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,wC;AACA;AACA;AACA;;AAEA,mC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gCAAgC,6BAA6B;AAC7D,iB;AACA;AACA,uDAAuD,yCAAyC;;AAEhG;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAAA,qG;;;;;;ACzFD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,uDAAuD,wDAAwD;AAC/G;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA,0CAA0C,mEAAmE;AAC7G;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,0CAA0C,oEAAoE;AAC9G;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA,0CAA0C,uCAAuC;AACjF;AACA;AACA,CAAC;AAAA,qG;;;;;;;;gECvED;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;;;AAGA;AACA;AACA;AACA,SAAS;AACT;;;AAGA;AACA;AACA;;;AAGA;AACA;AACA;AACA,SAAS;AACT;;;AAGA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,aAAa;AACb,SAAS;AACT;;;AAGA;AACA;AACA;AACA,SAAS;AACT;;;AAGA;AACA;AACA;AACA,SAAS;AACT;;;AAGA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAAA,qG;;;;;;ACnHD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mFAAmF,EAAE;AACrF;AACA;AACA,kFAAkF,EAAE;AACpF;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAuB,gBAAgB;AACvC;AACA;AACA;AACA;;AAEA;AACA,mBAAmB,wBAAwB;AAC3C;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA,CAAC;AAAA,qG;;;;;;AC3DD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;;AAEL;AACA,CAAC;AAAA,qG;;;;;;;ACtBD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,mCAAmC;AACnC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;;AAEA;AACA,4CAA4C,gBAAgB;AAC5D;AACA;AACA;AACA;;AAEA;AACA,2BAA2B,qCAAqC;;AAEhE;AACA,2CAA2C,iBAAiB;AAC5D,4CAA4C,iBAAiB;AAC7D;AACA,oDAAoD,iBAAiB;AACrE;AACA,+CAA+C,iBAAiB;AAChE;;AAEA;AACA;AACA,SAAS,UAAU,iBAAiB;;AAEpC;AACA,wBAAwB;AACxB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA,0CAA0C,iBAAiB;AAC3D;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,+BAA+B,qCAAqC;AACpE;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA,kCAAkC,uBAAuB;AACzD;AACA;AACA,KAAK;AAAA,oG;;;;;;;;AC/GL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,+BAA+B;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,iCAAiC,0BAA0B,0BAA0B,gBAAgB,6CAA6C,EAAE,GAAG,GAAG;AAC1J;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,iCAAiC,EAAE;AACnE,iCAAiC,yBAAyB,EAAE;AAC5D,sCAAsC,0CAA0C,EAAE;AAClF,uCAAuC,4BAA4B,EAAE;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACvIA;AACA;;AAEA;;AAEA,uBAAuB,iBAAiB;AACxC;;AAEA;AACA;AACA;;AAEA;AACA,uBAAuB,iBAAiB;AACxC;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,CAAC;AAAA,qG;;;;;;ACnCD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,gEAAgE,6CAA6C;AAC7G;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,CAAC;AAAA,qG;;;;;;;;ACtFD,wRACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA,aAAa;AACb;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB;;AAEjB;;AAEA;AACA;AACA;;AAEA;AACA,iBAAiB;;AAEjB;AACA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA;;AAEA;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA;;AAEA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;;AAEA;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA;AACA,iBAAiB;;AAEjB;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,iBAAiB;;AAEjB;AACA;AACA,0FAA0F,4CAA4C;AACtI;AACA;AACA,iBAAiB;;AAEjB;;AAEA;AACA;;AAEA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA;;AAEA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,gFAAgF,iBAAiB;AACjG;AACA,iBAAiB;AACjB,+E;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA;;AAEA;AACA;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA;;AAEA,8EAA8E,mBAAmB;AACjG;AACA,iBAAiB;;AAEjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,yBAAyB;AACzB;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA,qBAAqB;;AAErB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,iFAAiF,wBAAwB;AACzG;AACA,iBAAiB;AACjB;AACA;AACA;;AAEA;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA;AACA;AACA;;AAEA,wFAAwF,2BAA2B;AACnH;AACA,iBAAiB;;AAEjB;AACA;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA;AACA;AACA,iBAAiB;;AAEjB;;;AAGA;AACA;;AAEA,mFAAmF,wBAAwB;AAC3G;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;;AAEA,iFAAiF,wBAAwB;AACzG;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB;;AAEjB;;AAEA,sFAAsF,wBAAwB;AAC9G;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;;AAEA,oFAAoF,wBAAwB;AAC5G;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB;;AAEjB;AACA;;AAEA,mFAAmF,wBAAwB;AAC3G;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;;AAEA,iFAAiF,wBAAwB;AACzG;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB;;;AAGjB;;AAEA,4EAA4E,mBAAmB;AAC/F;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;;AAEA,+EAA+E,uBAAuB;AACtG;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,uFAAuF,uBAAuB;AAC9G;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;;AAEA,qFAAqF,6BAA6B;AAClH;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA;AACA;AACA;;AAEA,gFAAgF,2BAA2B;AAC3G;AACA,iBAAiB;AACjB;;AAEA;;AAEA;AACA;AACA;AACA;AACA,iG;AACA;;AAEA;;AAEA;AACA;AACA,iBAAiB;AACjB;;AAEA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,CAAC;AAAA;;;;;;;;;gEC7iBD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,wCAAwC;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,aAAa,EAAE;AAC3D;AACA,aAAa;AACb;AACA;AACA,qDAAqD,UAAU,EAAE;AACjE;AACA;AACA,sDAAsD,sBAAsB,EAAE;AAC9E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D,gBAAgB;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qEAAqE,wDAAwD,EAAE;AAC/H;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAAA;;;;;;;ACvOD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;AAAA,qG;;;;;;gEC3HD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,kDAAkD,cAAc;AAChE;AACA,CAAC;AAAA;;;;;;;ACZD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAAA,qG;;;;;;AC/LD;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA,aAAa;AACb;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;AAAA,qG;;;;;;ACjCD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA,uBAAuB,mBAAmB;;AAE1C;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA,CAAC;AAAA,oG;;;;;;AChJD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,oDAAoD,6CAA6C,EAAE;AACnG;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;;AAEL;AACA,CAAC;AAAA,qG;;;;;;;;;ACxCD,wB;;;;;;ACAA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAAA,qG;;;;;;gEC/DD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,kEAAkE;AAC1H,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAAA;;;;;;;AC9BD;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,4CAA4C,IAAI,UAAU,IAAI;AAC9D,SAAS;;AAET;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;AAAA,qG;;;;;;AC7BD;AACA;AACA;;AAEA;;AAEA;AACA,uBAAuB,eAAe;AACtC;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,CAAC;AAAA,qG;;;;;;AClCD,mbACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,qBAAqB;AACrB,aAAa;AACb;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,O;AACb;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AAAA,qG;;;;;;;;;;gECjJL;AACA;AACA;AACA;AACA;AACA,+BAA+B,gEAAgE;AAC/F,KAAK;AACL,CAAC;AAAA;;;;;;;gECPD;AACA;AACA;AACA;AACA;AACA,+BAA+B,+DAA+D;AAC9F,KAAK;AACL,CAAC;AAAA;;;;;;;gECPD;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,qCAAqC;AACrE,KAAK;AACL,CAAC;AAAA;;;;;;;ACRD;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAAA,oG;;;;;;AC1ED;AACA;AACA;AACA;AACA;;AAEA;AACA,oDAAoD,uCAAuC,EAAE;AAC7F,wBAAwB,qEAAqE;AAC7F;;AAEA;AACA,oDAAoD,uCAAuC,EAAE;AAC7F;;AAEA;AACA,uBAAuB,mBAAmB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,CAAC;AAAA,qG;;;;;;ACpCD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,2FAA2F;AAC3F,+FAA+F;AAC/F,0FAA0F;AAC1F;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe;AACf;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB,8BAA8B;AAC/C;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;;AAEA;AACA;AACA,CAAC;AAAA,qG;;;;;;;;ACpMD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,uBAAuB,+CAA+C;AACtE;;AAEA;AACA,CAAC;AAAA,qG;;;;;;AC9CD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAAA,qG;;;;;;;ACdD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,CAAC;;AAED;AACA;AACA;;AAEA;AACA,qBAAqB;;AAErB;AACA;AACA,SAAS;;AAET;AACA;;AAEA,oEAAoE;AACpE,SAAS;;AAET;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,qBAAqB;;AAErB;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,SAAS;;AAET;AACA;AACA;AACA;;AAEA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA,SAAS;;AAET;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,+BAA+B,6BAA6B;AAC5D;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;;AAEA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT,sCAAsC;AACtC;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,UAAU,oBAAoB;AAC9B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA,CAAC;;;AAGD;AACA;AACA,CAAC,e;;;;;;;;gEClND;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,6DAA6D,WAAW;AACxE;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,CAAC;AAAA;;;;;;;;ACtDD;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL,CAAC;AAAA,oG;;;;;;ACTD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,2BAA2B;AACzD;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,CAAC;AAAA,qG;;;;;;ACnGD,4JACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,qBAAqB;;AAErB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,CAAC;AAAA,qG;;;;;;ACzCD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;;AAEA;AACA;AACA;AACA,aAAa;AACb;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;AAAA,qG;;;;;;AC/ID,kGACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,CAAC;AAAA;;;;;;;ACrCD;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,CAAC;AAAA,qG;;;;;;AC9JD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,0EAA0E,yJAAyJ;AACnO;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA,sGAAsG;AACtG;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,iF;AACA;;AAEA;AACA,CAAC;AAAA,qG;;;;;;ACnKD;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,KAAK;;AAEL;AACA,CAAC;AAAA,qG;;;;;;ACxCD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,CAAC;AAAA,qG;;;;;;ACjED;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,CAAC;AAAA,qG;;;;;;ACjDD;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,SAAS;;AAET;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,CAAC;AAAA,qG;;;;;;AClCD,kGACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,0BAA0B,sDAAsD;AAChF,yBAAyB;AACzB,WAAW;AACX;AACA,CAAC;AAAA,qG;;;;;;ACnFD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,CAAC;AAAA,oG;;;;;;ACfD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,CAAC;AAAA,qG;;;;;;;ACXD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAAA,qG;;;;;;ACVD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCACA;;AAEA;;AAEA;;AAEA;AACA,iEAAiE,uBAAuB,IAAI,cAAc;AAC1G,qEAAqE,4FAA4F,EAAE;AACnK;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6HAA6H;AAC7H;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,+C;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA,oCAAoC;AACpC,yBAAyB;AACzB,qBAAqB;AACrB;AACA,oCAAoC;AACpC,yBAAyB;AACzB;;AAEA;AACA;AACA,qBAAqB;;AAErB;AACA;;AAEA;AACA,a;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,qGAAqG,kDAAkD,EAAE;AACzJ;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;;;AAGA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA;;AAEA;AACA;AACA;AACA,kGAAkG,iCAAiC,EAAE;AACrI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kFAAkF;AAClF;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA,mFAAmF,4CAA4C;AAC/H;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA,yBAAyB;AACzB;;AAEA;AACA,iBAAiB;;AAEjB;AACA;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,qBAAqB;;AAErB,uDAAuD;AACvD;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,0CAA0C,kDAAkD,EAAE;AAC9F,0DAA0D,iCAAiC,EAAE;;AAE7F;AACA;;AAEA;AACA;AACA;AACA,qBAAqB;AACrB,iBAAiB;;AAEjB;AACA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA,aAAa;AACb;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;;AAET;AACA;AAAA,oGACA,C;;;;;;ACvgBA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB;AACjB,SAAS;AACT;;AAEA;;AAEA,KAAK;AACL;AACA;AACA;AACA,KAAK;;AAEL;AACA,CAAC;AAAA,qG;;;;;;ACnCD;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,oDAAoD,mDAAmD;AACvG;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,CAAC;AAAA,qG;;;;;;ACzBD;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA,SAAS,sBAAsB,qBAAqB,EAAE;;AAEtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,CAAC;AAAA,qG;;;;;;AC/BD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,qFAAqF,oCAAoC,EAAE;AAC3H,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;;AAEA,oDAAoD,oCAAoC,EAAE;AAC1F;AACA,+CAA+C,2BAA2B;AAC1E;;AAEA,uCAAuC;AACvC;AACA;AACA,CAAC;AAAA;;;;;;;;AClDD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,gBAAgB;AAChB;;AAEA;AACA;;AAEA;;AAEA;;AAEA,oDAAoD,SAAS;AAC7D;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA,gCAAgC;AAChC;AACA;;AAEA;;AAEA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA,aAAa;AACb;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,gDAAgD,SAAS;AACzD;AACA,4BAA4B,UAAU,cAAc,cAAc;AAClE;AACA;AACA;;;AAGA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA,mBAAmB;AACnB;AACA;AACA,CAAC;AAAA,qG;;;;;;ACnID;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;AAAA,qG;;;;;;ACvBD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,CAAC;AAAA,qG;;;;;;gEC/CD;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,CAAC;AAAA,qG;;;;;;gECnBD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,iD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,iBAAiB;;AAEjB;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,wCAAwC,uBAAuB,wBAAwB,EAAE;AACzF;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,qE;AACA,qBAAqB;;AAErB;AACA;AACA;;AAEA;AACA,qBAAqB;;AAErB,aAAa,iE;AACb;AACA;AACA,CAAC;AAAA,qG;;;;;;AChFD;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB;AACjB;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA,CAAC;AAAA,qG;;;;;;AC5DD;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;;AAEA;AACA;AACA;AACA,2BAA2B,GAAG;AAC9B,6BAA6B,EAAE;AAC/B;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,uFAAuF,gBAAgB,6BAA6B;AACpI;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;;AAEL;AACA,CAAC;AAAA,qG;;;;;;ACnHD;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,oGAAoG;AACpG,sDAAsD,6BAA6B;AACnF,SAAS;AACT,sDAAsD,4CAA4C,EAAE;AACpG;;AAEA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,kDAAkD,+BAA+B;AACjF;AACA;;AAEA;AACA;AACA;AACA,gEAAgE;;AAEhE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD,yCAAyC;AAC/F,SAAS;AACT,sDAAsD,yBAAyB;AAC/E;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;;AAEL;AACA,CAAC;AAAA,qG;;;;;;AChHD;AACA;;AAEA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,iHAAiH,EAAE,GAAG,EAAE;AACxH,0CAA0C,EAAE,KAAK,EAAE,YAAY,EAAE;AACjE,sFAAsF,EAAE;AACxF,6CAA6C,EAAE;AAC/C,wDAAwD,EAAE,wBAAwB,EAAE;AACpF,0BAA0B,EAAE;AAC5B,wBAAwB,EAAE,oCAAoC,EAAE;AAChE,sBAAsB,EAAE,iCAAiC,EAAE;AAC3D;AACA;AACA,+JAA+J,eAAe,qBAAqB,sBAAsB;AACzN,+DAA+D,OAAO,yIAAyI,sBAAsB;AACrO,6DAA6D,OAAO,0BAA0B,eAAe,4FAA4F,sBAAsB;AAC/N,iBAAiB;AACjB;AACA,yKAAyK,eAAe,qBAAqB,sBAAsB;AACnO,yEAAyE,OAAO,oQAAoQ,sBAAsB;AAC1W,uEAAuE,OAAO,0BAA0B,eAAe,sOAAsO,sBAAsB;AACnX;AACA,aAAa;AACb,+MAA+M,sBAAsB;AACrO,+KAA+K,eAAe,oBAAoB,sBAAsB;AACxO;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,aAAa;AACb;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,yCAAyC,oGAAoG;AAC7I;;AAEA;AACA;AACA;AACA,sFAAsF,oDAAoD,EAAE;AAC5I;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,4FAA4F,wFAAwF;AACpL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA,4DAA4D,iCAAiC,EAAE;AAC/F,wDAAwD,iCAAiC,EAAE;AAC3F,kDAAkD,oDAAoD,EAAE;AACxG,0DAA0D,0CAA0C,EAAE;;AAEtG;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;;AAEA,KAAK;AACL;AACA;AACA;AACA,KAAK;;AAEL;AACA,CAAC;AAAA,qG;;;;;;AC3eD;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA,SAAS;;AAET;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;;AAEA;AACA;AACA,yEAAyE,iDAAiD,EAAE;AAC5H,4CAA4C,+CAA+C,EAAE;AAC7F;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA,KAAK;AACL;AACA;AACA;AACA,KAAK;;AAEL;AACA,CAAC;AAAA,qG;;;;;;AC7CD;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;;AAEL;AACA,CAAC;AAAA,qG;;;;;;AC3CD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAAA,qG;;;;;;ACvCD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAAA,qG;;;;;;ACTD;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;;AAEb;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA,CAAC;AAAA,qG;;;;;;ACpCD,kGACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA,iBAAiB;AACjB;AACA;AAAA,oGACA,C;;;;;;ACzDA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb,SAAS;AACT;;AAEA;AACA;AACA;AACA,CAAC;AAAA,qG;;;;;;AC9BD,8SACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA;AAAA,oGACA,C;;;;;;AC1FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D,0DAA0D,EAAE;AACvH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,+B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA,+C;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,qDAAqD,mCAAmC;AACxF,yCAAyC,iCAAiC;AAC1E,SAAS;AACT;AACA,qDAAqD,qCAAqC;AAC1F,yCAAyC,mCAAmC,E;AAC5E;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;;AAEA;AACA,oDAAoD,iDAAiD;AACrG;AACA,CAAC;AAAA;;;;;;;gECrXD;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA,CAAC;AAAA,qG;;;;;;ACxED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,SAAS;AACT,sGAAsG,iDAAiD;AACvJ;AACA;AACA;;AAEA;;;AAGA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA,aAAa;;AAEb;AACA;;AAEA;AACA;AACA;;AAEA,8EAA8E,sCAAsC;AACpH;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,8CAA8C,2CAA2C,qBAAqB,EAAE,EAAE,EAAE;AACpH,8CAA8C,2CAA2C,qBAAqB,EAAE,EAAE,EAAE;AACpH,8CAA8C,2CAA2C,qBAAqB,EAAE,EAAE,EAAE;;AAEpH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;;AAEA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,8EAA8E,sCAAsC;AACpH,4BAA4B,sCAAsC;AAClE;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,oCAAoC,wCAAwC,EAAE;AAC9E;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,CAAC;AAAA,qG;;;;;;ACxND;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA,SAAS;;AAET;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA,CAAC;AAAA,qG;;;;;;ACtBD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA,SAAS;;AAET;AACA;AACA,SAAS;;AAET;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAAA,qG;;;;;;8CC7BD;AACA;AACA,iBAAiB;AACjB,uBAAuB;;AAEvB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAAS;;AAET;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,uBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,uBAAuB,uBAAuB;AAC9C;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,CAAC;AAAA,qG;;;;;;;ACxKD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA,CAAC;AAAA,qG;;;;;;ACpBD;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA,CAAC;AAAA,qG;;;;;;AC5BD;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA,SAAS;;AAET;AACA;AACA,SAAS;;AAET;AACA;AACA,SAAS;;AAET;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA,CAAC;AAAA,qG;;;;;;AC9BD;AACA;AACA;AACA;AACA;AACA,CAAC;AAAA,qG;;;;;;;;;;;ACLD;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA,iBAAiB;AACjB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,iBAAiB;;AAEjB;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA,iBAAiB;AACjB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C;AAC/C;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,qBAAqB;AAC1E;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,aAAa;;AAEb;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,0CAA0C,uBAAuB;AACjE,SAAS;AACT,0CAA0C,qBAAqB;AAC/D;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,+CAA+C;AAC/C,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,kEAAkE,2CAA2C,EAAE;AAC/G;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA,kEAAkE,qCAAqC,EAAE;AACzG;AACA;;AAEA;AACA;AACA,kEAAkE,mCAAmC,EAAE;AACvG;AACA;;AAEA;AACA;AACA;AACA,uBAAuB,iBAAiB;AACxC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,2CAA2C,mEAAmE;AAC9G,SAAS;AACT,2CAA2C,gBAAgB;AAC3D;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,mCAAmC,kBAAkB;AACrD;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,mCAAmC,uBAAuB;AAC1D;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA,+BAA+B,gBAAgB;AAC/C;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;;;;;;;;;AC1XA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;;;;;;ACvHA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,gDAAgD,+DAA+D,EAAE;AACjH;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;;;;;;;;;;;gEC7ID;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,CAAC;AAAA;;;;;;;gECXD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,uEAAuE;AAC7F,wBAAwB;AACxB,aAAa;AACb,sBAAsB,+BAA+B;AACrD,wBAAwB;AACxB;AACA;AACA;AACA,KAAK;AACL;AACA,CAAC;AAAA;;;;;;;gECpBD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,CAAC;AAAA;;;;;;;gECpBD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,CAAC;AAAA;;;;;;;;AC9DD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,oDAAoD,aAAa,EAAE;AACnE,yDAAyD,kBAAkB,EAAE;AAC7E,wDAAwD,iBAAiB,EAAE;AAC3E,wDAAwD,iBAAiB,EAAE;AAC3E,2DAA2D,oBAAoB,EAAE;AACjF,2DAA2D,oBAAoB,EAAE;AACjF,2DAA2D,oBAAoB,EAAE;AACjF,CAAC;AAAA,qG;;;;;;ACrBD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA,SAAS;;AAET;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA,CAAC;AAAA,qG;;;;;;gEC/BD;AACA,qFAAqF,+BAA4B,EAAE;AACnH,iFAAiF,+BAA0B,EAAE;AAC7G,iGAAiG,gCAA6C,EAAE;;AAEhJ;AACA,6KAA6K,iCAA6D,EAAE;AAC5O,iGAAiG,gCAAsD,EAAE;;AAEzJ;AACA,qFAAqF,+BAA8B,EAAE;AACrH,4CAA4C;AAC5C,CAAC;AAAA,qG;;;;;;ACZD;AACA;AACA;AACA;AACA;;AAEA,6CAA6C,QAAQ,EAAE;AACvD,2CAA2C,YAAY,EAAE;AACzD,+CAA+C,OAAO,EAAE;;AAExD;AACA;AACA;AACA;AACA;AACA,uDAAuD,eAAe,EAAE;AACxE,8CAA8C,WAAW,EAAE;AAC3D,kDAAkD,SAAS,EAAE;AAC7D,kDAAkD,UAAU,EAAE;AAC9D,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,oDAAoD,uG,6CAAA,4CAAkC,EAAE,EAAE;AAC1F,2CAA2C,uG,6CAAA,4CAA2B,EAAE;AACxE,qDAAqD,sG,6CAAA,4CAAmC,EAAE;AAC1F,+CAA+C,sG,6CAAA,4CAA6B,EAAE;AAC9E,mDAAmD,uG,6CAAA,4CAAiC,EAAE;AACtF,iEAAiE,sG,6CAAA,4CAA+C,EAAE;AAClH,8EAA8E,sG,6CAAA,4CAA4D,EAAE;AAC5I,+DAA+D,wG,6CAAA,4CAA6C,EAAE;AAC9G,uEAAuE,wG,6CAAA,4CAAqD,EAAE;AAC9H,sEAAsE,wG,6CAAA,4CAAoD,EAAE;AAC5H,mEAAmE,wG,6CAAA,4CAAiD,EAAE;AACtH,kEAAkE,wG,6CAAA,4CAAgD,EAAE;AACpH,0EAA0E,wG,6CAAA,4CAAwD,EAAE;AACpI,iEAAiE,wG,6CAAA,4CAA+C,EAAE;AAClH,qEAAqE,wG,6CAAA,4CAAmD,EAAE;AAC1H,0EAA0E,wG,6CAAA,4CAAwD,EAAE;AACpI,gFAAgF,wG,6CAAA,4CAA8D,EAAE;AAChJ,yEAAyE,wG,6CAAA,4CAAuD,EAAE;AAClI,yEAAyE,wG,6CAAA,4CAAuD,EAAE;AAClI,mFAAmF,wG,6CAAA,4CAAiE,EAAE;AACtJ,+EAA+E,wG,6CAAA,4CAA6D,EAAE;AAC9I,6EAA6E,wG,6CAAA,4CAA2D,EAAE;AAC1I,4EAA4E,wG,6CAAA,4CAA0D,EAAE;AACxI,iFAAiF,wG,6CAAA,4CAAiE,EAAE;AACpJ,2EAA2E,wG,6CAAA,4CAA2D,EAAE;AACxI,8EAA8E,wG,6CAAA,4CAA8D,EAAE;AAC9I,8EAA8E,wG,6CAAA,4CAA8D,EAAE;AAC9I,+CAA+C,uG,6CAAA,4CAAqD,EAAE;AACtG,sDAAsD,wG,6CAAA,4CAA4D,EAAE;AACpH,oDAAoD,wG,6CAAA,4CAA0D,EAAE;AAChH,2DAA2D,wG,6CAAA,4CAAiE,EAAE;AAC9H,oDAAoD,wG,6CAAA,4CAA0D,EAAE;AAChH,sDAAsD,wG,6CAAA,4CAA4D,EAAE;AACpH,sDAAsD,wG,6CAAA,4CAA4D,EAAE;AACpH,sDAAsD,4H,6CAAA,4CAA4D,EAAE;AACpH,mFAAmF,wG,6CAAA,4CAAiE,EAAE;AACtJ,mFAAmF,wG,6CAAA,4CAAiE,EAAE;AACtJ,6EAA6E,uG,6CAAA,4CAA2D,EAAE;AAC1I,qEAAqE,wG,6CAAA,4CAAmD,EAAE;AAC1H,qEAAqE,uG,6CAAA,4CAAmD,EAAE;AAC1H,mFAAmF,uG,6CAAA,4CAAiE,EAAE;AACtJ,sFAAsF,uG,6CAAA,4CAAoE,EAAE;AAC5J,+EAA+E,uG,6CAAA,4CAA6D,EAAE;AAC9I,iFAAiF,uG,6CAAA,4CAA+D,EAAE;AAClJ,gFAAgF,uG,6CAAA,4CAA8D,EAAE;AAChJ,uDAAuD,uG,6CAAA,4CAA0B,EAAE;AACnF,uDAAuD,sG,6CAAA,4CAA0B,EAAE;AACnF,2EAA2E,4H,6CAAA,4CAAyD,EAAE;AACtI,CAAC;AAAA,qG;;;;;;AC5GD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,iBAAiB;AACjB;AACA,iBAAiB;AACjB,YAAY;AACZ;;AAEA;AACA;AACA;AACA,CAAC;AAAA,qG;;;;;;AC9ED;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,wBAAwB,aAAa;AACrC;AACA;AACA;AACA;AACA,4BAA4B,aAAa;AACzC,SAAS;AACT;AACA;AACA,4BAA4B,aAAa;AACzC,SAAS;AACT;;AAEA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,aAAa;AACrD;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,aAAa;AACb;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,oBAAoB,UAAU;AAC9B;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,CAAC;AAAA,qG;;;;;;;;;;AClFD;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL,CAAC;;AAED;;AAEA;AACA,uCAAuC,+BAA4B,EAAE;AACrE,qCAAqC,+BAA0B,EAAE;AACjE,yCAAyC,+BAA8B,EAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnCzE;AAAA;AAAA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;;;;;;;;gEC3CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,kDAAkD,cAAc;AAChE;AACA,CAAC;AAAA;;;;;;;gECjCD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qFAAqF,gBAAgB;AACrG;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,gBAAgB;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD,yBAAyB;AAClF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,CAAC;AAAA;;;;;;;;gEC7DD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,uBAAuB;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,kDAAkD,cAAc;AAChE;AACA,CAAC;AAAA;;;;;;;gEC7BD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,kDAAkD,cAAc;AAChE;AACA,CAAC;AAAA;;;;;;;gECvFD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,CAAC;AAAA;;;;;;;gECxBD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,kDAAkD,cAAc;AAChE;AACA,CAAC;AAAA;;;;;;;gEC7DD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,eAAe;AACzD;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,CAAC;AAAA;;;;;;;ACpBD,6JACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;AAAA,qG;;;;;;;gECPD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,kDAAkD,cAAc;AAChE;AACA,CAAC;AAAA;;;;;;;gEC1BD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,kDAAkD,cAAc;AAChE;AACA,CAAC;AAAA;;;;;;;gECxCD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+GAA+G,EAAE;AACjH;AACA;AACA;AACA,KAAK;AACL;AACA,CAAC;AAAA;;;;;;;gECbD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,CAAC;AAAA;;;;;;;ACVD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA,SAAS;;AAET;AACA;AACA,SAAS;;AAET;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAAA,qG;;;;;;AC7BD;AACA;AACA,iBAAiB;AACjB,uBAAuB;;AAEvB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAAS;;AAET;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,uBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,uBAAuB,uBAAuB;AAC9C;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,CAAC;AAAA,qG;;;;;;ACvKD;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA,SAAS;;AAET;AACA;AACA,SAAS;;AAET;AACA;AACA,SAAS;;AAET;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA,CAAC;AAAA,qG;;;;;;AC9BD;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA,CAAC;AAAA,qG;;;;;;AC7BD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA,SAAS;AACT;AACA,CAAC;AAAA,qG;;;;;;ACdD;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA,CAAC;AAAA,qG;;;;;;ACnBD;AACA,mCAAmC,uDAAuD;;AAE1F;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA,SAAS;;;AAGT;AACA;AACA;AACA;AACA;AACA,SAAS;;;AAGT;AACA;AACA,SAAS;;AAET;AACA,yDAAyD,IAAI;AAC7D,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA,wFAAwF,GAAG;AAC3F,SAAS;;AAET;AACA;AACA,SAAS;;;AAGT;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,oEAAoE;AACpE;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,iBAAiB;AACjB;AACA,iBAAiB;AACjB;AACA,KAAK;;;AAGL;AACA,CAAC;AAAA,oG;;;;;;AC7GD;AACA;AACA;AACA;AACA,KAAK;AACL,CAAC;AAAA,oG;;;;;;ACLD;AACA,mCAAmC,sGAAsG;;AAEzI;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,oEAAoE;AACpE;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,yBAAyB;AACzB;AACA;AACA;;AAEA;AACA,iBAAiB;AACjB;AACA,iBAAiB;AACjB;AACA,KAAK;;;AAGL;AACA,CAAC;AAAA,oG;;;;;;ACrFD;AACA;AACA;AACA;AACA,KAAK;AACL,CAAC;AAAA,oG;;;;;;ACLD;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,+BAA+B,qDAAqD;;AAEpF;AACA;;AAEA;AACA;AACA,wDAAwD,mBAAmB;AAC3E;;AAEA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,4CAA4C,mEAAmE;AAC/G;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;;;AAGA;AACA;;AAEA;AACA;AACA,uCAAuC,gBAAgB;AACvD;AACA,iBAAiB;AACjB;AACA;AACA;AACA;;AAEA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,4CAA4C,iEAAiE;AAC7G;;AAEA;AACA,uCAAuC,sBAAsB,EAAE;AAC/D,yDAAyD,4CAA4C;AACrG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,yDAAyD;AACrG;;AAEA;AACA;AACA;AACA;AACA,yDAAyD,4CAA4C;AACrG,4CAA4C,kEAAkE;AAC9G;;AAEA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;;AAET;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,yBAAyB,gBAAgB;AACzC,oCAAoC,0BAA0B;AAC9D,0CAA0C,+BAA+B;AACzE,mCAAmC,yBAAyB;;;AAG5D;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA,2CAA2C,4BAA4B;AACvE;AACA,qBAAqB;AACrB;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;;AAET;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA,+BAA+B,4BAA4B;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;;AAEA;;AAEA;AACA;AACA,SAAS;;AAET;AACA;AACA,SAAS;;AAET;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;;AAET;AACA;AACA,SAAS;;AAET;AACA;AACA,SAAS;;AAET;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,KAAK;;;AAGL;AACA,CAAC;AAAA,qG;;;;;;AC5RD;AACA,mCAAmC,mDAAmD;;AAEtF;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;;AAET;AACA,oD;AACA;AACA,KAAK;AACL;AACA,CAAC;AAAA,oG;;;;;;ACxBD;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AAAA,qG;;;;;;ACLL;;AAEA,mCAAmC,mCAAmC;;AAEtE;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,qBAAqB;;AAErB;AACA;AACA;AACA,qBAAqB;AACrB,iBAAiB;AACjB,aAAa;AACb,SAAS;;AAET;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,CAAC;AAAA,oG;;;;;;ACtDD;;AAEA;AACA;AACA;AACA,KAAK;AACL,CAAC;AAAA,oG;;;;;;ACND;;AAEA,mCAAmC,mCAAmC;;AAEtE;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB,qBAAqB;AACrB,iBAAiB;AACjB,aAAa;AACb;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,CAAC;AAAA,oG;;;;;;ACnDD;;AAEA;AACA;AACA;AACA,KAAK;AACL,CAAC;AAAA,oG;;;;;;ACND;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AAAA;AACL,CAAC,I;;;;;;ACRD;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,CAAC;AAAA,qG;;;;;;ACtFD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AAAA;AACL,CAAC,I;;;;;;ACTD;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AAAA;AACL,CAAC,I;;;;;;ACrBD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,CAAC;AAAA,qG;;;;;;ACbD;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,CAAC;AAAA,qG;;;;;;ACTD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,CAAC;AAAA,qG;;;;;;ACbD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,CAAC;AAAA,qG;;;;;;ACfD;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,CAAC;AAAA,qG;;;;;;;;ACTD;AACA;AACA,CAAC;AAAA,qG;;;;;;;;gECFD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,UAAU,mBAAmB;;AAEtC;AACA;AACA,CAAC;AAAA,qG;;;;;;;;;;;;;;ACvBD;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA,KAAK;AACL;AACA,CAAC;AAAA,sG;;;;;;ACZD;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,sCAAsC,0BAA0B;AAChE;AACA,SAAS;AACT;;AAEA,KAAK;AACL;AACA,CAAC;AAAA,oG;;;;;;AClED;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;;AAET;;AAEA;AACA;AACA,SAAS;;AAET;;AAEA;AACA;AACA,CAAC;AAAA,qG;;;;;;AC3CD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAAA,qG;;;;;;ACvDD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA,SAAS;;AAET;AACA,gCAAgC,oCAAoC;AACpE;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAAA,qG;;;;;;AC1CD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;AAAA,qG;;;;;;ACtGD;AACA;AACA;;AAEA;AACA;AACA,4EAA4E,IAAI;AAChF;AACA,4EAA4E,IAAI;AAChF;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,CAAC;AAAA,qG;;;;;;AClDD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,CAAC;AAAA,qG;;;;;;ACpBD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,+BAA+B;AAC/B,yBAAyB;AACzB;;AAEA;AACA;AACA;AACA;AACA;AACA,sCAAsC,sCAAsC;AAC5E,kCAAkC,sBAAsB;AACxD,kCAAkC,+CAA+C;AACjF;AACA;AACA;AACA,sCAAsC,qDAAqD;AAC3F;AACA;AACA,sCAAsC,sCAAsC;AAC5E;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA,CAAC;AAAA,qG;;;;;;ACrFD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,mEAAmE;AAC5E,SAAS,gEAAgE;AACzE,SAAS,iEAAiE;AAC1E,SAAS,iEAAiE;AAC1E,SAAS,4DAA4D;AACrE,SAAS;AACT;;;AAGA;AACA;AACA;AACA;AACA,uBAAuB,4BAA4B;AACnD;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;;AAEA;AACA,CAAC;AAAA,qG;;;;;;ACvCD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,8DAA8D,eAAe;AAC7E,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAAA,qG;;;;;;AC5ED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,CAAC;AAAA;;;;;;;ACtBD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,CAAC;AAAA,qG;;;;;;ACpCD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,aAAa;AACb;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,kDAAkD,eAAe;AACjE;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,a;AACA;;AAEA;AACA;AACA,+EAA+E,8DAA8D;AAC7I;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAAA,qG;;;;;;ACvGD;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,CAAC;AAAA,qG;;;;;;ACnID;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,6CAA6C,yBAAyB;AACtE;;AAEA;AACA,gDAAgD,WAAW;AAC3D;;AAEA;;AAEA;AACA,CAAC;AAAA,qG;;;;;;gECjHD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;;;AAGA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA,CAAC;AAAA,qG;;;;;;gECzBD;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA,CAAC;AAAA,qG;;;;;;ACZD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,MAAM;AACxC;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,mCAAmC,OAAO;AAC1C;AACA,aAAa;AACb;AACA;AACA,CAAC;AAAA,qG;;;;;;ACnBD;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAAA,qG;;;;;;ACND;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;AAAA,qG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACTD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAU;AACV;AACA;;AAEA;AACA;AACA;AACA,WAAW,6BAA6B;AACxC,WAAW,6BAA6B;AACxC,WAAW,OAAO;AAClB,YAAY;AACZ;AACA;;AAEA;AACA,WAAW,OAAO;AAClB;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA,YAAY,OAAO;AACnB,aAAa;AACb;AACA;;AAEA;AACA;AACA,YAAY,OAAO;AACnB,aAAa;AACb;AACA;;AAEA;AACA;AACA,YAAY,KAAK;AACjB,YAAY,OAAO;AACnB,aAAa,OAAO;AACpB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,YAAY,KAAK;AACjB,aAAa,OAAO;AACpB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,YAAY,KAAK;AACjB,aAAa,OAAO;AACpB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY,SAAS;AACrB,YAAY,MAAM;AAClB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;AACA,YAAY,OAAO;AACnB,YAAY,OAAO;AACnB,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB,aAAa;AACb;AACA;;AAEA;AACA;AACA,YAAY,OAAO;AACnB,YAAY,OAAO;AACnB,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY,SAAS;AACrB,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY,QAAQ;AACpB,aAAa;AACb;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY,QAAQ;AACpB,YAAY,QAAQ;AACpB,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe,SAAS;AACxB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY,MAAM;AAClB,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY,SAAS;AACrB,aAAa;AACb;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY,SAAS;AACrB,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY,SAAS;AACrB,YAAY,OAAO;AACnB,YAAY,OAAO;AACnB,YAAY,OAAO;AACnB,YAAY,OAAO;AACnB,YAAY,OAAO;AACnB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY,SAAS;AACrB,YAAY,OAAO;AACnB;AACA;AACA;AACA,cAAc,QAAQ;;AAEtB;AACA,cAAc,QAAQ;;AAEtB;AACA,cAAc,QAAQ;;AAEtB;AACA,cAAc,QAAQ;;AAEtB;AACA,cAAc,QAAQ;;AAEtB;AACA,cAAc,QAAQ;;AAEtB;AACA,cAAc,QAAQ;;AAEtB;AACA,cAAc,QAAQ;;AAEtB;AACA,cAAc,QAAQ;;AAEtB;;AAEA;AACA,aAAa,6CAA6C;AAC1D;;AAEA;AACA;AACA;AACA;AACA,YAAY,SAAS;AACrB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY,SAAS;AACrB,YAAY,OAAO;AACnB,YAAY,OAAO;AACnB,YAAY,OAAO;AACnB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;;AAEA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;;AAEA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;;AAEA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;;AAEA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;;AAEA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;;AAEA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;;AAEA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;;AAEA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY,SAAS;AACrB,YAAY,MAAM;AAClB,YAAY,MAAM;AAClB,YAAY,OAAO;AACnB,YAAY,OAAO;AACnB,YAAY,OAAO;AACnB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,GAAG;AACH;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA,uCAAuC;AACvC;;AAEA;AACA;AACA,kCAAkC;AAClC;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY,oDAAoD;AAChE,YAAY,oDAAoD;AAChE,YAAY,QAAQ;AACpB,YAAY,QAAQ;AACpB,YAAY,QAAQ;AACpB,aAAa;AACb;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,GAAG;AACH;AACA;AACA,IAAI;AACJ;AACA,yBAAyB,SAAS;AAClC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,GAAG;AACH;AACA;AACA,IAAI;AACJ;AACA,uBAAuB,SAAS;AAChC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,6CAA6C,KAAK,sBAAsB,KAAK,oBAAoB,OAAO,sBAAsB,OAAO,oBAAoB,OAAO;AAChK;;AAEA;AACA;AACA;AACA;AACA;AACA,wCAAwC,KAAK,sBAAsB,KAAK,oBAAoB,OAAO,sBAAsB,OAAO,oBAAoB,OAAO;AAC3J;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;AACA,YAAY,OAAO;AACnB;AACA;AACA,gBAAgB,QAAQ;;AAExB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,iCAAiC,oBAAoB;AACrD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,cAAc;AAChD;AACA;;AAEA;AACA;AACA;AACA,YAAY,cAAc;AAC1B,YAAY,cAAc;AAC1B,YAAY,QAAQ;AACpB,YAAY,QAAQ;AACpB,YAAY,QAAQ;AACpB,YAAY,yBAAyB;AACrC,YAAY,gCAAgC;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA,EAAE;AACF;AACA;AACA,GAAG;AACH;;AAEA;;AAEA,CAAC;;;;;;;ACr1CD,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA,MAAM;;AAEN;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA,wBAAwB,OAAO;AAC/B;AACA,yBAAyB,OAAO;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,cAAc;;AAEd;AACA;AACA;AACA;AACA,yBAAyB,OAAO;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,cAAc;;AAEd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,cAAc;;AAEd;AACA;AACA;AACA,wBAAwB,OAAO;AAC/B;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,cAAc;;AAEd;AACA;AACA;AACA,yBAAyB,OAAO;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;;AAEN;AACA;AACA;AACA,mBAAmB,MAAM;AACzB,mBAAmB,OAAO;AAC1B;AACA;AACA;AACA;AACA;AACA,oBAAoB,MAAM;AAC1B,oBAAoB,OAAO;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,cAAc;AACd;AACA;AACA,UAAU;;AAEV;AACA;AACA;AACA,oBAAoB,QAAQ;AAC5B;AACA,qBAAqB,OAAO;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;;AAEV;AACA;AACA;AACA,oBAAoB,UAAU;AAC9B;AACA,qBAAqB,UAAU;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,gCAAgC,kBAAkB;AAClD;AACA;AACA;AACA,cAAc;AACd;AACA,gCAAgC,kBAAkB;AAClD;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAU;;AAEV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAU;;AAEV;AACA;AACA;AACA,qBAAqB,UAAU;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,UAAU;;AAEV;AACA;AACA;AACA,oBAAoB,OAAO;AAC3B;AACA,qBAAqB,UAAU;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;;AAEd,oCAAoC,YAAY;AAChD;;AAEA;AACA;AACA;;AAEA;AACA;AACA,MAAM;;AAEN;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,UAAU;AAC9B;AACA,qBAAqB,OAAO;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,4BAA4B,cAAc;AAC1C;AACA;AACA;AACA;;AAEA;AACA,UAAU;;AAEV;AACA;AACA;AACA,oBAAoB,OAAO;AAC3B;AACA,qBAAqB,UAAU;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,4BAA4B,kBAAkB;AAC9C;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,UAAU;AAC9B;AACA,qBAAqB,OAAO;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,4BAA4B,cAAc;AAC1C;AACA;AACA;;AAEA;AACA,UAAU;;AAEV;AACA;AACA;AACA,oBAAoB,OAAO;AAC3B;AACA,qBAAqB,UAAU;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,4BAA4B,qBAAqB;AACjD;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,UAAU;AAC9B;AACA,qBAAqB,OAAO;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA,UAAU;;AAEV;AACA;AACA;AACA,oBAAoB,OAAO;AAC3B;AACA,qBAAqB,UAAU;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,mBAAmB,OAAO;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;;AAEV;AACA;AACA;AACA,oBAAoB,iBAAiB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAU;;AAEV;AACA;AACA;AACA;AACA;AACA,oBAAoB,QAAQ;AAC5B;AACA,qBAAqB,UAAU;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,qCAAqC,sBAAsB;AAC3D;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAU;;AAEV;AACA;AACA;AACA,qBAAqB,OAAO;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,UAAU;;AAEV;AACA,MAAM;;AAEN;AACA;AACA;AACA,mBAAmB,OAAO;AAC1B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,oBAAoB,OAAO;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAU;;AAEV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAU;;AAEV;AACA;AACA;AACA,oBAAoB,iBAAiB;AACrC;AACA,qBAAqB,OAAO;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,UAAU;;AAEV;AACA;AACA;AACA;AACA,oBAAoB,iBAAiB;AACrC;AACA,qBAAqB,UAAU;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,UAAU;;AAEV;;AAEA;AACA;AACA;AACA,oBAAoB,OAAO;AAC3B;AACA,qBAAqB,SAAS;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;;AAEV;AACA;AACA;AACA,oBAAoB,OAAO;AAC3B;AACA,qBAAqB,SAAS;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;;AAEN;AACA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;;AAEA,CAAC,G;;;;;;;;;ACvvBD,CAAC,8IAA8I,eAAe,gDAAgD,sBAAsB,4EAA4E,aAAa,aAAa,gBAAgB,iBAAiB,mBAAmB,wBAAwB,QAAQ,WAAW,KAAK,WAAW,eAAe,0BAA0B,GAAG,UAAU,GAAG,aAAa,oBAAoB,EAAE,iDAAiD,mDAAmD;AACznB,+CAA+C,mDAAmD,4CAA4C,8HAA8H,0FAA0F,qBAAqB,0BAA0B,qCAAqC,0DAA0D;AACpf,wBAAwB,6BAA6B,eAAe,mBAAmB,wEAAwE,kCAAkC,QAAQ,UAAU,GAAG,aAAa,aAAa,cAAc,uCAAuC,cAAc,4DAA4D,cAAc,0CAA0C,cAAc;AACrb,SAAS,gBAAgB,gBAAgB,WAAW,8BAA8B,WAAW,iDAAiD,SAAS,cAAc,sDAAsD,cAAc,YAAY,aAAa,yBAAyB,gCAAgC,aAAa,uBAAuB,0BAA0B,iBAAiB,iBAAiB,mCAAmC,aAAa,IAAI,2DAA2D,SAAS;AACnhB,aAAa,2BAA2B,sFAAsF,8BAA8B,uCAAuC,WAAW,QAAQ,iDAAiD,gEAAgE,cAAc,iBAAiB,SAAS,6CAA6C,UAAU;AACta,WAAW,cAAc,qBAAqB,WAAW,SAAS,SAAS,yBAAyB,iCAAiC,uFAAuF,YAAY,yEAAyE,yBAAyB,oCAAoC,GAAG,iBAAiB,uDAAuD,SAAS,iBAAiB,QAAQ,KAAK,eAAe;AAC/e,cAAc,QAAQ,WAAW,KAAK,WAAW,iBAAiB,iCAAiC,mBAAmB,+BAA+B,UAAU,oCAAoC,aAAa,cAAc,KAAK,aAAa,4BAA4B,QAAQ,KAAK,iBAAiB,6CAA6C,iBAAiB,iBAAiB,mBAAmB,wBAAwB,kBAAkB,iBAAiB,mBAAmB,wBAAwB;AAClf,eAAe,iCAAiC,4BAA4B,sBAAsB,GAAG,UAAU,GAAG,aAAa,oBAAoB,qHAAqH,sEAAsE,SAAS,gBAAgB,qEAAqE,cAAc;AAC1b,qBAAqB,uBAAuB,QAAQ,sBAAsB,SAAS,gBAAgB,kBAAkB,YAAY,mBAAmB,KAAK,sEAAsE,oBAAoB,YAAY,mBAAmB,KAAK,oDAAoD,SAAS,WAAW,uBAAuB,iBAAiB,mBAAmB,wBAAwB;AAClb,2CAA2C,uBAAuB,+BAA+B,+BAA+B,iBAAiB,WAAW,qDAAqD,SAAS,cAAc,UAAU,QAAQ,YAAY,UAAU,GAAG,aAAa,iBAAiB,cAAc,WAAW,UAAU,0BAA0B,sBAAsB,0BAA0B,0BAA0B,6BAA6B,WAAW,SAAS,gBAAgB,aAAa;AACtgB,GAAG,oBAAoB,oBAAoB,+BAA+B,8CAA8C,gCAAgC,wBAAwB,WAAW,KAAK,WAAW,mJAAmJ,2BAA2B,8CAA8C,6BAA6B,4CAA4C;AAChf,wCAAwC,gBAAgB,OAAO,UAAU,0BAA0B,cAAc,aAAa,UAAU,4BAA4B,uBAAuB,6BAA6B,WAAW,gBAAgB,iBAAiB,8CAA8C,qBAAqB,iDAAiD,qBAAqB,SAAS,SAAS,SAAS,GAAG,OAAO,UAAU,GAAG,aAAa,aAAa,sBAAsB;AAC/e,EAAE,mBAAmB,KAAK,mFAAmF,mDAAmD,UAAU,GAAG,aAAa,aAAa,iBAAiB,aAAa,eAAe,+BAA+B,8BAA8B,kBAAkB,SAAS,GAAG,OAAO,0BAA0B,GAAG,UAAU,GAAG,aAAa,aAAa,mBAAmB,sBAAsB,uBAAuB,2BAA2B;AACrf,uEAAuE,kBAAkB,kBAAkB,0EAA0E,8CAA8C,IAAI,uBAAuB,SAAS,yBAAyB,mEAAmE,aAAa,IAAI,qBAAqB,QAAQ,IAAI,mBAAmB,SAAS,0BAA0B,WAAW,uBAAuB;AAC7e,IAAI,sBAAsB,2BAA2B,kBAAkB,GAAG,UAAU,GAAG,aAAa,8BAA8B,EAAE,6BAA6B,uBAAuB,iBAAiB,mCAAmC,+BAA+B,6BAA6B,+BAA+B,2CAA2C,UAAU,GAAG,aAAa,wBAAwB,EAAE,OAAO,UAAU;AACvb,wCAAwC,QAAQ,oBAAoB,UAAU,sBAAsB,QAAQ,4EAA4E,UAAU,cAAc,QAAQ,2CAA2C,UAAU,GAAG,aAAa,iBAAiB,aAAa,UAAU,+BAA+B,8BAA8B,kCAAkC,+CAA+C,oCAAoC;AACvf,YAAY,uCAAuC,sCAAsC,iBAAiB,gBAAgB,SAAS,GAAG,uBAAuB,MAAM,aAAa,OAAO,UAAU,iBAAiB,KAAK,0MAA0M,qBAAqB,WAAW;AACjc,mBAAmB,0BAA0B,8DAA8D,4HAA4H,oEAAoE,6BAA6B,wBAAwB,iBAAiB,YAAY,UAAU,GAAG,UAAU,GAAG,aAAa,aAAa,gBAAgB,QAAQ,+BAA+B;AACxe,mBAAmB,sBAAsB,kDAAkD,iGAAiG,UAAU,GAAG,cAAc,QAAQ,GAAG,YAAY,WAAW,cAAc,YAAY,SAAS,iBAAiB,cAAc,mCAAmC,8BAA8B,kCAAkC,uBAAuB,WAAW,4BAA4B,YAAY;AACxe,YAAY,uCAAuC,0CAA0C,8CAA8C,qBAAqB,OAAO,gBAAgB,SAAS,gBAAgB,SAAS,iBAAiB,YAAY,0BAA0B,mEAAmE,+BAA+B,gBAAgB,oGAAoG,UAAU,SAAS;AACzf,iBAAiB,MAAM,mBAAmB,QAAQ,aAAa,gEAAgE,oBAAoB,sCAAsC,8BAA8B,KAAK,wBAAwB,wBAAwB,GAAG,UAAU,GAAG,6BAA6B,aAAa,mBAAmB,gDAAgD,wBAAwB,mBAAmB,aAAa,aAAa,kBAAkB,cAAc;AAC9e,GAAG,OAAO,4BAA4B,UAAU,SAAS,iBAAiB,UAAU,wBAAwB,wBAAwB,GAAG,UAAU,GAAG,aAAa,aAAa,kBAAkB,aAAa,wBAAwB,OAAO,6BAA6B,6BAA6B,0BAA0B,WAAW,0BAA0B,kCAAkC,WAAW,+DAA+D;AACjd,mFAAmF,2BAA2B,sCAAsC,YAAY,QAAQ,YAAY,aAAa,mBAAmB,QAAQ,eAAe,SAAS,OAAO,iBAAiB,wBAAwB,0BAA0B,GAAG,UAAU,GAAG,aAAa,iBAAiB,aAAa,WAAW,gBAAgB,2BAA2B,iBAAiB,2BAA2B,iBAAiB;AAC5e,YAAY,iBAAiB,6BAA6B,cAAc,kCAAkC,EAAE,WAAW,oCAAoC,gBAAgB,mCAAmC,YAAY,cAAc,4BAA4B,aAAa,6CAA6C,sBAAsB,WAAW,kCAAkC,aAAa,+CAA+C,eAAe,+BAA+B,KAAK;AAChf,uBAAuB,+BAA+B,aAAa,wBAAwB,6BAA6B,iBAAiB,oBAAoB,2BAA2B,SAAS,GAAG,OAAO,kBAAkB,wBAAwB,UAAU,GAAG,aAAa,aAAa,kBAAkB,aAAa,wBAAwB,OAAO,4BAA4B,UAAU,SAAS,iBAAiB,aAAa,wBAAwB,GAAG,UAAU,GAAG,aAAa,aAAa,iBAAiB;AAC1f,6BAA6B,OAAO,QAAQ,gBAAgB,6CAA6C,8CAA8C,iBAAiB,+BAA+B,sBAAsB,2BAA2B,kBAAkB,6BAA6B,mDAAmD,gDAAgD,4CAA4C,EAAE,cAAc,gBAAgB;AACtd,SAAS,KAAK,gDAAgD,WAAW,IAAI,2DAA2D,UAAU,kCAAkC,eAAe,IAAI,mBAAmB,SAAS,iBAAiB,OAAO,QAAQ,GAAG,cAAc,iBAAiB,iGAAiG,iBAAiB;AACvZ,gFAAgF,aAAa,QAAQ,SAAS,GAAG,OAAO,cAAc,0BAA0B,GAAG,UAAU,GAAG,aAAa,aAAa,iBAAiB,aAAa,mCAAmC,6BAA6B,kGAAkG,0BAA0B,aAAa,0EAA0E;AAC3f,EAAE,GAAG,YAAY,WAAW,8BAA8B,iBAAiB,kBAAkB,mBAAmB,0BAA0B,0BAA0B,0BAA0B,kBAAkB,kGAAkG,0BAA0B,UAAU,YAAY,SAAS,GAAG,OAAO,uBAAuB,0BAA0B,GAAG,UAAU,GAAG,aAAa,wBAAwB,EAAE,cAAc,EAAE;AAC7e,kBAAkB,wCAAwC,oCAAoC,8BAA8B,gDAAgD,0BAA0B,8BAA8B,gCAAgC,4BAA4B,0DAA0D,8BAA8B,gBAAgB,qBAAqB,qBAAqB,oBAAoB,uBAAuB,qBAAqB;AAClf,gBAAgB,4BAA4B,2BAA2B,2BAA2B,wBAAwB,sBAAsB,UAAU,GAAG,aAAa,wBAAwB,EAAE,OAAO,QAAQ,IAAI,0DAA0D,KAAK,2DAA2D,KAAK,0DAA0D,KAAK,8DAA8D,KAAK;AACxd,WAAW,KAAK,qDAAqD,KAAK,wDAAwD,KAAK,wDAAwD,KAAK,sEAAsE,KAAK,uDAAuD,KAAK,oEAAoE,KAAK,qEAAqE,KAAK;AAC9d,gDAAgD,QAAQ,IAAI,mCAAmC,KAAK,mCAAmC,KAAK,mCAAmC,KAAK,qCAAqC,QAAQ,IAAI,mCAAmC,KAAK,mCAAmC,KAAK,mCAAmC,KAAK,mCAAmC,KAAK,mCAAmC,KAAK,2DAA2D,KAAK;AAC7e,mCAAmC,KAAK,+DAA+D,KAAK,iEAAiE,gBAAgB,UAAU,GAAG,aAAa,aAAa,kBAAkB,cAAc,eAAe,OAAO,4BAA4B,UAAU,SAAS,iBAAiB,SAAS,wBAAwB,yBAAyB,wBAAwB,GAAG,UAAU,GAAG,aAAa,aAAa,kBAAkB,cAAc;AACtf,GAAG,OAAO,4BAA4B,UAAU,SAAS,SAAS,cAAc,0BAA0B,wBAAwB,GAAG,UAAU,GAAG,aAAa,aAAa,kBAAkB,aAAa,aAAa,eAAe,WAAW,gFAAgF,UAAU,OAAO,qDAAqD,EAAE,sDAAsD,EAAE,aAAa;AAC/c,iMAAiM,OAAO,mBAAmB,4FAA4F,gBAAgB,iBAAiB,WAAW,KAAK,gBAAgB,mCAAmC,uBAAuB,WAAW,oDAAoD;AACjf,YAAY,iBAAiB,WAAW,KAAK,mBAAmB,2BAA2B,sBAAsB,SAAS,6CAA6C,sDAAsD,UAAU,qBAAqB,mBAAmB,eAAe,gEAAgE,6BAA6B,YAAY,aAAa,uCAAuC,mCAAmC;AAC9d,YAAY,WAAW,gDAAgD,gGAAgG,8EAA8E,wBAAwB,aAAa,kBAAkB,gDAAgD,2BAA2B,MAAM,sCAAsC,yBAAyB,eAAe,qBAAqB;AAChe,oGAAoG,qBAAqB,wCAAwC,KAAK,WAAW,IAAI,uBAAuB,SAAS,eAAe,QAAQ,OAAO,IAAI,iKAAiK,KAAK,kBAAkB;AAC/a,gOAAgO,qBAAqB,4CAA4C,2EAA2E,UAAU,+CAA+C,eAAe,mBAAmB,iBAAiB,WAAW,KAAK,WAAW;AACnf,WAAW,KAAK,OAAO,UAAU,qBAAqB,SAAS,oBAAoB,WAAW,KAAK,WAAW,uDAAuD,KAAK,OAAO,UAAU,iBAAiB,kCAAkC,SAAS,oBAAoB,yHAAyH,iBAAiB,oBAAoB,MAAM,2BAA2B;AAC1c,8JAA8J,+BAA+B,yBAAyB,WAAW,YAAY,oBAAoB,uBAAuB,2BAA2B,2CAA2C,2CAA2C,UAAU,KAAK,kBAAkB,eAAe,WAAW,qBAAqB,SAAS;AACle,KAAK,EAAE,0BAA0B,2BAA2B,kBAAkB,4CAA4C,QAAQ,oBAAoB,MAAM,2BAA2B,iNAAiN,MAAM,uBAAuB,QAAQ;AAC7a,+CAA+C,gEAAgE,EAAE,8BAA8B,0BAA0B,YAAY,mBAAmB,KAAK,WAAW,qBAAqB,mDAAmD,MAAM,IAAI,+CAA+C,0BAA0B,6CAA6C,yBAAyB,YAAY;AACrc,sBAAsB,oBAAoB,OAAO,QAAQ,SAAS,OAAO,OAAO,cAAc,0BAA0B,GAAG,UAAU,GAAG,aAAa,aAAa,gBAAgB,iDAAiD,MAAM,4FAA4F,6CAA6C,WAAW,iBAAiB,SAAS,gBAAgB,wDAAwD,MAAM;AACre,OAAO,iCAAiC,yBAAyB,YAAY,cAAc,8CAA8C,MAAM,eAAe,mCAAmC,uCAAuC,iBAAiB,aAAa,cAAc,eAAe,eAAe,2BAA2B,qBAAqB,0BAA0B,uBAAuB,4BAA4B,mBAAmB,aAAa,wCAAwC;AACvf,IAAI,WAAW,KAAK,oBAAoB,oDAAoD,0CAA0C,uBAAuB,EAAE,KAAK,QAAQ,WAAW,uBAAuB,QAAQ,WAAW,+CAA+C,0BAA0B,uBAAuB,kCAAkC,GAAG,UAAU,GAAG,aAAa,qBAAqB,sBAAsB,2BAA2B,GAAG,UAAU,GAAG,aAAa;AACne,oLAAoL,oDAAoD,yDAAyD,2EAA2E,UAAU,GAAG,aAAa,gBAAgB,EAAE,cAAc,EAAE,2BAA2B,6BAA6B;AAChe,0BAA0B,wBAAwB,0BAA0B,yBAAyB,+BAA+B,4BAA4B,cAAc,mCAAmC,4BAA4B,2BAA2B,mBAAmB,oCAAoC,UAAU,GAAG,aAAa,aAAa,wBAAwB,SAAS,oCAAoC,SAAS;AACpb,IAAI,gBAAgB,kBAAkB,8EAA8E,+GAA+G,0DAA0D,gBAAgB,wEAAwE,WAAW,2BAA2B,kBAAkB,YAAY,uCAAuC;AAChe,YAAY,gBAAgB,8EAA8E,6CAA6C,kBAAkB,MAAM,qBAAqB,SAAS,sBAAsB,SAAS,uBAAuB,cAAc,4DAA4D,wBAAwB,YAAY,WAAW,wEAAwE,kCAAkC,gBAAgB;AACtf,2BAA2B,iCAAiC,KAAK,MAAM,kCAAkC,oCAAoC,GAAG,YAAY,WAAW,YAAY,qDAAqD,4CAA4C,iBAAiB,iBAAiB,uEAAuE,iBAAiB,wFAAwF,iBAAiB;AACvf,gBAAgB,wBAAwB,yCAAyC,aAAa,4BAA4B,UAAU,gBAAgB,GAAG,UAAU,GAAG,aAAa,aAAa,kBAAkB,cAAc,eAAe,mCAAmC,aAAa,OAAO,4BAA4B,UAAU,0BAA0B,8DAA8D,2BAA2B,gBAAgB,kBAAkB;AAC/d,4CAA4C,aAAa,uBAAuB,2CAA2C,gCAAgC,cAAc,0BAA0B,aAAa,uBAAuB,6BAA6B,4BAA4B,6BAA6B,2BAA2B,0BAA0B,4BAA4B,SAAS,iBAAiB,cAAc,wBAAwB,yBAAyB;AACve,EAAE,GAAG,UAAU,GAAG,aAAa,oBAAoB,sBAAsB,EAAE,kHAAkH,4KAA4K,SAAS,WAAW,4CAA4C;AACza,4MAA4M,UAAU,GAAG,aAAa,aAAa,kBAAkB,cAAc,eAAe,WAAW,UAAU,SAAS,2BAA2B,OAAO,4BAA4B,UAAU,0BAA0B,2BAA2B,qDAAqD;AAClf,0BAA0B,wCAAwC,0BAA0B,SAAS,+DAA+D,0BAA0B,SAAS,+DAA+D,0BAA0B,8CAA8C,oDAAoD,iBAAiB,0BAA0B,OAAO,KAAK;AACzb,+CAA+C,WAAW,KAAK,oCAAoC,0BAA0B,WAAW,KAAK,uBAAuB,0DAA0D,UAAU,2BAA2B,4CAA4C,0BAA0B,gBAAgB,8DAA8D,eAAe,GAAG,mBAAmB,iBAAiB,iBAAiB,WAAW,KAAK;AAC9e,wGAAwG,UAAU,iBAAiB,aAAa,IAAI,eAAe,IAAI,kDAAkD,UAAU,0BAA0B,eAAe,qEAAqE,QAAQ,8CAA8C,+EAA+E,qCAAqC;AAC3f,+EAA+E,mKAAmK,4BAA4B,0BAA0B,gBAAgB,UAAU,uBAAuB,2BAA2B,iBAAiB,WAAW,6BAA6B,yBAAyB;AACtc,mCAAmC,cAAc,8DAA8D,UAAU,iBAAiB,SAAS,aAAa,MAAM,wBAAwB,qDAAqD,yBAAyB,OAAO,4BAA4B,2EAA2E,GAAG,UAAU,MAAM,KAAK,SAAS,SAAS,SAAS,OAAO,YAAY,SAAS,qBAAqB,gBAAgB;AAC9e,aAAa,gBAAgB,GAAG,UAAU,GAAG,aAAa,aAAa,iBAAiB,aAAa,yBAAyB,0BAA0B,WAAW,2FAA2F,OAAO,8BAA8B,OAAO,QAAQ,0BAA0B,aAAa,aAAa,4BAA4B,kBAAkB,0BAA0B,GAAG,2BAA2B,UAAU,SAAS;AAC/d,SAAS,GAAG,4BAA4B,aAAa,SAAS,yCAAyC,EAAE,oDAAoD,EAAE,+CAA+C,EAAE,gCAAgC,EAAE,+BAA+B,EAAE,iCAAiC,EAAE,oCAAoC,EAAE,mCAAmC,oBAAoB,eAAe,YAAY,wBAAwB,YAAY,YAAY,yBAAyB,2BAA2B;AAClhB,wBAAwB,+BAA+B,mCAAmC,mCAAmC,kCAAkC,wBAAwB,kCAAkC,UAAU,kBAAkB,YAAY,UAAU,0BAA0B,WAAW,+BAA+B,wBAAwB,kCAAkC,aAAa,QAAQ,kCAAkC,OAAO,yBAAyB;AAChe,gBAAgB,aAAa,OAAO,6FAA6F,GAAG,SAAS,0BAA0B,+BAA+B,cAAc,gBAAgB,GAAG,UAAU,GAAG,aAAa,aAAa,iBAAiB,aAAa,qCAAqC,+EAA+E,4BAA4B,eAAe,UAAU;AACrd,yBAAyB,iCAAiC,EAAE,oEAAoE,iCAAiC,aAAa,MAAM,qDAAqD,MAAM,gCAAgC,MAAM,mCAAmC,MAAM,iCAAiC,MAAM,kCAAkC,MAAM,yCAAyC,MAAM,4BAA4B,2BAA2B;AACnf,eAAe,gBAAgB,mBAAmB,2CAA2C,oWAAoW,SAAS,GAAG,OAAO,gBAAgB,GAAG,UAAU,GAAG,aAAa,aAAa;AAC9gB,WAAW,aAAa,gBAAgB,6BAA6B,WAAW,gEAAgE,aAAa,SAAS,GAAG,4BAA4B,gCAAgC,aAAa,kCAAkC,iCAAiC,QAAQ,QAAQ,GAAG,8BAA8B,QAAQ,GAAG,eAAe,2BAA2B,mBAAmB,oDAAoD;AACle,WAAW,4CAA4C,gBAAgB,SAAS,YAAY,cAAc,EAAE,IAAI,2BAA2B,mBAAmB,kDAAkD,uCAAuC,cAAc,EAAE,2CAA2C,OAAO,MAAM,0CAA0C,eAAe,cAAc,OAAO,EAAE,EAAE,0CAA0C,cAAc,EAAE,wCAAwC;AACnf,CAAC,kBAAkB,gBAAgB,WAAW,cAAc,OAAO,EAAE,EAAE,uCAAuC,cAAc,EAAE,wCAAwC,cAAc,MAAM,SAAS,EAAE,EAAE,uCAAuC,cAAc,EAAE,uCAAuC,OAAO,mBAAmB,sDAAsD,cAAc,OAAO,EAAE,EAAE,4CAA4C,cAAc,EAAE,yCAAyC,cAAc;AACjgB,SAAS,IAAI,2BAA2B,WAAW,sFAAsF,cAAc,GAAG,SAAS,GAAG,OAAO,kBAAkB,gBAAgB,GAAG,UAAU,GAAG,aAAa,oBAAoB,EAAE,2CAA2C,UAAU,MAAM;;;;AAI7T;AACA,uB;;;;;;AC3EA,2F;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;;AAEA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,gDAAgD,EAAE;;AAElD;AACA;AACA,SAAS;;AAET;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA,SAAS;AACT;;AAEA;AACA;;AAEA,iDAAiD;;AAEjD;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,CAAC;;AAED;;;;;;;AC7JA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACjDA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;ACjGA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,yCAAyC,iCAAiC;AAC1E;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,8BAA8B,6BAA6B;AAC3D;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;;AAEA;AACA;AACA,wCAAwC,8BAA8B;AACtE;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,yCAAyC,iCAAiC;AAC1E,4BAA4B;AAC5B;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;;AAEA;AACA;AACA,SAAS;;AAET;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;;AAEA;;AAEA,gDAAgD;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;;AAEA,CAAC;;;;;;;AC3VD;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa,cAAc,qBAAqB,EAAE;AAClD,SAAS;AACT;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;;;;;;ACjFA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,oBAAoB;AACpB,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,yCAAyC,yBAAyB;AAClE;;AAEA;AACA,4CAA4C,yBAAyB;AACrE;;AAEA;AACA;AACA;AACA;;;;;;;;;ACxKA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA,CAAC;;;;;;;;AChED;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,mBAAmB,mBAAmB;AACtC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,mBAAmB,mBAAmB;AACtC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AC1GA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;;;;;;AC9BA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA,kCAAkC,gDAAgD;AAClF;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;;;;;;;AClDA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA,iDAAiD,6DAA6D;AAC9G;AACA,SAAS;;AAET;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA,qDAAqD,4CAA4C;AACjG,iBAAiB;AACjB;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;;;;;;;AC5JA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;;AAEA,0EAA0E,kCAAkC,EAAE;;AAE9G;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,iE;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AC5QA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;;;;;;;ACvFA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;;;;;;ACzBA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,UAAU,OAAO;AACjB,UAAU,SAAS;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY,iBAAiB;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;;;;;;;ACxGA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sFAAsF,EAAE;AACxF;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;;AAEA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,+BAA+B,wCAAwC;AACvE;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,6BAA6B;AACrF,yCAAyC;AACzC,4HAA4H,SAAS,4DAA4D,EAAE;AACnM;AACA;AACA,+EAA+E,yCAAyC;;AAExH;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;;AAEA;;AAEA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,SAAS;;AAET;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;;AAEb;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,iBAAiB;AACjB;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,+DAA+D;;AAE/D;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;AAGD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,6BAA6B,gBAAgB,EAAE;AAC/C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA,2BAA2B,QAAQ;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA,aAAa;AACb;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;;;;ACt0BD;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC;AACA;AACA;;;;;;;ACvCA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,CAAC;;;;;;;;ACzCD;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA,oDAAoD,oBAAoB;AACxE,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET,2DAA2D;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;;;AAGT;AACA;AACA;AACA,SAAS;;AAET;;AAEA;;AAEA,4C;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,qCAAqC,wBAAwB,cAAc,EAAE;AAC7E;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,sBAAsB,qBAAqB,EAAE;;AAEtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,iBAAiB;AACjB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;;AAEA;AACA;AACA;;AAEA;AACA,SAAS;;AAET;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,yBAAyB;;AAEzB,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA,kCAAkC,wBAAwB,cAAc,EAAE;;AAE1E;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;;AAEtB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,sBAAsB,qBAAqB,EAAE;;AAEtD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA,4CAA4C,6CAA6C,EAAE;AAC3F;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA,6EAA6E,qBAAqB,EAAE;AACpG;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;;;ACntBD;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,CAAC;;;;;;;AChCD;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA,iF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;;;;ACxJD;AAAA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEgC;;AAEhC;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,sBAAsB,uDAAuD,mBAAmB,EAAE;AAClG;;AAEA;AACA;;AAEA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,uBAAuB,oBAAoB;AAC3C;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,+CAA+C;AAC/C,4CAA4C;AAC5C;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA,mCAAmC,iBAAiB;AACpD;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb,SAAS;;AAET;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;;;;AAIT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,uEAAuE,4CAA4C;AACnH;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,uBAAuB,6BAA6B;AACpD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;;AAEA;;AAEA;AACA;;AAEA;AACA,uBAAuB,6BAA6B;AACpD;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA,2BAA2B,kBAAkB;AAC7C;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,yBAAyB;;AAEzB;AACA;AACA,uCAAuC,sBAAsB;AAC7D;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB;AACjB,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,uBAAuB,kBAAkB;AACzC;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA,uBAAuB,6BAA6B;AACpD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,QAAQ;AAC7C;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;;;ACvqBD;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,qCAAqC,gCAAsB,EAAE;AAC7D,wCAAwC,gCAAyB,EAAE;AACnE,4CAA4C,gCAA6B,EAAE;AAC3E,gDAAgD,iCAAiC,EAAE;AACnF,sDAAsD,iCAA+D,EAAE;AACvH,wDAAwD,gCAAyC,EAAE;AACnG,4CAA4C,gCAA6B,EAAE;AAC3E,oDAAoD,iCAAyD,EAAE;AAC/G,iDAAiD,iCAAqD,EAAE;AACxG,CAAC;;AAED,qCAAqC,gCAA0B,EAAE;AACjE,wCAAwC,gCAA6B,EAAE;;AAEvE;AACA;AACA,uD;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,+CAA+C,4BAA4B;AAC3E;AACA,iBAAiB;AACjB;;AAEA,+BAA+B,6BAA6B,mBAAmB,GAAG;AAClF,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,wCAAwC,mCAAmC;AAC3E;AACA,gCAAgC,6BAA6B,mBAAmB,EAAE;AAClF,KAAK;;AAEL;AACA;AACA;AACA;AACA,wCAAwC,iCAAiC;AACzE;AACA,4CAA4C,6BAA6B,mBAAmB,EAAE;AAC9F;AACA;;;;;;;AC1FA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;;;;ACzBA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,0BAA0B,yBAAyB;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AC7CA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA,SAAS;AACT;;AAEA,YAAY;AACZ,CAAC;;;;;;;ACzCD;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,CAAC;;;;;;;ACtGD;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,qCAAqC,sBAAsB;;AAE3D;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,CAAC;;;;;;;AC7QD;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;;;;;;;;AC9CD;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA,kBAAkB;;AAElB;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,a,6CAAa;AACb,SAAS;AACT;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,aAAa;;AAEb;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,mEAAmE;AACnE;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;;;AAGA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,aAAa;AACb;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;;AAET;;AAEA;AACA;AACA;AACA;AACA,2EAA2E,mBAAmB;AAC9F;;AAEA,SAAS;AACT;AACA;;AAEA,4CAA4C,0BAA0B,EAAE;AACxE;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;;AAGT;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,SAAS;AACT;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,aAAa;;AAEb;;AAEA;;AAEA;;AAEA,uBAAuB,0BAA0B;;AAEjD;AACA;AACA;AACA;;AAEA;;AAEA,+BAA+B,yBAAyB;;AAExD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;;AAEA,iBAAiB;AACjB;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,uBAAuB,qBAAqB;;AAE5C;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,SAAS;AACT;;AAEA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA,wBAAwB,6BAA6B;AACrD,SAAS;AACT,uFAAuF,SAAS,4DAA4D,EAAE;AAC9J;AACA;AACA,4CAA4C,yCAAyC;AACrF;;AAEA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA;AACA;AACA,iBAAiB;;AAEjB;;AAEA;AACA;AACA,4DAA4D,oBAAoB;AAChF,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oEAAoE,qBAAqB;AACzF,6BAA6B;AAC7B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;;AAErC,iCAAiC;AACjC;AACA;AACA,6BAA6B;;AAE7B;AACA;AACA;AACA,iCAAiC;AACjC,yBAAyB;AACzB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,iBAAiB;AACjB;AACA;;AAEA;;AAEA;AACA;AACA,iBAAiB;AACjB;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,yBAAyB;;AAEzB;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;;AAEA;;AAEA;;AAEA,2BAA2B,2BAA2B;;AAEtD;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,aAAa;AACb;AACA;;AAEA,SAAS;AACT;AACA;AACA;;AAEA;;AAEA;AACA;AACA,SAAS;;AAET;AACA,4CAA4C,qBAAqB;AACjE;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA,wFAAwF,sCAAsC,EAAE;AAChI,8DAA8D,iCAAiC,EAAE;AACjG,6DAA6D,gCAAgC,EAAE;AAC/F;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,oCAAoC,sCAAsC,EAAE;;AAE5E;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA,SAAS;AACT;;AAEA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,SAAS;;AAET;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,kEAAkE;;AAElE;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,8DAA8D,kCAAkC,EAAE;AAClG;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,SAAS;AACT;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;;AAEA;AACA;;AAEA,aAAa;AACb;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,8FAA8F,qBAAqB,EAAE;;AAErH;AACA;AACA,qBAAqB;AACrB;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,2EAA2E;AAC3E;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;;AAEA,iCAAiC;;AAEjC;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;;AAET;;AAEA;AACA;AACA,SAAS;AACT;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,CAAC;;;;;;;;ACx7DD;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA,CAAC;;;;;;;ACtCD;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;;;ACxDD;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,gCAAgC;AAChC;;AAEA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,uBAAuB,+BAA+B;;AAEtD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA;;AAEA;;AAEA,sDAAsD,sDAAsD,EAAE;AAC9G;;AAEA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,mEAAmE,4CAA4C,EAAE;;AAEjH;AACA;AACA;AACA,iBAAiB;AACjB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA,uBAAuB,iBAAiB;AACxC;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;;AAEA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;;AAEA,iGAAiG;;AAEjG;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,2BAA2B,+BAA+B;AAC1D;AACA;AACA,iBAAiB;AACjB;AACA;AACA;;AAEA;;AAEA,SAAS;AACT,2BAA2B,+BAA+B;AAC1D;AACA;AACA,iBAAiB;AACjB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,aAAa;;AAEb;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,uBAAuB,+BAA+B;AACtD;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,iBAAiB;;AAEjB;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,aAAa;AACb;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,uDAAuD,YAAY;AACnE;;AAEA;AACA;AACA,qCAAqC,sCAAsC;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA,uBAAuB,+BAA+B;AACtD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,cAAc;AACrC;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,2BAA2B,mCAAmC;;AAE9D;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA,2BAA2B,mCAAmC;AAC9D;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACp1BD,sTAAsT,gFAAgF,oPAAoP,0BAA0B,8tCAA8tC,sEAAsE,+DAA+D,sEAAsE,8MAA8M,4DAA4D,+DAA+D,4DAA4D,2NAA2N,8FAA8F,+DAA+D,8FAA8F,2OAA2O,8EAA8E,+DAA+D,8EAA8E,ujBAAujB,0BAA0B,mrB;;;;;;ACA/6H,0IAA0I,uGAAuG,m6BAAm6B,8DAA8D,0lBAA0lB,6CAA6C,iZAAiZ,0BAA0B,gzBAAgzB,wJ;;;;;;ACApjG,uDAAuD,6DAA6D,2uC;;;;;;ACApH,mIAAmI,0CAA0C,sB;;;;;;ACA7K,kvB;;;;;;ACAA,guB;;;;;;ACAA,4MAA4M,qCAAqC,iN;;;;;;ACAjP,iEAAiE,2CAA2C,sCAAsC,0CAA0C,gD;;;;;;ACA5L,mNAAmN,+CAA+C,8BAA8B,kBAAkB,eAAe,qKAAqK,iBAAiB,eAAe,oKAAoK,iBAAiB,eAAe,qKAAqK,kBAAkB,eAAe,sKAAsK,kBAAkB,eAAe,uKAAuK,mBAAmB,eAAe,8MAA8M,mBAAmB,eAAe,+IAA+I,mBAAmB,eAAe,+IAA+I,mBAAmB,eAAe,+IAA+I,mBAAmB,eAAe,+IAA+I,mBAAmB,eAAe,+IAA+I,+CAA+C,8BAA8B,mBAAmB,eAAe,2MAA2M,mBAAmB,eAAe,+IAA+I,mBAAmB,eAAe,+IAA+I,mBAAmB,eAAe,+IAA+I,mBAAmB,eAAe,+IAA+I,mBAAmB,eAAe,uKAAuK,mBAAmB,eAAe,yK;;;;;;ACA5kH,gNAAgN,+CAA+C,8BAA8B,mCAAmC,eAAe,+J;;;;;;ACA/U,+CAA+C,oEAAoE,0FAA0F,kEAAkE,kGAAkG,4EAA4E,0fAA0f,gEAAgE,oBAAoB,sDAAsD,eAAe,mTAAmT,wDAAwD,oBAAoB,8CAA8C,eAAe,yGAAyG,0DAA0D,oBAAoB,gDAAgD,eAAe,qQAAqQ,0DAA0D,oBAAoB,gDAAgD,eAAe,kD;;;;;;ACAppE,kRAAkR,uBAAuB,2CAA2C,wCAAwC,eAAe,4D;;;;;;ACA3Y,8NAA8N,uBAAuB,8BAA8B,kCAAkC,eAAe,mjB;;;;;;ACApU,mNAAmN,+CAA+C,8BAA8B,qCAAqC,eAAe,wP;;;;;;ACApV,+CAA+C,wEAAwE,kGAAkG,4EAA4E,U;;;;;;ACArS,6LAA6L,uBAAuB,0CAA0C,+BAA+B,eAAe,kD;;;;;;ACA5S,mFAAmF,qCAAqC,4lBAA4lB,qDAAqD,wCAAwC,mCAAmC,gD;;;;;;ACAp1B,gRAAgR,cAAc,mkC;;;;;;;ACA9R,mR;;;;;;ACAA,+U;;;;;;ACAA,qGAAqG,8BAA8B,mKAAmK,qFAAqF,uEAAuE,+EAA+E,kvCAAkvC,mDAAmD,43C;;;;;;gECAtzD;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AAAA;;;;;;;gECZD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,kDAAkD,cAAc;AAChE;AACA,CAAC;AAAA;;;;;;;gECVD;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,kDAAkD,cAAc;AAChE;AACA,CAAC;AAAA;;;;;;;gECVD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,kDAAkD,cAAc;AAChE;AACA,CAAC;AAAA;;;;;;;gECZD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,CAAC;AAAA;;;;;;;gECtBD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,kDAAkD,cAAc;AAChE;AACA,CAAC;AAAA;;;;;;;gEC3BD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAAA;;;;;;;gEC7BD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAAA;;;;;;;gECpBD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,kBAAkB;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,kBAAkB;AAC7C;AACA;AACA;AACA,8BAA8B,yBAAyB;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kEAAkE;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAAA;;;;;;;gEChGD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAAA;;;;;;;gEC1ID;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA,0EAA0E,4CAA4C,EAAE;AACxH;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,2EAA2E,4CAA4C,EAAE;AACzH;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,CAAC;AAAA;;;;;;;gECpDD;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAAA;;;;;;;gEC1CD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,kDAAkD,cAAc;AAChE;AACA,CAAC;AAAA;;;;;;;gECZD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,kDAAkD,cAAc;AAChE;AACA,CAAC;AAAA;;;;;;;gECVD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,CAAC;AAAA;;;;;;;gEC5BD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,CAAC;AAAA;;;;;;;gECXD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAAA;;;;;;;gECnCD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,CAAC;AAAA;;;;;;;gEChDD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,CAAC;AAAA;;;;;;;;;ACtBD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,qB;;AAEA;AACA;AACA,2BAA2B;;AAE3B;AACA,KAAK;AACL,CAAC;;AAED;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA,CAAC;;AAED;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,CAAC;;AAED;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA,wCAAwC,YAAY;AACpD;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;AACT;;AAEA;AACA","file":"main_e4e35984ba73be2875eb.bundle.js","sourcesContent":["/**\n * Global page navigation module. Handles navigation between pages via AJAX, loading indicators and more.\n */\ndefine([\"underscore\", \"jquery\", \"knockout\", \"../Common\", \"../Services/MessageBusService\", \"../Services/NavigationService\", \"./NavigationRules\", \"./NavigationLoading\"], function (_, jQuery, ko, common, msgBus, navService, navRules, LoadingIndicator) {\n    var homeUrl = \"\",\n        lastRequestedUrl = \"\",\n        ajax403Handler = null,\n        timeoutStatus = \"timeout\",\n        errorWindow = \"#error-window\",\n        raceBettingPageHandler = null;\n\n\n    //Create a loading indicator\n    var navLoading = new LoadingIndicator(\"#loading-overlay\");\n\n\n    /**\n     * Initialises our nav module. Primarily assigns events so our server-rendered templates can hook into this module.\n     * Note: \"return false;\" in bindLiveEvent() will stop other event handlers from firing.\n     */\n    function init() {\n        common.bindLiveEvent('click', '[data-nav]', function (e) {\n            var opts = {}, href = \"\";\n\n            //If it contains either a URL or a list of props as JSON\n            if (this.dataset.nav) {\n                //Try to get the JSON\n                try {\n                    opts = JSON.parse(this.dataset.nav);\n\n                    if ('href' in opts) {\n                        href = opts.href;\n                    }\n                } catch (e) {\n                    //or assume it is a URL\n                    href = this.dataset.nav;\n                }\n            } else {\n                href = this.href;\n            }\n\n            //nav() returns if the hash should change (lol)\n            return nav(href, opts);\n        });\n\n        common.bindLiveEvent('click', '[data-nav-no-update]', function(e) {\n            var opts = {\n                shouldUpdateAddress: false\n            }, hash = this.hash;\n\n            //Hand it off\n            nav(hash, opts);\n\n            //Always disable default anchor behavior\n            e.preventDefault();\n            return false;\n        });\n\n        common.bindLiveEvent('click', '[data-nav-hide-error-popup]', function(e) {\n            hideErrorPopup();\n            e.preventDefault();\n        });\n\n        common.bindLiveEvent('click', '[data-nav-refresh]', function(e) {\n            refresh();\n            e.preventDefault();\n        });\n\n        common.bindLiveEvent('click', '[data-nav-change]', function(e) {\n            onChange(this.href);\n            e.preventDefault();\n        });\n\n        common.bindLiveEvent('click', '[data-nav-confirm]', function(e) {\n            var opts = { conf: '', sub: '', url: '' };\n\n            //If it contains a list of props as JSON\n            if (this.dataset.navConfirm) {\n                opts = JSON.parse(this.dataset.navConfirm);\n            }\n\n            //Default to this anchor's href\n            if (!opts.url) {\n                opts.url = this.href;\n            }\n\n            confirm(opts.conf, opts.sub, opts.url, { control: jQuery(this) });\n            e.preventDefault();\n        });\n\n        common.bindLiveEvent('click', '[data-nav-bet-error]', function(e) {\n            navBetError(this.href);\n            e.preventDefault();\n        });\n\n        common.bindLiveEvent('click', '[data-nav-post]', function(e) {\n            var opts = {};\n\n            //If it contains a list of props as JSON\n            if (this.dataset.navPost) {\n                opts = JSON.parse(this.dataset.navPost);\n            }\n\n            //Default to this anchor's href\n            if (!opts.url) {\n                opts.url = this.href;\n            }\n\n            ajaxPost(opts.url, null, null, { control: jQuery(this) });\n            e.preventDefault();\n        });\n    }\n\n\n    /**\n     * Gets the location.hash (or what you'd expect location.hash to be) without the leading #.\n     * @param {string} url\n     */ \n    function getHashFragment(url) {\n        url = url || window.location.href;\n        return url.replace(/^[^#]*#?(.*)$/, '$1');\n    }\n\n\n    /**\n     * The standard way to load and show content into the main content area of our web app.\n     * @param {string} url\n     * @todo depend on GA module\n     */\n    function ajaxContent(url) {\n        msgBus.publish(\"nav.content.start\", url);\n\n        return ajaxGet(url, function(data, textStatus, jqXHR) {\n            //If to redirect\n            if (data.redirectUrl) {\n                window.location.href = data.redirectUrl;\n            } else {\n                msgBus.publish(\"nav.content.showing\", url);\n\n                //Output\n                showContent(data);\n\n                msgBus.publish(\"nav.content.shown\", url);\n            }\n        }, {}, function(xhr, textStatus, jqXHR) {\n            msgBus.publish(\"nav.content.error\", xhr, textStatus);\n        }, function(xhr, textStatus) {\n            msgBus.publish(\"nav.content.complete\", xhr, textStatus);\n        });\n    }\n\n\n    /**\n     * The standard way to display content in the main content area of our web app.\n     * @param {string} html\n     */\n    function showContent(html) {\n        //Hide any errors\n        jQuery('#ajax-error').hide();\n\n        //Display\n        var container = jQuery('#main-container');\n\n        /* temporary fix to bpr memory leak */\n        var startersContainer = document.getElementById(\"starters-content\");\n        if (startersContainer) {\n            ko.removeNode(startersContainer);\n        }\n\n        if (container.length) {\n            container.html(html);\n        }\n\n        //Hide the URL bar on the iPhone\n        setTimeout(common.hideURLbar, 20);\n    }\n\n\n    // An async AJAX post used for requests such as placing bets or making deposits. Will automatically show the loading overlay.\n    // Parameters:\n    // * url - url to call\n    // * data - data to provide (the anti-forgery token will automatically be added)\n    // * successCallback - function to call on success\n    // * options - option object for additional parameters.\n    //\n    // The supported option parameters are:\n    // * error -- the function to call on error\n    // * control -- a control to automatically disable before making the call\n    // * reenable -- boolean controlling whether to re-enable the control on an error (default true)\n    // * hideOverlay -- boolean controlling whether to hide the overlay when complete (default true)\n    // * timeout -- timeout in milliseconds (only necessary if non-default is desired)\n    function ajaxPost(url, data, successCallback, options, excludeAntiForgeryToken) {\n        var ds = \"\";\n\n        //set up the defaults for the options, most of them are OK as undefined.\n        var settings = jQuery.extend({ reenable: true, hideOverlay: true, contentType: 'application/x-www-form-urlencoded; charset=UTF-8' }, options || {});\n\n        showLoading();\n\n        if (settings.control !== undefined) {\n            common.setDisableState(settings.control, false);\n        }\n\n        if (excludeAntiForgeryToken !== true) {\n            var af = jQuery('#anti-forgery [name=__RequestVerificationToken]');\n\n            if (af.length) {\n                ds = af.serialize();\n            }\n        }\n\n        if (data != undefined) {\n            ds = ((ds === \"\") ? \"\" : (ds + '&')) + data;\n        }\n\n        var defaultSuccessCallback = function(data) {\n            if (data) {\n                //if the data has a RedirectUrl property we need to redirect.\n                if (data.RedirectUrl) {\n                    navChange(data.RedirectUrl);\n                } else {\n                    //otherwise assume it's content\n                    showContent(data);\n                }\n            }\n        }\n\n        return jQuery.ajax({\n            type: \"POST\",\n            url: url,\n            data: ds,\n            success: successCallback || defaultSuccessCallback,\n            timeout: settings.timeout,\n            contentType: settings.contentType,\n            error: function(xhr, textStatus) {\n                var status = textStatus === timeoutStatus ? 0 : xhr.status;\n\n                if (settings.reenable && (settings.control !== undefined)) {\n                    common.setDisableState(settings.control, true);\n                }\n\n                if (settings.error !== undefined) {\n                    settings.error(status, xhr);\n                }\n\n                //Show error\n                ajaxError(status, xhr, false);\n            },\n            complete: function(xhr, status) {\n                if (settings.hideOverlay) {\n                    hideLoading();\n                }\n\n                //Special handling for some browsers that report timeouts/server down errors as success with status 0.\n                if (status === timeoutStatus || xhr.status === 0) {\n                    ajaxError(0);\n                }\n            }\n        });\n    }\n\n\n    /**\n     * Makes an AJAX POST call to a URL with JSON data.\n     * @param {string} url\n     * @param {string} data - NEVER USED?\n     * @param {function} onSuccess\n     * @param {object} options\n     * @param {boolean} excludeAntiForgeryToken\n     */\n    function ajaxPostWithJsonData(url, data, onSuccess, options, excludeAntiForgeryToken) {\n        var ds = \"\";\n\n        //set up the defaults for the options, most of them are OK as undefined.\n        var settings = jQuery.extend({ reenable: true, hideOverlay: true, contentType: 'application/json' }, options || {});\n\n        showLoading();\n\n        if (settings.control !== undefined) {\n            common.setDisableState(settings.control, false);\n        }\n\n        if (excludeAntiForgeryToken !== true) {\n            var af = jQuery('#anti-forgery [name=__RequestVerificationToken]');\n\n            if (af.length) {\n                ds = af.serialize();\n            }\n        }\n\n        var defaultSuccessCallback = function(data) {\n            if (data) {\n                //if the data has a RedirectUrl property we need to redirect.\n                if (data.RedirectUrl) {\n                    navChange(data.RedirectUrl);\n                } else {\n                    //otherwise assume it's content\n                    showContent(data);\n                }\n            }\n        }\n\n        return jQuery.ajax({\n            type: \"POST\",\n            url: url,\n            data: ds,\n            success: onSuccess || defaultSuccessCallback,\n            timeout: settings.timeout,\n            contentType: settings.contentType,\n            error: function(xhr, textStatus) {\n                var status = textStatus === timeoutStatus ? 0 : xhr.status;\n                if (settings.reenable && (settings.control !== undefined)) {\n                    common.setDisableState(settings.control, true);\n                }\n                if (settings.error !== undefined) { settings.error(status, xhr); }\n\n                ajaxError(status, xhr, false);\n\n            },\n            complete: function(xhr, status) {\n                if (settings.hideOverlay) {\n                    hideLoading();\n                }\n\n                //Special handling for some browsers that report timeouts/server down errors as success with status 0.\n                if (status === timeoutStatus || xhr.status === 0) {\n                    ajaxError(0);\n                }\n            }\n        });\n    }\n\n\n    /**\n     * Basic ajax get for requests that don't require forgery tokens or data submission.\n     * @param {string} url\n     * @param {function} onSuccess\n     * @param {object} options - { hideOverlay: bool }\n     * @param {function} onError\n     * @param {function} onComplete\n     */\n    function ajaxGet(url, onSuccess, options, onError, onComplete) {\n        //set up the defaults for the options, most of them are OK as undefined.\n        var settings = jQuery.extend({ hideOverlay: true }, options || {});\n\n        onError = onError || function() { }\n        onComplete = onComplete || function() {}\n\n        showLoadingNoAuto();\n\n        jQuery.ajax({\n            url: url,\n            success: function(xhr, textStatus, jqXHR) {\n                onSuccess(xhr, textStatus, jqXHR);\n            },\n            cache: true,\n            error: function(xhr, textStatus) {\n                var status = textStatus === timeoutStatus ? 0 : xhr.status;\n                ajaxError(status, xhr, true);\n                onError(xhr, textStatus);\n            },\n            complete: function(xhr, textStatus) {\n                if (settings.hideOverlay) {\n                    hideLoading();\n                }\n\n                //Special handling for some browsers that report timeouts/server down errors as success with status 0.\n                if (textStatus === timeoutStatus || xhr.status === 0) {\n                    ajaxError(0);\n                    onError(xhr, textStatus);\n                }\n\n                onComplete(xhr, textStatus);\n            }\n       });\n    }\n\n\n    /**\n     * Standard error handling for ajax errors.\n     */\n    function ajaxError(status, xhr, isGet) {\n        hideLoading();\n\n        // If accessing a protected page when not logged in we'll get a 403 forbidden response\n        // Errors with status 550 are to be displayed as popups.\n        // Everything else displays the generic ajax error message.\n        switch (status) {\n            case 403:\n                if (ajax403Handler) {\n                    ajax403Handler(lastRequestedUrl, isGet);\n                }\n                break;\n            case 550:\n                jQuery(errorWindow).html(xhr.responseText);\n                common.showPopup(jQuery(errorWindow));\n                jQuery('#error-window .close').click(function() {\n                    hideErrorPopup();\n                });\n                break;\n            case 551:\n                location.reload(true);\n                break;\n            default:\n                jQuery('#ajax-error').show();\n                jQuery('#main-container').html(\"\");\n                break;\n        }\n\n        msgBus.publish('error', { status: status, description: xhr });\n        msgBus.publish('nav.error', { status: status, description: xhr });\n    }\n\n\n    /**\n     * Handles standard TabTouch navigation.\n     * @deprecated Use router instead\n     * @param {string} url\n     * @param {object} { hideErrorPopup: bool, shouldUpdateAddress: bool }\n     */\n    function nav(url, options) {\n        options = options || {};\n\n        if (options.hideErrorPopup) {\n            hideErrorPopup();\n        }\n\n        var toUrl = getHashFragment(url);\n        var navConfig = navRules.configFor(toUrl);\n\n        if (navConfig.useNavStack) {\n            //\n            // Only push 'sideways' or 'deeper' navigation in the view heirarchy.\n            // Assume that the same or shorter match of url fragment is either a refresh\n            // or a kind of backwards/cancel navigation, which is not to be pushed.\n            //\n            var fromUrl = getHashFragment(location.href);\n\n            if (fromUrl.substring(0, toUrl.length) != toUrl) {\n                // get return url override if defined in the NavRules\n                var returnUrl = navConfig.returnUrl || fromUrl;\n                navService.pushUrl('#' + returnUrl);\n            }\n        }\n        else {\n            // revert to standard tabtouch navigation scheme\n            navService.clearUrlStack();\n        }\n\n        msgBus.publish('nav.nav', url);\n\n        return _performNav(url, options.shouldUpdateAddress);\n    }\n\n\n    /**\n     * Actually perform the page navigation and load the content into the main content area.\n     */\n    function _performNav(url, shouldUpdateAddress) {\n        var actualUrl = getHashFragment(url);\n\n        lastRequestedUrl = actualUrl;\n\n        // clean up nav stack, now that we're at this page\n        navService.pruneUrl('#' + actualUrl);\n\n        if (isHomeUrl(actualUrl)) {\n            actualUrl = homeUrl;\n        }\n\n        if (new RegExp(\"tote\\/meetings\\/([a-z]+)\\/([0-9]+)\", \"i\").test(actualUrl)) {\n            if (typeof raceBettingPageHandler == \"function\") {\n                raceBettingPageHandler(actualUrl)\n                    .catch(function(err) {\n                        console.log(\"Race betting page handler failed to handle route: \" + err);\n                        ajaxContent(actualUrl);\n                    });\n            } else {\n                throw new Error(\"Invalid race betting page handler\");\n            }\n        } else {\n            ajaxContent(actualUrl);\n        }\n\n        //return true to follow the #link which will just update the address bar.\n        return (shouldUpdateAddress === undefined) || shouldUpdateAddress;\n    }\n\n\n    /**\n     * Performs a standard navigation but does not change the URL hash.\n     * @param {string} url \n     */\n    function navChange(url) {\n        hideLoading();\n        nav(url);\n        location.hash = getHashFragment(url);\n    }\n\n\n    /**\n     * Callback for when the page's hash changes (for browsers that support it). Bound in tabtouch (for some reason). Enables the back button to work (somehow).\n     */\n    function hashChange() {\n        // make sure we aren't reloading the last request.\n        if (lastRequestedUrl !== getHashFragment(window.location.hash)) {\n            msgBus.publish(\"nav.hashchange\");\n\n            nav(window.location.href);\n        }\n    }\n\n\n    /**\n     * Refreshes the main content.\n     * @returns {boolean} false - probably stops default action for anchors\n     */\n    function refresh() {\n        // Clearing the login-form so that on the off chance that a user changes from 3G to bunbury wifi or vice versa\n        // They get or don't get the buttons in the right circumstances.\n        jQuery('form#login-form').remove();\n\n        var refreshUrl = window.location.hash;\n\n        var overrideRefresh = jQuery('#overrideRefreshUrl');\n\n        if (overrideRefresh.length > 0) {\n            refreshUrl = overrideRefresh.val();\n        }\n\n        nav(refreshUrl);\n        return false;\n    }\n\n\n    /**\n     * Overrides the \"back\" button \"click\" event handler.\n     * @param {function} handler \n     * @param {string} label \n     * @param {string} url \n     * @returns {} \n     */\n    function overrideBack(handler, label, url) {\n        var btn = jQuery('a#backButton');\n        \n        if (btn.length) {\n            btn.find('span').text(label ? label : \"Back\");\n\n            btn.unbind('click').bind('click', function(event) { return handler(this.href, event); });\n\n            if (url) {\n                setBackUrl(url);\n            }\n        }\n    }\n\n\n    //\n    // Set the page fixed back url\n    //\n    function setBackUrl(backUrl) {\n        navService.setBackUrl(backUrl);\n\n        var btn = jQuery('a#backButton');\n\n        if (btn.length) {\n            btn.show().attr('href', navService.peekUrl());\n        }\n    }\n\n\n    /**\n     * Resets the \"back\" button back to the default behavior.\n     * @param {} backText \n     * @returns {} \n     */\n    function resetBack(backText) {\n        var btn = jQuery('a#backButton');\n\n        if (btn.length) {\n            btn.find('span').text(backText ? backText : \"Back\");\n            btn.unbind('click').bind('click', function () {\n                var self = this;\n                return navService.popUrl(function (url) {\n                    self.href = url;\n\n                    msgBus.publish('nav.resetback', url);\n\n                    return _performNav(self.href);\n                });\n            });\n        }\n    }\n\n\n    /**\n     * Hides the \"back\" button in the header of the web app.\n     * @returns {boolean}\n     */\n    function hideBack() {\n        var btn = jQuery('a#backButton');\n\n        if (btn.length) {\n            btn.hide();\n            return true;\n        } else {\n            return false;\n        }\n    }\n\n\n    /**\n     * Overrides the \"click\" action (and the HTML?) of the refresh button (that is somewhere).\n     * @param {function} handler \n     */\n    function overrideRefresh(handler) {\n        var btn = jQuery('.refresh-button');\n        btn.unbind('click').bind('click', handler);\n        btn.html('<span class=\"tticon tticon-refresh fz-21\"><span class=\"accessible\">Refresh</span></span>');\n    }\n\n\n    /**\n     * Hides an error popup?\n     */\n    function hideErrorPopup() {\n        jQuery(errorWindow).fadeOut('fast');\n    }\n\n\n    /**\n     * Scrolls to the top Y position of an element, found by ID attribute.\n     * @param {string} id \n     * @returns {boolean} false - disables onclick event\n     * @todo not do this lol\n     */\n    function scrollTo(id) {\n        if (id == '#top') {\n            id = 'body';\n        }\n        jQuery('html, body').animate({\n            scrollTop: jQuery(id).offset().top\n        }, 'fast');\n        return false;\n    }\n\n\n    function showLoading() {\n        navLoading.showLoading();\n    }\n\n\n    function showLoadingNoAuto() {\n        navLoading.showLoadingNoAuto();\n    }\n\n\n    function showLoadingFullScreenFixed() {\n        navLoading.showLoadingFullScreenFixed();\n    }\n\n\n    function hideLoading() {\n        navLoading.hideLoading();\n    }\n\n\n    function pushLoading(action) {\n        return navLoading.pushLoading(action);\n    }\n\n\n    function pushLoadingFor(promise) {\n        return pushLoading(function(hide) {\n            return promise\n                .then(function(value) {\n                    hide();\n                    return value;\n                })\n                .catch(function(err) {\n                    hide();\n                    throw err;\n                });\n        });\n    }\n\n\n    /**\n     * Sets the function to call if a 403 error occurs during an AJAX operation.\n     * @param {function} handler\n     */\n    function set403Handler(handler) {\n        ajax403Handler = handler;\n    }\n\n\n    /**\n     * Redirect back to a URL after a bet error after closing a popup. Only called when it's impossible to proceed with the bet (e.g. pool closed).\n     * @todo Move to a betting-related module\n     */\n    function navBetError(url) {\n        hideErrorPopup();\n        return nav(url);\n    }\n\n\n    /**\n     * Stores the \"home\" page URL.\n     * @param {string} url \n     */\n    function initHomeUrl(url) {\n        homeUrl = url;\n    }\n\n\n    /**\n     * Checks if a URL is the \"home\" page URL.\n     * @param {string} url \n     * @returns {boolean}\n     */\n    function isHomeUrl(url) {\n        return url === '' || url === '#';\n    }\n\n\n    /**\n     * Checks if on the \"home\" page of the app.\n     * @returns {boolean}\n     */\n    function isHome() {\n        return isHomeUrl(window.location.hash);\n    }\n\n\n    /**\n     * Displays a confirmation dialog.\n     * @param {string} selector\n     * @param {string} selector\n     * @param {string} url\n     */\n    function confirm(confDiv, subDiv, url) {\n        jQuery('.sub-div').hide();\n        jQuery(subDiv + ' .confirm-yes').attr('href', url);\n        common.setDisableState(jQuery(subDiv + ' .confirm-yes'), true);\n        jQuery(subDiv).show();\n        common.showPopup(jQuery(confDiv));\n    }\n\n    /**\n     * Performs an AJAX get followed by a redirect. Used in conjunction with confirmation dialogs.\n     * @param {string} url \n     * @param {string} onSuccessUrl \n     * @param {object} elemToDisable \n     * @param {boolean} hideOverlay \n     * @returns {boolean} \n     */\n    function redirect(url, onSuccessUrl, elemToDisable, hideOverlay) {\n        if (elemToDisable.is('.disabled') === false) {\n            common.setDisableState(elemToDisable, false);\n\n            ajaxGet(\n                url,\n                function() {\n                    navChange(onSuccessUrl);\n                    return false;\n                },\n                { hideOverlay: (hideOverlay === undefined) ? true : hideOverlay }\n            );\n        }\n        return false;\n    }\n\n\n    /**\n     * Redirects to an external URL.\n     * @param {string} url \n     */\n    function redirectExternal(url) {\n        window.location.href = url;\n    }\n\n\n    function setRaceBettingPageHandler(handler) {\n        raceBettingPageHandler = handler;\n    }\n\n\n    return {\n        init: init,\n        ajaxContent: ajaxContent,\n        showContent: showContent,\n        ajaxError: ajaxError,\n        ajaxPost: ajaxPost,\n        ajaxPostWithJsonData: ajaxPostWithJsonData,\n        ajaxGet: ajaxGet,\n        nav: nav,\n        navChange: navChange,\n        hashChange: hashChange,\n        refresh: refresh,\n        overrideBack: overrideBack,\n        setBackUrl: setBackUrl,\n        resetBack: resetBack,\n        hideBack: hideBack,\n        overrideRefresh: overrideRefresh,\n        hideErrorPopup: hideErrorPopup,\n        initHomeUrl: initHomeUrl,\n        set403Handler: set403Handler,\n        navBetError: navBetError,\n        isHome: isHome,\n        scrollTo: scrollTo,\n        redirect: redirect,\n        confirm: confirm,\n        redirectExternal: redirectExternal,\n        showLoading: showLoading,\n        showLoadingFullScreenFixed: showLoadingFullScreenFixed,\n        hideLoading: hideLoading,\n        pushLoading: pushLoading,\n        pushLoadingFor: pushLoadingFor,\n        showLoadingNoAuto: showLoadingNoAuto,\n        setRaceBettingPageHandler: setRaceBettingPageHandler\n    };\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/Navigation/Nav.js\n// module id = 3\n// module chunks = 5","/**\n * Handles subscribing and publishing to various topics.\n */\ndefine(['amplify', '../Common', './LoggingService'], function(amplify, common, loggingService) {\n    //Assign events\n    (function() {\n        common.bindLiveEvent('click', '[data-msg-publish]', function(e) {\n            var topic = this.dataset.msgPublish,\n                data = this.dataset.msgData;\n\n            try {\n                data = JSON.parse(data);\n            } catch (e) {\n                //Assume a string\n            }\n\n            publish(topic, data);\n        });\n    })();\n\n    return {\n        publish: publish,\n        subscribe: subscribe,\n        unsubscribe: unsubscribe\n    }\n\n    function publish (topic, data) {\n        amplify.publish(topic, data);\n        loggingService.logDebug(\"MessageBusService.publish('\" + topic + \"')\");\n    };\n\n    function subscribe (topic, func) {\n        amplify.subscribe(topic, func);\n        loggingService.logDebug(\"MessageBusService.subscribe('\" + topic + \"')\");\n    };\n\n    function unsubscribe (topic, func) {\n        amplify.unsubscribe(topic, func);\n    }\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/Services/MessageBusService.js\n// module id = 4\n// module chunks = 5 7","/**\n * Common legacy functions. It handles popups, binding events to elements and more.\n */\ndefine([\"jquery\", \"Base64\", \"./Services/LoggingService\", \"js-cookie\"], function(jQuery, Base64, loggingService, cookies) {\n    var self = this;\n\n    var disabled = \"disabled\";\n    var appCapabilityCookieName = \"AppCapability\";\n    var timezoneOffsetCookieName = \"TimezoneOffset\";\n\n    /**\n     * Binds an event to a selector. This means any element inserted later (through AJAX or whatever) can trigger it.\n     */\n    function bindLiveEvent(eventType, elementQuerySelector, cb) {\n        document.addEventListener(eventType, function(event) {\n            var qs = document.querySelectorAll(elementQuerySelector);\n\n            if (qs) {\n                var el = event.target, index = -1;\n                while (el && ((index = Array.prototype.indexOf.call(qs, el)) === -1)) {\n                    el = el.parentElement;\n                }\n\n                if (index > -1) {\n                    return cb.call(el, event);\n                }\n            }\n        });\n    }\n\n    function hideURLbar() {\n        window.scrollTo(0, 1);\n        setLocalTime();\n    }\n\n    function showPopup(popupDiv) {\n        //delay 50 milliseconds to allow background layout completed\n        setTimeout(function() {\n            jQuery('div .popup').hide(); // hide all other popups (especially any confirmation popup)\n            var documentHeight = jQuery(document).height();\n            popupDiv.css({ 'height': documentHeight }).fadeIn('fast');\n            popupDiv.children('.overlay').animate({ opacity: 0.6 }, 'fast');\n\n            var scrollTop = window.pageYOffset ? window.pageYOffset : ((document.body.parentElement) ? document.body.parentElement.scrollTop : 0);\n\n            //Using a minimum scroll top to stop the close popup being over the 'log out' button.\n            popupDiv.children('.window').css({ 'top': Math.max(scrollTop + 20, 40) });\n\n            //Check if the height has changed due to showing the popup, and increase the overlay size accordingly\n            var newHeight = (popupDiv.children('.window').height() + scrollTop + 100);\n            if (newHeight > documentHeight) {\n                popupDiv.children('.overlay').css({ 'height': newHeight });\n            }\n        }, 50);\n    }\n\n    //changes disable state for elements that use both a class and attribute\n\n    function setDisableState(selector, enable) {\n        if (enable) {\n            selector.removeClass(disabled).removeAttr(disabled);\n        } else {\n            selector.addClass(disabled).prop(disabled, true);\n        }\n    }\n\n    //KeyPress validation checks for input to numeric text boxes.\n    //We do regex check even if the input type=number is supported, since we may not want decimal points or scientific notation\n    //e is the keypress event, isInt is true for integer-only, false for decimal input\n\n    function numericKeyPress(e, isInt) {\n        var theEvent = e || window.event,\n            key = theEvent.keyCode || theEvent.which,\n            regex = isInt ? /[0-9]/ : /[0-9]|\\./;\n\n        //if it's the enter key or backspace, return to allow standard handling.\n        //backspace check is only necessary for iPhone3\n        if (key === 13 || key === 8) {\n            return;\n        }\n\n        key = String.fromCharCode(key);\n        if (!regex.test(key)) {\n            theEvent.returnValue = false;\n            theEvent.preventDefault();\n        }\n    }\n\n    function maxlengthKeyPress(s, e) {\n        //if it's the enter key or backspace, return to allow standard handling.\n        //backspace check is only necessary for iPhone3\n        if (e.keyCode === 13 || e.keyCode === 8) {\n            return true;\n        }\n        return s.value.length < jQuery(s).attr(\"maxlength\");\n    }\n\n    //sets the alternating style for each 'li' element within the supplied selector\n\n    function initDisplayListStyle(ul) {\n        ul.each(function() { jQuery(this).children(\"li:even\").addClass('alt'); });\n    }\n\n    //animated scroll to function\n\n    function scrollTo(destination, duration) {\n        var loc = destination.length ? destination.position().top : 0;\n        jQuery('html:not(:animated),body:not(:animated)').animate({ scrollTop: loc }, duration);\n    }\n\n    //Forces the browser to redraw an element and its contents.\n    //Certain browsers (mostly Android) do not redraw elements outside the visible window well. \n    //Calling this function on the parent of the elements should fix it.\n\n    function redrawFix(element) {\n        element.hide();\n        var dummy = element.offset();\n        element.show();\n    }\n\n    function slideToggle(slideElement) {\n        if (slideElement.is(':hidden')) {\n            slideElement.slideDown(500);\n        } else {\n            slideElement.slideUp(500);\n        }\n    }\n\n    function initSlideToggleHandlers() {\n        jQuery(\"h3.toggle\").click(function() {\n            jQuery(this).next('.info-expand').slideToggle();\n            jQuery(this).toggleClass(\"open\");\n            scrollTo(jQuery(this), 500);\n        });\n    }\n\n    function addWaterMark(id, text) {\n        var textBox = jQuery('#' + id);\n        var waterMarkClass = 'watermark-textbox';\n\n        textBox.val(text).addClass(waterMarkClass);\n\n        textBox.on('blur', function() {\n            if (textBox.val().length === 0) {\n                textBox.val(text);\n                textBox.addClass(waterMarkClass);\n            }\n        });\n\n        textBox.on('focus', function() {\n            textBox.val('');\n            textBox.removeClass(waterMarkClass);\n        });\n    }\n\n    function getLocalTime(wordsToReplaceString, gmtDateInMilliseconds) {\n        // 12:30,12345678 = replaces 12:30 with localised time in same format using gmt time in milliseconds \n        if (wordsToReplaceString.match(/^\\d{2}:\\d{2}/)) {\n            if (gmtDate > 0) {\n                var localTimeString = gmtDateInMilliseconds.toLocaleTimeString('en-au', { hour12: false });\n                localTimeString = localTimeString.match(/\\d+:\\d+/); // Format: 23:00\n\n                var text = jQuery(this).text();\n                var newText = text.replace(wordsToReplaceString, localTimeString);\n                return newText;\n            }\n        }\n\n        // Tue, 09 Jan 2015 12:30,12345678 = replaces Tue 09 Jan 2015 12:30 with localised time in same format using gmt time in milliseconds \n        if (wordsToReplaceString.match(/^\\w{3}, \\d{2} \\w{3} \\d{4} \\d{2}:\\d{2}$/)) {\n            var localTimeString = gmtDateInMilliseconds.toLocaleString('en-au',\n                options = {\n                    weekday: \"short\", day: \"2-digit\", month: \"short\", year: \"numeric\",\n                    hour: \"2-digit\", minute: \"2-digit\", hour12: \"false\"\n                });\n\n            var hour = localTimeString.match(/\\d+:/);\n            if (hour != null) {\n                if (hour.length == 1) {\n                    if (hour[0].length == 2)\n                        localTimeString = localTimeString.replace(/\\d{1}:/, '0' + hour);\n                }\n            }\n\n            var text = jQuery(this).text();\n            var newText = text.replace(wordsToReplaceString, localTimeString.substr(0, 23));\n            return newText;\n        }\n\n        return \"\";\n    };\n\n    function setLocalTime() {\n        jQuery('[data-localtime]').each(function() {\n            var attributeValue = jQuery(this).attr('data-localtime');\n            if (attributeValue.indexOf('#') < 0) return;\n\n            var parms = attributeValue.split('#');\n            var wordsToReplace = parms[0];\n            var gmtDate = new Date(parseInt(parms[1]));\n\n            // 12:30,12345678 = replaces 12:30 with localised time in same format using gmt time in milliseconds \n            if (wordsToReplace.match(/^\\d{2}:\\d{2}/)) {\n                if (gmtDate > 0) {\n                    var localTimeString = gmtDate.toLocaleTimeString('en-au', { hour12: false });\n                    localTimeString = localTimeString.match(/\\d+:\\d+/); // Format: 23:00\n\n                    var text = jQuery(this).text();\n                    var newText = text.replace(wordsToReplace, localTimeString);\n                    jQuery(this).text(newText);\n                }\n            }\n\n            // Tue, 09 Jan 2015 12:30,12345678 = replaces Tue 09 Jan 2015 12:30 with localised time in same format using gmt time in milliseconds \n            if (wordsToReplace.match(/^\\w{3}, \\d{2} \\w{3} \\d{4} \\d{2}:\\d{2}$/)) {\n                var localTimeString = gmtDate.toLocaleString('en-au',\n                    options = {\n                        weekday: \"short\", day: \"2-digit\", month: \"short\", year: \"numeric\",\n                        hour: \"2-digit\", minute: \"2-digit\", hour12: \"false\"\n                    });\n\n                var hour = localTimeString.match(/\\d+:/);\n                if (hour != null) {\n                    if (hour.length == 1) {\n                        if (hour[0].length == 2)\n                            localTimeString = localTimeString.replace(/\\d{1}:/, '0' + hour);\n                    }\n                }\n\n                var text = jQuery(this).text();\n                var newText = text.replace(wordsToReplace, localTimeString.substr(0, 23));\n                jQuery(this).text(newText);\n            }\n        });\n    }\n\n    function hasAppCapability(capability) {\n        if (!isCookieSet(appCapabilityCookieName)) {\n            return false;\n        }\n\n        capability = capability.toLowerCase();\n        var capabilityCookie = Base64.decode(cookieValue(appCapabilityCookieName));\n        var capabilities = capabilityCookie.toLowerCase().split(',');\n        var isCapable = capabilities.indexOf(capability) != -1;\n        loggingService.logDebug('hasAppCapability => capability=' + capability + ' capabilities=[' + capabilities + '] isCapable=' + isCapable);\n        return isCapable;\n    }\n\n    function hasExplicitTimezoneOffset() {\n        return isCookieSet(timezoneOffsetCookieName);\n    }\n\n    function getExplicitTimezoneOffset() {\n        if (hasExplicitTimezoneOffset() === false) {\n            return 0;\n        }\n\n        return cookieValue(timezoneOffsetCookieName);\n    }\n\n    function isCookieSet(cookieName) {\n        return cookieValue(cookieName) != undefined;\n    }\n\n    function cookieValue(cookieName) {\n        var value = cookies.get(cookieName);\n        return value;\n    }\n\n    return {\n        hideURLbar: hideURLbar,\n        showPopup: showPopup,\n        setDisableState: setDisableState,\n        numericKeyPress: numericKeyPress,\n        initDisplayListStyle: initDisplayListStyle,\n        scrollTo: scrollTo,\n        redrawFix: redrawFix,\n        slideToggle: slideToggle,\n        initSlideToggleHandlers: initSlideToggleHandlers,\n        addWaterMark: addWaterMark,\n        maxlengthKeyPress: maxlengthKeyPress,\n        getLocalTime: getLocalTime,\n        setLocalTime: setLocalTime,\n        hasAppCapability: hasAppCapability,\n        hasExplicitTimezoneOffset: hasExplicitTimezoneOffset,\n        getExplicitTimezoneOffset: getExplicitTimezoneOffset,\n        bindLiveEvent: bindLiveEvent\n    };\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/Common.js\n// module id = 5\n// module chunks = 5 7","define([\"jquery\", \"./Navigation/Nav\", \"./Common\", \"./Logon\", \"./Redirect\", \"./Notification\", \"./Version\", \"./Services/Preferences/PreferencesService\"], function(jQuery, nav, common, logon, redirect, note, ver, prefServ) {\n    var overrideBackUrl;\n\n    function initHome() {\n        jQuery('html').removeAttr('class');\n        jQuery('body').attr('id', 'home');\n        jQuery('body').removeAttr('class');\n        jQuery('#nav-info-container').hide();\n        nav.hideBack();\n        jQuery('.button.help').show();\n        logon.resetActions();\n        redirect.initialiseRedirectPopup();\n        var racingRadioButton = jQuery('#racingradio-home');\n        if (racingRadioButton) {\n            note.initRacingRadioNotification('racingradio-home');\n        }\n    }\n\n    function fixBackground() {\n        jQuery('body#home').removeAttr('id');\n    }\n\n    function initPlayerHome() {\n        jQuery('html').removeAttr('class');\n        jQuery('body').attr('id', 'home-player');\n        jQuery('body').removeAttr('class');\n        jQuery('#nav-info-container').hide();\n        nav.hideBack();\n        jQuery('.button.help').show();\n        logon.resetActions();\n    }\n\n    function initCommon(url, backText) {\n        jQuery('html').removeAttr('class');\n        jQuery('body#home').removeAttr('id');\n        jQuery('body').removeAttr('class');\n        jQuery('#nav-info-container').show();\n\n        setBackButtonUrl(url);\n        jQuery('.button.help').hide();\n        nav.resetBack(backText);\n        common.initDisplayListStyle(jQuery('ul.display-list:not(.no-alt)'));\n        initNavInfoStyle();\n        logon.resetActions();\n    };\n\n    function initHelp(url, backText) {\n        initCommon(url, backText);\n        jQuery('div.help a.button').click(function(e) {\n            e.preventDefault();\n            goToHelpSection(jQuery(this).attr('href'));\n        });\n    }\n\n    function initNavInfoStyle() {\n        jQuery('.nav-info span:first').css('border-left', 'none');\n        jQuery('.nav-info span:last').css('border-right', 'none');\n    }\n\n    //Sets the scroll bar to a specific help section.\n    //id is the id of the help div (must begin with #).\n    function goToHelpSection(id) {\n        var destination = jQuery('div.help ' + id);\n        jQuery(window).scrollTop(destination.length ? destination.position().top : 0);\n    }\n\n    function overrideNextPagesBackButton(url) {\n        overrideBackUrl = url;\n    }\n\n    function setBackButtonUrl(url) {\n        var newUrl = overrideBackUrl || url;\n        nav.setBackUrl(newUrl);\n        overrideBackUrl = undefined;\n    }\n\n    function init() {\n        //set the timezone offset - use the cookie set by the android app if present. If not, use javascript Date.\n        var clientTimeZoneOffsetMinutes = 0;\n        if (common.hasExplicitTimezoneOffset()) {\n            var timezoneOffsetCookie = common.getExplicitTimezoneOffset();\n            clientTimeZoneOffsetMinutes = Number(timezoneOffsetCookie);\n        } else {\n            clientTimeZoneOffsetMinutes = (new Date().getTimezoneOffset());\n        }\n        var clientTimeZoneOffset = clientTimeZoneOffsetMinutes / 60; //in hours\n\n        //set up common ajax options\n        jQuery.ajaxSetup({\n            cache: false,\n            timeout: 30000,\n            beforeSend: function(xhr, req) {\n                if (req.crossDomain)\n                    return;\n                var xTabTouchVersion = ver.getTabTouchVersion();\n                if (xTabTouchVersion) {\n                    xhr.setRequestHeader(\"X-TabTouch-Version\", xTabTouchVersion);\n                }\n                xhr.setRequestHeader(\"ClientTimeZone\", clientTimeZoneOffset);\n                xhr.setRequestHeader(\"ClientScreenWidth\", window.innerWidth);\n                xhr.setRequestHeader(\"BettingPageRefresh\", prefServ.bettingPageRefreshEnabled());\n            }\n        });\n\n        nav.set403Handler(logon.handle403);\n        logon.ajaxLogonState();\n\n        common.hideURLbar();\n\n        redirect.initialiseRedirect();\n\n        BETWALLETINDICATOR.init();\n\n        POPUP.init();\n\n        //check for framing    \n        if (top != self) {\n            self.location.href = '/home/noframe';\n        }\n\n        jQuery(window).on('hashchange', nav.hashChange);\n    }\n\n    return {\n        initHome: initHome,\n        initPlayerHome: initPlayerHome,\n        initCommon: initCommon,\n        initHelp: initHelp,\n        goToHelpSection: goToHelpSection,\n        overrideNextPagesBackButton: overrideNextPagesBackButton,\n        fixBackground: fixBackground,\n        init: init\n    };\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/TabTouch.js\n// module id = 7\n// module chunks = 5","define(['./PreferencesStore'], function(_preferencesStore) {\n    window.PreferencesService = function() {\n        var self = this;\n\n        var _accessKeyValue = function(key, value) {\n            if (value === undefined) {\n                return _preferencesStore.get(key);\n            }\n            _preferencesStore.set(key, value);\n            return value;\n        };\n\n        self.loggedInUser = function(value) {\n            var ret = _accessKeyValue('LoggedInUser', value);\n            return ret === undefined || ret === null ? 0 : ret;\n        };\n\n        self.bettingPageRefreshEnabled = function(value) {\n            var loggedInUser = self.loggedInUser();\n            var ret = _accessKeyValue(loggedInUser + 'BettingPageRefreshEnabled', value);\n            return ret === undefined || ret === null ? false : ret;\n        };\n\n        self.cashBettingEnabled = function(value) {\n            return _accessKeyValue('CashBettingEnabled', value);\n        };\n\n        self.racingHeaderDetailsViewEnabled = function(value) {\n            return _accessKeyValue('RacingHeaderDetailsViewEnabled', value);\n        };\n\n        self.locationServicesEnabled = function(value) {\n            // MOBI-1226 this will be set to true always for now\n            return true;\n        };\n\n    };\n\n    return new window.PreferencesService();\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/Services/Preferences/PreferencesService.js\n// module id = 8\n// module chunks = 5","define([\"jquery\", \"./Navigation/Nav\", \"./Services/MessageBusService\"], function(jQuery, nav, msgBus) {\n    return new function() {\n        var loadPage = window.overridePageProvider || function () {\n            var $errorContainer = jQuery(\"#error-container\"),\n                $errorTitle = $errorContainer.find('h4'),\n                $errorMessage = $errorContainer.find('p'),\n                $closeButton = $errorContainer.find('a');\n            return {\n                mainContainer: jQuery(\"#main-container\"),\n                ajaxError: jQuery(\"#ajax-error\"),\n                errorContainer: $errorContainer,\n                errorTitle: $errorTitle,\n                errorMessage: $errorMessage,\n                errorCloseButton: $closeButton\n            };\n        };\n\n        var self = this;\n\n        function bindToView() {\n            self.page = loadPage();\n        }\n        function showGenericErrorPage() {\n            nav.hideLoading();\n            bindToView();\n            self.page.mainContainer.hide();\n            self.page.ajaxError.show();\n        }\n\n        function showErrorPopup(headerText, message) {\n            nav.hideLoading();\n            msgBus.publish('popup.showPopUp', {\n                headerText: headerText,\n                messageText: message,\n                buttonType: POPUP.BUTTONTYPE.Ok,\n                cancelButtonText: \"OK\",\n                isError: true\n            });\n        }\n\n        function showWarningPopup(headerText, message) {\n            nav.hideLoading();\n            msgBus.publish('popup.showPopUp', {\n                headerText: headerText,\n                messageText: message,\n                buttonType: POPUP.BUTTONTYPE.Ok,\n                cancelButtonText: \"OK\",\n                isWarning: true\n            });\n        }\n\n        function addHandlers() {\n            jQuery('body').on('click touchstart', '#error-container a', function () {\n                self.hideErrorPopup();\n            });\n        }\n        //Public Accessors\n        self.showGenericErrorPage = showGenericErrorPage;\n        self.showErrorPopup = showErrorPopup;\n        self.showWarningPopup = showWarningPopup;\n        self.addHandlers = addHandlers;\n        //Constructor\n        bindToView();\n\n        self.init = function() {\n            self.addHandlers();\n        }\n\n        return self;\n    }\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/Error.js\n// module id = 9\n// module chunks = 5","/**\n * Helps to prevent accidental extra AJAX calls.\n */\ndefine([], function() {\n    'use strict';\n    var locking = {};\n\n    locking._sharedLocks = {};\n\n    /* a basic no-wait mutex implementation */\n    locking.lock = function() {\n        var self = this;\n\n        var _value = 0;\n\n        self.trylock = function() {\n            if (_value) {\n                return 0;\n            }\n            _value = 1;\n            return 1;\n        };\n\n        self.unlock = function() {\n            _value = 0;\n        };\n\n        self.count = function() {\n            return _value;\n        };\n    };\n\n    /* obtain shared-lock instance */\n    locking.shared_lock = function(name) {\n        if (!locking._sharedLocks[name]) {\n            locking._sharedLocks[name] = new locking.lock();\n        }\n\n        return locking._sharedLocks[name];\n    };\n\n    return locking;\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/Lock.js\n// module id = 10\n// module chunks = 5","define([\"jquery\", \"jquery-todictionary\", \"./Services/Location/LocationService\"], function(jQuery, jQueryToDictionary, locationService) {\n    var lda = function() {\n        var self = this;\n\n        self.locationService = locationService;\n        self.providerLocations = null;\n\n        self.addToUrlEncodedData = function(queryString) {\n            if (self.locationService) {\n                self.providerLocations = self.locationService.getLocationDetails();\n\n                if (queryString) {\n                    queryString = queryString + '&';\n                } else {\n                    queryString = \"\";\n                }\n                queryString = queryString + jQuery.param({ clientLocationDetails: JSON.stringify({ ProviderLocations: self.providerLocations }) });\n            }\n            return queryString;\n        }\n\n        self.addToDictionary = function(dictionary) {\n            if (self.locationService) {\n                self.providerLocations = self.locationService.getLocationDetails();\n                dictionary = dictionary.concat(jQuery.toDictionary({ clientLocationDetails: JSON.stringify({ ProviderLocations: self.providerLocations }) }));\n            }\n            return dictionary;\n        }\n    }\n\n    return lda;\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/LocationDetailsAppender.js\n// module id = 11\n// module chunks = 5","/**\n * Handles notifications. Originally window.NOTE.\n */\ndefine([\"jquery\", \"./Common\", \"js-cookie\"], function(jQuery, common, cookies) {\n    function notification(wrapperId, cookieName, callback) {\n        var notificationPopup = jQuery('#' + wrapperId),\n            hasBeenDisabled;\n\n        attachCloseHandlers(wrapperId, callback);\n\n        this.show = function(e) {\n            if ((!cookieName || cookies.get(cookieName) !== 'true') && !hasBeenDisabled) {\n                if (e && e.preventDefault) {\n                    e.preventDefault();\n                }\n                common.showPopup(notificationPopup);\n                jQuery('#dontShowNotification').removeAttr('checked');\n            } else {\n                callback();\n            }\n        };\n\n        jQuery('#' + wrapperId + ' .continue').click(function() {\n            if (jQuery('#dontShowNotification').is(':checked')) {\n                if (cookieName) {\n                    cookies.set(cookieName, 'true');\n                }\n                hasBeenDisabled = true;\n            }\n\n            if (callback) {\n                callback();\n            }\n        });\n    }\n\n    function initRacingRadioNotification(buttonId) {\n        var racingRadioNotification = new notification('racingradio-notification', 'tabtouch.dont_show_rr_notification');\n        jQuery('#' + buttonId).click(racingRadioNotification.show);\n    }\n\n    function initTabLocatorNotification(callback) {\n        attachCloseHandlers('tabtouch-notification');\n        var introToTabLocatorNotification = new notification('tablocator-intro-notification', 'tabtouch.dont_show_tablocator_notification', callback);\n\n        return introToTabLocatorNotification;\n    }\n\n    function attachCloseHandlers(wrapperId, callback) {\n        var notificationPopup = jQuery('#' + wrapperId);\n        jQuery('#' + wrapperId + ' .close').click(function() {\n            notificationPopup.fadeOut('fast', callback);\n        });\n    }\n\n    return {\n        initRacingRadioNotification: initRacingRadioNotification,\n        initTabLocatorNotification: initTabLocatorNotification\n    };\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/Notification.js\n// module id = 12\n// module chunks = 5","define([], function() {\n    return function(data) {\n        var self = this;\n\n        var _match = function(template, tuple) {\n            if (template.length > tuple.length) {\n                return false;\n            }\n            for (var i = 0; i < template.length; ++i) {\n                if (template[i] && (template[i] != tuple[i])) {\n                    return false;\n                }\n            }\n            return true;\n        };\n\n        self._bag = data;\n\n        self.put = function(/*values*/) {\n            var args_array = [];\n            for (var i = 0; i < arguments.length; i++) {\n                args_array[i] = arguments[i];\n            }\n            self._bag.push(args_array);\n        };\n\n        self.count = function(/*template*/) {\n            var cnt = 0;\n            for (var i = 0; i < self._bag.length; ++i) {\n                if (_match(arguments, self._bag[i])) {\n                    cnt++;\n                }\n            }\n            return cnt;\n        };\n\n        self.copy = function(/*template*/) {\n            for (var i = 0; i < self._bag.length; ++i) {\n                if (_match(arguments, self._bag[i])) {\n                    return self._bag[i];\n                }\n            }\n            return null;\n        };\n\n        self.copy_many = function(/*template*/) {\n            var select = [];\n            for (var i = 0; i < self._bag.length; ++i) {\n                if (_match(arguments, self._bag[i])) {\n                    select.push(self._bag[i]);\n                }\n            }\n            return select;\n        };\n\n        self.take_many = function(/*template*/) {\n            var select = [];\n            var anti_select = [];\n            for (var i = 0; i < self._bag.length; ++i) {\n                if (_match(arguments, self._bag[i])) {\n                    select.push(self._bag[i]);\n                } else {\n                    anti_select.push(self._bag[i]);\n                }\n            }\n            self._bag.length = 0;\n            self._bag.push.apply(self._bag, anti_select);\n            return select;\n        };\n    };\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/TupleSpace.js\n// module id = 13\n// module chunks = 5","/*!\r\n * jQuery toDictionary() plugin\r\n *\r\n * Version 1.2 (11 Apr 2011)\r\n *\r\n * Copyright (c) 2011 Robert Koritnik\r\n * Licensed under the terms of the MIT license\r\n * http://www.opensource.org/licenses/mit-license.php\r\n */\r\n \r\n(function ($) {\r\n \r\n    // #region String.prototype.format\r\n    // add String prototype format function if it doesn't yet exist\r\n    if ($.isFunction(String.prototype.format) === false)\r\n    {\r\n        String.prototype.format = function () {\r\n            var s = this;\r\n            var i = arguments.length;\r\n            while (i--)\r\n            {\r\n                s = s.replace(new RegExp(\"\\\\{\" + i + \"\\\\}\", \"gim\"), arguments[i]);\r\n            }\r\n            return s;\r\n        };\r\n    }\r\n    // #endregion\r\n \r\n    // #region Date.prototype.toISOString\r\n    // add Date prototype toISOString function if it doesn't yet exist\r\n    if ($.isFunction(Date.prototype.toISOString) === false)\r\n    {\r\n        Date.prototype.toISOString = function () {\r\n            var pad = function (n, places) {\r\n                n = n.toString();\r\n                for (var i = n.length; i < places; i++)\r\n                {\r\n                    n = \"0\" + n;\r\n                }\r\n                return n;\r\n            };\r\n            var d = this;\r\n            return \"{0}-{1}-{2}T{3}:{4}:{5}.{6}Z\".format(\r\n                d.getUTCFullYear(),\r\n                pad(d.getUTCMonth() + 1, 2),\r\n                pad(d.getUTCDate(), 2),\r\n                pad(d.getUTCHours(), 2),\r\n                pad(d.getUTCMinutes(), 2),\r\n                pad(d.getUTCSeconds(), 2),\r\n                pad(d.getUTCMilliseconds(), 3)\r\n            );\r\n        };\r\n    }\r\n    // #endregion\r\n \r\n    var _flatten = function (input, output, prefix, includeNulls) {\r\n        if ($.isPlainObject(input))\r\n        {\r\n            for (var p in input)\r\n            {\r\n                if (includeNulls === true || typeof (input[p]) !== \"undefined\" && input[p] !== null)\r\n                {\r\n                    _flatten(input[p], output, prefix.length > 0 ? prefix + \".\" + p : p, includeNulls);\r\n                }\r\n            }\r\n        }\r\n        else\r\n        {\r\n            if ($.isArray(input))\r\n            {\r\n                $.each(input, function (index, value) {\r\n                    _flatten(value, output, \"{0}[{1}]\".format(prefix, index));\r\n                });\r\n                return;\r\n            }\r\n            if (!$.isFunction(input))\r\n            {\r\n                if (input instanceof Date)\r\n                {\r\n                    output.push({ name: prefix, value: input.toISOString() });\r\n                }\r\n                else\r\n                {\r\n                    var val = typeof (input);\r\n                    switch (val)\r\n                    {\r\n                        case \"boolean\":\r\n                        case \"number\":\r\n                            val = input;\r\n                            break;\r\n                        case \"object\":\r\n                            // this property is null, because non-null objects are evaluated in first if branch\r\n                            if (includeNulls !== true)\r\n                            {\r\n                                return;\r\n                            }\r\n                        default:\r\n                            val = input || \"\";\r\n                    }\r\n                    output.push({ name: prefix, value: val });\r\n                }\r\n            }\r\n        }\r\n    };\r\n \r\n    $.extend({\r\n        toDictionary: function (data, prefix, includeNulls) {\r\n            /// <summary>Flattens an arbitrary JSON object to a dictionary that Asp.net MVC default model binder understands.</summary>\r\n            /// <param name=\"data\" type=\"Object\">Can either be a JSON object or a function that returns one.</data>\r\n            /// <param name=\"prefix\" type=\"String\" Optional=\"true\">Provide this parameter when you want the output names to be prefixed by something (ie. when flattening simple values).</param>\r\n            /// <param name=\"includeNulls\" type=\"Boolean\" Optional=\"true\">Set this to 'true' when you want null valued properties to be included in result (default is 'false').</param>\r\n \r\n            // get data first if provided parameter is a function\r\n            data = $.isFunction(data) ? data.call() : data;\r\n \r\n            // is second argument \"prefix\" or \"includeNulls\"\r\n            if (arguments.length === 2 && typeof (prefix) === \"boolean\")\r\n            {\r\n                includeNulls = prefix;\r\n                prefix = \"\";\r\n            }\r\n \r\n            // set \"includeNulls\" default\r\n            includeNulls = typeof (includeNulls) === \"boolean\" ? includeNulls : false;\r\n \r\n            var result = [];\r\n            _flatten(data, result, prefix || \"\", includeNulls);\r\n \r\n            return result;\r\n        }\r\n    });\r\n})(jQuery);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/jquery-todictionary/jquery-todictionary.js\n// module id = 14\n// module chunks = 5","define([\"jquery\", \"../Foundation/Common\", \"Logon\", \"Nav\", \"jockeyjs\"], function (jQuery, common, logon, nav, jockeyjs) {\n    \"use strict\";\n\n    function initRaceReplayLinks() {\n        if (common.hasAppCapability(\"NativeRaceReplay\")) {\n            jQuery('.jsaction-play-race-replay').click(function (event) {\n                event.stopPropagation();\n                event.preventDefault();\n\n                var videokey = jQuery(this).data(\"videokey\");\n\n                jockeyjs.send(\"RACEREPLAY\", { videokey: videokey }, function () { });\n            });\n        } else {\n            jQuery('.jsaction-play-race-replay').click(function (event) {\n                event.stopPropagation();\n                event.preventDefault();\n\n                var $this = jQuery(this);\n                var self = this;\n\n                function stopPlaying($container) {\n                    return function () {\n                        var owner = jQuery(\"#race-replay-video\").data('owner');\n                        if (!!owner)\n                            jQuery(owner).removeClass(\"video-playing\");\n                        jQuery(\".video-container\").empty();\n                    }\n                };\n\n\n                function createVideoElements(owner, $parent, videoUrl, videoData, reasonText, hiddenReasonText, conditionText) {\n                    var $contentContainer = jQuery(\"<div ></div>\");\n                    var $header = jQuery(\"<header />\");\n                    if (!!videoData) {\n                        $header.append(jQuery(\"<span class='race-location'>\" + videoData.RaceName + \" - \" + videoData.TrackName + \"</span>\"))\n                            .append(jQuery(\"<span class='race-date'>\" + videoData.Date + \"</span>\"));\n                    }\n\n                    $header.append(jQuery('<a href=\"#\" class=\"close-video\"><i class=\"tticon tticon-cross\"></i></a>'));\n                    $header.append(jQuery(\"<div class='clearfix'>\"));\n                    $contentContainer.append($header);\n\n                    if (reasonText != undefined) {\n                        var innerHtml = \"<div class='reason-holder'><div class='reason-container'>\";\n                        innerHtml += \"<h5>\" + reasonText + \"</h5>\";\n\n                        if (hiddenReasonText != undefined) {\n                            innerHtml += \"<div><a class='replay-entitlement-hidden-reason-toggle button flat green moreinfo' href='#'>Check Bet Total</a></div>\";\n                            innerHtml += \"<div class='replay-entitlement-hidden-reason-text' style='display:none'>\" + hiddenReasonText + \"</div>\";\n                        }\n                        innerHtml += \"</div></div>\";\n                        $contentContainer.append(jQuery(innerHtml));\n                    } else {\n                        var $video = jQuery('<video id=\"race-replay-video\" style=\"width:100%; height:auto;\" controls=\"controls\"></video>').data(\"owner\", owner);\n                        $video.html(\"<source src='\" + videoUrl + \"'></source>\");\n\n                        $video[0].load();\n                        $video[0].play();\n                        $video.show();\n\n                        $video.on(\"ended\", stopPlaying($parent));\n                        $contentContainer.append($video);\n                    }\n\n                    $header.on(\"click\", \"a\", function () {\n                        stopPlaying($parent)();\n                        return false;\n                    });\n\n                    $contentContainer.on('click', 'a.replay-entitlement-hidden-reason-toggle', function () {\n                        jQuery(this).parent().next('div.replay-entitlement-hidden-reason-text').toggle();\n                        return false;\n                    });\n\n                    $parent.append($contentContainer);\n                    window.scrollTo(0, $contentContainer.offset().top - (jQuery(window).height() / 2) + ($contentContainer.height() / 2));\n                }\n\n                var $video = jQuery(\"#race-replay-video\");\n\n                if ($video.data(\"owner\") === this) {\n                    stopPlaying()();\n                    return false;\n                }\n                stopPlaying()();\n\n                var encVideoKey = $this.data(\"enc-videokey\");\n                var metaData = $this.data(\"video-meta-data\");\n                var $videoContainer = jQuery(\"#\" + $this.data(\"video-container-id\"));\n\n                nav.ajaxPost(\"/api/videoentitlement\", jQuery.param({ encrpytedVideoKey: encVideoKey }), function (response) {\n\n                    if (response.IsEntitled) {\n                        $this.addClass(\"video-playing\");\n\n                        var videokey = response.VideoKey;\n                        var videoUrl = videokey;\n\n                        if (jockeyjs != undefined) {\n                            jockeyjs.send(\"RACEREPLAY\", { videokey: videokey }, function () { });\n                        }\n\n                        createVideoElements(self, $videoContainer, videoUrl, metaData);\n                    } else {\n                        if (response.CallToActionLoginRequired) {\n                            logon.login();\n                        } else {\n                            createVideoElements(self, $videoContainer, \"\", metaData, response.ReasonText, response.HiddenReasonText, response.Condition);\n                        }\n                    }\n                }, { error: function (status, xhr) { createVideoElements(this, $videoContainer, \"\", metaData, \"Error checking entitlement to replay.\"); } });\n                return false;\n            });\n        }\n    }\n\n    function pauseCurrenltyPlayingVideo() {\n        if (!!jQuery(\"#race-replay-video\").length && !!jQuery(\"#race-replay-video\")[0].pause) {\n            jQuery(\"#race-replay-video\")[0].pause();\n        }\n    }\n\n    return {\n        initRaceReplayLinks: initRaceReplayLinks,\n        pauseCurrenltyPlayingVideo: pauseCurrenltyPlayingVideo\n    };\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Betting-v1/RaceReplay.js\n// module id = 15\n// module chunks = 5","define(['jquery'], function(jQuery) {\n    return {\n        bind: function(controller, element) {\n            jQuery(element)\n                .find(\".blackbook-add\")\n                .unbind(\"click\")\n                .click(function(e) {\n                    var elem = this;\n                    e.stopPropagation();\n\n                    var isSelected = jQuery(elem).hasClass('selected');\n                    var starter = jQuery(elem).data(\"name\");\n                    var fixType = jQuery(elem).data(\"fixtype\");\n\n                    controller.addEntry(isSelected, starter, fixType);\n                });\n\n            jQuery(element)\n                .find(\".blackbook-add\")\n                .each(function() {\n                    var elem = this;\n                    var starter = jQuery(elem).data(\"name\");\n                    var fixType = jQuery(elem).data(\"fixtype\");\n\n                    controller.registerStarterAccessor(starter,\n                        fixType,\n                        function(value) {\n                            if (value) {\n                                jQuery(elem).addClass('selected');\n                                jQuery(elem).children('.text').text('Go to my Blackbook');\n                            } else {\n                                jQuery(elem).removeClass('selected');\n                                jQuery(elem).children('.text').text('Add to my Blackbook');\n                            }\n                        });\n                });\n        }\n    };\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/Components/Blackbook/myblackbook-add-viewbinding.js\n// module id = 16\n// module chunks = 5","/**\n * A controller class that has to be constructed and bound to a view.\n * \n * @return constructor\n */\ndefine(['jquery', '../../Navigation/Nav', '../../Services/MessageBusService', './myblackbook-service', '../../Lock'], function(jQuery, nav, msg, blackBookService, locking) {\n    return function() {\n        var self = this;\n\n        self.lockName = \"myblackbook-service\";\n        self.lock = locking.shared_lock(self.lockName);\n        self.starterAccessors = {};\n\n        self.anyAddButtons = function() {\n            return (self.starterAccessors.length != 0);\n        };\n\n        self.registerStarterAccessor = function(starter, fixType, accessor) {\n            self.starterAccessors[fixType + starter] = { starter: starter, fixType: fixType, accessor: accessor };\n        };\n\n        self.setSelected = function(starter, fixType, isSelected) {\n            var entry = self.starterAccessors[fixType + starter];\n            if (entry.accessor) {\n                entry.accessor(isSelected);\n            }\n        };\n\n        self.addEntry = function(isSelected, starter, fixType) {\n            if (!isSelected) {\n                if (starter && fixType) {\n                    var request = {\n                        starterName: starter,\n                        fixType: fixType\n                    };\n                    if (self.lock.trylock()) {\n                        nav.ajaxPost(\n                            'account/blackbook/add',\n                            jQuery.param(request),\n                            function(data) {\n                                if (data.success === true) {\n                                    self.setSelected(starter, fixType, true);\n                                    blackBookService.clear();\n                                }\n                                self.lock.unlock();\n                            },\n                            {\n                                error: function(status, xhr) {\n                                    self.lock.unlock();\n                                }\n                            });\n                    }\n                }\n            } else {\n                nav.navChange('#account/blackbook');\n            }\n        };\n\n        self.updateView = function() {\n            for (var key in self.starterAccessors) {\n                var entry = self.starterAccessors[key];\n                if (blackBookService.entryCount(entry.fixType, entry.starter)) {\n                    entry.accessor(true);\n                } else {\n                    entry.accessor(false);\n                }\n            }\n        };\n\n        self.onlogon = function() {\n            blackBookService.ready(function(service) {\n                self.updateView();\n            });\n        };\n\n        self.onlogout = function() {\n            blackBookService.clear();\n        };\n\n        self.init = function() {\n            if (self.anyAddButtons()) {\n                msg.subscribe(\"lo.login\", self.onlogon);\n            }\n            msg.subscribe(\"lo.logout\", self.onlogout);\n        };\n    }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/Components/Blackbook/myblackbook-add-viewcontroller.js\n// module id = 17\n// module chunks = 5","/*!\n * numeral.js\n * version : 1.5.3\n * author : Adam Draper\n * license : MIT\n * http://adamwdraper.github.com/Numeral-js/\n */\n\n(function () {\n\n    /************************************\n        Constants\n    ************************************/\n\n    var numeral,\n        VERSION = '1.5.3',\n        // internal storage for language config files\n        languages = {},\n        currentLanguage = 'en',\n        zeroFormat = null,\n        defaultFormat = '0,0',\n        // check for nodeJS\n        hasModule = (typeof module !== 'undefined' && module.exports);\n\n\n    /************************************\n        Constructors\n    ************************************/\n\n\n    // Numeral prototype object\n    function Numeral (number) {\n        this._value = number;\n    }\n\n    /**\n     * Implementation of toFixed() that treats floats more like decimals\n     *\n     * Fixes binary rounding issues (eg. (0.615).toFixed(2) === '0.61') that present\n     * problems for accounting- and finance-related software.\n     */\n    function toFixed (value, precision, roundingFunction, optionals) {\n        var power = Math.pow(10, precision),\n            optionalsRegExp,\n            output;\n            \n        //roundingFunction = (roundingFunction !== undefined ? roundingFunction : Math.round);\n        // Multiply up by precision, round accurately, then divide and use native toFixed():\n        output = (roundingFunction(value * power) / power).toFixed(precision);\n\n        if (optionals) {\n            optionalsRegExp = new RegExp('0{1,' + optionals + '}$');\n            output = output.replace(optionalsRegExp, '');\n        }\n\n        return output;\n    }\n\n    /************************************\n        Formatting\n    ************************************/\n\n    // determine what type of formatting we need to do\n    function formatNumeral (n, format, roundingFunction) {\n        var output;\n\n        // figure out what kind of format we are dealing with\n        if (format.indexOf('$') > -1) { // currency!!!!!\n            output = formatCurrency(n, format, roundingFunction);\n        } else if (format.indexOf('%') > -1) { // percentage\n            output = formatPercentage(n, format, roundingFunction);\n        } else if (format.indexOf(':') > -1) { // time\n            output = formatTime(n, format);\n        } else { // plain ol' numbers or bytes\n            output = formatNumber(n._value, format, roundingFunction);\n        }\n\n        // return string\n        return output;\n    }\n\n    // revert to number\n    function unformatNumeral (n, string) {\n        var stringOriginal = string,\n            thousandRegExp,\n            millionRegExp,\n            billionRegExp,\n            trillionRegExp,\n            suffixes = ['KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'],\n            bytesMultiplier = false,\n            power;\n\n        if (string.indexOf(':') > -1) {\n            n._value = unformatTime(string);\n        } else {\n            if (string === zeroFormat) {\n                n._value = 0;\n            } else {\n                if (languages[currentLanguage].delimiters.decimal !== '.') {\n                    string = string.replace(/\\./g,'').replace(languages[currentLanguage].delimiters.decimal, '.');\n                }\n\n                // see if abbreviations are there so that we can multiply to the correct number\n                thousandRegExp = new RegExp('[^a-zA-Z]' + languages[currentLanguage].abbreviations.thousand + '(?:\\\\)|(\\\\' + languages[currentLanguage].currency.symbol + ')?(?:\\\\))?)?$');\n                millionRegExp = new RegExp('[^a-zA-Z]' + languages[currentLanguage].abbreviations.million + '(?:\\\\)|(\\\\' + languages[currentLanguage].currency.symbol + ')?(?:\\\\))?)?$');\n                billionRegExp = new RegExp('[^a-zA-Z]' + languages[currentLanguage].abbreviations.billion + '(?:\\\\)|(\\\\' + languages[currentLanguage].currency.symbol + ')?(?:\\\\))?)?$');\n                trillionRegExp = new RegExp('[^a-zA-Z]' + languages[currentLanguage].abbreviations.trillion + '(?:\\\\)|(\\\\' + languages[currentLanguage].currency.symbol + ')?(?:\\\\))?)?$');\n\n                // see if bytes are there so that we can multiply to the correct number\n                for (power = 0; power <= suffixes.length; power++) {\n                    bytesMultiplier = (string.indexOf(suffixes[power]) > -1) ? Math.pow(1024, power + 1) : false;\n\n                    if (bytesMultiplier) {\n                        break;\n                    }\n                }\n\n                // do some math to create our number\n                n._value = ((bytesMultiplier) ? bytesMultiplier : 1) * ((stringOriginal.match(thousandRegExp)) ? Math.pow(10, 3) : 1) * ((stringOriginal.match(millionRegExp)) ? Math.pow(10, 6) : 1) * ((stringOriginal.match(billionRegExp)) ? Math.pow(10, 9) : 1) * ((stringOriginal.match(trillionRegExp)) ? Math.pow(10, 12) : 1) * ((string.indexOf('%') > -1) ? 0.01 : 1) * (((string.split('-').length + Math.min(string.split('(').length-1, string.split(')').length-1)) % 2)? 1: -1) * Number(string.replace(/[^0-9\\.]+/g, ''));\n\n                // round if we are talking about bytes\n                n._value = (bytesMultiplier) ? Math.ceil(n._value) : n._value;\n            }\n        }\n        return n._value;\n    }\n\n    function formatCurrency (n, format, roundingFunction) {\n        var symbolIndex = format.indexOf('$'),\n            openParenIndex = format.indexOf('('),\n            minusSignIndex = format.indexOf('-'),\n            space = '',\n            spliceIndex,\n            output;\n\n        // check for space before or after currency\n        if (format.indexOf(' $') > -1) {\n            space = ' ';\n            format = format.replace(' $', '');\n        } else if (format.indexOf('$ ') > -1) {\n            space = ' ';\n            format = format.replace('$ ', '');\n        } else {\n            format = format.replace('$', '');\n        }\n\n        // format the number\n        output = formatNumber(n._value, format, roundingFunction);\n\n        // position the symbol\n        if (symbolIndex <= 1) {\n            if (output.indexOf('(') > -1 || output.indexOf('-') > -1) {\n                output = output.split('');\n                spliceIndex = 1;\n                if (symbolIndex < openParenIndex || symbolIndex < minusSignIndex){\n                    // the symbol appears before the \"(\" or \"-\"\n                    spliceIndex = 0;\n                }\n                output.splice(spliceIndex, 0, languages[currentLanguage].currency.symbol + space);\n                output = output.join('');\n            } else {\n                output = languages[currentLanguage].currency.symbol + space + output;\n            }\n        } else {\n            if (output.indexOf(')') > -1) {\n                output = output.split('');\n                output.splice(-1, 0, space + languages[currentLanguage].currency.symbol);\n                output = output.join('');\n            } else {\n                output = output + space + languages[currentLanguage].currency.symbol;\n            }\n        }\n\n        return output;\n    }\n\n    function formatPercentage (n, format, roundingFunction) {\n        var space = '',\n            output,\n            value = n._value * 100;\n\n        // check for space before %\n        if (format.indexOf(' %') > -1) {\n            space = ' ';\n            format = format.replace(' %', '');\n        } else {\n            format = format.replace('%', '');\n        }\n\n        output = formatNumber(value, format, roundingFunction);\n        \n        if (output.indexOf(')') > -1 ) {\n            output = output.split('');\n            output.splice(-1, 0, space + '%');\n            output = output.join('');\n        } else {\n            output = output + space + '%';\n        }\n\n        return output;\n    }\n\n    function formatTime (n) {\n        var hours = Math.floor(n._value/60/60),\n            minutes = Math.floor((n._value - (hours * 60 * 60))/60),\n            seconds = Math.round(n._value - (hours * 60 * 60) - (minutes * 60));\n        return hours + ':' + ((minutes < 10) ? '0' + minutes : minutes) + ':' + ((seconds < 10) ? '0' + seconds : seconds);\n    }\n\n    function unformatTime (string) {\n        var timeArray = string.split(':'),\n            seconds = 0;\n        // turn hours and minutes into seconds and add them all up\n        if (timeArray.length === 3) {\n            // hours\n            seconds = seconds + (Number(timeArray[0]) * 60 * 60);\n            // minutes\n            seconds = seconds + (Number(timeArray[1]) * 60);\n            // seconds\n            seconds = seconds + Number(timeArray[2]);\n        } else if (timeArray.length === 2) {\n            // minutes\n            seconds = seconds + (Number(timeArray[0]) * 60);\n            // seconds\n            seconds = seconds + Number(timeArray[1]);\n        }\n        return Number(seconds);\n    }\n\n    function formatNumber (value, format, roundingFunction) {\n        var negP = false,\n            signed = false,\n            optDec = false,\n            abbr = '',\n            abbrK = false, // force abbreviation to thousands\n            abbrM = false, // force abbreviation to millions\n            abbrB = false, // force abbreviation to billions\n            abbrT = false, // force abbreviation to trillions\n            abbrForce = false, // force abbreviation\n            bytes = '',\n            ord = '',\n            abs = Math.abs(value),\n            suffixes = ['B', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'],\n            min,\n            max,\n            power,\n            w,\n            precision,\n            thousands,\n            d = '',\n            neg = false;\n\n        // check if number is zero and a custom zero format has been set\n        if (value === 0 && zeroFormat !== null) {\n            return zeroFormat;\n        } else {\n            // see if we should use parentheses for negative number or if we should prefix with a sign\n            // if both are present we default to parentheses\n            if (format.indexOf('(') > -1) {\n                negP = true;\n                format = format.slice(1, -1);\n            } else if (format.indexOf('+') > -1) {\n                signed = true;\n                format = format.replace(/\\+/g, '');\n            }\n\n            // see if abbreviation is wanted\n            if (format.indexOf('a') > -1) {\n                // check if abbreviation is specified\n                abbrK = format.indexOf('aK') >= 0;\n                abbrM = format.indexOf('aM') >= 0;\n                abbrB = format.indexOf('aB') >= 0;\n                abbrT = format.indexOf('aT') >= 0;\n                abbrForce = abbrK || abbrM || abbrB || abbrT;\n\n                // check for space before abbreviation\n                if (format.indexOf(' a') > -1) {\n                    abbr = ' ';\n                    format = format.replace(' a', '');\n                } else {\n                    format = format.replace('a', '');\n                }\n\n                if (abs >= Math.pow(10, 12) && !abbrForce || abbrT) {\n                    // trillion\n                    abbr = abbr + languages[currentLanguage].abbreviations.trillion;\n                    value = value / Math.pow(10, 12);\n                } else if (abs < Math.pow(10, 12) && abs >= Math.pow(10, 9) && !abbrForce || abbrB) {\n                    // billion\n                    abbr = abbr + languages[currentLanguage].abbreviations.billion;\n                    value = value / Math.pow(10, 9);\n                } else if (abs < Math.pow(10, 9) && abs >= Math.pow(10, 6) && !abbrForce || abbrM) {\n                    // million\n                    abbr = abbr + languages[currentLanguage].abbreviations.million;\n                    value = value / Math.pow(10, 6);\n                } else if (abs < Math.pow(10, 6) && abs >= Math.pow(10, 3) && !abbrForce || abbrK) {\n                    // thousand\n                    abbr = abbr + languages[currentLanguage].abbreviations.thousand;\n                    value = value / Math.pow(10, 3);\n                }\n            }\n\n            // see if we are formatting bytes\n            if (format.indexOf('b') > -1) {\n                // check for space before\n                if (format.indexOf(' b') > -1) {\n                    bytes = ' ';\n                    format = format.replace(' b', '');\n                } else {\n                    format = format.replace('b', '');\n                }\n\n                for (power = 0; power <= suffixes.length; power++) {\n                    min = Math.pow(1024, power);\n                    max = Math.pow(1024, power+1);\n\n                    if (value >= min && value < max) {\n                        bytes = bytes + suffixes[power];\n                        if (min > 0) {\n                            value = value / min;\n                        }\n                        break;\n                    }\n                }\n            }\n\n            // see if ordinal is wanted\n            if (format.indexOf('o') > -1) {\n                // check for space before\n                if (format.indexOf(' o') > -1) {\n                    ord = ' ';\n                    format = format.replace(' o', '');\n                } else {\n                    format = format.replace('o', '');\n                }\n\n                ord = ord + languages[currentLanguage].ordinal(value);\n            }\n\n            if (format.indexOf('[.]') > -1) {\n                optDec = true;\n                format = format.replace('[.]', '.');\n            }\n\n            w = value.toString().split('.')[0];\n            precision = format.split('.')[1];\n            thousands = format.indexOf(',');\n\n            if (precision) {\n                if (precision.indexOf('[') > -1) {\n                    precision = precision.replace(']', '');\n                    precision = precision.split('[');\n                    d = toFixed(value, (precision[0].length + precision[1].length), roundingFunction, precision[1].length);\n                } else {\n                    d = toFixed(value, precision.length, roundingFunction);\n                }\n\n                w = d.split('.')[0];\n\n                if (d.split('.')[1].length) {\n                    d = languages[currentLanguage].delimiters.decimal + d.split('.')[1];\n                } else {\n                    d = '';\n                }\n\n                if (optDec && Number(d.slice(1)) === 0) {\n                    d = '';\n                }\n            } else {\n                w = toFixed(value, null, roundingFunction);\n            }\n\n            // format number\n            if (w.indexOf('-') > -1) {\n                w = w.slice(1);\n                neg = true;\n            }\n\n            if (thousands > -1) {\n                w = w.toString().replace(/(\\d)(?=(\\d{3})+(?!\\d))/g, '$1' + languages[currentLanguage].delimiters.thousands);\n            }\n\n            if (format.indexOf('.') === 0) {\n                w = '';\n            }\n\n            return ((negP && neg) ? '(' : '') + ((!negP && neg) ? '-' : '') + ((!neg && signed) ? '+' : '') + w + d + ((ord) ? ord : '') + ((abbr) ? abbr : '') + ((bytes) ? bytes : '') + ((negP && neg) ? ')' : '');\n        }\n    }\n\n    /************************************\n        Top Level Functions\n    ************************************/\n\n    numeral = function (input) {\n        if (numeral.isNumeral(input)) {\n            input = input.value();\n        } else if (input === 0 || typeof input === 'undefined') {\n            input = 0;\n        } else if (!Number(input)) {\n            input = numeral.fn.unformat(input);\n        }\n\n        return new Numeral(Number(input));\n    };\n\n    // version number\n    numeral.version = VERSION;\n\n    // compare numeral object\n    numeral.isNumeral = function (obj) {\n        return obj instanceof Numeral;\n    };\n\n    // This function will load languages and then set the global language.  If\n    // no arguments are passed in, it will simply return the current global\n    // language key.\n    numeral.language = function (key, values) {\n        if (!key) {\n            return currentLanguage;\n        }\n\n        if (key && !values) {\n            if(!languages[key]) {\n                throw new Error('Unknown language : ' + key);\n            }\n            currentLanguage = key;\n        }\n\n        if (values || !languages[key]) {\n            loadLanguage(key, values);\n        }\n\n        return numeral;\n    };\n    \n    // This function provides access to the loaded language data.  If\n    // no arguments are passed in, it will simply return the current\n    // global language object.\n    numeral.languageData = function (key) {\n        if (!key) {\n            return languages[currentLanguage];\n        }\n        \n        if (!languages[key]) {\n            throw new Error('Unknown language : ' + key);\n        }\n        \n        return languages[key];\n    };\n\n    numeral.language('en', {\n        delimiters: {\n            thousands: ',',\n            decimal: '.'\n        },\n        abbreviations: {\n            thousand: 'k',\n            million: 'm',\n            billion: 'b',\n            trillion: 't'\n        },\n        ordinal: function (number) {\n            var b = number % 10;\n            return (~~ (number % 100 / 10) === 1) ? 'th' :\n                (b === 1) ? 'st' :\n                (b === 2) ? 'nd' :\n                (b === 3) ? 'rd' : 'th';\n        },\n        currency: {\n            symbol: '$'\n        }\n    });\n\n    numeral.zeroFormat = function (format) {\n        zeroFormat = typeof(format) === 'string' ? format : null;\n    };\n\n    numeral.defaultFormat = function (format) {\n        defaultFormat = typeof(format) === 'string' ? format : '0.0';\n    };\n\n    /************************************\n        Helpers\n    ************************************/\n\n    function loadLanguage(key, values) {\n        languages[key] = values;\n    }\n\n    /************************************\n        Floating-point helpers\n    ************************************/\n\n    // The floating-point helper functions and implementation\n    // borrows heavily from sinful.js: http://guipn.github.io/sinful.js/\n\n    /**\n     * Array.prototype.reduce for browsers that don't support it\n     * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce#Compatibility\n     */\n    if ('function' !== typeof Array.prototype.reduce) {\n        Array.prototype.reduce = function (callback, opt_initialValue) {\n            'use strict';\n            \n            if (null === this || 'undefined' === typeof this) {\n                // At the moment all modern browsers, that support strict mode, have\n                // native implementation of Array.prototype.reduce. For instance, IE8\n                // does not support strict mode, so this check is actually useless.\n                throw new TypeError('Array.prototype.reduce called on null or undefined');\n            }\n            \n            if ('function' !== typeof callback) {\n                throw new TypeError(callback + ' is not a function');\n            }\n\n            var index,\n                value,\n                length = this.length >>> 0,\n                isValueSet = false;\n\n            if (1 < arguments.length) {\n                value = opt_initialValue;\n                isValueSet = true;\n            }\n\n            for (index = 0; length > index; ++index) {\n                if (this.hasOwnProperty(index)) {\n                    if (isValueSet) {\n                        value = callback(value, this[index], index, this);\n                    } else {\n                        value = this[index];\n                        isValueSet = true;\n                    }\n                }\n            }\n\n            if (!isValueSet) {\n                throw new TypeError('Reduce of empty array with no initial value');\n            }\n\n            return value;\n        };\n    }\n\n    \n    /**\n     * Computes the multiplier necessary to make x >= 1,\n     * effectively eliminating miscalculations caused by\n     * finite precision.\n     */\n    function multiplier(x) {\n        var parts = x.toString().split('.');\n        if (parts.length < 2) {\n            return 1;\n        }\n        return Math.pow(10, parts[1].length);\n    }\n\n    /**\n     * Given a variable number of arguments, returns the maximum\n     * multiplier that must be used to normalize an operation involving\n     * all of them.\n     */\n    function correctionFactor() {\n        var args = Array.prototype.slice.call(arguments);\n        return args.reduce(function (prev, next) {\n            var mp = multiplier(prev),\n                mn = multiplier(next);\n        return mp > mn ? mp : mn;\n        }, -Infinity);\n    }        \n\n\n    /************************************\n        Numeral Prototype\n    ************************************/\n\n\n    numeral.fn = Numeral.prototype = {\n\n        clone : function () {\n            return numeral(this);\n        },\n\n        format : function (inputString, roundingFunction) {\n            return formatNumeral(this, \n                  inputString ? inputString : defaultFormat, \n                  (roundingFunction !== undefined) ? roundingFunction : Math.round\n              );\n        },\n\n        unformat : function (inputString) {\n            if (Object.prototype.toString.call(inputString) === '[object Number]') { \n                return inputString; \n            }\n            return unformatNumeral(this, inputString ? inputString : defaultFormat);\n        },\n\n        value : function () {\n            return this._value;\n        },\n\n        valueOf : function () {\n            return this._value;\n        },\n\n        set : function (value) {\n            this._value = Number(value);\n            return this;\n        },\n\n        add : function (value) {\n            var corrFactor = correctionFactor.call(null, this._value, value);\n            function cback(accum, curr, currI, O) {\n                return accum + corrFactor * curr;\n            }\n            this._value = [this._value, value].reduce(cback, 0) / corrFactor;\n            return this;\n        },\n\n        subtract : function (value) {\n            var corrFactor = correctionFactor.call(null, this._value, value);\n            function cback(accum, curr, currI, O) {\n                return accum - corrFactor * curr;\n            }\n            this._value = [value].reduce(cback, this._value * corrFactor) / corrFactor;            \n            return this;\n        },\n\n        multiply : function (value) {\n            function cback(accum, curr, currI, O) {\n                var corrFactor = correctionFactor(accum, curr);\n                return (accum * corrFactor) * (curr * corrFactor) /\n                    (corrFactor * corrFactor);\n            }\n            this._value = [this._value, value].reduce(cback, 1);\n            return this;\n        },\n\n        divide : function (value) {\n            function cback(accum, curr, currI, O) {\n                var corrFactor = correctionFactor(accum, curr);\n                return (accum * corrFactor) / (curr * corrFactor);\n            }\n            this._value = [this._value, value].reduce(cback);            \n            return this;\n        },\n\n        difference : function (value) {\n            return Math.abs(numeral(this._value).subtract(value).value());\n        }\n\n    };\n\n    /************************************\n        Exposing Numeral\n    ************************************/\n\n    // CommonJS module is defined\n    if (hasModule) {\n        module.exports = numeral;\n    }\n\n    /*global ender:false */\n    if (typeof ender === 'undefined') {\n        // here, `this` means `window` in the browser, or `global` on the server\n        // add `numeral` as a global object via a string identifier,\n        // for Closure Compiler 'advanced' mode\n        this['numeral'] = numeral;\n    }\n\n    /*global define:false */\n    if (typeof define === 'function' && define.amd) {\n        define([], function () {\n            return numeral;\n        });\n    }\n}).call(this);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/vendor/numeral-1.5.3.js\n// module id = 18\n// module chunks = 5",";(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function (Math) {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var WordArray = C_lib.WordArray;\n\t    var Hasher = C_lib.Hasher;\n\t    var C_algo = C.algo;\n\n\t    // Constants table\n\t    var T = [];\n\n\t    // Compute constants\n\t    (function () {\n\t        for (var i = 0; i < 64; i++) {\n\t            T[i] = (Math.abs(Math.sin(i + 1)) * 0x100000000) | 0;\n\t        }\n\t    }());\n\n\t    /**\n\t     * MD5 hash algorithm.\n\t     */\n\t    var MD5 = C_algo.MD5 = Hasher.extend({\n\t        _doReset: function () {\n\t            this._hash = new WordArray.init([\n\t                0x67452301, 0xefcdab89,\n\t                0x98badcfe, 0x10325476\n\t            ]);\n\t        },\n\n\t        _doProcessBlock: function (M, offset) {\n\t            // Swap endian\n\t            for (var i = 0; i < 16; i++) {\n\t                // Shortcuts\n\t                var offset_i = offset + i;\n\t                var M_offset_i = M[offset_i];\n\n\t                M[offset_i] = (\n\t                    (((M_offset_i << 8)  | (M_offset_i >>> 24)) & 0x00ff00ff) |\n\t                    (((M_offset_i << 24) | (M_offset_i >>> 8))  & 0xff00ff00)\n\t                );\n\t            }\n\n\t            // Shortcuts\n\t            var H = this._hash.words;\n\n\t            var M_offset_0  = M[offset + 0];\n\t            var M_offset_1  = M[offset + 1];\n\t            var M_offset_2  = M[offset + 2];\n\t            var M_offset_3  = M[offset + 3];\n\t            var M_offset_4  = M[offset + 4];\n\t            var M_offset_5  = M[offset + 5];\n\t            var M_offset_6  = M[offset + 6];\n\t            var M_offset_7  = M[offset + 7];\n\t            var M_offset_8  = M[offset + 8];\n\t            var M_offset_9  = M[offset + 9];\n\t            var M_offset_10 = M[offset + 10];\n\t            var M_offset_11 = M[offset + 11];\n\t            var M_offset_12 = M[offset + 12];\n\t            var M_offset_13 = M[offset + 13];\n\t            var M_offset_14 = M[offset + 14];\n\t            var M_offset_15 = M[offset + 15];\n\n\t            // Working varialbes\n\t            var a = H[0];\n\t            var b = H[1];\n\t            var c = H[2];\n\t            var d = H[3];\n\n\t            // Computation\n\t            a = FF(a, b, c, d, M_offset_0,  7,  T[0]);\n\t            d = FF(d, a, b, c, M_offset_1,  12, T[1]);\n\t            c = FF(c, d, a, b, M_offset_2,  17, T[2]);\n\t            b = FF(b, c, d, a, M_offset_3,  22, T[3]);\n\t            a = FF(a, b, c, d, M_offset_4,  7,  T[4]);\n\t            d = FF(d, a, b, c, M_offset_5,  12, T[5]);\n\t            c = FF(c, d, a, b, M_offset_6,  17, T[6]);\n\t            b = FF(b, c, d, a, M_offset_7,  22, T[7]);\n\t            a = FF(a, b, c, d, M_offset_8,  7,  T[8]);\n\t            d = FF(d, a, b, c, M_offset_9,  12, T[9]);\n\t            c = FF(c, d, a, b, M_offset_10, 17, T[10]);\n\t            b = FF(b, c, d, a, M_offset_11, 22, T[11]);\n\t            a = FF(a, b, c, d, M_offset_12, 7,  T[12]);\n\t            d = FF(d, a, b, c, M_offset_13, 12, T[13]);\n\t            c = FF(c, d, a, b, M_offset_14, 17, T[14]);\n\t            b = FF(b, c, d, a, M_offset_15, 22, T[15]);\n\n\t            a = GG(a, b, c, d, M_offset_1,  5,  T[16]);\n\t            d = GG(d, a, b, c, M_offset_6,  9,  T[17]);\n\t            c = GG(c, d, a, b, M_offset_11, 14, T[18]);\n\t            b = GG(b, c, d, a, M_offset_0,  20, T[19]);\n\t            a = GG(a, b, c, d, M_offset_5,  5,  T[20]);\n\t            d = GG(d, a, b, c, M_offset_10, 9,  T[21]);\n\t            c = GG(c, d, a, b, M_offset_15, 14, T[22]);\n\t            b = GG(b, c, d, a, M_offset_4,  20, T[23]);\n\t            a = GG(a, b, c, d, M_offset_9,  5,  T[24]);\n\t            d = GG(d, a, b, c, M_offset_14, 9,  T[25]);\n\t            c = GG(c, d, a, b, M_offset_3,  14, T[26]);\n\t            b = GG(b, c, d, a, M_offset_8,  20, T[27]);\n\t            a = GG(a, b, c, d, M_offset_13, 5,  T[28]);\n\t            d = GG(d, a, b, c, M_offset_2,  9,  T[29]);\n\t            c = GG(c, d, a, b, M_offset_7,  14, T[30]);\n\t            b = GG(b, c, d, a, M_offset_12, 20, T[31]);\n\n\t            a = HH(a, b, c, d, M_offset_5,  4,  T[32]);\n\t            d = HH(d, a, b, c, M_offset_8,  11, T[33]);\n\t            c = HH(c, d, a, b, M_offset_11, 16, T[34]);\n\t            b = HH(b, c, d, a, M_offset_14, 23, T[35]);\n\t            a = HH(a, b, c, d, M_offset_1,  4,  T[36]);\n\t            d = HH(d, a, b, c, M_offset_4,  11, T[37]);\n\t            c = HH(c, d, a, b, M_offset_7,  16, T[38]);\n\t            b = HH(b, c, d, a, M_offset_10, 23, T[39]);\n\t            a = HH(a, b, c, d, M_offset_13, 4,  T[40]);\n\t            d = HH(d, a, b, c, M_offset_0,  11, T[41]);\n\t            c = HH(c, d, a, b, M_offset_3,  16, T[42]);\n\t            b = HH(b, c, d, a, M_offset_6,  23, T[43]);\n\t            a = HH(a, b, c, d, M_offset_9,  4,  T[44]);\n\t            d = HH(d, a, b, c, M_offset_12, 11, T[45]);\n\t            c = HH(c, d, a, b, M_offset_15, 16, T[46]);\n\t            b = HH(b, c, d, a, M_offset_2,  23, T[47]);\n\n\t            a = II(a, b, c, d, M_offset_0,  6,  T[48]);\n\t            d = II(d, a, b, c, M_offset_7,  10, T[49]);\n\t            c = II(c, d, a, b, M_offset_14, 15, T[50]);\n\t            b = II(b, c, d, a, M_offset_5,  21, T[51]);\n\t            a = II(a, b, c, d, M_offset_12, 6,  T[52]);\n\t            d = II(d, a, b, c, M_offset_3,  10, T[53]);\n\t            c = II(c, d, a, b, M_offset_10, 15, T[54]);\n\t            b = II(b, c, d, a, M_offset_1,  21, T[55]);\n\t            a = II(a, b, c, d, M_offset_8,  6,  T[56]);\n\t            d = II(d, a, b, c, M_offset_15, 10, T[57]);\n\t            c = II(c, d, a, b, M_offset_6,  15, T[58]);\n\t            b = II(b, c, d, a, M_offset_13, 21, T[59]);\n\t            a = II(a, b, c, d, M_offset_4,  6,  T[60]);\n\t            d = II(d, a, b, c, M_offset_11, 10, T[61]);\n\t            c = II(c, d, a, b, M_offset_2,  15, T[62]);\n\t            b = II(b, c, d, a, M_offset_9,  21, T[63]);\n\n\t            // Intermediate hash value\n\t            H[0] = (H[0] + a) | 0;\n\t            H[1] = (H[1] + b) | 0;\n\t            H[2] = (H[2] + c) | 0;\n\t            H[3] = (H[3] + d) | 0;\n\t        },\n\n\t        _doFinalize: function () {\n\t            // Shortcuts\n\t            var data = this._data;\n\t            var dataWords = data.words;\n\n\t            var nBitsTotal = this._nDataBytes * 8;\n\t            var nBitsLeft = data.sigBytes * 8;\n\n\t            // Add padding\n\t            dataWords[nBitsLeft >>> 5] |= 0x80 << (24 - nBitsLeft % 32);\n\n\t            var nBitsTotalH = Math.floor(nBitsTotal / 0x100000000);\n\t            var nBitsTotalL = nBitsTotal;\n\t            dataWords[(((nBitsLeft + 64) >>> 9) << 4) + 15] = (\n\t                (((nBitsTotalH << 8)  | (nBitsTotalH >>> 24)) & 0x00ff00ff) |\n\t                (((nBitsTotalH << 24) | (nBitsTotalH >>> 8))  & 0xff00ff00)\n\t            );\n\t            dataWords[(((nBitsLeft + 64) >>> 9) << 4) + 14] = (\n\t                (((nBitsTotalL << 8)  | (nBitsTotalL >>> 24)) & 0x00ff00ff) |\n\t                (((nBitsTotalL << 24) | (nBitsTotalL >>> 8))  & 0xff00ff00)\n\t            );\n\n\t            data.sigBytes = (dataWords.length + 1) * 4;\n\n\t            // Hash final blocks\n\t            this._process();\n\n\t            // Shortcuts\n\t            var hash = this._hash;\n\t            var H = hash.words;\n\n\t            // Swap endian\n\t            for (var i = 0; i < 4; i++) {\n\t                // Shortcut\n\t                var H_i = H[i];\n\n\t                H[i] = (((H_i << 8)  | (H_i >>> 24)) & 0x00ff00ff) |\n\t                       (((H_i << 24) | (H_i >>> 8))  & 0xff00ff00);\n\t            }\n\n\t            // Return final computed hash\n\t            return hash;\n\t        },\n\n\t        clone: function () {\n\t            var clone = Hasher.clone.call(this);\n\t            clone._hash = this._hash.clone();\n\n\t            return clone;\n\t        }\n\t    });\n\n\t    function FF(a, b, c, d, x, s, t) {\n\t        var n = a + ((b & c) | (~b & d)) + x + t;\n\t        return ((n << s) | (n >>> (32 - s))) + b;\n\t    }\n\n\t    function GG(a, b, c, d, x, s, t) {\n\t        var n = a + ((b & d) | (c & ~d)) + x + t;\n\t        return ((n << s) | (n >>> (32 - s))) + b;\n\t    }\n\n\t    function HH(a, b, c, d, x, s, t) {\n\t        var n = a + (b ^ c ^ d) + x + t;\n\t        return ((n << s) | (n >>> (32 - s))) + b;\n\t    }\n\n\t    function II(a, b, c, d, x, s, t) {\n\t        var n = a + (c ^ (b | ~d)) + x + t;\n\t        return ((n << s) | (n >>> (32 - s))) + b;\n\t    }\n\n\t    /**\n\t     * Shortcut function to the hasher's object interface.\n\t     *\n\t     * @param {WordArray|string} message The message to hash.\n\t     *\n\t     * @return {WordArray} The hash.\n\t     *\n\t     * @static\n\t     *\n\t     * @example\n\t     *\n\t     *     var hash = CryptoJS.MD5('message');\n\t     *     var hash = CryptoJS.MD5(wordArray);\n\t     */\n\t    C.MD5 = Hasher._createHelper(MD5);\n\n\t    /**\n\t     * Shortcut function to the HMAC's object interface.\n\t     *\n\t     * @param {WordArray|string} message The message to hash.\n\t     * @param {WordArray|string} key The secret key.\n\t     *\n\t     * @return {WordArray} The HMAC.\n\t     *\n\t     * @static\n\t     *\n\t     * @example\n\t     *\n\t     *     var hmac = CryptoJS.HmacMD5(message, key);\n\t     */\n\t    C.HmacMD5 = Hasher._createHmacHelper(MD5);\n\t}(Math));\n\n\n\treturn CryptoJS.MD5;\n\n}));\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/crypto-js/md5.js\n// module id = 19\n// module chunks = 5","/*** IMPORTS FROM imports-loader ***/\n\n\n/*\r\n * Swipe 2.0\r\n *\r\n * Brad Birdsall\r\n * Copyright 2013, MIT License\r\n *\r\n*/\r\n\r\nfunction Swipe(container, options) {\r\n\r\n  \"use strict\";\r\n\r\n  // utilities\r\n  var noop = function() {}; // simple no operation function\r\n  var offloadFn = function(fn) { setTimeout(fn || noop, 0) }; // offload a functions execution\r\n\r\n  // check browser capabilities\r\n  var browser = {\r\n    addEventListener: !!window.addEventListener,\r\n    touch: ('ontouchstart' in window) || window.DocumentTouch && document instanceof DocumentTouch,\r\n    transitions: (function(temp) {\r\n      var props = ['transitionProperty', 'WebkitTransition', 'MozTransition', 'OTransition', 'msTransition'];\r\n      for ( var i in props ) if (temp.style[ props[i] ] !== undefined) return true;\r\n      return false;\r\n    })(document.createElement('swipe'))\r\n  };\r\n\r\n  // quit if no root element\r\n  if (!container) return;\r\n  var element = container.children[0];\r\n  var slides, slidePos, width, length;\r\n  options = options || {};\r\n  var index = parseInt(options.startSlide, 10) || 0;\r\n  var speed = options.speed || 300;\r\n  options.continuous = options.continuous !== undefined ? options.continuous : true;\r\n\r\n  function setup() {\r\n    \r\n    // cache slides\r\n    slides = element.children;\r\n    length = slides.length;\r\n\r\n    // set continuous to false if only one slide\r\n    if (slides.length < 2) options.continuous = false;\r\n     \r\n    //special case if two slides\r\n    if (browser.transitions && options.continuous && slides.length < 3) {\r\n        element.appendChild(slides[0].cloneNode(true));\r\n        element.appendChild(element.children[1].cloneNode(true));\r\n        slides = element.children;\r\n    }\r\n\r\n    // create an array to store current positions of each slide\r\n    slidePos = new Array(slides.length);\r\n\r\n    // determine width of each slide\r\n    width = container.getBoundingClientRect().width || container.offsetWidth;\r\n\r\n    element.style.width = (slides.length * width) + 'px';\r\n\r\n    // stack elements\r\n    var pos = slides.length;\r\n    while(pos--) {\r\n\r\n      var slide = slides[pos];\r\n\r\n      slide.style.width = width + 'px';\r\n      slide.setAttribute('data-index', pos);\r\n\r\n      if (browser.transitions) {\r\n        slide.style.left = (pos * -width) + 'px';\r\n        move(pos, index > pos ? -width : (index < pos ? width : 0), 0);\r\n      }\r\n\r\n    }\r\n\r\n    // reposition elements before and after index\r\n    if (options.continuous && browser.transitions) {\r\n      move(circle(index-1), -width, 0);\r\n      move(circle(index+1), width, 0);\r\n    }\r\n\r\n    if (!browser.transitions) element.style.left = (index * -width) + 'px';\r\n\r\n    container.style.visibility = 'visible';\r\n\r\n  }\r\n\r\n  function prev() {\r\n\r\n    if (options.continuous) slide(index-1);\r\n    else if (index) slide(index-1);\r\n\r\n  }\r\n\r\n  function next() {\r\n\r\n    if (options.continuous) slide(index+1);\r\n    else if (index < slides.length - 1) slide(index+1);\r\n\r\n  }\r\n\r\n  function circle(index) {\r\n\r\n    // a simple positive modulo using slides.length\r\n    return (slides.length + (index % slides.length)) % slides.length;\r\n\r\n  }\r\n\r\n  function slide(to, slideSpeed) {\r\n\r\n    // do nothing if already on requested slide\r\n    if (index == to) return;\r\n\r\n    if (browser.transitions) {\r\n\r\n      var direction = Math.abs(index-to) / (index-to); // 1: backward, -1: forward\r\n\r\n      // get the actual position of the slide\r\n      if (options.continuous) {\r\n        var natural_direction = direction;\r\n        direction = -slidePos[circle(to)] / width;\r\n\r\n        // if going forward but to < index, use to = slides.length + to\r\n        // if going backward but to > index, use to = -slides.length + to\r\n        if (direction !== natural_direction) to =  -direction * slides.length + to;\r\n\r\n      }\r\n\r\n      var diff = Math.abs(index-to) - 1;\r\n\r\n      // move all the slides between index and to in the right direction\r\n      while (diff--) move( circle((to > index ? to : index) - diff - 1), width * direction, 0);\r\n\r\n      to = circle(to);\r\n\r\n      move(index, width * direction, slideSpeed || speed);\r\n      move(to, 0, slideSpeed || speed);\r\n\r\n      if (options.continuous) move(circle(to - direction), -(width * direction), 0); // we need to get the next in place\r\n\r\n    } else {\r\n\r\n      to = circle(to);\r\n      animate(index * -width, to * -width, slideSpeed || speed);\r\n      //no fallback for a circular continuous if the browser does not accept transitions\r\n    }\r\n\r\n    index = to;\r\n    offloadFn(options.callback && options.callback(index, slides[index]));\r\n  }\r\n\r\n  function move(index, dist, speed) {\r\n\r\n    translate(index, dist, speed);\r\n    slidePos[index] = dist;\r\n\r\n  }\r\n\r\n  function translate(index, dist, speed) {\r\n\r\n    var slide = slides[index];\r\n    var style = slide && slide.style;\r\n\r\n    if (!style) return;\r\n\r\n    style.webkitTransitionDuration =\r\n    style.MozTransitionDuration =\r\n    style.msTransitionDuration =\r\n    style.OTransitionDuration =\r\n    style.transitionDuration = speed + 'ms';\r\n\r\n    style.webkitTransform = 'translate(' + dist + 'px,0)' + 'translateZ(0)';\r\n    style.msTransform =\r\n    style.MozTransform =\r\n    style.OTransform = 'translateX(' + dist + 'px)';\r\n\r\n  }\r\n\r\n  function animate(from, to, speed) {\r\n\r\n    // if not an animation, just reposition\r\n    if (!speed) {\r\n\r\n      element.style.left = to + 'px';\r\n      return;\r\n\r\n    }\r\n\r\n    var start = +new Date;\r\n\r\n    var timer = setInterval(function() {\r\n\r\n      var timeElap = +new Date - start;\r\n\r\n      if (timeElap > speed) {\r\n\r\n        element.style.left = to + 'px';\r\n\r\n        if (delay) begin();\r\n\r\n        options.transitionEnd && options.transitionEnd.call(event, index, slides[index]);\r\n\r\n        clearInterval(timer);\r\n        return;\r\n\r\n      }\r\n\r\n      element.style.left = (( (to - from) * (Math.floor((timeElap / speed) * 100) / 100) ) + from) + 'px';\r\n\r\n    }, 4);\r\n\r\n  }\r\n\r\n  // setup auto slideshow\r\n  var delay = options.auto || 0;\r\n  var interval;\r\n\r\n  function begin() {\r\n\r\n    interval = setTimeout(next, delay);\r\n\r\n  }\r\n\r\n  function stop() {\r\n\r\n    delay = 0;\r\n    clearTimeout(interval);\r\n\r\n  }\r\n\r\n\r\n  // setup initial vars\r\n  var start = {};\r\n  var delta = {};\r\n  var isScrolling;\r\n\r\n  // setup event capturing\r\n  var events = {\r\n\r\n    handleEvent: function(event) {\r\n\r\n      switch (event.type) {\r\n        case 'touchstart': this.start(event); break;\r\n        case 'touchmove': this.move(event); break;\r\n        case 'touchend': offloadFn(this.end(event)); break;\r\n        case 'webkitTransitionEnd':\r\n        case 'msTransitionEnd':\r\n        case 'oTransitionEnd':\r\n        case 'otransitionend':\r\n        case 'transitionend': offloadFn(this.transitionEnd(event)); break;\r\n        case 'resize': offloadFn(setup); break;\r\n      }\r\n\r\n      if (options.stopPropagation) event.stopPropagation();\r\n\r\n    },\r\n    start: function(event) {\r\n\r\n      var touches = event.touches[0];\r\n\r\n      // measure start values\r\n      start = {\r\n\r\n        // get initial touch coords\r\n        x: touches.pageX,\r\n        y: touches.pageY,\r\n\r\n        // store time to determine touch duration\r\n        time: +new Date\r\n\r\n      };\r\n\r\n      // used for testing first move event\r\n      isScrolling = undefined;\r\n\r\n      // reset delta and end measurements\r\n      delta = {};\r\n\r\n      // attach touchmove and touchend listeners\r\n      element.addEventListener('touchmove', this, false);\r\n      element.addEventListener('touchend', this, false);\r\n\r\n    },\r\n    move: function(event) {\r\n\r\n      // ensure swiping with one touch and not pinching\r\n      if ( event.touches.length > 1 || event.scale && event.scale !== 1) return\r\n\r\n      if (options.disableScroll) event.preventDefault();\r\n\r\n      var touches = event.touches[0];\r\n\r\n      // measure change in x and y\r\n      delta = {\r\n        x: touches.pageX - start.x,\r\n        y: touches.pageY - start.y\r\n      }\r\n\r\n      // determine if scrolling test has run - one time test\r\n      if ( typeof isScrolling == 'undefined') {\r\n        isScrolling = !!( isScrolling || Math.abs(delta.x) < Math.abs(delta.y) );\r\n      }\r\n\r\n      // if user is not trying to scroll vertically\r\n      if (!isScrolling) {\r\n\r\n        // prevent native scrolling\r\n        event.preventDefault();\r\n\r\n        // stop slideshow\r\n        stop();\r\n\r\n        // increase resistance if first or last slide\r\n        if (options.continuous) { // we don't add resistance at the end\r\n\r\n          translate(circle(index-1), delta.x + slidePos[circle(index-1)], 0);\r\n          translate(index, delta.x + slidePos[index], 0);\r\n          translate(circle(index+1), delta.x + slidePos[circle(index+1)], 0);\r\n\r\n        } else {\r\n\r\n          delta.x =\r\n            delta.x /\r\n              ( (!index && delta.x > 0               // if first slide and sliding left\r\n                || index == slides.length - 1        // or if last slide and sliding right\r\n                && delta.x < 0                       // and if sliding at all\r\n              ) ?\r\n              ( Math.abs(delta.x) / width + 1 )      // determine resistance level\r\n              : 1 );                                 // no resistance if false\r\n\r\n          // translate 1:1\r\n          translate(index-1, delta.x + slidePos[index-1], 0);\r\n          translate(index, delta.x + slidePos[index], 0);\r\n          translate(index+1, delta.x + slidePos[index+1], 0);\r\n        }\r\n\r\n      }\r\n\r\n    },\r\n    end: function(event) {\r\n\r\n      // measure duration\r\n      var duration = +new Date - start.time;\r\n\r\n      // determine if slide attempt triggers next/prev slide\r\n      var isValidSlide =\r\n            Number(duration) < 250               // if slide duration is less than 250ms\r\n            && Math.abs(delta.x) > 20            // and if slide amt is greater than 20px\r\n            || Math.abs(delta.x) > width/2;      // or if slide amt is greater than half the width\r\n\r\n      // determine if slide attempt is past start and end\r\n      var isPastBounds =\r\n            !index && delta.x > 0                            // if first slide and slide amt is greater than 0\r\n            || index == slides.length - 1 && delta.x < 0;    // or if last slide and slide amt is less than 0\r\n\r\n      if (options.continuous) isPastBounds = false;\r\n\r\n      // determine direction of swipe (true:right, false:left)\r\n      var direction = delta.x < 0;\r\n\r\n      // if not scrolling vertically\r\n      if (!isScrolling) {\r\n\r\n        if (isValidSlide && !isPastBounds) {\r\n\r\n          if (direction) {\r\n\r\n            if (options.continuous) { // we need to get the next in this direction in place\r\n\r\n              move(circle(index-1), -width, 0);\r\n              move(circle(index+2), width, 0);\r\n\r\n            } else {\r\n              move(index-1, -width, 0);\r\n            }\r\n\r\n            move(index, slidePos[index]-width, speed);\r\n            move(circle(index+1), slidePos[circle(index+1)]-width, speed);\r\n            index = circle(index+1);\r\n\r\n          } else {\r\n            if (options.continuous) { // we need to get the next in this direction in place\r\n\r\n              move(circle(index+1), width, 0);\r\n              move(circle(index-2), -width, 0);\r\n\r\n            } else {\r\n              move(index+1, width, 0);\r\n            }\r\n\r\n            move(index, slidePos[index]+width, speed);\r\n            move(circle(index-1), slidePos[circle(index-1)]+width, speed);\r\n            index = circle(index-1);\r\n\r\n          }\r\n\r\n          options.callback && options.callback(index, slides[index]);\r\n\r\n        } else {\r\n\r\n          if (options.continuous) {\r\n\r\n            move(circle(index-1), -width, speed);\r\n            move(index, 0, speed);\r\n            move(circle(index+1), width, speed);\r\n\r\n          } else {\r\n\r\n            move(index-1, -width, speed);\r\n            move(index, 0, speed);\r\n            move(index+1, width, speed);\r\n          }\r\n\r\n        }\r\n\r\n      }\r\n\r\n      // kill touchmove and touchend event listeners until touchstart called again\r\n      element.removeEventListener('touchmove', events, false)\r\n      element.removeEventListener('touchend', events, false)\r\n\r\n    },\r\n    transitionEnd: function(event) {\r\n\r\n      if (parseInt(event.target.getAttribute('data-index'), 10) == index) {\r\n\r\n        if (delay) begin();\r\n\r\n        options.transitionEnd && options.transitionEnd.call(event, index, slides[index]);\r\n\r\n      }\r\n\r\n    }\r\n\r\n  }\r\n\r\n  // trigger setup\r\n  setup();\r\n\r\n  // start auto slideshow if applicable\r\n  if (delay) begin();\r\n\r\n\r\n  // add event listeners\r\n  if (browser.addEventListener) {\r\n\r\n    // set touchstart event on element\r\n    if (browser.touch) element.addEventListener('touchstart', events, false);\r\n\r\n    if (browser.transitions) {\r\n      element.addEventListener('webkitTransitionEnd', events, false);\r\n      element.addEventListener('msTransitionEnd', events, false);\r\n      element.addEventListener('oTransitionEnd', events, false);\r\n      element.addEventListener('otransitionend', events, false);\r\n      element.addEventListener('transitionend', events, false);\r\n    }\r\n\r\n    // set resize event on window\r\n    window.addEventListener('resize', events, false);\r\n\r\n  } else {\r\n\r\n    window.onresize = function () { setup() }; // to play nice with old IE\r\n\r\n  }\r\n\r\n  // expose the Swipe API\r\n  return {\r\n    setup: function() {\r\n\r\n      setup();\r\n\r\n    },\r\n    slide: function(to, speed) {\r\n\r\n      // cancel slideshow\r\n      stop();\r\n\r\n      slide(to, speed);\r\n\r\n    },\r\n    prev: function() {\r\n\r\n      // cancel slideshow\r\n      stop();\r\n\r\n      prev();\r\n\r\n    },\r\n    next: function() {\r\n\r\n      // cancel slideshow\r\n      stop();\r\n\r\n      next();\r\n\r\n    },\r\n    stop: function() {\r\n\r\n      // cancel slideshow\r\n      stop();\r\n\r\n    },\r\n    getPos: function() {\r\n\r\n      // return current index position\r\n      return index;\r\n\r\n    },\r\n    getNumSlides: function() {\r\n\r\n      // return total number of slides\r\n      return length;\r\n    },\r\n    kill: function() {\r\n\r\n      // cancel slideshow\r\n      stop();\r\n\r\n      // reset element\r\n      element.style.width = '';\r\n      element.style.left = '';\r\n\r\n      // reset slides\r\n      var pos = slides.length;\r\n      while(pos--) {\r\n\r\n        var slide = slides[pos];\r\n        slide.style.width = '';\r\n        slide.style.left = '';\r\n\r\n        if (browser.transitions) translate(pos, 0, 0);\r\n\r\n      }\r\n\r\n      // removed event listeners\r\n      if (browser.addEventListener) {\r\n\r\n        // remove current event listeners\r\n        element.removeEventListener('touchstart', events, false);\r\n        element.removeEventListener('webkitTransitionEnd', events, false);\r\n        element.removeEventListener('msTransitionEnd', events, false);\r\n        element.removeEventListener('oTransitionEnd', events, false);\r\n        element.removeEventListener('otransitionend', events, false);\r\n        element.removeEventListener('transitionend', events, false);\r\n        window.removeEventListener('resize', events, false);\r\n\r\n      }\r\n      else {\r\n\r\n        window.onresize = null;\r\n\r\n      }\r\n\r\n    }\r\n  }\r\n\r\n}\r\n\r\n\r\nif ( window.jQuery || window.Zepto || $ ) {\r\n  (function($) {\r\n    $.fn.Swipe = function(params) {\r\n      return this.each(function() {\r\n        $(this).data('Swipe', new Swipe($(this)[0], params));\r\n      });\r\n    }\r\n  })( window.jQuery || window.Zepto || $ )\r\n}\r\n\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/vendor/swipe-2.0.js\n// module id = 20\n// module chunks = 5","/**\n * AMD module with legacy logging-related services that attach themselves to the window namespace.\n */\ndefine(['jquery'], function(jQuery) {\n    window.AjaxLoggingService = function(window, enabledEvents) {\n\n        var _debugEnabled = enabledEvents.indexOf('Debug') != -1;\n        var _infoEnabled = enabledEvents.indexOf('Info') != -1;\n        var _exceptionEnabled = enabledEvents.indexOf('Exception') != -1;\n\n\n        var _getTrackingId = function() {\n            // reuse the betslip tracking id\n            try {\n                var store = new BetWalletStore();\n                return store.get_visitor_tracking_id();\n            } catch (e) {\n                return null;\n            }\n        };\n\n        var _logEvent = function(eventType, message, details) {\n            var metaData = { WindowHref: window.location.href, TrackingId: _getTrackingId() };\n            var requestData = { EventType: eventType, Message: message, Details: details, MetaData: metaData };\n            if (eventType === 'Debug') {\n                console.log(message);\n            }\n            jQuery.ajax({\n                type: 'POST',\n                url: 'api/javascriptlogging/logevent',\n                data: requestData,\n                mimeType: 'text/html'\n            });\n        };\n\n        var logException = function(message, details) {\n            if (_exceptionEnabled) {\n                _logEvent('Exception', message, details);\n            }\n        };\n\n        var logInfo = function(message, details) {\n            if (_infoEnabled) {\n                _logEvent('Info', message, details);\n            }\n        };\n\n        var logDebug = function(message, details) {\n            if (_debugEnabled) {\n                _logEvent('Debug', message, details);\n            }\n        };\n\n        return {\n            logException: logException,\n            logInfo: logInfo,\n            logDebug: logDebug\n        };\n\n    };\n\n    window.NullLoggingService = function(jQuery) {\n\n        var logException = function(message, details) {\n        };\n\n        var logInfo = function(message, details) {\n        };\n\n        var logDebug = function(message, details) {\n        };\n\n        return {\n            logException: logException,\n            logInfo: logInfo,\n            logDebug: logDebug\n        };\n\n    };\n\n    window.LoggingService = function() {\n        var config = window._LOGGING_SERVICE_CONFIG_;\n\n        var loggingService = new NullLoggingService();\n\n        if (config.FeatureEnabled) {\n            loggingService = new AjaxLoggingService(window, config.EnabledLoggingEvents);\n            (function() {\n                var errorHandler = new ErrorHandler(window, loggingService);\n                errorHandler.registerForWindowOnError();\n            })();\n        }\n\n        return loggingService;\n    }\n\n    window.ErrorHandler = function(window, loggingService) {\n\n        var oldOnError = null;\n\n        var jsErrorHandler = function(errorMsg, url, lineNumber, colNumber, errorObj) {\n            try {\n                var details = { url: url, lineNumber: lineNumber, colNumber: colNumber, errorObj: errorObj };\n                loggingService.logException(errorMsg, JSON.stringify(details));\n            } catch (e) {\n                // don't propagate exceptions fired from logging code\n            }\n\n            if (oldOnError) {\n                return oldOnError(errorMsg, url, lineNumber, colNumber, errorObj);\n            }\n\n            return false;\n        };\n\n        var registerForWindowOnError = function() {\n            oldOnError = window.onerror;\n            window.onerror = jsErrorHandler;\n        };\n\n        return {\n            registerForWindowOnError: registerForWindowOnError\n        };\n    };\n\n    return new window.LoggingService;\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/Services/LoggingService.js\n// module id = 22\n// module chunks = 5 7","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = Object.setPrototypeOf ||\r\n    ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n    function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = Object.assign || function __assign(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n    }\r\n    return t;\r\n};\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n};\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n};\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator.throw(value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t;\r\n    return { next: verb(0), \"throw\": verb(1), \"return\": verb(2) };\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [0, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/tslib/tslib.es6.js\n// module id = 23\n// module chunks = 5","/*!\n * JavaScript Cookie v2.1.3\n * https://github.com/js-cookie/js-cookie\n *\n * Copyright 2006, 2015 Klaus Hartl & Fagner Brack\n * Released under the MIT license\n */\n;(function (factory) {\n\tvar registeredInModuleLoader = false;\n\tif (typeof define === 'function' && define.amd) {\n\t\tdefine(factory);\n\t\tregisteredInModuleLoader = true;\n\t}\n\tif (typeof exports === 'object') {\n\t\tmodule.exports = factory();\n\t\tregisteredInModuleLoader = true;\n\t}\n\tif (!registeredInModuleLoader) {\n\t\tvar OldCookies = window.Cookies;\n\t\tvar api = window.Cookies = factory();\n\t\tapi.noConflict = function () {\n\t\t\twindow.Cookies = OldCookies;\n\t\t\treturn api;\n\t\t};\n\t}\n}(function () {\n\tfunction extend () {\n\t\tvar i = 0;\n\t\tvar result = {};\n\t\tfor (; i < arguments.length; i++) {\n\t\t\tvar attributes = arguments[ i ];\n\t\t\tfor (var key in attributes) {\n\t\t\t\tresult[key] = attributes[key];\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tfunction init (converter) {\n\t\tfunction api (key, value, attributes) {\n\t\t\tvar result;\n\t\t\tif (typeof document === 'undefined') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Write\n\n\t\t\tif (arguments.length > 1) {\n\t\t\t\tattributes = extend({\n\t\t\t\t\tpath: '/'\n\t\t\t\t}, api.defaults, attributes);\n\n\t\t\t\tif (typeof attributes.expires === 'number') {\n\t\t\t\t\tvar expires = new Date();\n\t\t\t\t\texpires.setMilliseconds(expires.getMilliseconds() + attributes.expires * 864e+5);\n\t\t\t\t\tattributes.expires = expires;\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\tresult = JSON.stringify(value);\n\t\t\t\t\tif (/^[\\{\\[]/.test(result)) {\n\t\t\t\t\t\tvalue = result;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {}\n\n\t\t\t\tif (!converter.write) {\n\t\t\t\t\tvalue = encodeURIComponent(String(value))\n\t\t\t\t\t\t.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g, decodeURIComponent);\n\t\t\t\t} else {\n\t\t\t\t\tvalue = converter.write(value, key);\n\t\t\t\t}\n\n\t\t\t\tkey = encodeURIComponent(String(key));\n\t\t\t\tkey = key.replace(/%(23|24|26|2B|5E|60|7C)/g, decodeURIComponent);\n\t\t\t\tkey = key.replace(/[\\(\\)]/g, escape);\n\n\t\t\t\treturn (document.cookie = [\n\t\t\t\t\tkey, '=', value,\n\t\t\t\t\tattributes.expires ? '; expires=' + attributes.expires.toUTCString() : '', // use expires attribute, max-age is not supported by IE\n\t\t\t\t\tattributes.path ? '; path=' + attributes.path : '',\n\t\t\t\t\tattributes.domain ? '; domain=' + attributes.domain : '',\n\t\t\t\t\tattributes.secure ? '; secure' : ''\n\t\t\t\t].join(''));\n\t\t\t}\n\n\t\t\t// Read\n\n\t\t\tif (!key) {\n\t\t\t\tresult = {};\n\t\t\t}\n\n\t\t\t// To prevent the for loop in the first place assign an empty array\n\t\t\t// in case there are no cookies at all. Also prevents odd result when\n\t\t\t// calling \"get()\"\n\t\t\tvar cookies = document.cookie ? document.cookie.split('; ') : [];\n\t\t\tvar rdecode = /(%[0-9A-Z]{2})+/g;\n\t\t\tvar i = 0;\n\n\t\t\tfor (; i < cookies.length; i++) {\n\t\t\t\tvar parts = cookies[i].split('=');\n\t\t\t\tvar cookie = parts.slice(1).join('=');\n\n\t\t\t\tif (cookie.charAt(0) === '\"') {\n\t\t\t\t\tcookie = cookie.slice(1, -1);\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\tvar name = parts[0].replace(rdecode, decodeURIComponent);\n\t\t\t\t\tcookie = converter.read ?\n\t\t\t\t\t\tconverter.read(cookie, name) : converter(cookie, name) ||\n\t\t\t\t\t\tcookie.replace(rdecode, decodeURIComponent);\n\n\t\t\t\t\tif (this.json) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tcookie = JSON.parse(cookie);\n\t\t\t\t\t\t} catch (e) {}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (key === name) {\n\t\t\t\t\t\tresult = cookie;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!key) {\n\t\t\t\t\t\tresult[name] = cookie;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {}\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}\n\n\t\tapi.set = api;\n\t\tapi.get = function (key) {\n\t\t\treturn api.call(api, key);\n\t\t};\n\t\tapi.getJSON = function () {\n\t\t\treturn api.apply({\n\t\t\t\tjson: true\n\t\t\t}, [].slice.call(arguments));\n\t\t};\n\t\tapi.defaults = {};\n\n\t\tapi.remove = function (key, attributes) {\n\t\t\tapi(key, '', extend(attributes, {\n\t\t\t\texpires: -1\n\t\t\t}));\n\t\t};\n\n\t\tapi.withConverter = init;\n\n\t\treturn api;\n\t}\n\n\treturn init(function () {});\n}));\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/js-cookie/src/js.cookie.js\n// module id = 27\n// module chunks = 5 7","define(['amplify'], function (amplify) {\n    var AnalyticsDataLayer = function () {\n\n        this.history = new Array();\n\n        this.data = {\n            version: 1.19,\n            content: { url: '' },\n            user: { accountNumber: '', accountOperationType: '' },\n            preferences: { cashBetting: '', debug: false },\n            signUp: { applicationId: '', optIn: '', ageConfirmType: '', accountId: '', lastValidationError: null },\n            bet: {\n                id: '',\n                productType: '',  /* single | multi | accumulator */\n                construction: '', /* single | betslip */\n                placementMethod: '', /* account | cash */\n                isFirstBet: '',\n                racing: { tote: { cost: 0, numberOfTickets: 0 }, fixed: { cost: 0, numberOfTickets: 0 } },\n                sports: { tote: { cost: 0, numberOfTickets: 0 }, fixed: { cost: 0, numberOfTickets: 0 } },\n                mixed: { fixed: { cost: 0, numberOfTickets: 0 } },\n                specialOffers: []\n            },\n            deposit: { amount: 0 },\n            specialOfferSelection: null\n        };\n\n        this.keys = {\n            nav: 'nav-content-url',\n            menu: 'nav-menu',\n            login: 'login',\n            logout: 'logout',\n            cashPreferenceBaseKey: 'nav-cash-',\n            //TODO: Remove\n            cashOn: 'nav-cash-on',\n            cashOff: 'nav-cash-off',\n            //\n            exitToBaseKey: 'nav-exit-',\n            //TODO: Remove these keys once dev is complete\n            exitToFacebook: 'nav-exit-facebook',\n            exitToTwitter: 'nav-exit-twitter',\n            exitToAndroid: 'nav-exit-android',\n            exitToIos: 'nav-exit-ios',\n            exitToWebsite: 'nav-exit-website',\n            exitToAflHub: 'nav-exit-afl-hub',\n            exitToAndroidInstructions: 'nav-android-installation-instructions',\n            //End Todo\n            signupBaseKey: 'signup-',\n            signupBegin: 'signupinminutes',\n            signupSliderActivated: 'slidetogetstarted',\n            signupNameComplete: 'step1next',\n            signupEmailComplete: 'step2next',\n            signupAddressComplete: 'step3next',\n            signupAgeValidationMethodConfirmed: 'step4next',\n            signupPassportComplete: 'step5next',\n            signupDriversLicenceComplete: 'step5next',\n            signupPasswordComplete: 'step6next',\n            signupComplete: 'step7next',\n            signupValidationError: 'validation-error',\n\n            betSelected: 'bet-selected',\n            betAccountSelected: 'bet-account',\n            betAccountReview: 'bet-account-review',\n            betAccountProcessed: 'bet-account-processed',\n\n            cashBetSelected: 'bet-cash',\n            cashBetProcessed: 'bet-cash-processed',\n            cashBetUndo: 'bet-cash-undo',\n            cashBetRemoved: 'bet-cash-delete',\n            cashCleared: 'bet-cash-delete-all',\n\n            betslipBetAdded: 'bet-add',\n            betslipBetRemoved: 'betslip-remove',\n            betslipCleared: 'betslip-clear',\n            betslipAccountSelected: 'bet-account',\n            betslipAccountReview: 'bet-account-review',\n            betslipAccountProcessed: 'bet-account-processed',\n            betslipCashSelected: 'bet-cash',\n\n            mysterySelected: 'bet-selected',\n            mysteryAccountSelected: 'bet-account',\n            mysteryReview: 'bet-account-review',\n            mysteryReceipt: 'bet-account-processed',\n\n            favNumbersSelected: 'bet-selected',\n            favNumbersAccountSelected: 'bet-account',\n            favNumbersAccountReview: 'bet-account-review',\n            favNumbersAccountProcessed: 'bet-account-processed',\n\n            tippingSelected: 'bet-selected',\n            tippingAccountSelected: 'bet-account',\n            tippingAccountReview: 'bet-account-review',\n            tippingAccountProcessed: 'bet-account-processed',\n\n            multiBetAdded: 'bet-add',\n            multiBetRemoved: 'bet-remove',\n            multiCleared: 'bet-clear',\n            multiAccountSelected: 'bet-account',\n            multiAccountReview: 'bet-account-review',\n            multiAccountProcessed: 'bet-account-processed',\n\n            accumulatorSelected: 'bet-selected',\n            accumulatorAccountSelected: 'bet-account',\n            accumulatorAccountReview: 'bet-account-review',\n            accumulatorAccountProcessed: 'bet-account-processed',\n\n            accountProcessed: 'account-interaction',\n\n            depositBaseKey: 'deposit-',\n            checkInBaseKey: 'lbs-checkin-',\n            activityBaseKey: 'activity-'\n        };\n\n        this.getHistory = function () {\n            if (this.data.preferences.debug) {\n                return 'history : ' + this.history.length + ' items';\n            } else {\n                return 'history : debugging is off. Activate debugging to capture and display history';\n            }\n        };\n\n        this.addToHistory = function (event, data) {\n            if (this.data.preferences.debug) {\n                var date = new Date();\n                this.history.push({ timestamp: date, event: event, data: data });\n            }\n        };\n\n        this.resetBetData = function () {\n            this.data.bet.id = '';\n\n            this.data.bet.racing.tote.numberOfTickets = 0;\n            this.data.bet.racing.tote.cost = 0;\n            this.data.bet.racing.fixed.numberOfTickets = 0;\n            this.data.bet.racing.fixed.cost = 0;\n\n            this.data.bet.sports.tote.numberOfTickets = 0;\n            this.data.bet.sports.tote.cost = 0;\n            this.data.bet.sports.fixed.numberOfTickets = 0;\n            this.data.bet.sports.fixed.cost = 0;\n\n            this.data.bet.mixed.fixed.numberOfTickets = 0;\n            this.data.bet.mixed.fixed.cost = 0;\n\n            this.data.bet.specialOffers = [];\n        };\n\n        this.saveTrackData = function () {\n            amplify.store('AnalyticsDataLayer', this.data);\n        };\n\n        this.loadTrackData = function () {\n            var localStorage = amplify.store('AnalyticsDataLayer');\n            if (localStorage) {\n                if (localStorage.version >= this.data.version) {\n                    this.data = localStorage;\n                }\n            }\n        };\n\n        this.activateDebug = function () {\n            this.data.preferences.debug = true;\n            this.saveTrackData();\n        };\n\n        this.deactivateDebug = function () {\n            this.data.preferences.debug = false;\n            this.saveTrackData();\n        };\n\n        return {\n            history: this.history,\n            data: this.data,\n            keys: this.keys,\n            activateDebug: this.activateDebug,\n            deactivateDebug: this.deactivateDebug,\n            addToHistory: this.addToHistory,\n            getHistory: this.getHistory,\n            saveTrackData: this.saveTrackData,\n            loadTrackData: this.loadTrackData,\n            resetBetData: this.resetBetData\n        };\n    };\n\n    return new AnalyticsDataLayer();\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/Analytics/AnalyticsDataLayer.js\n// module id = 28\n// module chunks = 5 7 8","define(['./ApiService'], function (apiService) {\n    var cachedPromise = null;\n    var timeoutHandler = null;\n\n    function getFeatures() {\n        return cachedPromise || (cachedPromise = fetchFeatures());\n    }\n\n    function fetchFeatures() {\n        return apiService.fetchJsonFromApi('/api/Feature/index')\n            .then(function(activeFeatures) {\n                resetCacheTimer();\n                return activeFeatures;\n            }, function(err) {\n                clearCache();\n                throw \"API fetch call failed: \" + err.message;\n            });\n    }\n\n    function clearCache() {\n        cachedPromise = null;\n    }\n\n    function clearRefreshTimeout() {\n        clearTimeout(timeoutHandler);\n    }\n\n    function isActive(featureName) {\n        return getFeatures()\n            .then(function(result) {\n                return result.indexOf(featureName) >= 0;\n            });\n    }\n\n    function stopRefresh() {\n        clearRefreshTimeout();\n    }\n\n    function resetCacheTimer() {\n        var fiveMinutes = 5 * 60 * 1000;\n        clearTimeout(timeoutHandler);\n        timeoutHandler = setTimeout(clearCache, fiveMinutes);\n    }\n\n    return {\n        isActive: isActive,\n        clear: clearCache,\n        stopRefresh: stopRefresh\n    };\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/Services/FeatureService.js\n// module id = 30\n// module chunks = 5 7","define(['jquery', 'knockout', './Navigation/Nav', './Common', './Services/MessageBusService'], function(jQuery, ko, nav, common, msgBusService) {\n    var closeAction, successAction;\n\n    //Init\n    (function() {\n        assignEvents();\n    })();\n\n    function assignEvents() {\n        common.bindLiveEvent('click', '[data-logon-close-popup]', function() {\n            closeLoginPopup();\n            return false;\n        });\n\n        common.bindLiveEvent('click', '[data-logon-logout]', function(e) {\n            logout();\n            e.preventDefault();\n            return false;\n        });\n    }\n\n    function toggleBackground(state) {\n        return jQuery(\"#content-container, #header-container\").toggle(state);\n    };\n\n    //creates an object that defines what to do after a logon attempt\n    //NOTE: runFunction not currently used, can be added later to automatically run functions on successful logon\n    //e.g., automatically proceed to the next TOTE bet state\n    function logonAction(redirectUrl, runFunction) {\n        this.redirectUrl = redirectUrl;\n        this.runFunction = runFunction;\n        this.go = go;\n\n        function go(isLogin, accountNumber) {\n\n            if (isLogin === true) {\n                msgBusService.publish('lo.login', accountNumber);\n            } else {\n                msgBusService.publish('lo.fail');\n            }\n\n            if (this.redirectUrl !== null) {\n                nav.navChange(this.redirectUrl);\n            } else {\n                // FREEBE-20: Cannot see the OFFERS text in the My Account icon during initial login.\n                // Doing refresh after initial login\n                if (isLogin === true && nav.isHome()) {\n                    nav.refresh();\n                }\n\n                if (this.runFunction !== null) {\n                    this.runFunction();\n                }\n            }\n        }\n    }\n\n    function setSuccessAction(successUrl) {\n        successAction = new logonAction(successUrl, null);\n    }\n\n    function setCloseAction(closeUrl) {\n        closeAction = new logonAction(closeUrl, null);\n    }\n\n    //resets the logon urls so no action is taken on success or close\n    function resetActions() {\n        successAction = new logonAction(null, null);\n        closeAction = new logonAction(null, null);\n    }\n\n    //function to retrieve the current logon state and update the forgery token & logon button\n    //if forceLogon is true it will force the user to logon.\n    function ajaxLogonState(forceLogon, accountNumber) {\n\n        return jQuery.ajax({ url: '/logon/isAuthenticated' })\n                .then(function(data, status, xhr) {\n                    if (status === \"timeout\" || xhr.status === 0) {\n                        return jQuery.Deferred().reject(xhr, status, data);\n                    }\n                    return data;\n                })\n                .done(function(data) {\n                    jQuery('#anti-forgery').html(data);\n                    var loggedOn = (jQuery('#LoggedOn').val() === 'True');\n                    setLogonState(loggedOn);\n\n                    //check for data existence is because some browsers return success on some errors.\n                    if (forceLogon && data) {\n                        if (loggedOn) {\n                            hideLoginPopup();\n                            successAction.go(true, accountNumber);\n                            msgBusService.publish(\"loggedin\");\n                        } else {\n                            loadLoginPopup();\n                        }\n                    }\n                })\n                .fail(function(xhr, status, err) {\n                    hideLoginPopup();\n                    nav.ajaxError(status === \"timeout\" ? 0 : xhr.status);\n                });\n    }\n\n    function setLogonState(loggedOn) {\n        jQuery('.log-in-header').toggle(!loggedOn);\n        jQuery('.log-out-header').toggle(loggedOn);\n    }\n\n    // active click on the login button as opposed to showLoginPopup due to 403 error\n    function login() {\n        resetActions();\n        loadLoginPopup();\n    }\n\n    // A 403 error was received during the last request.\n    function handle403(requestedUrl, isGet) {\n        //If we get a 403 during a get, force a reload after we log on or redirect to home if we close the dialog.\n        if (isGet) {\n            setSuccessAction('#' + requestedUrl);\n            setCloseAction('/#');\n        }\n        loadLoginPopup();\n    }\n\n    // Shows the login dialog. \n    // A forced change password will replace the contents of the login window, so we reload the login form if it's not there.\n    function loadLoginPopup() {\n        // Set timeout is a work around for nav hiding loading even if it's callback shows it\n        // N.B showLoginPopup is called as a callback from nav.ajax403Handler\n        setTimeout(function() {\n            // setup catch so we don't show LoginPopup until new auth VM created by ajaxGet is ready  \n            msgBusService.subscribe('AUTH.onCreate', catchLoginCreateComplete);\n            nav.ajaxGet('/logon/default', function(data) {\n                toggleBackground(false);\n                jQuery('#login-window').html(data);\n                common.showPopup(jQuery('#login-window'));\n            });\n        }, 1);\n\n        setTimeout(applyIOSSlowKeyboardFix, 100);\n    }\n\n    function catchLoginCreateComplete(data) {\n        msgBusService.unsubscribe('AUTH.onCreate', catchLoginCreateComplete);\n        showLoginPopup();\n    }\n\n    function showLoginPopup() {\n        var viewModel = jQuery(\"#login-window\").data('viewModel');\n        if (viewModel) {\n            viewModel.willShow();\n        }\n\n        setLogonState(false);\n    }\n\n    function applyIOSSlowKeyboardFix() {\n        jQuery('#AccountNumber').focus();\n        jQuery('#AccountNumber').blur();\n        jQuery('#Password').focus();\n        jQuery('#Password').blur();\n    }\n\n    //Sets the logon popup back to its original state.\n    function resetLoginPopup() {\n        jQuery('#login-form h5').remove();\n        jQuery('#login-form .validation-summary-errors').remove();\n        jQuery('#login-form input#Password').val('');\n        if (!jQuery('#login-form input#RememberAccount').is(':checked')) {\n            jQuery('#login-form input#AccountNumber').val('');\n        }\n        common.setDisableState(jQuery('#login-button'), true);\n    }\n\n    function submitLogon() {\n        jQuery('form#login-form #LogonVersion').val(jQuery('#Version').val());\n        nav.ajaxPost(\n            jQuery('form#login-form').attr('action'),\n            jQuery('form#login-form').serialize(),\n            processLoginResponse,\n            {\n                error: hideLoginPopup,\n                control: jQuery('#login-button')\n            }\n        );\n    }\n\n    // Handles the response to a logon.\n    // A successful logon will return a new anti-forgery token\n    // An unsuccessful logon will return an updated form.\n    function processLoginResponse(data) {\n        var accountNumber = jQuery('input#AccountNumber').val();\n\n        ///XML Doc check necessary for Firefox, since it interprets empty strings as XML.\n        if (data !== undefined && data !== '' && !jQuery.isXMLDoc(data)) {\n            jQuery('#login-window').html(data);\n            jQuery('#login-window .overlay').css({ opacity: 0.6 });\n            jQuery('#login-window .window').css({ opacity: 1.0 });\n            //select the account number \n            if (jQuery('form#login-form').length) {\n                jQuery('input#AccountNumber').select();\n            }\n        } else {\n            ajaxLogonState(true, accountNumber);\n        }\n    }\n\n    function closeLoginPopup() {\n        closeAction.go();\n        hideLoginPopup();\n    }\n\n    function hideLoginPopup() {\n        toggleBackground(true);\n\n        var loginWindow = jQuery(\"#login-window\");\n\n        loginWindow.fadeOut('fast');\n\n        setTimeout(function () {\n            var container = document.getElementById(\"login-window-inner\");\n            if (container) {\n                ko.removeNode(container);\n            }\n        }, 500);\n    }\n\n    function logout() {\n        nav.ajaxPost(jQuery('.log-out-header').attr('href'),\n                    null,\n                    logoutSuccess);\n    }\n\n    function logoutSuccess(data) {\n        jQuery('tt-authenticate, form#login-form').remove();\n        msgBusService.publish('lo.logout');\n        ajaxLogonState();\n        nav.navChange('/#');\n    }\n\n    function initialiseEmptyPageLogin() {\n        jQuery('body#home').removeAttr('id');\n        jQuery('body').removeAttr('class');\n\n        setSuccessAction(document.URL);\n        closeAction = new logonAction(null, null);\n\n        jQuery('#login-button').click(function(e) {\n            e.preventDefault();\n            loadLoginPopup();\n        });\n\n        jQuery('.log-in-header')\n            .removeAttr('onclick')\n            .click(function(e) {\n                e.preventDefault();\n                loadLoginPopup();\n            });\n\n        jQuery('#login-window').addClass('hideSignUp');\n\n        jQuery('h1 a').removeAttr('onclick').removeAttr('href');\n\n        loadLoginPopup();\n    }\n\n    return {\n        resetActions: resetActions,\n        ajaxLogonState: ajaxLogonState,\n        hideLoginPopup: hideLoginPopup,\n        login: login,\n        closeLoginPopup: closeLoginPopup,\n        submitLogon: submitLogon,\n        handle403: handle403,\n        logout: logout,\n        showLoginPopup: loadLoginPopup,\n        initialiseEmptyPageLogin: initialiseEmptyPageLogin\n    };\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/Logon.js\n// module id = 31\n// module chunks = 5","define([\"jquery\", \"../../Navigation/Nav\", \"../../Common\", \"../../Services/MessageBusService\"], function (jQuery, nav, common, msgBusService) {\n    var states = { none: \"\", calc: \"calc\", confirm: \"confirm\", receipt: \"receipt\" };\n\n    return {\n        states: states,\n        navigateErrorToHref: navigateErrorToHref,\n        changeTippingState: changeTippingState,\n        initInfoScroll: initInfoScroll,\n        navigateToHref: navigateToHref,\n        initHomeButton: initHomeButton\n    };\n\n    function navigateErrorToHref(elem) {        \n        var action = elem.attr('href');\n        return nav.navBetError(action);\n    }\n\n    function navigateToHref(elem) {        \n        var action = elem.attr('href');\n        return nav.nav(action);\n    }\n\n    function initInfoScroll() {\n        jQuery('div.black-bubble a.information').click(function (e) {\n            e.preventDefault();\n            common.scrollTo(jQuery(jQuery(this).attr('href')), 'slow');\n        });\n    }\n\n    function initHomeButton() {\n        jQuery('.home-button').click(function () {\n            var action = jQuery('.home-button').attr('href');\n            return nav.nav(action);\n        });\n    }\n\n    function changeTippingState(newState, data) {\n\n        switch (newState) {\n            case states.calc:\n                jQuery('#selection-entry').hide();\n                jQuery('.refresh-button').hide();\n                jQuery('.hidden-calculator').show();\n                jQuery('#bet-confirm').hide().html('');\n\n                nav.overrideBack(function () {\n                    changeTippingState(states.none);\n                    return false;\n                });\n                msgBusService.publish('bet.tipping.selected');\n                break;\n\n            case states.confirm:\n                jQuery('.hidden-calculator').hide();\n                jQuery('#bet-confirm').html(data).show();\n                common.initDisplayListStyle(jQuery('#bet-confirm ul.display-list'));\n\n                nav.overrideBack(function () {\n                    changeTippingState(states.calc);\n                    return false;\n                });\n                msgBusService.publish('bet.tipping.review');\n                break;\n\n            case states.receipt:\n                jQuery('#bet-confirm').html(data).show();\n                common.initDisplayListStyle(jQuery('#bet-confirm ul.display-list'));\n                nav.hideBack();\n\n                var singleTicket = jQuery('#bet-confirm span.title:contains(\"Ticket\")').parent().find('span.data').html();\n                var tickets = [];\n                if (singleTicket) {\n                    tickets = [{ ticketNumber: singleTicket }];\n                } \n                var totalCost = jQuery('#bet-confirm span.title:contains(\"Total Cost\")').parent().find('span.data').html();\n                msgBusService.publish('bet.tipping.receipt', { tickets: tickets, totalCost: totalCost });\n                \n                break;\n\n            case states.none:\n                jQuery('#selection-entry').show();\n                jQuery('.refresh-button').show();\n                jQuery('.hidden-calculator').hide();\n                jQuery('#bet-confirm').hide().html('');\n                jQuery('#SelectionsString').val('');\n                nav.resetBack(\"Tipping\");\n                break;\n        }\n    }\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/ViewModels/ToteSports/ToteSports.js\n// module id = 33\n// module chunks = 5","module.exports = requirejs;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"requirejs\"\n// module id = 37\n// module chunks = 5","define([\"jquery\", \"../../Foundation/Navigation/Nav\", \"../../Foundation/Common\", \"../../Foundation/Services/MessageBusService\"], function (jQuery, nav, common, msgBus) {\n    var states = { none: \"\", calc: \"calc\", confirm: \"confirm\", receipt: \"receipt\" };\n\n    return {\n        states: states,\n        navigateErrorToHref: navigateErrorToHref,\n        changeTippingState: changeTippingState,\n        initInfoScroll: initInfoScroll,\n        navigateToHref: navigateToHref,\n        initHomeButton: initHomeButton\n    };\n\n    function navigateErrorToHref(elem) {        \n        var action = elem.attr('href');\n        return nav.navBetError(action);\n    }\n\n    function navigateToHref(elem) {        \n        var action = elem.attr('href');\n        return nav.nav(action);\n    }\n\n    function initInfoScroll() {\n        jQuery('div.black-bubble a.information').click(function (e) {\n            e.preventDefault();\n            common.scrollTo(jQuery(jQuery(this).attr('href')), 'slow');\n        });\n    }\n\n    function initHomeButton() {\n        jQuery('.home-button').click(function () {\n            var action = jQuery('.home-button').attr('href');\n            return nav.nav(action);\n        });\n    }\n\n    function changeTippingState(newState, data) {\n\n        switch (newState) {\n            case states.calc:\n                jQuery('#selection-entry').hide();\n                jQuery('.refresh-button').hide();\n                jQuery('.hidden-calculator').show();\n                jQuery('#bet-confirm').hide().html('');\n\n                nav.overrideBack(function () {\n                    changeTippingState(states.none);\n                    return false;\n                });\n                msgBus.publish('bet.tipping.selected');\n                break;\n\n            case states.confirm:\n                jQuery('.hidden-calculator').hide();\n                jQuery('#bet-confirm').html(data).show();\n                common.initDisplayListStyle(jQuery('#bet-confirm ul.display-list'));\n\n                nav.overrideBack(function () {\n                    changeTippingState(states.calc);\n                    return false;\n                });\n                msgBus.publish('bet.tipping.review');\n                break;\n\n            case states.receipt:\n                jQuery('#bet-confirm').html(data).show();\n                common.initDisplayListStyle(jQuery('#bet-confirm ul.display-list'));\n                nav.hideBack();\n\n                var singleTicket = jQuery('#bet-confirm span.title:contains(\"Ticket\")').parent().find('span.data').html();\n                var tickets = [];\n                if (singleTicket) {\n                    tickets = [{ ticketNumber: singleTicket }];\n                } \n                var totalCost = jQuery('#bet-confirm span.title:contains(\"Total Cost\")').parent().find('span.data').html();\n                msgBus.publish('bet.tipping.receipt', { tickets: tickets, totalCost: totalCost });\n                \n                break;\n\n            case states.none:\n                jQuery('#selection-entry').show();\n                jQuery('.refresh-button').show();\n                jQuery('.hidden-calculator').hide();\n                jQuery('#bet-confirm').hide().html('');\n                jQuery('#Selections').val('');\n                nav.resetBack(\"Tipping\");\n                break;\n        }\n    }\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Betting-v1/Tipping/Tipping.js\n// module id = 40\n// module chunks = 5","define(['../../DateProvider', './LocationService', './CheckInStore', '../MessageBusService', 'underscore'], function (dateProvider, locationService, checkinStore, msgBusService, _) {\n    return {\n        redeem: redeem,\n        wasRedeemedToday: wasRedeemedToday,\n        checkin: checkin,\n        isCheckedInToday: isCheckedInToday,\n        checkedInLocationId: checkedInLocationId,\n        checkout: checkout\n    };\n\n    function currentLocation() {\n        var location = locationService.getLocationDetails('GPSREGION');\n        if (location !== undefined && location !== null) {\n            return location.LocationId;\n        }\n        return null;\n    }\n\n    function checkedInLocation() {\n        var checkins = checkinStore.get();\n        var current = _.filter(checkins, function (x) { return x.CheckedIn === dateProvider.today().getTime() });\n        if (current && current.length > 0) {\n            return current[0];\n        } else {\n            return null;\n        }\n    }\n\n    function redeem() {\n        var locationId = checkedInLocation().LocationId;\n        if (locationId !== null) {\n            checkinStore.set(locationId, { LocationId: locationId, Redeemed: dateProvider.today().getTime() });\n            //Analytics\n            msgBusService.publish('lbs.checkin', 'redeemed');\n        }\n    }\n\n    function wasRedeemedToday() {\n        var location = checkedInLocation();\n        var redeemMilliseconds = (location !== undefined && location !== null)?location.Redeemed:0;\n        return (dateProvider.today().getTime() === redeemMilliseconds);\n    }\n\n    function checkin() {\n        var locationId = currentLocation();\n        if (locationId !== null) {\n            checkinStore.set(locationId, { LocationId: locationId, CheckedIn: dateProvider.today().getTime() });\n            //Analytics\n            msgBusService.publish('lbs.checkin', 'success');\n        }\n    }\n\n    function isCheckedInToday() {\n        return checkedInLocation() !== null;\n    }\n\n    function checkedInLocationId() {\n        var location = checkedInLocation();\n        if (location !== null) {\n            return location.LocationId;\n        } else {\n            return '';\n        }\n    }\n\n    function checkout() {\n        var locationId = checkedInLocationId();\n        if (locationId !== '') {\n            checkinStore.set(locationId, { LocationId: locationId, CheckedIn: 0 });\n        }\n    }\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/Services/Location/CheckInService.js\n// module id = 41\n// module chunks = 5","define([], function() {\n    \"use strict\";\n\n    function fetchFromApi(url) {\n        console.log(\"ApiService.fetchFromApi\", url);\n        \n        if (\"fetch\" in window) {\n            return window.fetch(url).then(function(response) {\n                if (!response.ok) {\n                    throw new Error(\"Fetch failed. Error code: \" + response.status);\n                }\n\n                return response;\n            });\n        } else {\n            throw new Error(\"Fetch API is not supported\");\n        }\n    }\n\n\n    function fetchTextFromApi(url) {\n        return fetchFromApi(url).then(function(response) {\n            return response.text();\n        });\n    }\n\n\n    function fetchViewFromApi(url) {\n        return fetchFromApi(url);\n    }\n\n\n    function fetchJsonFromApi(url) {\n        return fetchFromApi(url).then(function(response) {\n            return response.json();\n        });\n    }\n\n\n    function fetchXmlFromApi(url) {\n        return fetchTextFromApi(url).then(function(bodyPromise) {\n            bodyPromise.then(function(xmlStr) {\n                if (\"DOMParser\" in window) {\n                    return new window.DOMParser().parseFromString(xmlStr, \"text/xml\");\n                } else {\n                    throw new Error(\"No XML parser detected\");\n                }\n            });\n        });\n    }\n\n\n    function fetchXmlFromApiAsString(url) {\n        return fetchXmlFromApi(url).then(function(xmlStr) {\n            return xmlStr.firstChild.textContent;\n        });\n    }\n\n\n    function fetchModuleFromApi(url) {\n        return fetchTextFromApi(url).then(function(js) {\n            return eval(js);\n        });\n    }\n\n\n    function injectApiResponse(responseHtml) {\n        var container = document.getElementById(\"main-container\");\n\n        if (container) {\n            container.innerHTML = responseHtml;\n\n            var nodes = container.querySelectorAll(\"script\");\n\n            [].forEach.call(nodes, function(node) {\n                try {\n                    eval(node.textContent);\n                } catch (err) {\n                    throw new Error(\"Script eval failed\");\n                }\n            });\n        } else {\n            throw new Error(\"Main container does not exist\");\n        }\n    }\n\n\n    function publishToApi(url, data) {\n        console.log(\"ApiService.publishToApi\", url, data);\n        \n        if (\"fetch\" in window) {\n            var myHeaders = new Headers();\n            myHeaders.append(\"Content-Type\", \"application/x-www-form-urlencoded\");\n\n            return window.fetch(url, {\n                headers: myHeaders,\n                body: data\n            });\n        } else {\n            throw new Error(\"Fetch API is not supported\");\n        }\n    }\n\n\n    return {\n        fetchFromApi: fetchFromApi,\n        fetchTextFromApi: fetchTextFromApi,\n        fetchViewFromApi: fetchViewFromApi,\n        fetchXmlFromApi: fetchXmlFromApi,\n        fetchXmlFromApiAsString: fetchXmlFromApiAsString,\n        fetchJsonFromApi: fetchJsonFromApi,\n        fetchModuleFromApi: fetchModuleFromApi,\n        injectApiResponse: injectApiResponse,\n        publishToApi: publishToApi\n    }\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/Services/ApiService.js\n// module id = 44\n// module chunks = 5 7","define([], function() {\n    return {\n        truncate: truncate,\n        combinations: combinations,\n        toMoney: toMoney,\n    }\n\n    function toMoney(value, decimalNumbers, currencySymbol, decimalSymbol, thousandsSymbol) {\n        var n = value,\n            c = isNaN(decimalNumbers = Math.abs(decimalNumbers)) ? 2 : decimalNumbers,\n            d = decimalSymbol == undefined ? \".\" : decimalSymbol,\n            t = thousandsSymbol == undefined ? \",\" : thousandsSymbol,\n            m = currencySymbol == undefined ? \"$\" : currencySymbol,\n            s = n < 0 ? \"-\" : \"\",\n            i = parseInt(n = Math.abs(+n || 0).toFixed(c)) + \"\",\n            j = (j = i.length) > 3 ? j % 3 : 0;\n        var str = s + m + (j ? i.substr(0, j) + t : \"\") + i.substr(j).replace(/(\\d{3})(?=\\d)/g, \"$1\" + t) + (c ? d + Math.abs(n - i).toFixed(c).slice(2) : \"\");\n        //console.log('toMoney => str(' + str + ')');\n        return str;\n        //return s + m + (j ? i.substr(0, j) + t : \"\") + i.substr(j).replace(/(\\d{3})(?=\\d)/g, \"$1\" + t) + (c ? d + Math.abs(n - i).toFixed(c).slice(2) : \"\");\n    }\n\n    function realToFixed(number) {\n        return Number(number.toString().replace(/\\..*$/, ''));\n    }\n\n    function truncate(number) {\n        return Number(realToFixed(number));\n    }\n\n    function combinations(set, k) {\n        var i, j, combs, head, tailcombs;\n\n        if (k > set.length || k <= 0) {\n            return [];\n        }\n\n        if (k == set.length) {\n            return [set];\n        }\n\n        if (k == 1) {\n            combs = [];\n            for (i = 0; i < set.length; i++) {\n                combs.push([set[i]]);\n            }\n            return combs;\n        }\n\n        combs = [];\n        for (i = 0; i < set.length - k + 1; i++) {\n            head = set.slice(i, i + 1);\n            tailcombs = combinations(set.slice(i + 1), k - 1);\n            for (j = 0; j < tailcombs.length; j++) {\n                combs.push(head.concat(tailcombs[j]));\n            }\n        }\n        return combs;\n    }\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/Math.js\n// module id = 45\n// module chunks = 5","define(['jquery', '../TabTouch'], function(jQuery, tabtouch) {\n    function AccountViewModel(params) {\n        this.backUrl = params.backUrl;\n        this.backText = params.backText;\n        tabtouch.initCommon(this.backUrl, this.backText);\n    }\n\n    function noRefresh() {\n        jQuery('.page-heading .refresh-button').hide();\n    }\n\n    AccountViewModel.prototype = Object.create(Object.prototype, {\n        noRefresh: {\n            value: noRefresh\n        }\n    });\n    Object.defineProperty(AccountViewModel, 'constructor', {\n        enumerable: false,\n        value: AccountViewModel\n    });\n\n    return AccountViewModel;\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/ViewModels/AccountViewModel.js\n// module id = 46\n// module chunks = 5","define([\n    \"knockout\",\n    \"jquery\",\n    \"./modal-component\",\n    \"rwwa-rx-state-machine\",\n    \"../../AppUtils/Framework/Intent/modal\",\n    \"../../AppUtils/Framework/Intent/navigation\",\n    \"../Services/MessageBusService\"],\n    function(ko, jQuery, _, stateMachine, modalIntents, navigationIntents, messageBus) {\n        var defaultState = {\n            title: \"No title\",\n            isOpen: false,\n            close: close,\n            component: null,\n            showBackButton: false,\n            back: back\n        };\n\n        function setState(currentState, state) {\n            return Object.assign({}, currentState, state);\n        }\n\n        function modalDriver(state, intent) {\n            state = state || defaultState;\n            switch (intent.tag) {\n                case modalIntents.open:\n                {\n                    var capturedTop = getScrollTop();\n                    setScrollTop(0);\n                    document.querySelector(\"#main-container\").style.display = \"none\";\n\n                    return setState(state,\n                    {\n                        capturedTop: capturedTop,\n                        isOpen: true,\n                        title: intent.data.title,\n                        component: intent.data.component,\n                    });\n                }\n                case modalIntents.close:\n                {\n                    document.querySelector(\"#main-container\").style.display = \"block\";\n                    setScrollTop(state.capturedTop);\n\n                    messageBus.publish(\"modal.did_close\");\n                    return setState(state, { isOpen: false });\n                }\n            }\n            return state;\n        }\n\n        var $modalState = stateMachine\n            .attachDriver({ path: \"modal\", driver: modalDriver });\n\n        var viewModel = {\n            title: ko.observable().extend({ deferred: true }),\n            isOpen: ko.observable().extend({ deferred: true }),\n            close: close,\n            showBackButton: ko.observable().extend({ deferred: true }),\n            back: back,\n            component: ko.observable().extend({ deferred: true }),\n        };\n\n        viewModel.displayComponent = ko.pureComputed(function() {\n            return viewModel.isOpen() && viewModel.component();\n        }).extend({ deferred: true });\n\n        $modalState.distinctUntilChanged().combineLatest(navigationIntents.navigationState$, function(modal, nav) {\n                return { modal: modal, nav: nav };\n            } )\n            .subscribe(function (state) {\n                viewModel.title(state.modal.title);\n                viewModel.isOpen(state.modal.isOpen);\n                viewModel.showBackButton(state.nav.size);\n                if (viewModel.component() !== (state.modal && state.modal.component)) {\n                    viewModel.component(state.modal.component);\n                }\n            });\n\n        function setScrollTop(top) {\n            jQuery(\"html, body\").animate({ scrollTop: top }, 0);\n        }\n\n        function getScrollTop() {\n            // if the element is not scrolled, it will (should) return 0\n            return Math.max(jQuery(\"body\").scrollTop(), jQuery(\"html\").scrollTop());\n        }\n\n        function close() {\n            modalIntents.close();\n        }\n\n        function open(title, component) {\n            modalIntents.open({ component: component, title: title });\n        }\n\n        function back() {\n            navigationIntents.modalNavigateBack();\n        }\n\n        return {\n            close: close,\n\n            back: back,\n\n            open: open,\n\n            init: function () {\n                ko.applyBindings({ viewModel: viewModel }, document.getElementById(\"modal-container-host\"));\n            }\n        };\n    })\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/Modal/Modal.js\n// module id = 48\n// module chunks = 5","// ************************************************\r\n// --------------- Typings polyfils ---------------\r\n// ************************************************\r\n\"use strict\";\r\nvar Rx = require('rx');\r\nvar Immutable = require('immutable');\r\n// ***************************************************\r\n// --------------- The main state loop ---------------\r\n// ***************************************************\r\nvar SIGNAL_EMITTER$ = new Rx.Subject();\r\nvar LIVE_SIGNAL$ = SIGNAL_EMITTER$\r\n    .mergeAll()\r\n    .observeOn(Rx.Scheduler.currentThread);\r\nvar INITIAL_STATE = Immutable.Map({ '__drivers': Immutable.Map() });\r\nvar LIVE_STATE$ = LIVE_SIGNAL$.scan(RootDriver, INITIAL_STATE).observeOn(Rx.Scheduler.currentThread);\r\nvar ERROR$ = new Rx.Subject();\r\nvar connectedLiveState$ = connectAndReplay(LIVE_STATE$);\r\nvar connectedLiveSignal$ = connectAndReplay(LIVE_SIGNAL$);\r\nvar connectedError$ = connectAndReplay(ERROR$);\r\nvar SWITCHABLE_STATE$$ = new Rx.Subject();\r\nvar connectedSwitchedState$ = connectAndReplay(SWITCHABLE_STATE$$).switch();\r\nSWITCHABLE_STATE$$.onNext(connectedLiveState$);\r\nERROR$.subscribe(function (errorEvent) {\r\n    var error = errorEvent.error;\r\n    console && console.error(error.stack || error);\r\n});\r\n// **********************************************\r\n// --------------- Implementation ---------------\r\n// **********************************************\r\nvar attachDriverSignal = createSignal('ATTACH DRIVER');\r\nvar resetStateSignal = createSignal('RESET STATE');\r\nfunction getOrDefault(key, state, otherwise) {\r\n    return state.get(key) || otherwise;\r\n}\r\nfunction splitPath(inputPath) {\r\n    var fullPath = inputPath.split('.');\r\n    var path = fullPath.slice(0, -1);\r\n    var key = fullPath[fullPath.length - 1];\r\n    return [path, key];\r\n}\r\nfunction getChildDriverList(state) {\r\n    return getOrDefault('__drivers', state, Immutable.Map());\r\n}\r\nexports.compositeDriver = function (state, signal, onError) {\r\n    var drivers = getChildDriverList(state);\r\n    return drivers.reduce(function (state, driver, key) {\r\n        var innerState = state.get(key);\r\n        try {\r\n            var newState = driver(innerState, signal, onError);\r\n            return state.set(key, newState);\r\n        }\r\n        catch (ex) {\r\n            onError(innerState)(ex);\r\n        }\r\n        return state;\r\n    }, state);\r\n};\r\nvar onError = function (signal) { return function (state) { return function (error) { ERROR$.onNext({ signal: signal, state: state, error: error }); }; }; };\r\nfunction RootDriver(state, signal) {\r\n    try {\r\n        switch (signal.tag) {\r\n            case attachDriverSignal:\r\n                var data = signal.data;\r\n                var _a = splitPath(signal.data.path), path = _a[0], key = _a[1];\r\n                var pathState = state.getIn(path);\r\n                var driverList = getChildDriverList(pathState);\r\n                if (driverList) {\r\n                    var updatePathState = pathState.set('__drivers', driverList.set(key, data.driver));\r\n                    if (data.driver === exports.compositeDriver) {\r\n                        updatePathState = updatePathState.setIn([key, '__drivers'], Immutable.Map());\r\n                    }\r\n                    var updatedState = state.setIn(path, updatePathState);\r\n                    return exports.compositeDriver(updatedState, signal);\r\n                }\r\n                throw \"cannot add driver to \" + path.join('.') + \" as it is not a composite driver\";\r\n            case resetStateSignal:\r\n                return INITIAL_STATE;\r\n            default:\r\n                return exports.compositeDriver(state, signal, onError(signal));\r\n        }\r\n    }\r\n    catch (ex) {\r\n        onError(signal)(state)(ex);\r\n    }\r\n    return state;\r\n}\r\nfunction connectAndReplay(input$) {\r\n    // casting to any is a bit of a hack, but it seems the typescript definition is missing\r\n    var replay$ = input$.replay(null, 1);\r\n    replay$.connect();\r\n    return replay$;\r\n}\r\nfunction createSignal(name) {\r\n    var emitter = new Rx.Subject();\r\n    SIGNAL_EMITTER$.onNext(emitter);\r\n    var signalFactory = function (data) {\r\n        // this is a bit funky, we assign the factory function as the tag of the signal\r\n        var signal = {\r\n            tag: signalFactory,\r\n            name: name,\r\n            data: data\r\n        };\r\n        emitter.onNext(signal);\r\n    };\r\n    signalFactory.signal$ = emitter;\r\n    return signalFactory;\r\n}\r\nexports.createSignal = createSignal;\r\nfunction attachDriver(data) {\r\n    attachDriverSignal(data);\r\n    var _a = splitPath(data.path), path = _a[0], key = _a[1];\r\n    return connectedSwitchedState$\r\n        .where(function (root) { return root && root.hasIn(path); })\r\n        .select(function (root) { return root.getIn(path); })\r\n        .where(function (parentNode) { return parentNode && parentNode.has(key); })\r\n        .select(function (parentNode) { return parentNode.get(key); })\r\n        .distinctUntilChanged();\r\n}\r\nexports.attachDriver = attachDriver;\r\nfunction __resetState__() {\r\n    resetStateSignal();\r\n}\r\nexports.__resetState__ = __resetState__;\r\nexports.__internal = {\r\n    SWITCHABLE_STATE$$: SWITCHABLE_STATE$$,\r\n    connectedLiveState$: connectedLiveState$,\r\n    connectedLiveSignal$: connectedLiveSignal$,\r\n    connectedError$: connectedError$,\r\n};\r\nexports.CompositeDriver = exports.compositeDriver;\r\nexports.state$ = connectedSwitchedState$;\r\nexports.signal$ = connectedLiveSignal$;\r\nexports.error$ = connectedError$;\r\n// Backwards compatibility aliases\r\nexports.createIntent = createSignal;\r\nexports.DynamicCompositeDriver = exports.compositeDriver;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/rwwa-rx-state-machine/dist/stream-driver.js\n// module id = 50\n// module chunks = 5","define([], function() {\n    function nop() {};\n\n    function optional(self, delegate, args) {\n\n        for (var i = 0; i < args.length; i++) {\n            var name = args[i];\n\n            self[name] = delegate[name] || nop;\n        }\n    }\n\n    function require(self, delegate, args) {\n        for (var i = 0; i < args.length; i++) {\n            var name = args[i];\n            if (delegate[name] === undefined) {\n                throw name + \" is a required delegate attribute\";\n            }\n\n            self[name] = delegate[name];\n        }\n    }\n\n    function defineDelegate(settings) {\n        return function(delegate) {\n            delegate = delegate || {};\n\n            require(this, delegate, settings.require || []);\n            optional(this, delegate, settings.optional || []);\n\n            return delegate;\n        }\n    }\n\n    return defineDelegate;\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/Components/Authentication/Utils/defineDelegate.js\n// module id = 51\n// module chunks = 5","define(['jquery', 'underscore', '../HttpService', '../LoggingService', '../../Common', 'js-cookie'], function (jQuery, _, http, loggingService, common, cookies) {\n    var iosCookieName = 'ipapp';\n    var androidCookieName = 'androidapp';\n\n    return {\n        isInAndroidApp: isInAndroidApp,\n        isIosApp: isInIosApp,\n        isInMobileApp: isInMobileApp,\n        isInAndroidBrowser: isInAndroidBrowser,\n        isInIosBrowser: isInIosBrowser,\n        isInMobileBrowser: isInMobileBrowser\n    };\n\n    function isInMobileApp(capabilities,isMobileApp, isNotMobileApp) {\n        var inApp = (isInAndroidApp() || isInIosApp());\n\n        if (!inApp) {\n            isNotMobileApp('Browser');\n        } else {\n            var capabilitiesNotMatched = _.filter(capabilities, function(capability) {\n                var msg = \"Device-Identification-Service - check capability for [Value:\" + capability.Value + \", ErrorResponse:\" + capability.ErrorResponse + \"]\";\n                loggingService.logDebug(msg);\n                var noMatch = !common.hasAppCapability(capability.Value);\n                if (noMatch) {\n                    var msg = \"Device-Identification-Service - didnt match capabilities \" + capability.Value;\n                    loggingService.logDebug(msg);\n                }\n                return noMatch;\n            });\n            if (capabilitiesNotMatched === null || capabilitiesNotMatched === undefined || capabilitiesNotMatched.length === 0) {\n                isMobileApp();\n            } else {\n                var reasons = _.map(capabilitiesNotMatched, function(capability) {\n                    return capability.ErrorResponse;\n                });\n                isNotMobileApp(reasons.join(','));\n            }\n        }\n    }\n\n    function isCookieSet(cookieName) {\n        return cookieValue(cookieName) != undefined;\n    }\n\n    function cookieValue(cookieName) {\n        var value = cookies.get(cookieName);\n\n        var msg = \"Device-Identification-Service - cookieValue {name=\" + cookieName + \", value=\" + value + \"}\";\n        loggingService.logDebug(msg);\n\n        return value;\n    }\n\n    function androidClientVersion() {\n        return cookieValue(androidCookieName);\n    }\n\n    function isInAndroidApp() {\n        var cookieSet = isCookieSet(androidCookieName) && androidClientVersion() !== NaN;\n\n        var msg = \"Device-Identification-Service - isInAndroidApp (\" + cookieSet + \")\";\n        loggingService.logDebug(msg);\n\n        return cookieSet;\n    }\n\n    function iosClientVersion() {\n        return cookieValue(iosCookieName);\n    }\n\n    function isInIosApp() {\n        var cookieSet = isCookieSet(iosCookieName) && iosClientVersion() !== NaN;\n        return cookieSet;\n    }\n\n    function isInMobileBrowser() {\n        return isInAndroidBrowser() || isInIosBrowser();\n    }\n\n    function isInAndroidBrowser() {\n        return navigator.userAgent.match(/Android/i);\n    }\n\n    function isInIosBrowser() {\n        return navigator.userAgent.match(/iPhone/i) || navigator.userAgent.match(/iPad/i) || navigator.userAgent.match(/iPod/i);\n    }\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/Services/Device/DeviceIdentificationService.js\n// module id = 52\n// module chunks = 5","define(['./AdobeDTMService', '../Services/MessageBusService', '../Services/LoggingService', './AnalyticsDataLayer', '../Services/FeatureService', 'underscore'],\n    function (adobeDTMService, msgBusService, loggingService, dataLayer, featureService, _) {\n        var started = false;\n\n        return {\n            start: start,\n            stop: stop\n        };\n\n        function trackError(error) {\n            \n        }\n\n        function trackSignUp(event) {\n            dataLayer.addToHistory(\"sign up step\", event);\n        }\n\n\n        function start() {\n            featureService.isActive('Analytics').then(function(active) {\n                subscribeToAnalyticsEvents(started, active);\n            });\n        }\n\n        function cleanseNumber(number) {\n            if (typeof number == 'string') {\n                number = number.replace('$', '');\n            }\n            return parseInt(number);\n        }\n        function cleanseCurrency(amount) {\n            if (typeof amount == 'string') {\n                amount = amount.replace('$', '');\n            }\n            return parseFloat(amount);\n        }\n\n        function subscribeToAnalyticsEvents(analyticsFeatureHasAlreadyStarted, analyticsIsAnActiveFeature) {\n\n            if (!analyticsFeatureHasAlreadyStarted && analyticsIsAnActiveFeature) {\n                dataLayer.loadTrackData();\n\n                msgBusService.subscribe('nav.nav', function (url) {\n\n                    if (url) {\n                        dataLayer.data.content.url = url;\n                        dataLayer.saveTrackData();\n                        dataLayer.addToHistory(\"navigation\", url);\n\n                        adobeDTMService.trackNav();\n                    }\n                });\n\n                msgBusService.subscribe('nav.resetback', function (url) {\n                    if (url) {\n                        dataLayer.data.content.url = url;\n                        dataLayer.saveTrackData();\n                        dataLayer.addToHistory(\"navigation\", url);\n\n                        adobeDTMService.trackNav();\n                    }\n                });\n\n                msgBusService.subscribe('nav.menu', function(direction) {\n\n                    dataLayer.addToHistory(\"menu\", direction);\n                    if (direction === \"open\") {\n                        adobeDTMService.trackMenu(direction);\n\n                    }\n                });\n\n                msgBusService.subscribe('preferences.cash', function(isOn) {\n                    var state = isOn ? 'on' : 'off';\n                    dataLayer.data.preferences.cashBetting = state;\n                    dataLayer.saveTrackData();\n\n                    dataLayer.addToHistory(\"preference\", \"cash preference is now \" + state);\n                    adobeDTMService.trackBetWithCashPreference(state);\n                });\n\n                msgBusService.subscribe('nav.exit', function(externalSite) {\n                    dataLayer.addToHistory(\"site exit\", externalSite);\n                    adobeDTMService.trackExit(externalSite);\n                });\n\n                msgBusService.subscribe('lo.login', function(accountNumber) {\n                    dataLayer.data.user.accountNumber = accountNumber;\n                    dataLayer.saveTrackData();\n\n                    dataLayer.addToHistory(\"authentication\", \"User \" + accountNumber + \" logged in\");\n                    adobeDTMService.trackLogin();\n                });\n\n                msgBusService.subscribe('lo.logout', function() {\n                    dataLayer.data.user.accountNumber = '';\n                    dataLayer.saveTrackData();\n\n                    dataLayer.addToHistory(\"authentication\", \"User logged out\");\n                    adobeDTMService.trackLogout();\n                });\n                msgBusService.subscribe('account.processed', function (operationType) {\n                    dataLayer.data.user.accountOperationType = operationType;\n                    dataLayer.saveTrackData();\n\n                    dataLayer.addToHistory(\"account\", operationType);\n                    adobeDTMService.trackAccount();\n                });\n                \n                msgBusService.subscribe('account.deposit', function (data) {\n                    //if (data.amount > 0) {\n                        dataLayer.data.deposit.amount = data.amount;\n                        dataLayer.saveTrackData();\n                    //}\n\n                    dataLayer.addToHistory(\"deposit\", JSON.stringify(dataLayer.keys.depositBaseKey + data.step));\n                    adobeDTMService.trackDeposit(data.step);\n                });\n\n                msgBusService.subscribe('lbs.checkin', function (checkInStep) {\n                    dataLayer.addToHistory(\"checkin\", JSON.stringify(dataLayer.keys.checkInBaseKey + checkInStep));\n                    adobeDTMService.trackCheckIn(checkInStep);\n                });\n\n                msgBusService.subscribe('signup.leaving', function(data) {\n\n                    var key = '';\n\n                    \n                    switch (data.page) {\n                    case 'homepage':\n                        key = dataLayer.keys.signupBegin;\n                        break;\n                    case 'menu':\n                        key = dataLayer.keys.signupBegin;\n                        break;\n                    case 'welcome':\n                        key = dataLayer.keys.signupSliderActivated;\n                        break;\n                    case 'personalDetails':\n                        key = dataLayer.keys.signupNameComplete;\n                        break;\n                    case 'contactDetails':\n                        key = dataLayer.keys.signupEmailComplete;\n                        break;\n                    case 'addressVerification':\n                        key = dataLayer.keys.signupAddressComplete;\n                        break;\n                    case 'ageVerification':\n                        key = dataLayer.keys.signupAgeValidationMethodConfirmed;\n                        break;\n                    case 'driversLicense':\n                        key = dataLayer.keys.signupDriversLicenceComplete;\n                        break;\n                    case 'australianPassport':\n                        key = dataLayer.keys.signupPassportComplete;\n                        break;\n                    case 'internationalPassport':\n                        key = dataLayer.keys.signupPassportComplete;\n                        break;\n                    case 'createPassword':\n                        key = dataLayer.keys.signupPasswordComplete;\n                        break;\n                    case 'accountCreated':\n                        key = dataLayer.keys.signupComplete;\n                        break;\n                    default:\n                        break;\n                    }\n\n                    dataLayer.addToHistory(\"signup\", JSON.stringify(dataLayer.keys.signupBaseKey + key));\n                    adobeDTMService.trackSignUp(key);\n                });\n\n                msgBusService.subscribe('signup.data', function(data) {\n                    if (data.applicationReferenceNumber)\n                        dataLayer.data.signUp.applicationId = data.applicationReferenceNumber;\n\n                    if (data.marketingOptIn)\n                        dataLayer.data.signUp.optIn = data.marketingOptIn;\n\n                    if (data.ageVerificationMethod)\n                        dataLayer.data.signUp.ageConfirmType = data.ageVerificationMethod;\n\n                    if (data.bettingAccountNumber) {\n                        dataLayer.data.user.accountNumber = data.bettingAccountNumber;\n                        dataLayer.data.signUp.accountId = data.bettingAccountNumber;\n\n                        dataLayer.saveTrackData();\n                    }\n\n                    dataLayer.addToHistory(\"signup data\", JSON.stringify(data));\n                });\n\n                msgBusService.subscribe('signup.validationError', function (data) {\n                    var key = dataLayer.keys.signupValidationError;\n                    dataLayer.data.signUp.lastValidationError = _(data).map(function (x) { return x.feildName + \":\" + x.errorMessage });\n                    dataLayer.addToHistory(\"signup.validationError\", JSON.stringify(data));\n                    adobeDTMService.trackSignUp(key);\n                });\n\n                msgBusService.subscribe('error', trackError);\n\n                msgBusService.subscribe('bet.single.selected', function(data) {\n                    dataLayer.resetBetData();\n                    \n                    dataLayer.data.bet.productType = \"single\";\n                    if (data.type == 'toteracing') {\n                        dataLayer.data.bet.racing.tote.numberOfTickets = 1;\n                    } else if (data.type == 'fobracing') {\n                        dataLayer.data.bet.racing.fixed.numberOfTickets = 1;\n                    } else if (data.type == 'fobsports') {\n                        dataLayer.data.bet.sports.fixed.numberOfTickets = 1;\n                    }\n\n                    dataLayer.saveTrackData();\n                    dataLayer.addToHistory('bet.single.selected', JSON.stringify(data));\n                    adobeDTMService.trackBetSingleSelected();\n                });\n                msgBusService.subscribe('bet.single.review', function() {\n                    dataLayer.addToHistory('bet.single.review', JSON.stringify({ mode: 'single' }));\n                    adobeDTMService.trackBetSingleReview();\n                });\n                msgBusService.subscribe('bet.single.receipt', function (data) {                    \n                    dataLayer.resetBetData();\n                    dataLayer.data.bet.id = cleanseNumber(data.ticket);\n                    dataLayer.data.bet.productType = \"single\";\n                    dataLayer.data.bet.construction = 'single';\n                    dataLayer.data.bet.placementMethod = 'account';\n\n                    if (data.betType == 'toteracing') {\n                        dataLayer.data.bet.racing.tote.numberOfTickets = 1;\n                        dataLayer.data.bet.racing.tote.cost = cleanseCurrency(data.toteBetValue);\n                    } else if (data.betType == 'fobracing') {\n                        var winValue = (data.fobWinValue ? cleanseCurrency(data.fobWinValue) : 0);\n                        var placeValue = (data.fobPlaceValue ? cleanseCurrency(data.fobPlaceValue) : 0);\n                        dataLayer.data.bet.racing.fixed.numberOfTickets = 1;\n                        dataLayer.data.bet.racing.fixed.cost = cleanseCurrency(winValue) + cleanseCurrency(placeValue);\n                        if (data.specialOffer) {\n                            dataLayer.data.bet.specialOffers = [data.specialOffer];\n                        }\n                    } else if (data.betType == 'fobsports') {\n                        var winValue = (data.fobWinValue ? cleanseCurrency(data.fobWinValue) : 0);\n                        var placeValue = (data.fobPlaceValue ? cleanseCurrency(data.fobPlaceValue) : 0);\n                        dataLayer.data.bet.sports.fixed.numberOfTickets = 1;\n                        dataLayer.data.bet.sports.fixed.cost = cleanseCurrency(winValue) + cleanseCurrency(placeValue);\n                    }\n                    dataLayer.saveTrackData();\n\n                    dataLayer.addToHistory('bet.single.receipt', JSON.stringify(dataLayer.data.bet));\n                    adobeDTMService.trackBetSingleReceipt();\n                });\n\n                msgBusService.subscribe('bet.betslip.add', function(betslip) {\n                    var latestBet = betslip.Bets[0];\n                    var betType = 'unknown';\n\n                    if (latestBet.ModelType.indexOf('ToteRacing') != -1) {\n                        betType = 'toteracing';\n                    } else if (latestBet.ModelType.indexOf('ToteAllUpBet') != -1) {\n                        betType = 'toteracing';\n                    } else if (latestBet.ProductCode == \"FobSports\") {\n                        betType = 'fobsports';\n                    } else if (latestBet.ProductCode == \"FobRacing\") {\n                        betType = 'fobracing';\n                    }\n                    \n                    dataLayer.addToHistory('bet.betslip.add', JSON.stringify({ betType: betType }));\n                    adobeDTMService.trackBetSlipAdd();\n                });\n\n                msgBusService.subscribe('bet.betslip.review', function(bets) {\n                    dataLayer.resetBetData();\n                    var numToteRacingBets = 0;\n                    var costOfToteRacingBets = 0;\n                    var numFixedRacingBets = 0;\n                    var costOfFixedRacingBets = 0;\n                    var numFixedSportsBets = 0;\n                    var costOfFixedSportsBets = 0;\n\n                    _.map(bets, function(bet) {\n                        if (bet.ModelType.indexOf('ToteRacing') != -1) {\n                            numToteRacingBets = numToteRacingBets + 1;\n                            costOfToteRacingBets = costOfToteRacingBets + bet.ExpectedCost;\n                        } else if (bet.ModelType.indexOf('ToteAllUpBet') != -1) {\n                            numToteRacingBets = numToteRacingBets + 1;\n                            costOfToteRacingBets = costOfToteRacingBets + bet.ExpectedCost;\n                        } else if (bet.ProductCode == \"FobSports\") {\n                            numFixedSportsBets = numFixedSportsBets + 1;\n                            costOfFixedSportsBets = costOfFixedSportsBets + bet.ExpectedCost;\n                        } else if (bet.ProductCode == \"FobRacing\") {\n                            costOfFixedRacingBets = costOfFixedRacingBets + bet.ExpectedCost;\n                            numFixedRacingBets = numFixedRacingBets + 1;\n                        }\n                    });\n\n                    dataLayer.data.bet.racing.tote.numberOfTickets = numToteRacingBets;\n                    dataLayer.data.bet.racing.tote.cost = costOfToteRacingBets;\n                    dataLayer.data.bet.racing.fixed.numberOfTickets = numFixedRacingBets;\n                    dataLayer.data.bet.racing.fixed.cost = costOfFixedRacingBets;\n                    dataLayer.data.bet.sports.fixed.numberOfTickets = numFixedSportsBets;\n                    dataLayer.data.bet.sports.fixed.cost = costOfFixedSportsBets;\n\n                    dataLayer.data.bet.productType = 'single';\n                    dataLayer.data.bet.construction = 'betslip';\n                    dataLayer.data.bet.placementMethod = 'account';\n                    dataLayer.saveTrackData();\n\n                    dataLayer.addToHistory('bet.betslip.review', JSON.stringify({ productType: 'single' }));\n                    adobeDTMService.trackBetSlipReview();\n                });\n                msgBusService.subscribe('bet.betslip.receipt', function(receipt) {\n                    dataLayer.data.bet.id = cleanseNumber(receipt[0].TicketNumber);\n                    dataLayer.saveTrackData();\n\n                    dataLayer.addToHistory('bet.betslip.receipt', JSON.stringify(dataLayer.data.bet));\n                    adobeDTMService.trackBetSlipReceipt();\n                });\n\n                msgBusService.subscribe('bet.betslip.cash.selected', function (productType) {\n                    dataLayer.data.bet.productType = productType;\n                    dataLayer.data.bet.construction = 'betslip';\n                    dataLayer.data.bet.placementMethod = 'cash';\n                    dataLayer.saveTrackData();\n\n                    dataLayer.addToHistory('bet.betslip.cash.selected', JSON.stringify({ productType: productType }));\n                    adobeDTMService.trackBetSlipCashSelected();\n                });\n\n                msgBusService.subscribe('bet.betslip.remove', function() {\n                    dataLayer.addToHistory('bet.betslip.remove', '');\n                    adobeDTMService.trackBetSlipClear();\n                });\n\n                msgBusService.subscribe('bet.betslip.clear', function() {\n                    dataLayer.resetBetData();\n                    dataLayer.addToHistory('bet.betslip.clear', '');\n                    adobeDTMService.trackBetSlipClear();\n                });\n\n                msgBusService.subscribe('bet.betslip.allfailed', trackError);\n\n\n                msgBusService.subscribe('bet.mystery.selected', function() {\n                    dataLayer.saveTrackData();\n\n                    dataLayer.addToHistory('bet.mystery.selected', JSON.stringify({ betType: 'toteracing' }));\n                    adobeDTMService.trackMysterySelected();\n                });\n                msgBusService.subscribe('bet.mystery.review', function() {\n                    dataLayer.data.bet.productType = 'single';\n                    dataLayer.data.bet.construction = 'single';\n                    dataLayer.data.bet.placementMethod = 'account';\n                    dataLayer.saveTrackData();\n\n                    dataLayer.addToHistory('bet.mystery.review', JSON.stringify({ productType: 'single' }));\n                    adobeDTMService.trackMysteryReview();\n                });\n                msgBusService.subscribe('bet.mystery.receipt', function(receipt) {\n                    dataLayer.resetBetData();\n                    dataLayer.data.bet.id = cleanseNumber(receipt.tickets[0].ticketNumber);\n                    dataLayer.data.bet.racing.tote.numberOfTickets = receipt.tickets.length;\n                    dataLayer.data.bet.racing.tote.cost = cleanseCurrency(receipt.totalCost);\n                    dataLayer.saveTrackData();\n\n                    dataLayer.addToHistory('bet.mystery.receipt', JSON.stringify(dataLayer.data.bet));\n                    adobeDTMService.trackMysteryReceipt();\n                });\n\n                msgBusService.subscribe('bet.favnumbers.selected', function() {\n\n                    dataLayer.addToHistory('bet.favnumbers.selected', JSON.stringify({ betType: 'toteracing' }));\n                    adobeDTMService.trackFavNumbersSelected();\n                });\n                msgBusService.subscribe('bet.favnumbers.review', function() {\n                    dataLayer.data.bet.productType = 'single';\n                    dataLayer.data.bet.construction = 'single';\n                    dataLayer.data.bet.placementMethod = 'account';\n                    dataLayer.saveTrackData();\n\n                    dataLayer.addToHistory('bet.favnumbers.review', JSON.stringify({ productType: 'single' }));\n                    adobeDTMService.trackFavNumbersReview();\n                });\n                msgBusService.subscribe('bet.favnumbers.receipt', function(receipt) {\n                    dataLayer.resetBetData();\n                    dataLayer.data.bet.id = cleanseNumber(receipt.tickets[0].ticketNumber);\n                    dataLayer.data.bet.racing.tote.numberOfTickets = receipt.tickets.length;\n                    dataLayer.data.bet.racing.tote.cost = cleanseCurrency(receipt.totalCost);\n                    dataLayer.saveTrackData();\n\n                    dataLayer.addToHistory('bet.favnumbers.receipt', JSON.stringify(dataLayer.data.bet));\n                    adobeDTMService.trackFavNumbersReceipt();\n                });\n\n                msgBusService.subscribe('bet.tipping.selected', function() {\n                    dataLayer.saveTrackData();\n\n                    dataLayer.addToHistory('bet.tipping.selected', JSON.stringify({ betType: 'totesports' }));\n                    adobeDTMService.trackTippingSelected();\n                });\n                msgBusService.subscribe('bet.tipping.review', function() {\n                    dataLayer.data.bet.productType = 'single';\n                    dataLayer.data.bet.construction = 'single';\n                    dataLayer.data.bet.placementMethod = 'account';\n                    dataLayer.saveTrackData();\n\n                    dataLayer.addToHistory('bet.tipping.review', JSON.stringify({ productType: 'single' }));\n                    adobeDTMService.trackTippingReview();\n                });\n                msgBusService.subscribe('bet.tipping.receipt', function(receipt) {\n                    dataLayer.resetBetData();\n                    dataLayer.data.bet.id = cleanseNumber(receipt.tickets[0].ticketNumber);\n                    dataLayer.data.bet.sports.tote.numberOfTickets = receipt.tickets.length;\n                    dataLayer.data.bet.sports.tote.cost = cleanseCurrency(receipt.totalCost);\n                    dataLayer.saveTrackData();\n\n                    dataLayer.addToHistory('bet.tipping.receipt', JSON.stringify(dataLayer.data.bet));\n                    adobeDTMService.trackTippingReceipt();\n                });\n\n\n                msgBusService.subscribe('bet.multi.add', function() {\n\n                    dataLayer.addToHistory('bet.multi.add', JSON.stringify({ betType: 'mixed' }));\n                    adobeDTMService.trackMultiAdd();\n                });\n                msgBusService.subscribe('bet.multi.review', function() {\n                    dataLayer.data.bet.productType = 'multi';\n                    dataLayer.data.bet.construction = 'single';\n                    dataLayer.data.bet.placementMethod = 'account';\n                    dataLayer.saveTrackData();\n\n                    dataLayer.addToHistory('bet.multi.review', JSON.stringify({ productType: 'multi' }));\n                    adobeDTMService.trackMultiReview();\n                });\n                msgBusService.subscribe('bet.multi.receipt', function(receipt) {\n                    dataLayer.resetBetData();\n                    dataLayer.data.bet.id = cleanseNumber(receipt.ticketNumber);\n                    dataLayer.data.bet.mixed.fixed.numberOfTickets = 1;\n                    dataLayer.data.bet.mixed.fixed.cost = cleanseCurrency(receipt.totalCost);\n                    dataLayer.saveTrackData();\n\n                    dataLayer.addToHistory('bet.multi.receipt', JSON.stringify(dataLayer.data.bet));\n                    adobeDTMService.trackMultiReceipt();\n                });\n                msgBusService.subscribe('bet.multi.remove', function() {\n                    dataLayer.addToHistory('bet.multi.remove', '');\n                    adobeDTMService.trackMultiRemove();\n                });\n                msgBusService.subscribe('bet.multi.clear', function() {\n                    dataLayer.resetBetData();\n                    dataLayer.addToHistory('bet.multi.clear', '');\n                    adobeDTMService.trackMultiClear();\n                });\n                //bet.multi.convert\n                msgBusService.subscribe('bet.accumulator.selected', function() {\n                    dataLayer.addToHistory('bet.accumulator.selected', JSON.stringify({ betType: 'fobsports' }));\n                    adobeDTMService.trackAccumulatorSelected();\n                });\n                msgBusService.subscribe('bet.accumulator.review', function() {\n                    dataLayer.data.bet.productType = 'accumulator';\n                    dataLayer.data.bet.construction = 'single';\n                    dataLayer.data.bet.placementMethod = 'account';\n                    dataLayer.saveTrackData();\n\n                    dataLayer.addToHistory('bet.accumulator.review', JSON.stringify({ productType: 'accumulator' }));\n                    adobeDTMService.trackAccumulatorReview();\n                });\n                msgBusService.subscribe('bet.accumulator.receipt', function(receipt) {\n                    dataLayer.resetBetData();\n                    dataLayer.data.bet.id = cleanseNumber(receipt.ticket);\n                    dataLayer.data.bet.sports.fixed.numberOfTickets = 1;\n                    dataLayer.data.bet.sports.fixed.cost = cleanseCurrency(receipt.cost);\n                    dataLayer.saveTrackData();\n\n                    dataLayer.addToHistory('bet.accumulator.receipt', JSON.stringify(receipt));\n                    adobeDTMService.trackAccumulatorReceipt();\n                });\n\n                msgBusService.subscribe('bet.cash.selected', function (productType) {\n                    dataLayer.data.bet.productType = productType;\n                    dataLayer.data.bet.construction = 'single';\n                    dataLayer.data.bet.placementMethod = 'cash';\n                    dataLayer.saveTrackData();\n\n                    dataLayer.addToHistory('bet.cash.selected', JSON.stringify({ productType: productType }));\n                    adobeDTMService.trackCashSelected();\n                });\n                msgBusService.subscribe('bet.cash.receipt', function(receipt) {\n                    \n                    dataLayer.data.bet.id = cleanseNumber(receipt.ticket);\n\n                    if (dataLayer.data.bet.productType === 'multi') {\n                        dataLayer.resetBetData();\n                        dataLayer.data.bet.id = cleanseNumber(receipt.ticket);\n                        dataLayer.data.bet.mixed.fixed.numberOfTickets = 1;\n                        dataLayer.data.bet.mixed.fixed.cost = cleanseCurrency(receipt.totalCost);                        \n                    }\n\n                    dataLayer.saveTrackData();\n\n                    dataLayer.addToHistory('bet.cash.receipt', JSON.stringify(receipt));\n                    adobeDTMService.trackCashReceipt();\n                });\n                msgBusService.subscribe('bet.cash.remove', function(data) {\n\n                    dataLayer.data.bet.id = cleanseNumber(data.ticket);\n                    dataLayer.addToHistory('bet.cash.remove', JSON.stringify(data));\n                    adobeDTMService.trackCashRemove();\n                });\n                msgBusService.subscribe('bet.cash.clear', function() {\n                    dataLayer.resetBetData();\n                    dataLayer.addToHistory('bet.cash.clear', '');\n                    adobeDTMService.trackCashClear();\n                });\n\n                msgBusService.subscribe('specialoffer.selected', function (data) {\n                    dataLayer.addToHistory('specialoffer.selected', JSON.stringify(data));\n                    dataLayer.data.specialOfferSelection = data.Title;\n                    dataLayer.saveTrackData();\n                });\n\n                msgBusService.subscribe('specialoffer.cleared', function () {\n                    dataLayer.addToHistory('specialoffer.cleared', '');\n                    dataLayer.data.specialOfferSelection = null;\n                    dataLayer.saveTrackData();\n                });\n\n                msgBusService.publish('analytics.started');\n                msg = 'AnalyticsService - started';\n                loggingService.logDebug(msg);\n                started = true;\n            } else {\n                msg = 'AnalyticsService - already started';\n                loggingService.logDebug(msg);\n            }\n        }\n\n        function stop() {\n        var msg = '';\n        if (started) {\n            msgBusService.unsubscribe('nav.nav', trackNav);\n            msgBusService.unsubscribe('nav.exit', trackExit);\n            msgBusService.unsubscribe('nav.menu', trackMenu);\n            msgBusService.unsubscribe('preferences.cash', trackBetWithCashPreference);\n            msgBusService.unsubscribe('lo.login', trackLogin);\n            msgBusService.unsubscribe('lo.logout', trackLogout);\n            msgBusService.unsubscribe('signup.navigate', trackSignUp);\n\n            msg = 'AnalyticsService - stopped';\n            loggingService.logDebug(msg);\n            started = false;\n        } else {\n            msg = 'AnalyticsService - already stopped';\n            loggingService.logDebug(msg);\n        }\n    }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/Analytics/AnalyticsService.js\n// module id = 55\n// module chunks = 5 7","define([\"require\", \"exports\", \"tslib\", \"knockout\", \"inversify\", \"../../AppUtils/Framework/Lock\", \"../Model/BetSpecialOffer\", \"../Model/Stake\", \"../Model/PriceDetails\", \"./PyosExtensions\", \"../Dtos/PyosServiceRequestDto\"], function (require, exports, tslib_1, ko, inversify_1, Lock_1, BetSpecialOffer_1, Stake_1, PriceDetails_1, PyosExtensions_1, PyosServiceRequestDto_1) {\r\n    \"use strict\";\r\n    var PyosStoreState;\r\n    (function (PyosStoreState) {\r\n        PyosStoreState[PyosStoreState[\"Ok\"] = 0] = \"Ok\";\r\n        PyosStoreState[PyosStoreState[\"Loading\"] = 1] = \"Loading\";\r\n        PyosStoreState[PyosStoreState[\"LoadFailed\"] = 2] = \"LoadFailed\";\r\n    })(PyosStoreState || (PyosStoreState = {}));\r\n    ;\r\n    var PyosStore = (function () {\r\n        function PyosStore(appWindow, progressIndicator, eventAggregator, pyosService, rewardCalculator, extensions) {\r\n            var _this = this;\r\n            this._lock = new Lock_1.Lock();\r\n            this._status = ko.observable(PyosStoreState.Ok);\r\n            this._specialOffers = ko.observable([]);\r\n            this._selectedSpecialSeq = ko.observable(null);\r\n            this._priceDetails = ko.observable(null);\r\n            this._stake = ko.observable(null);\r\n            this._betSelection = ko.observable(null);\r\n            this._isExpanded = ko.observable(false);\r\n            this._specialsErrorMessage = ko.observable();\r\n            this._appWindow = appWindow;\r\n            this._progressIndicator = progressIndicator;\r\n            this._eventAggregator = eventAggregator;\r\n            this._pyosService = pyosService;\r\n            this._rewardCalculator = rewardCalculator;\r\n            this._extensions = extensions;\r\n            this._disposables = [];\r\n            this._eventAggregator.subscribe(\"lo.login\", function () {\r\n                if (_this._appWindow.domElementExists(\"pyos-select\")) {\r\n                    _this.enquireSpecialOffers()\r\n                        .catch(function () { return null; });\r\n                }\r\n            });\r\n        }\r\n        PyosStore.prototype.rejectedPromise = function () {\r\n            return new Promise(function (_, reject) { reject(); });\r\n        };\r\n        PyosStore.prototype.dispose = function () {\r\n            this._disposables.forEach(function (obj) { return obj.dispose(); });\r\n            this._disposables = [];\r\n        };\r\n        PyosStore.prototype.loading = function () {\r\n            return this._status() === PyosStoreState.Loading;\r\n        };\r\n        PyosStore.prototype.specialOffers = function () {\r\n            return this._specialOffers();\r\n        };\r\n        PyosStore.prototype.selectedSpecialSeq = function () {\r\n            return this._selectedSpecialSeq();\r\n        };\r\n        PyosStore.prototype.stake = function () {\r\n            return this._stake();\r\n        };\r\n        PyosStore.prototype.priceDetails = function () {\r\n            return this._priceDetails();\r\n        };\r\n        PyosStore.prototype.isExpanded = function () {\r\n            return this._isExpanded();\r\n        };\r\n        PyosStore.prototype.isVisible = function () {\r\n            return !!(this._specialOffers() && this._specialOffers().length);\r\n        };\r\n        PyosStore.prototype.selectedSpecial = function () {\r\n            var specialSeq = this._selectedSpecialSeq();\r\n            if (this._specialOffers()) {\r\n                for (var _i = 0, _a = this._specialOffers(); _i < _a.length; _i++) {\r\n                    var so = _a[_i];\r\n                    if (so.SpecialSeq === specialSeq) {\r\n                        return so;\r\n                    }\r\n                }\r\n            }\r\n            return null;\r\n        };\r\n        PyosStore.prototype.hasWinStake = function () {\r\n            return this._stake() && !!(Number(this._stake().Win));\r\n        };\r\n        PyosStore.prototype.hasPlaceStake = function () {\r\n            return this._stake() && !!(Number(this._stake().Place));\r\n        };\r\n        PyosStore.prototype.projectedReward = function (specialOffer) {\r\n            if (specialOffer && this._stake() && this._priceDetails()) {\r\n                return this._rewardCalculator.calculateProjectedReward(specialOffer, this._stake(), this._priceDetails());\r\n            }\r\n            return null;\r\n        };\r\n        PyosStore.prototype.isOfferEligible = function (specialOffer) {\r\n            return specialOffer ? this._rewardCalculator.checkEligible(specialOffer, this._stake()) : false;\r\n        };\r\n        PyosStore.prototype.selectedOfferIsEligible = function () {\r\n            var specialOffer = this.selectedSpecial();\r\n            return specialOffer ? this.isOfferEligible(specialOffer) : null;\r\n        };\r\n        ;\r\n        PyosStore.prototype.errorMessage = function () {\r\n            switch (this._status()) {\r\n                case PyosStoreState.Ok:\r\n                    return this._specialsErrorMessage();\r\n                case PyosStoreState.Loading:\r\n                    return \"\";\r\n                case PyosStoreState.LoadFailed:\r\n                    return \"Sorry, there was a problem loading the SuperPick details for this bet.\";\r\n                default:\r\n                    return \"\";\r\n            }\r\n        };\r\n        PyosStore.prototype.primaryAction = function () {\r\n            if (this._selectedSpecialSeq()) {\r\n                this.clearSelectedSpecial();\r\n            }\r\n            else {\r\n                this._isExpanded(!this._isExpanded());\r\n            }\r\n        };\r\n        PyosStore.prototype.setSelectedSpecial = function (specialOffer) {\r\n            if (this.selectedSpecialSeq() === specialOffer.SpecialSeq) {\r\n                this.clearSelectedSpecial();\r\n            }\r\n            else {\r\n                this.clearSelectedSpecial();\r\n                this._selectedSpecialSeq(specialOffer.SpecialSeq);\r\n                this._eventAggregator.publish(\"specialoffer.selected\", specialOffer);\r\n            }\r\n        };\r\n        PyosStore.prototype.setStake = function (stake) {\r\n            this._stake(Stake_1.Stake.normalise(stake));\r\n        };\r\n        PyosStore.prototype.setPriceDetails = function (priceDetails) {\r\n            this._priceDetails(PriceDetails_1.PriceDetails.normalise(priceDetails));\r\n        };\r\n        PyosStore.prototype.setSpecialOffers = function (specialOffers) {\r\n            if (specialOffers) {\r\n                this._specialOffers(specialOffers.map(function (so) { return BetSpecialOffer_1.BetSpecialOffer.normalise(so); }));\r\n            }\r\n            else {\r\n                this._specialOffers([]);\r\n            }\r\n            if (this._selectedSpecialSeq() && !this.selectedSpecial()) {\r\n                this.clearSelectedSpecial();\r\n            }\r\n        };\r\n        PyosStore.prototype.clearSelectedSpecial = function () {\r\n            this._selectedSpecialSeq(null);\r\n            this._isExpanded(false);\r\n            this._eventAggregator.publish(\"specialoffer.cleared\");\r\n        };\r\n        PyosStore.prototype.clear = function () {\r\n            this.setSpecialOffers(null);\r\n            this.clearSelectedSpecial();\r\n            this._betSelection(null);\r\n            this._priceDetails(null);\r\n            this._specialsErrorMessage(null);\r\n            this._status(PyosStoreState.Ok);\r\n        };\r\n        PyosStore.prototype.clearErrorMessage = function () {\r\n            this._selectedSpecialSeq(null);\r\n            this._isExpanded(false);\r\n            this._specialsErrorMessage(null);\r\n        };\r\n        PyosStore.prototype.validate = function () {\r\n            var specialOffer = this.selectedSpecial();\r\n            if (specialOffer) {\r\n                if (this.isOfferEligible(specialOffer) === false) {\r\n                    this._specialsErrorMessage(this._extensions.getLegTypeIneligibilityDisplay(specialOffer));\r\n                    return false;\r\n                }\r\n            }\r\n            this._specialsErrorMessage(null);\r\n            return true;\r\n        };\r\n        PyosStore.prototype.setBetSelection = function (betSelection) {\r\n            this._betSelection(betSelection);\r\n        };\r\n        PyosStore.prototype.enquireSpecialOffers = function () {\r\n            var _this = this;\r\n            if (this._betSelection() && this._priceDetails()) {\r\n                if (this._lock.trylock()) {\r\n                    this._status(PyosStoreState.Loading);\r\n                    var betSelection = this._betSelection();\r\n                    var request = {\r\n                        SelectedSpecial: this.selectedSpecial(),\r\n                        Racing: PyosServiceRequestDto_1.isRacingEnquirySelectionDto(betSelection) ? betSelection : null,\r\n                        SportsEx: PyosServiceRequestDto_1.isSportsEnquirySelectionExDto(betSelection) ? betSelection : null\r\n                    };\r\n                    var operation = this._pyosService.fobBetPreEnquiry(request)\r\n                        .then(function (response) {\r\n                        if (response) {\r\n                            if (response.SpecialTokenOffers) {\r\n                                _this.setSpecialOffers(response.SpecialTokenOffers.SpecialOffers);\r\n                            }\r\n                            else {\r\n                                _this.setSpecialOffers(null);\r\n                            }\r\n                            if (response.SpecialOffersFault) {\r\n                                _this._specialsErrorMessage(response.SpecialOffersFault.Message);\r\n                            }\r\n                            else {\r\n                                _this._specialsErrorMessage(null);\r\n                            }\r\n                        }\r\n                        else {\r\n                            _this.setSpecialOffers(null);\r\n                            _this._specialsErrorMessage(null);\r\n                        }\r\n                        _this._status(PyosStoreState.Ok);\r\n                        _this._lock.unlock();\r\n                        return response;\r\n                    }).catch(function () {\r\n                        _this.setSpecialOffers(null);\r\n                        _this._status(PyosStoreState.LoadFailed);\r\n                        _this._lock.unlock();\r\n                    });\r\n                    return this._progressIndicator.displayFor(operation);\r\n                }\r\n            }\r\n            return this.rejectedPromise();\r\n        };\r\n        return PyosStore;\r\n    }());\r\n    PyosStore = tslib_1.__decorate([\r\n        inversify_1.injectable(),\r\n        tslib_1.__param(0, inversify_1.inject(\"IAppWindow\")),\r\n        tslib_1.__param(1, inversify_1.inject(\"IProgressIndicator\")),\r\n        tslib_1.__param(2, inversify_1.inject(\"IEventAggregator\")),\r\n        tslib_1.__param(3, inversify_1.inject(\"IPyosService\")),\r\n        tslib_1.__param(4, inversify_1.inject(\"IPyosRewardCalculator\")),\r\n        tslib_1.__param(5, inversify_1.inject(\"PyosExtensions\")),\r\n        tslib_1.__metadata(\"design:paramtypes\", [Object, Object, Object, Object, Object, PyosExtensions_1.PyosExtensions])\r\n    ], PyosStore);\r\n    exports.PyosStore = PyosStore;\r\n});\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Specials/Store/PyosStore.ts\n// module id = 58\n// module chunks = 5","define(['./LocationStore', '../LoggingService', '../../TimeProvider', 'underscore'], function (locationStore, loggingService, timeProvider, _) {\n\n    return {\n        getLocationDetails: getLocationDetails,\n        getLocationErrors: getLocationErrors,\n        updateLocation: updateLocation,\n        updateLocationWithError : updateLocationWithError,\n        clearLocation: clearLocation,\n        clearAll: clearAll\n    };\n\n    /* return list of valid location details */\n    function getLocationDetails() {\n        var locationData = locationStore.get();\n        var timeNow = timeProvider.getTime();\n\n        loggingService.logDebug(\"locationService.getLocationDetails\");\n        var details = _.filter(locationData.ProviderLocations, function (location) {\n            return (location.ExpiryTime > timeNow) && (location.ErrorCode === undefined);\n        });\n        if (details !== undefined && details !== null) {\n            if (arguments.length > 0) {\n                var providerCode = arguments[0];\n                details = _.filter(details, function (location) {\n                    return (location.ProviderCode == providerCode);\n                });\n                return details[0];\n            } else {\n                return details;\n            }\n        } else {\n            return [];\n        }\n    };\n\n    function getLocationErrors() {\n        var locationData = locationStore.get();\n\n        loggingService.logDebug(\"locationService.getLocationErrors\");\n        var errors = _.filter(locationData.ProviderLocations, function (location) {\n            return (location.ErrorCode !== undefined);\n        });\n        if (errors != null) {\n            loggingService.logDebug(\"locationService.getLocationErrors - errors.length:\" + errors.length);\n            _.each(errors, function(error) {\n                if (error != null) {\n                    loggingService.logDebug(\"locationService.getLocationErrors - ProviderCode:\" + error.ProviderCode + \" ErrorCode:\" + error.ErrorCode);\n                }\n            });\n        } else {\n            loggingService.logDebug(\"locationService.getLocationErrors - errors is null\");\n        }\n        return errors;\n    }\n\n    /* Provider codes:\n        'BLE',    //Bluetooth Low Energy\n        'GPS',    //Global Positioning System\n        'HFA',    //High Frequency Audio\n        'WIFI'    //WiFi (Wireless Fidelity)\n    */\n\n    /* Location Ids:\n        'PERTH',\n        'ASCOT',\n        'OSBOURNE'\n    */\n\n    /* called by a location provider to update current location */\n    function updateLocation(providerCode, locationId, validTimeSpanMs) {\n        var locationData = locationStore.get();\n        var timeNow = timeProvider.getTime();\n\n        loggingService.logDebug(\"locationService.updateLocation\");\n        var locations = _.filter(locationData.ProviderLocations, function (location) {\n            return location.ProviderCode != providerCode;\n        });\n        locations.push({\n            ProviderCode: providerCode,\n            LocationId: locationId,\n            ExpiryTime: timeNow + Number(validTimeSpanMs)\n        });\n        locationData.ProviderLocations = locations;\n        locationStore.set(locationData);\n    };\n\n    function updateLocationWithError(providerCode, errorCode) {\n        var locationData = locationStore.get();\n        var timeNow = timeProvider.getTime();\n\n        loggingService.logDebug(\"locationService.updateLocationWithError - provider:\" + providerCode + \" errorCode:\" + errorCode);\n        var locations = _.filter(locationData.ProviderLocations, function (location) {\n            return location.ProviderCode != providerCode;\n        });\n        locations.push({\n            ProviderCode: providerCode,\n            LocationId: null,\n            ErrorCode: errorCode,\n            ExpiryTime: timeNow + 604800000 // 1 week\n        });\n        locationData.ProviderLocations = locations;\n        locationStore.set(locationData);\n    }\n\n    /* called by a location provider to clear current location */\n    function clearLocation(providerCode) {\n        var locationData = locationStore.get();\n\n        loggingService.logDebug(\"locationService.clearLocation - providerCode:\" + providerCode);\n        var locations = _.filter(locationData.ProviderLocations, function (location) {\n            return location.ProviderCode != providerCode;\n        });\n        locationData.ProviderLocations = locations;\n        locationStore.set(locationData);\n    };\n\n    function clearAll() {\n        var locationData = locationStore.get();\n\n        loggingService.logDebug(\"locationService.clearAll\");\n        locationData.ProviderLocations = [];\n        locationStore.set(locationData);\n    };\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/Services/Location/LocationService.js\n// module id = 59\n// module chunks = 5","define([\"require\", \"exports\", \"inversify\", \"../../AppUtils/Framework/IOC/inversify.config\", \"./services.config\", \"./viewmodels.config\", \"underscore\"], function (require, exports, inversify_1, inversify_config_1, services_config_1, viewmodels_config_1, underscore) {\r\n    \"use strict\";\r\n    var loadModules = underscore.once(function (parent) {\r\n        var kernel = new inversify_1.Kernel();\r\n        kernel.parent = parent;\r\n        kernel.load(services_config_1.default);\r\n        kernel.load(viewmodels_config_1.default);\r\n        return kernel;\r\n    });\r\n    var kernel = loadModules(inversify_config_1.default);\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    exports.default = kernel;\r\n});\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Specials/IOC/inversify.config.ts\n// module id = 60\n// module chunks = 5","define(['../Services/LoggingService', './AnalyticsDataLayer'], function (loggingService, dataLayer) {\n\n    return {\n        trackNav: trackNav,\n        trackLogin: trackLogin,\n        trackBet: trackBet,\n        trackBetSingleSelected: trackBetSingleSelected,\n        trackBetSingleReview: trackBetSingleReview,\n        trackBetSingleReceipt: trackBetSingleReceipt,\n        trackBetSlipAdd: trackBetSlipAdd,\n        trackBetSlipReview: trackBetSlipReview,\n        trackBetSlipReceipt: trackBetSlipReceipt,\n        trackBetSlipCashSelected: trackBetSlipCashSelected,\n        trackBetSlipClear: trackBetSlipClear,\n        trackBetSlipRemove: trackBetSlipRemove,\n        trackMysterySelected: trackMysterySelected,\n        trackMysteryReview: trackMysteryReview,\n        trackMysteryReceipt: trackMysteryReceipt,\n        trackFavNumbersSelected: trackFavNumbersSelected,\n        trackFavNumbersReview: trackFavNumbersReview,\n        trackFavNumbersReceipt: trackFavNumbersReceipt,\n        trackTippingSelected: trackTippingSelected,\n        trackTippingReview: trackTippingReview,\n        trackTippingReceipt: trackTippingReceipt,\n        trackLogout: trackLogout,\n        trackExit: trackExit,\n        trackMenu: trackMenu,\n        trackBetWithCashPreference: trackBetWithCashPreference,\n        trackSignUp: trackSignUp,\n        trackMultiAdd: trackMultiAdd,\n        trackMultiReview: trackMultiReview,\n        trackMultiReceipt: trackMultiReceipt,\n        trackMultiRemove: trackMultiRemove,\n        trackMultiClear: trackMultiClear,\n        trackAccumulatorSelected: trackAccumulatorSelected,\n        trackAccumulatorReview: trackAccumulatorReview,\n        trackAccumulatorReceipt: trackAccumulatorReceipt,\n        trackCashSelected: trackCashSelected,\n        trackCashReceipt: trackCashReceipt,\n        trackCashRemove: trackCashRemove,\n        trackCashClear: trackCashClear,\n        trackAccount: trackAccount,\n        trackDeposit: trackDeposit,\n        trackCheckIn: trackCheckIn,\n        trackActivity: trackActivity,\n        trackKey: trackKey\n    };\n\n    function trackNav() {\n        trackKey(dataLayer.keys.nav);\n    }\n\n    function trackBet() {\n        trackKey(dataLayer.keys.betSelected);\n    }\n    function trackBetSingleSelected() {\n        \n        trackKey(dataLayer.keys.betSelected);\n    }\n    function trackBetSingleReview() {\n        trackKey(dataLayer.keys.betAccountSelected);\n        trackKey(dataLayer.keys.betAccountReview);\n    }\n    function trackBetSingleReceipt() {\n        trackKey(dataLayer.keys.betAccountProcessed);\n    }\n    function trackBetSlipAdd() {\n        trackKey(dataLayer.keys.betslipBetAdded);\n    }\n    function trackBetSlipReview() {\n        trackKey(dataLayer.keys.betslipAccountSelected);\n        trackKey(dataLayer.keys.betslipAccountReview);\n    }\n    function trackBetSlipReceipt() {\n        trackKey(dataLayer.keys.betslipAccountProcessed);\n    }\n    function trackBetSlipCashSelected() {\n        trackKey(dataLayer.keys.betslipCashSelected);\n    }\n    function trackBetSlipClear() {\n        trackKey(dataLayer.keys.betslipCleared);\n    }\n    function trackBetSlipRemove() {\n        trackKey(dataLayer.keys.betslipBetRemoved);\n    }\n    function trackMysterySelected() {\n        trackKey(dataLayer.keys.mysterySelected);\n    }\n    function trackMysteryReview() {\n        trackKey(dataLayer.keys.mysteryAccountSelected);\n        trackKey(dataLayer.keys.mysteryReview);\n    }\n    function trackMysteryReceipt() {\n        trackKey(dataLayer.keys.mysteryReceipt);\n    }\n    function trackFavNumbersSelected() {\n        trackKey(dataLayer.keys.favNumbersSelected);\n    }\n    function trackFavNumbersReview() {\n        trackKey(dataLayer.keys.favNumbersAccountSelected);\n        trackKey(dataLayer.keys.favNumbersAccountReview);\n    }\n    function trackFavNumbersReceipt() {\n        trackKey(dataLayer.keys.favNumbersAccountProcessed);\n    }\n    function trackTippingSelected() {\n        trackKey(dataLayer.keys.tippingSelected);\n    }\n    function trackTippingReview() {\n        trackKey(dataLayer.keys.tippingAccountSelected);\n        trackKey(dataLayer.keys.tippingAccountReview);\n    }\n    function trackTippingReceipt() {\n        trackKey(dataLayer.keys.tippingAccountProcessed);\n    }\n    function trackMultiAdd() {\n        trackKey(dataLayer.keys.multiBetAdded);\n    }\n    function trackMultiReview() {\n        trackKey(dataLayer.keys.multiAccountSelected);\n        trackKey(dataLayer.keys.multiAccountReview);\n    }\n    function trackMultiReceipt() {\n        trackKey(dataLayer.keys.multiAccountProcessed);\n    }\n    function trackMultiClear() {\n        trackKey(dataLayer.keys.multiCleared);\n    }\n    function trackMultiRemove() {\n        trackKey(dataLayer.keys.multiBetRemoved);\n    }\n    function trackAccumulatorSelected() {\n        trackKey(dataLayer.keys.accumulatorSelected);\n    }\n    function trackAccumulatorReview() {\n        trackKey(dataLayer.keys.accumulatorAccountSelected);\n        trackKey(dataLayer.keys.accumulatorAccountReview);\n    }\n    function trackAccumulatorReceipt() {\n        trackKey(dataLayer.keys.accumulatorAccountProcessed);\n    }\n    function trackCashSelected() {\n        trackKey(dataLayer.keys.cashBetSelected);\n    }\n    function trackCashReceipt() {\n        trackKey(dataLayer.keys.cashBetProcessed);\n    }\n    function trackCashRemove() {\n        trackKey(dataLayer.keys.cashBetRemoved);\n    }\n    function trackCashClear() {\n        trackKey(dataLayer.keys.cashCleared);\n    }\n\n    function trackLogin() {\n        trackKey(dataLayer.keys.login);\n    }\n    function trackLogout() {\n        trackKey(dataLayer.keys.logout);\n    }\n    function trackExit(externalSite) {\n        trackKey(dataLayer.keys.exitToBaseKey + externalSite);\n    }\n    function trackMenu() {\n        trackKey(dataLayer.keys.menu);\n    }\n    function trackBetWithCashPreference(state) {\n        \n        trackKey(dataLayer.keys.cashPreferenceBaseKey + state);\n    }\n    function trackSignUp(step) {\n        trackKey(dataLayer.keys.signupBaseKey + step);\n        \n    }\n    function trackAccount() {\n        trackKey(dataLayer.keys.accountProcessed);\n    }\n    function trackDeposit(key) {\n        trackKey(dataLayer.keys.depositBaseKey + key);\n    }\n    function trackCheckIn(key) {\n        trackKey(dataLayer.keys.checkInBaseKey + key);\n    }\n    function trackActivity(key) {\n        trackKey(dataLayer.keys.activityBaseKey + key);\n    }\n    function trackKey(key) {\n        if (typeof _satellite !== 'undefined') {\n            _satellite.track(key);\n        }\n    }\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/Analytics/AdobeDTMService.js\n// module id = 61\n// module chunks = 5 7","define([\"../ApiService\"], function (apiService) {\n    var fences = {};\n    var parameters = {};\n    \n    populateData();\n\n    return {\n        getFences: getFences,\n        getParameters: getParameters,\n        refresh: populateData\n    }\n\n    function populateData() {\n        apiService.fetchJsonFromApi(\"/api/GeoFence/Index\")\n            .then(function(parsedJson) {\n                fences = parsedJson;\n            });\n\n        apiService.fetchJsonFromApi(\"/api/config/lbsparameters\")\n            .then(function(parsedJson) {\n                parameters = parsedJson;\n            });\n    }\n\n    function getParameters() {\n        //TODO: Convert to promises - could still be fetching from api\n        return parameters;\n    }\n\n    function getFences() {\n        //TODO: Convert to promises - could still be fetching from api\n        return fences;\n    }\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/Services/Location/LbsConfigService.js\n// module id = 62\n// module chunks = 5","/**\r\n*\r\n*  Base64 encode / decode\r\n*  http://www.webtoolkit.info/\r\n*\r\n**/\r\nvar Base64 = {\r\n\r\n    // private property\r\n    _keyStr: \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\",\r\n\r\n    // public method for encoding\r\n    encode: function (input) {\r\n        var output = \"\";\r\n        var chr1, chr2, chr3, enc1, enc2, enc3, enc4;\r\n        var i = 0;\r\n\r\n        input = Base64._utf8_encode(input);\r\n\r\n        while (i < input.length) {\r\n\r\n            chr1 = input.charCodeAt(i++);\r\n            chr2 = input.charCodeAt(i++);\r\n            chr3 = input.charCodeAt(i++);\r\n\r\n            enc1 = chr1 >> 2;\r\n            enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);\r\n            enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);\r\n            enc4 = chr3 & 63;\r\n\r\n            if (isNaN(chr2)) {\r\n                enc3 = enc4 = 64;\r\n            } else if (isNaN(chr3)) {\r\n                enc4 = 64;\r\n            }\r\n\r\n            output = output +\r\n            this._keyStr.charAt(enc1) + this._keyStr.charAt(enc2) +\r\n            this._keyStr.charAt(enc3) + this._keyStr.charAt(enc4);\r\n\r\n        }\r\n\r\n        return output;\r\n    },\r\n\r\n    // public method for decoding\r\n    decode: function (input) {\r\n        var output = \"\";\r\n        var chr1, chr2, chr3;\r\n        var enc1, enc2, enc3, enc4;\r\n        var i = 0;\r\n\r\n        input = input.replace(/[^A-Za-z0-9\\+\\/\\=]/g, \"\");\r\n\r\n        while (i < input.length) {\r\n\r\n            enc1 = this._keyStr.indexOf(input.charAt(i++));\r\n            enc2 = this._keyStr.indexOf(input.charAt(i++));\r\n            enc3 = this._keyStr.indexOf(input.charAt(i++));\r\n            enc4 = this._keyStr.indexOf(input.charAt(i++));\r\n\r\n            chr1 = (enc1 << 2) | (enc2 >> 4);\r\n            chr2 = ((enc2 & 15) << 4) | (enc3 >> 2);\r\n            chr3 = ((enc3 & 3) << 6) | enc4;\r\n\r\n            output = output + String.fromCharCode(chr1);\r\n\r\n            if (enc3 != 64) {\r\n                output = output + String.fromCharCode(chr2);\r\n            }\r\n            if (enc4 != 64) {\r\n                output = output + String.fromCharCode(chr3);\r\n            }\r\n\r\n        }\r\n\r\n        output = Base64._utf8_decode(output);\r\n\r\n        return output;\r\n\r\n    },\r\n\r\n    // private method for UTF-8 encoding\r\n    _utf8_encode: function (string) {\r\n        string = string.replace(/\\r\\n/g, \"\\n\");\r\n        var utftext = \"\";\r\n\r\n        for (var n = 0; n < string.length; n++) {\r\n\r\n            var c = string.charCodeAt(n);\r\n\r\n            if (c < 128) {\r\n                utftext += String.fromCharCode(c);\r\n            }\r\n            else if ((c > 127) && (c < 2048)) {\r\n                utftext += String.fromCharCode((c >> 6) | 192);\r\n                utftext += String.fromCharCode((c & 63) | 128);\r\n            }\r\n            else {\r\n                utftext += String.fromCharCode((c >> 12) | 224);\r\n                utftext += String.fromCharCode(((c >> 6) & 63) | 128);\r\n                utftext += String.fromCharCode((c & 63) | 128);\r\n            }\r\n\r\n        }\r\n\r\n        return utftext;\r\n    },\r\n\r\n    // private method for UTF-8 decoding\r\n    _utf8_decode: function (utftext) {\r\n        var string = \"\";\r\n        var i = 0;\r\n        var c = c1 = c2 = 0;\r\n\r\n        while (i < utftext.length) {\r\n\r\n            c = utftext.charCodeAt(i);\r\n\r\n            if (c < 128) {\r\n                string += String.fromCharCode(c);\r\n                i++;\r\n            }\r\n            else if ((c > 191) && (c < 224)) {\r\n                c2 = utftext.charCodeAt(i + 1);\r\n                string += String.fromCharCode(((c & 31) << 6) | (c2 & 63));\r\n                i += 2;\r\n            }\r\n            else {\r\n                c2 = utftext.charCodeAt(i + 1);\r\n                c3 = utftext.charCodeAt(i + 2);\r\n                string += String.fromCharCode(((c & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63));\r\n                i += 3;\r\n            }\r\n\r\n        }\r\n\r\n        return string;\r\n    }\r\n\r\n}\r\n\r\ndefine('Base64',[],function() {\r\n    return Base64;\r\n})\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/vendor/Base64.js\n// module id = 63\n// module chunks = 5 7","define([\"knockout\", \"jquery\", \"underscore\", \"../../Navigation/Nav\", \"../../Common\", \"../../TabTouch\"], function (ko, jQuery, _, nav, common, tabtouch) {\n    var self;\n\n    function MultiViewModel(params) {\n        self = this;\n        this.backUrl = params.backUrl;\n        this.backText = params.backText;\n        tabtouch.initCommon(this.backUrl, this.backText);\n    }\n\n    MultiViewModel.prototype = Object.create(Object.prototype, {\n        initMultiLegDetail: {\n            value: function initMultiLegDetail() {\n                var items = jQuery('ul.multi-selections a');\n                items.click(function () {\n                    nav.ajaxGet(\n                        jQuery(this).attr('href'),\n                        self.processMultiLegDetail);\n                    return false;\n                });\n            }\n        },\n        processMultiLegDetail: {\n            value: function processMultiLegDetail(data) {\n                jQuery('#multi-leg-window #transaction-details').html(data);\n                common.initDisplayListStyle(jQuery('#multi-leg-window ul.display-list'));\n                jQuery('.popup').click(function () { jQuery('#multi-leg-window').fadeOut('fast'); });\n                common.showPopup(jQuery('#multi-leg-window'));\n            }\n        },\n        multiTimeout : {\n            value: 90000\n        }\n    });\n    Object.defineProperty(MultiViewModel, 'constructor', {\n        enumerable: false,\n        value: MultiViewModel\n    });\n\n    return MultiViewModel;\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/MultiBet/viewmodel/multi-viewmodel.js\n// module id = 64\n// module chunks = 5","module.exports = define;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"define\"\n// module id = 68\n// module chunks = 5","define(['./MessageBusService', './LoggingService'], function (msgBusService, loggingService) {\n    var loginCallback = null;\n    var logoutCallback = null;\n    var started = false;\n\n    return {\n        onLogin: onLogin,\n        onLogout: onLogout,\n        start: start,\n        stop: stop\n    };\n\n    function start() {\n        var msg = '';\n        if (!started) {\n            msg = 'account-monitoring-service : started';\n            loggingService.logDebug(msg);\n            setupLoginRefresh();\n            started = true;\n        } else {\n            msg = 'account-monitoring-service : already started';\n            loggingService.logDebug(msg);\n        }\n    }\n\n    function stop() {\n        var msg = '';\n        if (started) {\n            msg = 'account-monitoring-service : stoped';\n            loggingService.logDebug(msg);\n            stopLoginRefresh();\n            started = false;\n        } else {\n            msg = 'account-monitoring-service : already stoped';\n            loggingService.logDebug(msg);\n        }\n    }\n\n    function onLogin(callback) {\n        loginCallback = callback;\n        return this;\n    }\n\n    function onLogout(callback) {\n        logoutCallback = callback;\n        return this;\n    }\n\n    function setupLoginRefresh() {\n        var msg = 'account-monitoring-service : setupLoginRefresh';\n        loggingService.logDebug(msg);\n        msgBusService.subscribe('lo.login', loginCallback);\n        msgBusService.subscribe('lo.logout', logoutCallback);\n        msgBusService.subscribe('nav.nav', stopLoginRefresh);\n    };\n\n    function stopLoginRefresh() {\n        var msg = 'account-monitoring-service : stopLoginRefresh';\n        loggingService.logDebug(msg);\n        msgBusService.unsubscribe('lo.login', loginCallback);\n        msgBusService.unsubscribe('lo.logout', logoutCallback);\n        msgBusService.unsubscribe('na.nav', stopLoginRefresh);\n    };\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/Services/AccountMonitoringService.js\n// module id = 69\n// module chunks = 5","define([\"require\", \"exports\", \"knockout\", \"inversify\"], function (require, exports, ko, inversify_1) {\r\n    \"use strict\";\r\n    function registerComponent(config) {\r\n        if (!ko.components.isRegistered(config.componentName)) {\r\n            ko.components.register(config.componentName, {\r\n                viewModel: {\r\n                    createViewModel: config.resolver\r\n                },\r\n                template: config.template\r\n            });\r\n        }\r\n    }\r\n    exports.registerComponent = registerComponent;\r\n    function registerComponentWithParams(config) {\r\n        if (!ko.components.isRegistered(config.componentName)) {\r\n            ko.components.register(config.componentName, {\r\n                viewModel: {\r\n                    createViewModel: function (params) { return resolveWithParams(params, config.kernel, config.resolver); }\r\n                },\r\n                template: config.template\r\n            });\r\n        }\r\n    }\r\n    exports.registerComponentWithParams = registerComponentWithParams;\r\n    function resolveWithParams(params, kernel, resolver) {\r\n        var privateKernel = new inversify_1.Kernel();\r\n        privateKernel.parent = kernel;\r\n        privateKernel.bind(\"$params\").toConstantValue(params);\r\n        return resolver(privateKernel);\r\n    }\r\n});\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/AppUtils/Framework/Components/koComponentRegistration.ts\n// module id = 70\n// module chunks = 5","define([\"knockout\"], function (ko) {\n    return function (amount, min, max, step) {\n        var self = this;\n\n        self.Amount = ko.observable(amount);\n        self.AmountString = ko.observable(amount.toString());\n\n        self.Step = ko.observable(step);\n        self.Min = min;\n        self.Max = max;\n        self.Pattern = ko.computed(function () {\n            return self.Step() === 1 ? /^\\d{0,5}$/ : /^\\d{0,5}(\\.\\d?)?$/;\n        });\n\n        self.IsNumberPadVisible = ko.observable(false);\n        \n        self.ClearAmount = function () {\n            self.Amount(0);\n            self.AmountString(self.Amount().toString());\n        }\n\n        self.ShowNumberPad = function () {\n            self.IsNumberPadVisible(true);\n        }\n\n        self.HideNumberPad = function () {\n            self.IsNumberPadVisible(false);\n        }\n    };\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/Components/Calculator/Model/betamount-viewmodel.js\n// module id = 71\n// module chunks = 5","define(['knockout', 'underscore', './numberofbets-viewmodel'], function (ko, _, numberOfBetsViewModel) {\n    function numberOfBetsComponentViewModel(maxValue) {\n        var self = this;\n\n        _.bindAll(self, \"UpdateActiveNumberOfBets\");\n\n        var numberOfBetsViewModels = [];\n        for (var i = 1; i <= maxValue; i++) {\n            numberOfBetsViewModels.push(new numberOfBetsViewModel(i));\n        }\n\n        self.NumberOfBetsViewModels = ko.observableArray(numberOfBetsViewModels);\n        self.ActiveNumberOfBets = ko.observable();\n\n        //set initial active\n        self.ActiveNumberOfBets(_.first(numberOfBetsViewModels));\n        self.ActiveNumberOfBets().IsActive(true);\n    }\n\n    _.extend(numberOfBetsComponentViewModel.prototype, {\n        UpdateActiveNumberOfBets: function (selectedNumberOfBets) {\n            var self = this;\n            //make current one de-active\n            if (self.ActiveNumberOfBets() !== undefined) {\n                self.ActiveNumberOfBets().IsActive(false);\n            }\n            //assign new one\n            self.ActiveNumberOfBets(selectedNumberOfBets);\n            //activate new one\n            self.ActiveNumberOfBets().IsActive(true);\n        }\n    });\n\n    return numberOfBetsComponentViewModel;\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/Components/MysteryBet/Model/numberofbets-component-viewmodel.js\n// module id = 72\n// module chunks = 5","define(['./LocationService', './GeoFenceService', '../FeatureService', './GeoLocationService', './BeaconLocationService', '../Preferences/PreferencesService', '../MessageBusService', '../LoggingService', './LbsConfigService', './CheckInService', '../../DateProvider', './GpsStore'],\n    function (locationService, geofenceService, featureService, geoLocationService, beaconLocationService, preferencesService, messageBusService, loggingService, lbsConfigService, checkInService, dateProvider, gpsStore) {\n        var isRunning = false;\n\n        return {\n            start: initLocationProvider,\n            stop: clearLocationWatch,\n            jolt: jolt,\n            testfire: geoSuccess,\n            testfail: geoError,\n            isActive: isActive\n        };\n\n        function isActive() {\n            return isRunning;\n        }\n\n        function jolt() {\n            if (isRunning) {\n                geoLocationService.jolt();\n            }\n        }\n\n        function initLocationProvider(onPrefDisabled, onFeatureInactive) {\n                \n            if (preferencesService.locationServicesEnabled()) {\n                lbsConfigService.refresh();\n                featureService.isActive(\"LocationBasedServices\")\n                    .then(function(active) {\n                        if (active) {\n                            if (isRunning == false) {\n                                geoLocationService\n                                    .success(geoSuccess)\n                                    .error(geoError)\n                                    .init();\n                                beaconLocationService\n                                    .success(beaconSuccess)\n                                    .error(beaconError)\n                                    .init();\n                                isRunning = true;\n                            }\n                        } else if (onFeatureInactive) {\n                            onFeatureInactive();\n                        }\n                    });\n            } else if (onPrefDisabled) {\n                onPrefDisabled();\n            }\n        }\n\n        function clearLocationWatch() {\n            if (isRunning) {\n                geoLocationService.cancel();\n                isRunning = false;\n                checkInService.checkout();\n                locationService.clearLocation('GPSREGION');\n            }\n        }\n\n        function updateGpsRegion(closestFence, whereAmI, validTimeSpanMs) {\n            var deactivate = false;\n            var closestFenceId = closestFence.FenceId;\n            var checkedInFenceId = checkInService.checkedInLocationId();\n            if (closestFenceId !== undefined && closestFenceId !== '' &&\n                checkedInFenceId !== undefined && checkedInFenceId !== '' &&\n                closestFenceId !== checkedInFenceId) {\n                deactivate = true;\n            } else {\n                if (whereAmI === geofenceService.unknownLocation) {\n                    var shortestDistance = closestFence.DistanceToFence;\n                    var maxGeoFenceOutsideDistance = lbsConfigService.getParameters().maxOutsideDistance;\n                    if (shortestDistance >= maxGeoFenceOutsideDistance) {\n                        deactivate = true;\n                    }\n                }\n            }\n            if (deactivate) {\n                clearLocationWatch();\n            } else {         \n                locationService.updateLocation('GPSREGION', closestFenceId, validTimeSpanMs);\n            }\n        }\n\n        function geoSuccess(position) {\n            var msg = 'location-provider : geoSuccess - position=[' + position.coords.latitude + ',' + position.coords.longitude + ',' + position.coords.accuracy + ']';\n            gpsStore.set({\n                error: null,\n                position: position,\n                timeStamp: dateProvider.now()\n            });\n            loggingService.logDebug(msg);\n            if (preferencesService.locationServicesEnabled()) {\n                var whereAmI = geofenceService.whereAmI(position);\n                var closestFence = geofenceService.getClosestFence(position);\n                var validTimeSpanMs = lbsConfigService.getParameters().gpsTimeoutMs;\n                msg = 'location-provider : geoSuccess - whereAmI=[' + whereAmI + ']';\n                loggingService.logDebug(msg);\n                updateGpsRegion(closestFence, whereAmI, validTimeSpanMs);\n                if (whereAmI != geofenceService.unknownLocation) {\n                    locationService.updateLocation('GPS', whereAmI, validTimeSpanMs);\n                    locationService.updateLocation('GPSREGION', whereAmI, validTimeSpanMs);\n                } else {\n                    loggingService.logDebug(\"location-provider : geoSuccess - location unknown - clearing GPS location\");\n                    locationService.clearLocation('GPS');\n                }\n\n                messageBusService.publish('GPSSUCCESS', {\n                    location: whereAmI,\n                    position: position\n                });\n            }\n        }\n\n        function geoError(error) {\n            var msg = 'location-provider : geoError - code=[' + error.code + '] message=[' + error.message + ']';\n            loggingService.logDebug(msg);\n            gpsStore.set({\n                error: error,\n                position: null,\n                timeStamp: dateProvider.now()\n            });\n            if (preferencesService.locationServicesEnabled()) {\n                locationService.updateLocationWithError('GPS',error.code);\n                messageBusService.publish('GPSERROR', error);\n            }\n        }\n\n        function beaconSuccess(beacon) {\n            var msg = 'location-provider : beaconSuccess - beacon=[' + beacon.type + ',' + beacon.id + ']';\n            loggingService.logDebug(msg);\n            if (preferencesService.locationServicesEnabled()) {\n                locationService.updateLocation(beacon.type, beacon.id, lbsConfigService.getParameters().bcnTimeoutMs);\n                messageBusService.publish('BEACONID', beacon);\n            }\n        }\n\n        function beaconError(error) {\n            var msg = 'location-provider : beaconError - code=[' + error.code + '] message=[' + error.message + ']';\n            loggingService.logDebug(msg);\n            if (preferencesService.locationServicesEnabled()) {\n                locationService.updateLocationWithError('BLE',error.code);\n                locationService.updateLocationWithError('HFA',error.code);\n                messageBusService.publish('BEACONERROR', error);\n            }\n        }\n    });\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/Services/Location/LocationProvider.js\n// module id = 73\n// module chunks = 5","define([\"require\", \"exports\", \"../../IOC/inversify.config\", \"../../../AppUtils/Framework/Components/koComponentRegistration\", \"text-loader!./projected-pay.tmpl.html\"], function (require, exports, inversify_config_1, koComponentRegistration_1, template) {\r\n    \"use strict\";\r\n    koComponentRegistration_1.registerComponent({\r\n        componentName: \"projected-pay\",\r\n        template: template,\r\n        resolver: function () { return inversify_config_1.default.get(\"ProjectedPayViewModel\"); }\r\n    });\r\n});\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Specials/Components/ProjectedPay/register.ts\n// module id = 78\n// module chunks = 5","define([\"require\", \"exports\", \"../../IOC/inversify.config\", \"../../../AppUtils/Framework/Components/koComponentRegistration\", \"text-loader!./pyos-message.tmpl.html\"], function (require, exports, inversify_config_1, koComponentRegistration_1, template) {\r\n    \"use strict\";\r\n    koComponentRegistration_1.registerComponent({\r\n        componentName: \"pyos-message\",\r\n        template: template,\r\n        resolver: function () { return inversify_config_1.default.get(\"PyosMessageViewModel\"); }\r\n    });\r\n});\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Specials/Components/PyosMessage/register.ts\n// module id = 79\n// module chunks = 5","define([\"require\", \"exports\", \"../../IOC/inversify.config\", \"../../../AppUtils/Framework/Components/koComponentRegistration\", \"text-loader!./pyosselect.tmpl.html\"], function (require, exports, inversify_config_1, koComponentRegistration_1, template) {\r\n    \"use strict\";\r\n    koComponentRegistration_1.registerComponentWithParams({\r\n        componentName: \"pyos-select\",\r\n        template: template,\r\n        kernel: inversify_config_1.default,\r\n        resolver: function (k) { return k.get(\"PyosSelectViewModel\"); }\r\n    });\r\n});\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Specials/Components/PyosSelect/register.ts\n// module id = 80\n// module chunks = 5","define(['jockeyjs', '../Services/MessageBusService', '../Services/LoggingService'], function (jockey, messageBusService, loggingService) {\n    var serviceStarted = false;\n\n    return {\n        start: start,\n        stop: stop\n    }\n\n    // Inbound handlers\n    function gpsErrorCallback(payload) {\n        var msg = \"JockeyJsMessageService - inbound relay GPS Error : \" + JSON.stringify(payload);\n        loggingService.logDebug(msg);\n        messageBusService.publish(\"NATIVEGPSERROR\", payload);\n    }\n    function gpsCoordinatesCallBack(payload) {\n        var msg = \"JockeyJsMessageService - inbound relay GPS Coordinates : \" + JSON.stringify(payload);\n        loggingService.logDebug(msg);\n        messageBusService.publish(\"NATIVEGPSCOORDINATES\", payload);\n    }\n    function beaconErrorCallback(payload) {\n        var msg = \"JockeyJsMessageService - inbound relay BEACON Error : \" + JSON.stringify(payload);\n        loggingService.logDebug(msg);\n        messageBusService.publish(\"NATIVEBEACONERROR\", payload);\n    }\n    function beaconIdCallBack(payload) {\n        var msg = \"JockeyJsMessageService - inbound relay BEACON Id : \" + JSON.stringify(payload);\n        loggingService.logDebug(msg);\n        messageBusService.publish(\"NATIVEBEACONID\", payload);\n    }\n\n    function registerJockeyListeners() {\n        jockey.on(\"GPSCOORDINATES\", gpsCoordinatesCallBack);\n        jockey.on(\"GPSERROR\", gpsErrorCallback);\n        jockey.on(\"BEACONID\", beaconIdCallBack);\n        jockey.on(\"BEACONERROR\", beaconErrorCallback);\n    };\n    function deRegisterJockeyListeners() {\n        jockey.off(\"GPSCOORDINATES\");\n        jockey.off(\"GPSERROR\");\n        jockey.off(\"BEACONID\");\n        jockey.off(\"BEACONERROR\");\n    };\n\n    // Outbound handlers\n    function lbsTrackingCallback(state) {\n        var msg = \"JockeyJsMessageService - outbound relay LBS tracking : \" + JSON.stringify(state);\n        loggingService.logDebug(msg);\n        jockey.send(\"LBSTRACKING\", state);\n    }\n\n    function registerMessageBusListeners() {\n        messageBusService.subscribe(\"LBSTRACKING\", lbsTrackingCallback);\n    };\n    function deRegisterMessageBusListeners() {\n        messageBusService.unsubscribe(\"LBSTRACKING\", lbsTrackingCallback);\n    };\n\n    function start() {\n        if (!(serviceStarted)) {\n            registerJockeyListeners();\n            registerMessageBusListeners();\n            loggingService.logDebug(\"JockeyJsMessageService - started\");\n            serviceStarted = true;\n        }\n    }\n\n    function stop() {\n        if (serviceStarted) {\n            deRegisterJockeyListeners();\n            deRegisterMessageBusListeners();\n            loggingService.logDebug(\"JockeyJsMessageService - stopped\");\n            serviceStarted = false;\n        }\n    }\n})\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/JockeyJS/JockeyJSMessageService.js\n// module id = 81\n// module chunks = 5","/**\n * A basic routing system that Nav uses.\n */\ndefine([\"underscore\"], function (_) {\n    var routes = [];\n\n    function addRoute(urlPattern, fromPattern, handler) {\n        routes = _.filter(routes, function (route) { return route.urlPattern != urlPattern; });\n        routes.unshift({ urlPattern: urlPattern, handler: handler, fromPattern: fromPattern });\n    }\n\n    function removeRoute(urlPattern) {\n        routes = _.filter(routes, function (route) { return route.urlPattern != urlPattern; });\n    }\n\n    function follow(url, fromUrl) {\n        for (var i = 0; i < routes.length; ++i) {\n            var route = routes[i];\n            var pattern = new RegExp(route.urlPattern);\n            var fromPattern = new RegExp(route.fromPattern || \"^.*$\");\n            if (pattern.test(url) && fromPattern.test(fromUrl)) {\n                if (typeof route.handler == 'function') {\n                    route.handler(url);\n                } else {\n                    console.error(\"Handler for route \" + route.urlPattern + \" is invalid\");\n                }\n                return;\n            }\n        }\n    }\n\n    return {\n        addRoute: addRoute,\n        removeRoute: removeRoute,\n        follow: follow\n    }\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/Router.js\n// module id = 82\n// module chunks = 5","/**\n * Module for the slide-out-menu generally on the right of the web app.\n */\ndefine([\"jquery\", \"../Navigation/Nav\", \"../Logon\", \"../Services/MessageBusService\", \"../../Betting-v1/betslipservice.legacy\", \"../../Betting-v1/betwalletservice.legacy\"], function(jQuery, nav, loginController, msgBus, betSlipService, betWalletService) {\n    return new function() {\n        var self = this;\n\n        self.accountData = {};\n        self.page = {\n            initCounters: function() {\n                jQuery('.number-indicator:empty').hide();\n                jQuery('.bet-slip-container .multi').hide();\n                jQuery('.bet-slip-container .offers').hide();\n            },\n            setBetSlipContainerHeight: function() {\n                jQuery('.bet-slip-container').height(function() {\n                    jQuery(window).height();\n                });\n            },\n            loginButton: jQuery('.login a'),\n            links: jQuery('.bet-slip-container a'),\n            menuButton: jQuery('.bet-slip-toggle'),\n            isMenuOpen: function() {\n                return jQuery('.page-container').hasClass('bet-slip-open');\n            },\n            isAuthenticated: function() {\n                return jQuery('#LoggedOn').val() == \"True\";\n            },\n            closeMenu: function() {\n                jQuery('.page-container').removeClass('bet-slip-open');\n                jQuery('.bet-slip-container').fadeOut();\n                jQuery('.bet-slip-closer').detach();\n                msgBus.publish('nav.menu', 'close');\n            },\n            openMenu: function() {\n                jQuery('.page-container').addClass('bet-slip-open');\n                jQuery('.bet-slip-container.logged-in').fadeIn();\n                var betSlipCloser = jQuery('<a href=\"#closeBetSlip\" class=\"bet-slip-closer\" data-tid-bet-slip-closer=\"\">Close bet slip</a>');\n                jQuery('.page-container').append(betSlipCloser);\n                betSlipCloser.unbind('click').click(self.closer);\n                jQuery('.close-drawer').unbind('click').click(self.closer);\n                msgBus.publish('nav.menu', 'open');\n            },\n            showAuthenticatedView: function() {\n                jQuery('.unauthenticated-view').hide();\n                jQuery('.authenticated-view').show();\n            },\n            showUnauthenticatedView: function() {\n                jQuery('.unauthenticated-view').show();\n                jQuery('.authenticated-view').hide();\n            },\n            toggleCashBetsNavigationElements: function(value) {\n                jQuery('.slides').toggle(value);\n                jQuery('.next-slide').toggle(value);\n                jQuery('.previous-slide').toggle(value);\n            },\n            dataBind: function(data) {\n                if (data.AccountNumber > 0) {\n                    jQuery('.bet-slip-container .account-name').html(data.AccountName || {});\n                    jQuery('.bet-slip-container .account-number').html(data.AccountNumber || {});\n                    jQuery('.bet-slip-container .account-balance').html(data.Balance || {});\n                }\n                jQuery('.bet-slip-container .blackbook .number-indicator').html(data.BlackBookAlertCount || 0)\n                                                 .toggle(data.BlackBookAlertCount > 0 || false);\n\n                jQuery('.bet-slip-container .offers').toggle(data.TotalCampaignsCount > 0 || false);\n                jQuery('.bet-slip-container .offers .number-indicator').html(data.ActiveCampaignsCount || 0)\n                                                 .toggle(data.ActiveCampaignsCount > 0 || false);\n\n                jQuery('.bet-slip-container .multi').toggle(data.NumberOfTotalMultiBetLegs > 0 || false);\n                jQuery('.bet-slip-container .multi .number-indicator').html(data.NumberOfActiveMultiBetLegs || 0)\n                                             .toggle(data.NumberOfTotalMultiBetLegs > 0 || false);\n\n                jQuery('.bet-slip-container .bet-slip .number-indicator').html(data.betSlipCount || 0)\n                                             .toggle(data.betSlipCount > 0 || false);\n\n                jQuery('.bet-slip-container .bet-wallet .number-indicator').html(data.betWalletCount || 0)\n                                             .toggle(data.betWalletCount > 0 || false);\n            }\n        };\n\n        self.init = function() {\n            self.page.initCounters();\n            self.page.setBetSlipContainerHeight();\n\n            self.page.links.click(function(e) {\n                self.toggleMenuSlide(e);\n            });\n            self.page.loginButton.click(function(e) {\n                loginController.login();\n                return false;\n            });\n\n            self.page.menuButton.click(function(e) {\n                e.preventDefault();\n                self.toggleMenuSlide(e);\n            });\n\n            msgBus.subscribe(\"lo.logout\", self.showUnauthenticatedView);\n            msgBus.subscribe(\"lo.login\", self.showAuthenticatedView);\n            msgBus.subscribe(\"nav.hashchange\", self.closeMenu);\n            msgBus.subscribe(\"menu.shouldClose\", self.closeMenu);\n\n            //Removed - see card TO-585 - has performance impact\n            //setTimeout(function() {\n            //    self.loadData();\n            //}, 500);\n        };\n\n        self.isOpen = function() {\n            return self.page.isMenuOpen();\n        };\n\n        self.isAuthenticated = function() {\n            return self.page.isAuthenticated();\n        };\n\n        self.closeMenu = function() {\n            if (self.isOpen()) {\n                self.page.closeMenu();\n                self.toggleCashBetsNavigationElements(true);\n            }\n        };\n\n        self.openMenu = function() {\n            self.toggleCashBetsNavigationElements(false);\n            if (self.isAuthenticated()) {\n                self.showAuthenticatedView();\n            } else {\n                self.showUnauthenticatedView();\n            }\n            self.page.openMenu();\n            self.loadData();\n        };\n\n        self.toggleCashBetsNavigationElements = function(value) {\n            self.page.toggleCashBetsNavigationElements(value);\n        };\n        self.closer = function() {\n            self.closeMenu();\n            return false;\n        };\n\n        self.loadData = function() {\n            //Insert loading indicators\n            var container = jQuery(\".bet-slip-container\").find(\".authenticated-view\");\n            container.find(\".account-name\").text(\"Loading...\");\n            container.find(\".account-number\").text(\"Loading...\");\n            container.find(\".account-balance\").text(\"Loading...\");\n\n            //Only make this call when the menu is opened for performance issues\n            nav.ajaxGet(\n                '/account/getaccountdetailsformenu',\n                self.processData,\n                { error: self.handleDataError });\n        };\n\n        self.processData = function(data) {\n            if (data) {\n                if (data.AccountNumber == 0) {\n                    self.showUnauthenticatedView();\n                }\n                data.betSlipCount = betSlipService.getBetSlipCount();\n                data.betWalletCount = betWalletService.getBetWalletCount();\n                self.accountData = data;\n                self.dataBind(self.accountData);\n            }\n        };\n\n        self.handleDataError = function(status, xhr) {\n            self.showUnauthenticatedView();\n            self.toggleMenuSlide();\n        };\n\n        self.showAuthenticatedView = function() {\n            self.page.showAuthenticatedView();\n        };\n\n        self.showUnauthenticatedView = function() {\n            self.page.showUnauthenticatedView();\n        };\n\n        self.dataBind = function(data) {\n            self.page.dataBind(data);\n        };\n\n        self.toggleMenuSlide = function(e) {\n            if (self.isOpen()) {\n                self.closeMenu();\n            } else {\n                self.openMenu();\n            }\n        };\n\n        return self;\n    }\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/ViewModels/PrimaryMenuViewModel-Extension.js\n// module id = 83\n// module chunks = 5","define([\"rwwa-rx-state-machine\", \"../../../Foundation/Services/MessageBusService\", \"immutable\"], function (stateMachine, messageBus, immutable) {\n    var intents = {\n        navigateToRace: stateMachine.createIntent(\"NavigateToRace\"),\n        navigateBack: stateMachine.createIntent(\"Navigate Back\"),\n        pushHandlerTag: stateMachine.createIntent(\"PushHandlerTag\"),\n        popHandlerTag: stateMachine.createIntent(\"PopHandlerTag\"),\n        modalNavigateBack: stateMachine.createIntent(\"ModalNavigateBack\")\n    };\n\n    function navigationDriver(state, intent) {\n        state = state || immutable.OrderedMap();\n\n        switch (intent.tag) {\n            case intents.navigateToRace:\n                {\n                    if (intent.data.fixtureId !== null && intent.data.raceNumber !== null && intent.data.fixtureDate !== null) {\n                        window.location.hash = \"#tote/meetings/\" + intent.data.fixtureId + \"/\" + intent.data.raceNumber + \"?date=\" + intent.data.fixtureDate;\n                    }\n                    break;\n                }\n\n            case intents.pushHandlerTag:\n                {\n                    return state.set(intent.data, intent.data);\n                }\n\n            case intents.popHandlerTag:\n                {\n                    return state.delete(intent.data);\n                }\n\n            case intents.modalNavigateBack:\n                {\n                    if (state.size > 0)\n                        intents.navigateBack(state.last());\n                }\n        }\n\n        return state;\n    }\n\n    intents.navigationState$ = stateMachine\n        .attachDriver({ path: \"navigation\", driver: navigationDriver })\n        .distinctUntilChanged();\n\n    return intents;\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/AppUtils/Framework/Intent/navigation.js\n// module id = 86\n// module chunks = 5","define([\n    'jquery'\n], function (jQuery) {\n    return {\n        initView: initView\n    }\n\n    function initView() {\n        jQuery('body#home').removeAttr('id');\n        jQuery('body').removeAttr('class');\n        jQuery('html').attr('class', 'page-tabtrack');\n        jQuery('.button.help').hide();\n        jQuery('a#backButton').show().attr('href', '/#');\n    }\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/ViewModels/Location/LbsViewModel.js\n// module id = 87\n// module chunks = 5","/*** IMPORTS FROM imports-loader ***/\n(function() {\n\n//\n//  JockeyJS\n//\n//  Copyright (c) 2013, Tim Coulter\n//\n//  Permission is hereby granted, free of charge, to any person obtaining\n//  a copy of this software and associated documentation files (the\n//  \"Software\"), to deal in the Software without restriction, including\n//  without limitation the rights to use, copy, modify, merge, publish,\n//  distribute, sublicense, and/or sell copies of the Software, and to\n//  permit persons to whom the Software is furnished to do so, subject to\n//  the following conditions:\n//\n//  The above copyright notice and this permission notice shall be\n//  included in all copies or substantial portions of the Software.\n//\n//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n//  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n//  MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n//  NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\n//  LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n//  OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n//  WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n;(function() {\n\n    // Non-accessible variable to send to the app, to ensure events only\n    // come from the desired host.\n    var host = window.location.host;\n\n    var Dispatcher = {\n        callbacks: {},\n\n        send: function(envelope, complete) {\n            this.dispatchMessage(\"event\", envelope, complete);\n        },\n\n        sendCallback: function(messageId) {\n            var envelope = Jockey.createEnvelope(messageId);\n\n            this.dispatchMessage(\"callback\", envelope, function() {});\n        },\n\n        triggerCallback: function(id, data) {\n            var dispatcher = this;\n\n            // Alerts within JS callbacks will sometimes freeze the iOS app.\n            // Let's wrap the callback in a timeout to prevent this.\n            setTimeout(function() {\n                dispatcher.callbacks[id](data);\n            }, 0);\n        },\n\n        // `type` can either be \"event\" or \"callback\"\n        dispatchMessage: function(type, envelope, complete) {\n            // We send the message by navigating the browser to a special URL.\n            // The iOS library will catch the navigation, prevent the UIWebView\n            // from continuing, and use the data in the URL to execute code\n            // within the iOS app.\n\n            var dispatcher = this;\n\n            this.callbacks[envelope.id] = function(data) {\n                complete(data);\n\n                delete dispatcher.callbacks[envelope.id];\n            };\n\n            var src = \"jockey://\" + type + \"/\" + envelope.id + \"?\" + encodeURIComponent(JSON.stringify(envelope));\n            var iframe = document.createElement(\"iframe\");\n            iframe.setAttribute(\"src\", src);\n            document.documentElement.appendChild(iframe);\n            iframe.parentNode.removeChild(iframe);\n            iframe = null;\n        }\n    };\n\n    var Jockey = {\n        listeners: {},\n\n        dispatcher: null,\n\n        messageCount: 0,\n\n        on: function(type, fn) {\n            if (!(this.listeners.hasOwnProperty(type)) || !(this.listeners[type] instanceof Array)) {\n                this.listeners[type] = [];\n            }\n\n            this.listeners[type].push(fn);\n        },\n\n        off: function(type) {\n            if ((!this.listeners.hasOwnProperty(type)) || !(this.listeners[type] instanceof Array)) {\n                this.listeners[type] = [];\n            }\n\n            this.listeners[type] = [];\n        },\n\n        send: function(type, payload, complete) {\n            if (payload instanceof Function) {\n                complete = payload;\n                payload = null;\n            }\n\n            payload = payload || {};\n            complete = complete || function() {};\n\n            var envelope = this.createEnvelope(this.messageCount, type, payload);\n\n            this.dispatcher.send(envelope, complete);\n\n            this.messageCount += 1;\n        },\n\n        // Called by the native application when events are sent to JS from the app.\n        // Will execute every function, FIFO order, that was attached to this event type.\n        trigger: function(type, messageId, json) {\n            var self = this;\n\n            var listenerList = this.listeners[type] || [];\n\n            var executedCount = 0;\n\n            var complete = function() {\n                executedCount += 1;\n\n                if (executedCount >= listenerList.length) {\n                    self.dispatcher.sendCallback(messageId);\n                }\n            };\n\n            for (var index = 0; index < listenerList.length; index++) {\n                var listener = listenerList[index];\n\n                // If it's a \"sync\" listener, we'll call the complete() function\n                // after it has finished. If it's async, we expect it to call complete().\n                if (listener.length <= 1) {\n                    listener(json);\n                    complete();\n                } else {\n                    listener(json, complete);\n                }\n            }\n\n        },\n\n        // Called by the native application in response to an event sent to it.\n        // This will trigger the callback passed to the send() function for\n        // a given message.\n        triggerCallback: function(data) {\n            var dataObj = JSON.parse(data);\n            this.dispatcher.triggerCallback(dataObj.messageId, dataObj.data);\n        },\n\n        createEnvelope: function(id, type, payload) {\n            return {\n                id: id,\n                type: type,\n                host: host,\n                payload: payload\n            };\n        }\n    };\n\n    // i.e., on a Desktop browser.\n    var nullDispatcher = {\n        send: function(envelope, complete) {\n            complete();\n        },\n        triggerCallback: function() {},\n        sendCallback: function() {}\n    };\n\n    // Dispatcher detection. Currently only supports iOS.\n    // Looking for equivalent Android implementation.\n    var i = 0,\n        iOS = false,\n        iDevice = [\"iPad\", \"iPhone\", \"iPod\"];\n\n    for (; i < iDevice.length; i++) {\n        if (navigator.platform.indexOf(iDevice[i]) >= 0) {\n            iOS = true;\n            break;\n        }\n    }\n\n    // Detect UIWebview. In Mobile Safari proper, jockey urls cause a popup to\n    // be shown that says \"Safari cannot open page because the URL is invalid.\"\n    // From here: http://stackoverflow.com/questions/4460205/detect-ipad-iphone-webview-via-javascript\n\n    var UIWebView = /(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent);\n    var isAndroid = navigator.userAgent.toLowerCase().indexOf(\"android\") > -1;\n\n    if ((iOS && UIWebView) || isAndroid) {\n        Jockey.dispatcher = Dispatcher;\n    } else {\n        Jockey.dispatcher = nullDispatcher;\n    }\n\n    window.Jockey = Jockey;\n})();\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = Jockey;\n}.call(window));\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/jockeyjs/jockey.js\n// module id = 89\n// module chunks = 5","define([\"require\", \"exports\"], function (require, exports) {\r\n    \"use strict\";\r\n    var definedModules = {};\r\n    window[\"webpackRequire\"] = function (moduleNames, callback) {\r\n        var moduleResults = [], numDeps = moduleNames.length, numDone = 0;\r\n        var onHandlerDone = function () {\r\n            numDone++;\r\n            if (numDone === numDeps) {\r\n                var args = [];\r\n                moduleResults.forEach(function (obj) {\r\n                    args.push(obj.result);\r\n                });\r\n                callback.apply(callback, args);\r\n            }\r\n        };\r\n        moduleNames.forEach(function (moduleName) {\r\n            var handler = get(moduleName);\r\n            moduleResults.push({\r\n                moduleName: moduleName,\r\n                result: undefined\r\n            });\r\n            handler(function (result) {\r\n                for (var idx = 0, len = moduleResults.length; idx < len; idx++) {\r\n                    if (moduleResults[idx].moduleName === moduleName) {\r\n                        moduleResults[idx].result = result;\r\n                    }\r\n                }\r\n                onHandlerDone();\r\n            });\r\n        });\r\n    };\r\n    function get(moduleName) {\r\n        if (moduleName in definedModules) {\r\n            return definedModules[moduleName];\r\n        }\r\n        else {\r\n            throw new Error(\"Module \" + moduleName + \" is not defined\");\r\n        }\r\n    }\r\n    exports.get = get;\r\n    function define(moduleName, handler) {\r\n        if (!(\"name\" in definedModules)) {\r\n            definedModules[moduleName] = handler;\r\n        }\r\n        else {\r\n            throw new Error(\"Module \" + moduleName + \" is already defined\");\r\n        }\r\n    }\r\n    exports.define = define;\r\n    var HandlerResult = (function () {\r\n        function HandlerResult() {\r\n        }\r\n        return HandlerResult;\r\n    }());\r\n});\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/AppUtils/inline-require.ts\n// module id = 92\n// module chunks = 5","define(['knockout', \"./NeoViewModel\", 'text-loader!./Neo.tpl.html', '../Logon/register', '../ChangePassword/register', '../RecoverPassword/register', '../RecoverAccountNumber/register', '../Progress/register'], function (ko, AuthenticationViewModel, template) {\n    ko.components.register('tt-authenticate', {\n        viewModel: {\n            createViewModel: function (params) {\n                return new AuthenticationViewModel(params);\n            }\n        },\n        template: template\n    });\n})\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/Components/Authentication/Neo/register.js\n// module id = 94\n// module chunks = 5","/**\n * Handles Blackbook storage and API queries.\n */\ndefine(['jquery', 'amplify', '../../Lock'], function(jQuery, amplify, locking) {\n    var self = this;\n\n    var _lockName = \"myblackbook-service\";\n    var _storeKey = \"myblackbook.compositeKeys\";\n    var _blackBookNames = null;\n    var _pullPending = false;\n    var _enabled = true;\n\n    //can't use localstorage as user can close the browser while he was logged in and when he opens the browser again he is no longer logged in so should not show blackbook info.\n    var _sessionStorage = function() {\n        if (amplify.store.types.sessionStorage) {\n            return amplify.store.sessionStorage;\n        }\n        return amplify.store.memory;\n    }();;\n\n    // prevent simultaneous calls to web service\n    var _lock = locking.shared_lock(_lockName);\n\n    // build composite key from black book item\n    var _itemToCompositeKey = function(fixType, starterName) {\n        return fixType[0] + jQuery.trim(starterName.toString().toUpperCase());\n    };\n\n    var _setBlackBookNames = function(values) {\n        _blackBookNames = collections.multiset.withArray(values);\n    };\n\n    var _updateStore = function(value) {\n        _sessionStorage(_storeKey, value);\n    };\n\n    var _getStore = function() {\n        return _sessionStorage(_storeKey);\n    };\n\n    var _loadMemberShipSet = function(func) {\n        if (_lock.trylock()) {\n            jQuery.post(\n                'account/blackbook/getmembershipset', {}\n            )\n            .done(function(data) {\n                _setBlackBookNames(data.compositeKeys);\n                _updateStore({ data: data.compositeKeys });\n                _pullPending = false;\n                func(self);\n            })\n            .always(function() {\n                _lock.unlock();\n            });\n        }\n    };\n\n    var _getBlackBookNames = function(func) {\n        if (_blackBookNames) {\n            func(self);\n            return;\n        }\n\n        var storedMsg = _getStore();\n        if (storedMsg) {\n            _setBlackBookNames(storedMsg.data);\n            func(self);\n            return;\n        }\n\n        if (!_pullPending) {\n            _pullPending = true;\n            _loadMemberShipSet(func);\n        }\n    };\n\n    self.ready = function(func) {\n        _pullPending = false;\n        _getBlackBookNames(func);\n    };\n\n    self.entryCount = function(fixType, starterName) {\n        return self.findEntryCount(_itemToCompositeKey(fixType, starterName));\n    };\n\n    self.findEntryCount = function(compositeKey) {\n        if (_enabled && _blackBookNames) {\n            return _blackBookNames.count(compositeKey);\n        }\n        return 0;\n    };\n\n    self.clear = function() {\n        _blackBookNames = null;\n        _pullPending = false;\n        _updateStore(null);\n    };\n\n    return self;\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/Components/Blackbook/myblackbook-service.js\n// module id = 95\n// module chunks = 5","define(['jquery'],\n    function(jQuery) {\n        return {\n            bind: function(controller, element) {\n                jQuery(element)\n                    .find('[data-on-click]')\n                    .each(function() {\n                        var data = jQuery(this).data(\"on-click\").split(':');\n                        var params = data.splice(1, data.length - 1);\n                        jQuery(this)\n                            .click(function(event) {\n                                event.preventDefault();\n                                controller[data[0]].apply(controller, params);\n                            });\n                    });\n\n                var dataClass = jQuery(element).find('[data-class]');\n                var dataVisible = jQuery(element).find('[data-visible]');\n\n                controller.updateBindings = function() {\n                    dataClass.each(function() {\n                        var data = jQuery(this).data(\"class\").split(':');\n                        var params = data.splice(1, data.length - 1);\n                        if (controller[params[0]]()) {\n                            jQuery(this).addClass(data[0]);\n                        } else {\n                            jQuery(this).removeClass(data[0]);\n                        }\n                    });\n                    dataVisible.each(function() {\n                        var data = jQuery(this).data(\"visible\").split(':');\n                        var params = data.splice(1, data.length - 1);\n                        if (controller[data[0]].apply(controller, params)) {\n                            jQuery(this).show();\n                        } else {\n                            jQuery(this).hide();\n                        }\n                    });\n                };\n            }\n    };\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/Components/Blackbook/myblackbook-viewbinding.js\n// module id = 96\n// module chunks = 5","/**\n * A controller class that has to be constructed and bound to a view.\n * \n *  @return constructor\n */\ndefine([\"jquery\", \"../../Navigation/Nav\", \"../../Router\", \"../../Common\", \"../../TabTouch\", \"../../Lock\", \"./myblackbook-service\"], function(jQuery, nav, router, common, tabtouch, locking, blackBookService) {\n    return function() {\n        var self = this;\n\n        self.model = null;\n        self.baseUrl = '#account/blackbook';\n        self.parentUrl = '#account';\n        self.lock = new locking.lock();\n        self.confirmDialog = new confirmation.Dialog(jQuery, common);\n\n        self.sendSms = function() {\n            return self.model.Details.SendSms;\n        };\n\n        self.sendEmail = function() {\n            return self.model.Details.SendEmail;\n        };\n\n        self.isPage = function(id) {\n            return self.model.Id == id;\n        };\n\n        self.pageNotFound = function() {\n            var id = self.model.Id;\n            if (id == 0) {\n                return false;\n            }\n            if (self.model && self.model.Entries) {\n                var entries = self.model.Entries;\n                for (var i in entries) {\n                    if (entries[i].BlackbookSeq == id) {\n                        return false;\n                    }\n                }\n            }\n            return true;\n        };\n\n        self.setModel = function(model) {\n            self.model = model;\n        };\n\n        self.setpage = function(id) {\n            var href = '#account/blackbook?id=' + id;\n            nav.nav(href);\n            location.hash = href;\n        };\n\n        self.setsms = function() {\n            var request = self.model.Details;\n            if (request) {\n                request.SendSms = !request.SendSms;\n                self.setdetails(request);\n            }\n        };\n\n        self.setemail = function() {\n            var request = self.model.Details;\n            if (request) {\n                request.SendEmail = !request.SendEmail;\n                self.setdetails(request);\n            }\n        };\n\n        self.setdetails = function(request) {\n            if (self.lock.trylock()) {\n                nav.ajaxPost(\n                    'account/blackbook/setdetails',\n                    jQuery.param(request),\n                    function(data) {\n                        self.model.Details = data.result;\n                        self.updateView();\n                        self.lock.unlock();\n                    },\n                    {\n                        error: function(xhr, textStatus) {\n                            self.lock.unlock();\n                        }\n                    });\n            }\n        };\n\n        self.remove = function(id) {\n            self.confirmDialog.show(\"Are you sure you want to delete Blackbook entry?\", function() {\n                var href = '#account/blackbook/remove?blackBookSeq=' + id;\n                nav.nav(href);\n            });\n        };\n\n        self.removeall = function() {\n            self.confirmDialog.show(\"Are you sure you want to delete all Blackbook entries?\", function() {\n                nav.nav('/#account/blackbook/removeall');\n            });\n        };\n\n        self.get = function(url) {\n            var param = /\\?id=(\\d+)$/.exec(url);\n            self.model.Id = param ? param[1] : 0;\n            self.updateView();\n        };\n\n        self.initView = function() {\n            blackBookService.clear();\n            if (self.model.Id) {\n                tabtouch.initCommon(self.baseUrl, \"Back\");\n            } else {\n                tabtouch.initCommon(self.parentUrl, \"Account\");\n            }\n            self.updateView();\n\n            router.addRoute('^account/blackbook$', '^account/blackbook\\\\?id=\\\\d+$', function(url) {\n                window.setTimeout(function() {\n                    self.get(url);\n                }, 0);\n            });\n            router.addRoute('^account/blackbook\\\\?id=\\\\d+$', '^account/blackbook$', function(url) {\n                window.setTimeout(function() {\n                    self.get(url);\n                }, 0);\n            });\n        };\n\n        self.updateView = function() {\n            if (self.updateBindings) {\n                self.updateBindings();\n            }\n\n            if (self.model.Id) {\n                nav.setBackUrl(self.baseUrl);\n                nav.resetBack(\"Back\");\n            } else {\n                nav.setBackUrl(self.parentUrl);\n                nav.resetBack(\"Account\");\n            }\n        };\n\n        return self;\n    }\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/Components/Blackbook/myblackbook-viewcontroller.js\n// module id = 97\n// module chunks = 5","define(\n    [\n        'knockout'\n        , './Model/amountinput-component-viewmodel'\n        , \"text-loader!./View/amountinput.tmpl.html\"\n        , \"./Model/numberpad-component-viewmodel\"\n        , \"text-loader!./View/numberpad.tmpl.html\"\n        , \"./Model/calculator-component-viewmodel\"\n        , \"text-loader!./View/calculator.tmpl.html\"\n\n    ], function (\n        ko,\n        amountinputViewModel,\n        amountinputTpl,\n        numberpadViewModel,\n        numberpadTpl,\n        calculatorViewModel,\n        calculatorTpl\n    ) {\n    if (!ko.components.isRegistered(\"amountinput\")) {\n        ko.components.register(\"amountinput\", {\n            viewmodel: amountinputViewModel,\n            template: amountinputTpl\n        });\n    }\n    if (!ko.components.isRegistered(\"numberpad\")) {\n        ko.components.register(\"numberpad\", {\n            viewModel: numberpadViewModel,\n            template: numberpadTpl\n        });\n    }\n    if (!ko.components.isRegistered(\"calculator\")) {\n        ko.components.register(\"calculator\", {\n            viewModel: calculatorViewModel,\n            template: calculatorTpl\n        });\n    }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/Components/Calculator/register.js\n// module id = 98\n// module chunks = 5","define(['knockout', 'underscore', './bettype-viewmodel', './option-viewmodel'], function (ko, _, betTypeViewModel, optionViewModel) {\n    function betTypeComponentViewModel(viewModel) {\n        var self = this;\n\n        _.bindAll(self, \"UpdateActiveBetType\");\n\n        var betTypeViewModels = [];\n        betTypeViewModels.push(new betTypeViewModel\n            (\n                \"WinPlace\",\n                \"Win & Place\",\n                [new optionViewModel(1, 1, \"Tote only, 1 starter, Win and/or Place investment\"),\n                    new optionViewModel(2, 2, \"Tote only, 2 starters, Win and/or Place investment\"),\n                    new optionViewModel(3, 3, \"Tote only, 3 starters, Win and/or Place investment\"),\n                    new optionViewModel(4, 4, \"Tote only, 4 starters, Win and/or Place investment\"),\n                    new optionViewModel(5, 5, \"Tote only, 5 starters, Win and/or Place investment\")\n                ],\n                1,\n                _.contains(viewModel.DisabledMysteryProducts, \"WinPlace\")\n            )\n        );\n        betTypeViewModels.push(new betTypeViewModel\n            (\n                \"Quinella\",\n                \"Quinella\",\n                [   new optionViewModel(1, 1, \"2 starters any order\"),\n                    new optionViewModel(2, 2, \"1 starter for 1st, 1 of 2 starters for 2nd\"),\n                    new optionViewModel(3, 3, \"3 starters any order\"),\n                    new optionViewModel(4, 6, \"4 starters any order\"),\n                    new optionViewModel(5, 10, \"5 starters any order\"),\n                    new optionViewModel(6, 15, \"6 starters any order\"),\n                    new optionViewModel(7, 21, \"7 starters any order\")\n                ],\n                1,\n                _.contains(viewModel.DisabledMysteryProducts, \"Quinella\")\n            )\n        );\n        betTypeViewModels.push(new betTypeViewModel\n            (\n                \"Exacta\",\n                \"Exacta\",\n                [   new optionViewModel(1, 1, \"2 starters in order\"),\n                    new optionViewModel(2, 2, \"1 starter with 2 starters\"),\n                    new optionViewModel(3, 6, \"3 starters any order\"),\n                    new optionViewModel(4, 12, \"4 starters any order\"),\n                    new optionViewModel(5, 20, \"5 starters any order\"),\n                    new optionViewModel(6, 30, \"6 starters any order\"),\n                    new optionViewModel(7, 42, \"7 starters any order\")\n                ],\n                1,\n                _.contains(viewModel.DisabledMysteryProducts, \"Exacta\")\n            )\n        );\n        betTypeViewModels.push(new betTypeViewModel\n            (\n                \"Trifecta\",\n                \"Trifecta\",\n                [   new optionViewModel(1, 1, \"1st, 2nd and 3rd in order\"),\n                    new optionViewModel(2, 2, \"1 first, 2 and 3 any order\"),\n                    new optionViewModel(3, 6, \"1, 2, 3 any order\"),\n                    new optionViewModel(4, 24, \"3 of 4 any place or order\"),\n                    new optionViewModel(5, 60, \"3 of 5 any place or order\"),\n                    new optionViewModel(6, 120, \"3 of 6 any place or order\"),\n                    new optionViewModel(7, 36, \"1 of 2 starters 1st, 1 of 4 2nd, 1 of 8 3rd\")\n                ],\n                2,\n                _.contains(viewModel.DisabledMysteryProducts, \"Trifecta\")\n            )\n        );\n        betTypeViewModels.push(new betTypeViewModel\n            (\n                \"First4\",\n                \"First 4\",\n                [   new optionViewModel(1, 1, \"1st, 2nd, 3rd and 4th in order\"),\n                    new optionViewModel(2, 2, \"1 starter 1st, 1 starter 2nd, 2 other starters 3rd or 4th in any order\"),\n                    new optionViewModel(3, 6, \"1 starter 1st, 3 other starters 2nd, 3rd or 4th in any order\"),\n                    new optionViewModel(4, 24, \"1st, 2nd, 3rd and 4th in any order\"),\n                    new optionViewModel(5, 120, \"Any 4 of 5 starters to come 1st, 2nd, 3rd and 4th in any order\"),\n                    new optionViewModel(6, 360, \"Any 4 of 6 starters to come 1st, 2nd, 3rd and 4th in any order\"),\n                    new optionViewModel(7, 36, \"2 of 3 starters to come 1st or 2nd and 2 of 3 starters to come 3rd or 4th\")\n                ],\n                1,\n                _.contains(viewModel.DisabledMysteryProducts, \"First4\")\n            )\n        );\n        if (viewModel.DisplayQuaddie) {\n            betTypeViewModels.push(new betTypeViewModel\n                (\n                    \"Quaddie\",\n                    \"Quaddie (\" + viewModel.QuaddieRaceNumbers.join() + \")\",\n                    [\n                        new optionViewModel(1, 1, \"1 starter in all four legs\"),\n                        new optionViewModel(2, 2, \"2 starters in first leg, 1 starter in remaining three legs\"),\n                        new optionViewModel(3, 8, \"2 starters in first three legs, 1 starter in fourth leg\"),\n                        new optionViewModel(4, 16, \"2 starters in all four legs\"),\n                        new optionViewModel(5, 36, \"3 starters in first two legs, 2 starters in remaining two legs\"),\n                        new optionViewModel(6, 81, \"3 starters in all four legs\"),\n                        new optionViewModel(7, 256, \"4 starters in all four legs\")\n                    ],\n                    1,\n                    _.contains(viewModel.DisabledMysteryProducts, \"Quaddie\")\n                )\n            );\n        }\n        //Combo has been asked to remove from BetTypes\n        //betTypeViewModels.push(new betTypeViewModel\n        //    (\n        //        \"Combo\",\n        //        \"Combo\",\n        //        [   new optionViewModel(3, 3, \"Option 3\", \"1st Win, 1st & 2nd In Order Exacta, 1st & 2nd & 3rd In Order Trifecta\"),\n        //            new optionViewModel(10, 10, \"Option 10\", \"1st Win, 1st & 2nd Any Order Quinella, 1st & 2nd & 3rd Any Order Trifecta\")\n        //        ],\n        //        3,\n        //        _.contains(viewModel.DisabledMysteryProducts, \"Combo\")    //this needs to be fixed as only one of the option of combo can be disabled\n        //    )\n        //);\n\n        self.BetTypes = ko.observableArray(betTypeViewModels);\n        self.ActiveBetType = ko.observable();\n\n        //set initial active\n        var defaultSelectedBetType = _.find(self.BetTypes(), function (betTypeVm) {\n            if (!betTypeVm.IsDisabled && betTypeVm.Type === \"Trifecta\") {\n                return true;\n            }\n        });\n        //defaultSelectedBetType can be null if Trifecta pool is not available for selected race\n        if (defaultSelectedBetType == undefined) {\n            //then select the first available betType. Note: There always be atleast one pool avaialable for any race as Phoenix doesn't allow race without any pool.\n            defaultSelectedBetType = _.find(self.BetTypes(), function (betTypeVm) {\n                if (!betTypeVm.IsDisabled) {\n                    return true;\n                }\n            });\n        }\n        self.ActiveBetType(defaultSelectedBetType);\n        self.ActiveBetType().IsActive(true);\n    }\n\n    _.extend(betTypeComponentViewModel.prototype, {\n        UpdateActiveBetType: function (selectedBetType) {\n            //if selectedBetType is disabled than don't select it\n            if (selectedBetType.IsDisabled) {\n                return;\n            }\n            var self = this;\n            //make current one de-active\n            if (self.ActiveBetType() !== undefined) {\n                self.ActiveBetType().IsActive(false);\n            }\n            //assign new one\n            self.ActiveBetType(selectedBetType);\n            //activate new one\n            self.ActiveBetType().IsActive(true);\n        }\n    });\n\n    return betTypeComponentViewModel;\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/Components/MysteryBet/Model/bettypes-component-viewmodel.js\n// module id = 99\n// module chunks = 5","define(['knockout', 'underscore', 'jquery', '../../../Math', './bettypes-component-viewmodel', './options-component-viewmodel', './numberofbets-component-viewmodel', '../../Calculator/Model/betamount-viewmodel'], function (ko, _, jQuery, rwwaMath, betTypesComponentViewModel, optionsComponentViewModel, numberOfBetsComponentViewModel, betAmountViewModel) {\n    function customiseBetPageComponentViewModel (viewModel) {\n        var self = this;\n        self.ActiveCalculator = ko.observable();\n        self.FlexiPercent = ko.observable(0);\n\n        /* private functions ====================================================================================================== */\n        var updateProductCode = function () {\n                viewModel.ProductCode(self.BetTypesComponentViewModel.ActiveBetType().Type);\n        };\n\n        var updateOptionNumber = function () {\n                viewModel.OptionNumber(self.OptionsComponentViewModel.ActiveOption().OptionNumber);\n        };\n\n        var updateNumberOfBets = function () {\n            viewModel.NumberOfBets(self.NumberOfBetsComponentViewModel.ActiveNumberOfBets().Value);\n        };\n\n        var updateInvestment = function () {\n            if (self.BetTypesComponentViewModel.ActiveBetType().Type === \"WinPlace\") {\n                viewModel.Investment(self.BetAmountViewModelForWin.Amount());\n                viewModel.PlaceInvestment(self.BetAmountViewModelForPlace.Amount());\n            }\n            else if (self.BetTypesComponentViewModel.ActiveBetType().Type === \"Combo\") {\n                viewModel.Investment(self.BetAmountViewModelForCombo.Amount());\n                viewModel.PlaceInvestment(0);\n            }\n            else {\n                viewModel.Investment(self.BetAmountViewModelForFourBetType.Amount());\n                viewModel.PlaceInvestment(0);\n            }\n        };\n        //flexi only displayed for four bet types\n\n        var updateFlexi = function () {\n            var numberOfCombinations = self.OptionsComponentViewModel.ActiveOption().NumberOfCombinations;\n            var betCost = self.BetAmountViewModelForFourBetType.Amount();\n            var flexiPercentage = (Math.floor(((betCost * 100) / numberOfCombinations) * 100)) / 100;\n            self.FlexiPercent(flexiPercentage + '%');\n        };\n        var updateButtons = function (totalCost) {\n            var enabledButtons = (totalCost > 0);\n            viewModel.AccountButtonDisabled(!enabledButtons);\n            viewModel.CashButtonDisabled(!enabledButtons);\n            viewModel.BetSlipButtonDisabled(!enabledButtons);\n            //CMN.setDisableState(jQuery('#mystery-bet'), enabledButtons);\n        };\n        /* end private functions ====================================================================================================== */\n\n        var updateTotalCost = function () {\n            var noOfInputs = self.NumberOfBetsComponentViewModel.ActiveNumberOfBets().Value;\n            var betCost;\n            if (self.BetTypesComponentViewModel.ActiveBetType().Type === \"WinPlace\") {\n                var winCost = self.BetAmountViewModelForWin.Amount() * self.OptionsComponentViewModel.ActiveOption().NumberOfCombinations;\n                var placeCost = self.BetAmountViewModelForPlace.Amount() * self.OptionsComponentViewModel.ActiveOption().NumberOfCombinations;\n                betCost = winCost + placeCost;\n            }\n            else if (self.BetTypesComponentViewModel.ActiveBetType().Type === \"Combo\") {\n                betCost = self.BetAmountViewModelForCombo.Amount() * self.OptionsComponentViewModel.ActiveOption().NumberOfCombinations;\n            }\n            else {\n                betCost = self.BetAmountViewModelForFourBetType.Amount();\n            }\n\n            //updateInvestment(betCost);\n            var totalCost = betCost * parseInt(noOfInputs);\n            var totalCostString = rwwaMath.toMoney(totalCost, 2);\n            viewModel.TotalCost(totalCostString);\n\n            //update buttons\n            updateButtons(totalCost);\n        };\n\n        self.HideActiveCalculator = function () {\n            if (self.ActiveCalculator() != undefined) {\n                self.ActiveCalculator().HideNumberPad();\n            }\n        }\n\n        self.ActivateCalculator = function (selectedCalculator) {\n            //hide current active formula calculator as well\n            self.HideActiveCalculator();\n            //activate new one\n            self.ActiveCalculator(selectedCalculator);\n            self.ActiveCalculator().ShowNumberPad();\n        }\n\n        //bet types\n        self.BetTypesComponentViewModel = new betTypesComponentViewModel({ DisplayQuaddie: viewModel.DisplayQuaddie, QuaddieRaceNumbers: viewModel.QuaddieRaceNumbers, DisabledMysteryProducts: viewModel.DisabledMysteryProducts });\n        self.BetTypesComponentViewModel.ActiveBetType.subscribe(function (newValue) {\n            self.OptionsComponentViewModel.UpdateOptions(self.BetTypesComponentViewModel.ActiveBetType().Options, self.BetTypesComponentViewModel.ActiveBetType().DefaultOptionNumber);\n            updateProductCode();\n            updateInvestment();\n            updateTotalCost();\n        });\n\n        //options\n        var optionFromDefaltSelectedBetType = self.BetTypesComponentViewModel.ActiveBetType().Options;  //by default we select Trifecta in BetTypes component\n        self.OptionsComponentViewModel = new optionsComponentViewModel(optionFromDefaltSelectedBetType);\n        self.OptionsComponentViewModel.ActiveOption.subscribe(function (newValue) {\n            updateOptionNumber();\n            updateFlexi();\n            updateTotalCost();\n        });\n\n        //Number Of Bets\n        self.NumberOfBetsComponentViewModel = new numberOfBetsComponentViewModel(5);\n        self.NumberOfBetsComponentViewModel.ActiveNumberOfBets.subscribe(function (newValue) {\n            updateNumberOfBets();\n            updateTotalCost();\n        });\n            \n        //Calculators\n        var betAmountModelInstance = new betAmountViewModel(0, 0, 99999.5, 0.5);\n        self.BetAmountViewModelForFourBetType = betAmountModelInstance;\n        self.BetAmountViewModelForFourBetType.Amount.subscribe(function (newValue) {\n            updateInvestment();\n            updateFlexi();\n            updateTotalCost();\n        });\n        var betAmountModelForWin = new betAmountViewModel(0, 0, 99999.5, 0.5);\n        self.BetAmountViewModelForWin = betAmountModelForWin;\n        self.BetAmountViewModelForWin.Amount.subscribe(function (newValue) {\n            updateInvestment();\n            updateTotalCost();\n        });\n        var betAmountModelForPlace = new betAmountViewModel(0, 0, 99999.5, 0.5);\n        self.BetAmountViewModelForPlace = betAmountModelForPlace;\n        self.BetAmountViewModelForPlace.Amount.subscribe(function (newValue) {\n            updateInvestment();\n            updateTotalCost();\n        });\n        var betAmountModelForCombo = new betAmountViewModel(0, 0, 99999.5, 0.5);\n        self.BetAmountViewModelForCombo = betAmountModelForCombo;\n        self.BetAmountViewModelForCombo.Amount.subscribe(function (newValue) {\n            updateInvestment();\n            updateTotalCost();\n        });\n\n        self.UpdatePage = function () {\n            updateProductCode();\n            updateOptionNumber();\n            updateNumberOfBets();\n            updateInvestment();\n            updateFlexi();\n            updateTotalCost();\n\n            //ToDo: remove below temp code once we have cash functionality working\n            viewModel.CashButtonVisible(false);\n            viewModel.BetSlipButtonVisible(false);\n        };\n\n        //select default option for selected bettype\n        var defaultOptionToselect = _.find(optionFromDefaltSelectedBetType, function (optionVm) {\n            if (optionVm.OptionNumber === self.BetTypesComponentViewModel.ActiveBetType().DefaultOptionNumber) {\n                return true;\n            }\n        });\n        self.OptionsComponentViewModel.UpdateActiveOption(defaultOptionToselect);            \n    }\n\n    return customiseBetPageComponentViewModel;\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/Components/MysteryBet/Model/customisebetpage-component-viewmodel.js\n// module id = 100\n// module chunks = 5","define(['knockout', 'underscore'], function(ko, _) {\n    function optionsComponentViewModel(optionViewModels) {\n        var self = this;\n\n        _.bindAll(self, \"UpdateActiveOption\", \"UpdateOptions\");\n\n        self.OptionViewModels = ko.observableArray(optionViewModels);\n        self.ActiveOption = ko.observable();\n\n        //set initial active\n        self.ActiveOption(_.first(optionViewModels));\n        self.ActiveOption().IsActive(true);\n    }\n\n    _.extend(optionsComponentViewModel.prototype, {\n        UpdateActiveOption: function(selectedOption) {\n            var self = this;\n            //make current one de-active\n            if (self.ActiveOption() !== undefined) {\n                self.ActiveOption().IsActive(false);\n            }\n            //assign new one\n            self.ActiveOption(selectedOption);\n            //activate new one\n            self.ActiveOption().IsActive(true);\n        },\n        UpdateOptions: function(newOptions, defaultSelectedOptionNumber) {\n            var self = this;\n            self.OptionViewModels(newOptions);\n            //select default one\n            var defaultOption = _.find(newOptions, function (optionVm) {\n                if (optionVm.OptionNumber === defaultSelectedOptionNumber) {\n                    return true;\n                }\n            });\n            self.UpdateActiveOption(defaultOption);\n        }\n    });\n\n    return optionsComponentViewModel;\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/Components/MysteryBet/Model/options-component-viewmodel.js\n// module id = 101\n// module chunks = 5","define(['knockout', 'underscore', '../../../Math', '../../../Services/Preferences/PreferencesService', './quickpicks-component-viewmodel', './numberofbets-component-viewmodel'], function (ko, _, rwwaMath, preferencesService, quickPicksComponentViewModel, numberOfBetsComponentViewModel) {\n    function quickPickPageComponentViewModel (viewModel) {\n        var self = this;\n\n        /* private functions ====================================================================================================== */\n        var updateQuickPickValues = function () {\n            //ActiveQuickPick can be null initially if Trifecta pool is not available for selected race\n            if (self.QuickPicksComponentViewModel.ActiveQuickPick() != undefined) {\n                viewModel.ProductCode(self.QuickPicksComponentViewModel.ActiveQuickPick().Type);\n                viewModel.OptionNumber(self.QuickPicksComponentViewModel.ActiveQuickPick().OptionNumber);\n                viewModel.Investment(self.QuickPicksComponentViewModel.ActiveQuickPick().InvestmentAmount);\n            }\n            viewModel.PlaceInvestment(0); //PlaceInvestment is 0 for quickpick\n        };\n        var updateNumberOfBets = function () {\n            viewModel.NumberOfBets(self.NumberOfBetsComponentViewModel.ActiveNumberOfBets().Value);\n        };\n        var updateButtons = function (totalCost) {\n            var enabledButtons = (totalCost > 0);\n            viewModel.AccountButtonDisabled(!enabledButtons);\n            viewModel.CashButtonDisabled(!enabledButtons);\n            viewModel.BetSlipButtonDisabled(!enabledButtons);\n            //CMN.setDisableState($('#mystery-bet'), enabledButtons);\n        };\n        var updateTotalCost = function () {\n            var noOfInputs = self.NumberOfBetsComponentViewModel.ActiveNumberOfBets().Value;\n            var totalCost = 0;\n            //ActiveQuickPick can be null initially if Trifecta pool is not available for selected race\n            if (self.QuickPicksComponentViewModel.ActiveQuickPick() != undefined) {\n                var betCost = self.QuickPicksComponentViewModel.ActiveQuickPick().Cost;\n                totalCost = betCost * parseInt(noOfInputs);\n            }\n            var totalCostString = rwwaMath.toMoney(totalCost, 2);\n            viewModel.TotalCost(totalCostString);\n            updateButtons(totalCost);\n        };\n        /* end private functions ====================================================================================================== */\n\n        self.QuickPicksComponentViewModel = new quickPicksComponentViewModel(viewModel.DisabledMysteryProducts);\n        self.QuickPicksComponentViewModel.ActiveQuickPick.subscribe(function (newValue) {\n            updateQuickPickValues();\n            updateTotalCost();\n        });\n\n        //Number Of Bets\n        self.NumberOfBetsComponentViewModel = new numberOfBetsComponentViewModel(5);\n        self.NumberOfBetsComponentViewModel.ActiveNumberOfBets.subscribe(function (newValue) {\n            updateNumberOfBets();\n            updateTotalCost();\n        });\n        \n        self.UpdatePage = function () {\n            updateQuickPickValues();\n            updateNumberOfBets();\n            updateTotalCost();\n\n            //ToDo: remove below temp code once we have cash functionality working\n            var cashBettingEnabled = preferencesService.cashBettingEnabled();\n            viewModel.CashButtonVisible(cashBettingEnabled);\n            viewModel.BetSlipButtonVisible(true);\n        };\n\n    }\n\n    return quickPickPageComponentViewModel;\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/Components/MysteryBet/Model/quickpickpage-component-viewmodel.js\n// module id = 102\n// module chunks = 5","define(['knockout', 'underscore', './quickpick-viewmodel'], function (ko, _, quickPickViewModel) {\n    function quickPickComponentViewModel (disabledMysteryProducts) {\n        var self = this;\n\n        _.bindAll(self, \"UpdateActiveQuickPick\");\n\n        var quickPickViewModels = [];\n        quickPickViewModels.push(new quickPickViewModel(\"Combo\", \"COMBO\", 3, 1, 3, _.contains(disabledMysteryProducts, \"$3 Combo\")));\n        quickPickViewModels.push(new quickPickViewModel(\"Trifecta\", \"TRIFECTA CLASSIC\", 2, 1, 1, _.contains(disabledMysteryProducts, \"Trifecta\")));\n        quickPickViewModels.push(new quickPickViewModel(\"Combo\", \"COMBO\", 10, 1, 10, _.contains(disabledMysteryProducts, \"$10 Combo\")));\n        quickPickViewModels.push(new quickPickViewModel(\"Trifecta\", \"MYSTERY TRIFECTA\", 3, 3, 3, _.contains(disabledMysteryProducts, \"Trifecta\")));\n        quickPickViewModels.push(new quickPickViewModel(\"First4\", \"FIRST 4 CLASSIC\", 2, 1, 1, _.contains(disabledMysteryProducts, \"First4\")));\n        quickPickViewModels.push(new quickPickViewModel(\"Trifecta\", \"MYSTERY TRIFECTA\", 3, 6, 6, _.contains(disabledMysteryProducts, \"Trifecta\")));\n\n        self.QuickPicks = ko.observableArray(quickPickViewModels);\n        self.ActiveQuickPick = ko.observable();\n\n        //set initial active\n        var defaultSelectedQuickPick = _.find(self.QuickPicks(), function (quickPickVm) {\n            if (!quickPickVm.IsDisabled && quickPickVm.Type === \"Trifecta\" && quickPickVm.OptionNumber === 2) {\n                return true;\n            }\n        });\n        //defaultSelectedQuickPick can be null if Trifecta pool is not available for selected race\n        if (defaultSelectedQuickPick != undefined) {\n            self.ActiveQuickPick(defaultSelectedQuickPick);\n            self.ActiveQuickPick().IsActive(true);\n        }\n    }\n\n    _.extend(quickPickComponentViewModel.prototype, {\n        UpdateActiveQuickPick: function (selectedQuickPick) {\n            //if selectedQuickPick is disabled than don't select it\n            if (selectedQuickPick.IsDisabled) {\n                return;\n            }\n            var self = this;\n            //make current one de-active\n            if (self.ActiveQuickPick() !== undefined) {\n                self.ActiveQuickPick().IsActive(false);\n            }\n            //assign new one\n            self.ActiveQuickPick(selectedQuickPick);\n            //activate new one\n            self.ActiveQuickPick().IsActive(true);\n        }\n    });\n\n    return quickPickComponentViewModel;\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/Components/MysteryBet/Model/quickpicks-component-viewmodel.js\n// module id = 103\n// module chunks = 5","define(['knockout', 'underscore', './tab-viewmodel'], function (ko, _, tabViewModel) {\n    function tabsComponentViewModel(tabNamesArray) {\n        var self = this;\n\n        _.bindAll(self, \"UpdateActiveTab\");\n\n        var tabViewModels = [];\n        _.each(tabNamesArray, function (tabName) {\n            tabViewModels.push(new tabViewModel(tabName));\n        });\n\n        self.TabViewModels = ko.observableArray(tabViewModels);\n        self.ActiveTab = ko.observable();\n\n        //set initial active\n        self.ActiveTab(_.first(tabViewModels));\n        self.ActiveTab().IsActive(true);\n    }\n\n    _.extend(tabsComponentViewModel.prototype, {\n        UpdateActiveTab: function (selectedTab) {\n            var self = this;\n            //make current one de-active\n            if (self.ActiveTab() !== undefined) {\n                self.ActiveTab().IsActive(false);\n            }\n            //assign new one\n            self.ActiveTab(selectedTab);\n            //activate new one\n            self.ActiveTab().IsActive(true);\n        }\n    });\n\n    return tabsComponentViewModel;\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/Components/MysteryBet/Model/tabs-component-viewmodel.js\n// module id = 104\n// module chunks = 5","define(\n    [\n        'knockout'\n        , './Model/tabs-component-viewmodel'\n        , \"text-loader!./View/tabs.tmpl.html\"\n        , './Model/quickpickpage-component-viewmodel'\n        , \"text-loader!./View/quickpickpage.tmpl.html\"\n        , './Model/customisebetpage-component-viewmodel'\n        , \"text-loader!./View/customisebetpage.tmpl.html\"\n        , './Model/quickpicks-component-viewmodel'\n        , \"text-loader!./View/quickpick.tmpl.html\"\n        , './Model/numberofbets-component-viewmodel'\n        , \"text-loader!./View/numberofbets.tmpl.html\"\n        , './Model/bettypes-component-viewmodel'\n        , \"text-loader!./View/bettype.tmpl.html\"\n        , './Model/options-component-viewmodel'\n        , \"text-loader!./View/options.tmpl.html\"\n\n    ], function (\n        ko,\n        tabsViewModel,\n        tabsTpl,\n        quickpickpageViewModel,\n        quickpickpageTpl,\n        customisebetpageViewModel,\n        customisebetpageTpl,\n        quickpicksViewModel,\n        quickpicksTpl,\n        numberofbetsViewModel,\n        numberofbetsTpl,\n        bettypesViewModel,\n        bettypesTpl,\n        optionsViewModel,\n        optionsTpl\n    ) {\n    if (!ko.components.isRegistered(\"mysterybet-tabs\")) {\n        ko.components.register(\"mysterybet-tabs\", {\n            viewmodel: tabsViewModel,\n            template: tabsTpl\n        });\n    }\n    if (!ko.components.isRegistered(\"mysterybet-quickpickpage\")) {\n        ko.components.register(\"mysterybet-quickpickpage\", {\n            viewmodel: quickpickpageViewModel,\n            template: quickpickpageTpl\n        });\n    }\n    if (!ko.components.isRegistered(\"mysterybet-customisebetpage\")) {\n        ko.components.register(\"mysterybet-customisebetpage\", {\n            viewmodel: customisebetpageViewModel,\n            template: customisebetpageTpl\n        });\n    }\n    if (!ko.components.isRegistered(\"mysterybet-quickpicks\")) {\n        ko.components.register(\"mysterybet-quickpicks\", {\n            viewmodel: quickpicksViewModel,\n            template: quickpicksTpl\n        });\n    }\n    if (!ko.components.isRegistered(\"mysterybet-numberofbets\")) {\n        ko.components.register(\"mysterybet-numberofbets\", {\n            viewmodel: numberofbetsViewModel,\n            template: numberofbetsTpl\n        });\n    }\n    if (!ko.components.isRegistered(\"mysterybet-bettypes\")) {\n        ko.components.register(\"mysterybet-bettypes\", {\n            viewmodel: bettypesViewModel,\n            template: bettypesTpl\n        });\n    }\n    if (!ko.components.isRegistered(\"mysterybet-options\")) {\n        ko.components.register(\"mysterybet-options\", {\n            viewmodel: optionsViewModel,\n            template: optionsTpl\n        });\n    }\n    //if (!ko.components.isRegistered(\"mysterybet-flexidisplay\")) {\n        //ko.components.register(\"mysterybet-flexidisplay\", {\n        //    viewmodel: { require: './Model/flexidisplay-component-viewmodel' },\n        //    template: { require: \"text-loader!./View/flexidisplay.tmpl.html\" }\n        //});\n    //}\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/Components/MysteryBet/register.js\n// module id = 105\n// module chunks = 5","define([], function() {\n    return {\n        today: getToday,\n        now: getNow\n    }\n\n    function getToday() {\n        var date = new Date();\n        date.setHours(0, 0, 0, 0);\n        return date;\n    }\n\n    function getNow() {\n        return Date.now();\n    }\n})\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/DateProvider.js\n// module id = 106\n// module chunks = 5","define(['knockout', '../../Math'], function (ko, rwwaMath) {\n    ko.bindingHandlers.currency = {\n        symbol: ko.observable('$'),\n        update: function(element, valueAccessor, allBindingsAccessor){\n            return ko.bindingHandlers.text.update(element,function(){\n                var value = +(ko.utils.unwrapObservable(valueAccessor()) || 0),\n                    symbol = ko.utils.unwrapObservable(allBindingsAccessor().symbol === undefined ? ko.bindingHandlers.currency.symbol : allBindingsAccessor().symbol);\n                return rwwaMath.toMoney(value,2,symbol);\n            });\n        }\n    };\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/KnockoutExtensions/Bindings/currency-binding.js\n// module id = 107\n// module chunks = 5","define(['knockout'], function (ko) {\n    ko.bindingHandlers.scrollTo = {\n        update: function (element, valueAccessor, allBindings) {\n            var _value = valueAccessor();\n            var _valueUnwrapped = ko.unwrap(_value);\n            if (_valueUnwrapped) {\n                element.scrollIntoView();\n            }\n        }\n    };\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/KnockoutExtensions/Bindings/scrollto-binding.js\n// module id = 109\n// module chunks = 5","define([\n        \"knockout\", \n        \"jquery\", \n        \"../../Navigation/Nav\", \n        \"./formula-viewmodel\", \n        \"./multi-viewmodel\", \n        \"../../Services/LoggingService\", \n        \"../../Services/MessageBusService\", \n        \"../../ViewModels/PrimaryMenuViewModel-Extension\", \n        \"../services/multiformulasummary-builder\", \n        \"../services/multi-store\",\n        \"../../Components/Calculator/Model/betamount-viewmodel\",\n        \"./multiformula-viewmodel\",\n        \"../../Services/Preferences/PreferencesService\",\n        \"underscore\",\n        \"decimal-js\",\n        \"../../KnockoutExtensions/Extenders/pattern\",\n        \"../../KnockoutExtensions/Bindings/css2\"\n    ],\n    function (ko, jQuery, nav, formulaViewModel, MultiViewModel, loggingService, msgBusService, rightMenu, multiFormulaSummaryBuilder, multiStore, betAmountViewModel, multiFormulaViewModel, preferencesService, _) {\n\n        function MultiInvestmentViewModel(viewModel) {\n\n            var self = this;\n\n            /* observables */\n            self.multiInvestmentInput = ko.observable(0).extend({ pattern: /^0?([1-9]\\d{0,4})?(\\.\\d?)?$/ });\n            self.multiInvestmentAmount = ko.pureComputed(function() { return 0.5 * Math.floor(Math.min(99999.5, Math.max(0, self.multiInvestmentInput())) / 0.5); });\n            self.multiFormulaInvestments = ko.observableArray([]);\n            self.numberOfCombinations = ko.observable(0);\n            self.projectedPay = ko.observable(0);\n            self.accountBettingIsEnabled = ko.observable();\n            self.totalCost = ko.observable(0);\n            self.multiFormulaVisible = ko.observable(false);\n            self.illegalMultiFormulaLegCount = ko.observable(false);\n            self.mySelectionsSectionVisible = ko.observable(false);\n            self.multiFormulaSectionVisible = ko.observable(false);\n            self.calculatorIsOpen = ko.observable(false);\n            self.multiFormulaInFocus = ko.observable(false);\n            self.cashBettingIsEnabled = ko.observable();\n            self.multiFormulaCashWarningVisible = ko.observable();\n            self.singleFormulaOnly = ko.observable();\n            self.hasLiveBettingLeg = ko.observable(false);\n            self.legNumberLimitWarnigMessage = \"Multi Formula is only available for bets that contain between 2 and 6 legs.\";   //Not observable\n            self.liveBettingWithCashWarningVisible = ko.observable();\n            self.cashBettingIsVisible = ko.observable();\n            self.buttonsVisible = ko.observable(false);\n            self.useNewLookCalculator = false;\n            self.multiBetType = ko.observable();\n\n            /* private vars */ // construct and initialise multiViewModel\n            MultiViewModel.call(self, {\n                backUrl: \"multi/calc/back\",\n                backText: \"Back\"\n            });\n\n            self.popRightMenu = function () {\n                nav.scrollTo('#top');\n                rightMenu.openMenu();\n            }\n\n            self.showCalculator = function(data, event) {\n                _.each(self.multiFormulaInvestments(), function(viewModel) {\n                    if (viewModel().FormulaNumber() === data.FormulaNumber()) {\n                        viewModel().ShowCalculator();\n                        if (self.calculatorIsOpen() === true) {\n                            viewModel().SetCalculatorPresetMode(false);\n                        }\n                    } else {\n                        viewModel().HideCalculator();\n                    }\n                });\n                self.calculatorIsOpen(true);\n                self.multiFormulaInFocus(false);\n                self.multiFormulaInFocus(true);\n            }\n\n            self.showNextCalculator = function(data, event) {\n                if (data.FormulaNumber() < self.multiFormulaInvestments().length) {\n                    _.each(self.multiFormulaInvestments(), function(viewModel) {\n                        if (viewModel().FormulaNumber() === data.FormulaNumber()) {\n                            viewModel().HideCalculator();\n                        } else {\n                            if (viewModel().FormulaNumber() === data.FormulaNumber() + 1)\n                                viewModel().ShowCalculator();\n                                viewModel().SetCalculatorPresetMode(false);\n                        }\n                    });\n                    self.calculatorIsOpen(true);\n                    self.multiFormulaInFocus(false);\n                    self.multiFormulaInFocus(true);\n                }\n            }\n\n            self.showPreviousCalculator = function(data, event) {\n                if (data.FormulaNumber() > 1) {\n                    _.each(self.multiFormulaInvestments(), function(viewModel) {\n                        if (viewModel().FormulaNumber() === data.FormulaNumber()) {\n                            viewModel().HideCalculator();\n                        } else {\n                            if (viewModel().FormulaNumber() === data.FormulaNumber() - 1)\n                                viewModel().ShowCalculator();\n                                viewModel().SetCalculatorPresetMode(false);\n                        }\n                    });\n                    self.calculatorIsOpen(true);\n                    self.multiFormulaInFocus(false);\n                    self.multiFormulaInFocus(true);\n                }\n            }\n\n            //for new formula models =====\n\n            /* private function */\n            var hideActiveFormulaCalculator = function () {\n                if (self.ActiveFormulaViewModel != undefined) {\n                    self.ActiveFormulaViewModel.BetAmountViewModel.HideNumberPad();\n                    self.calculatorIsOpen(false);\n                }\n            }\n\n            /* private function */\n            var hideOtherSingleCalculators = function () {\n                self.BetAmountViewModelForMultiInvestmentWhenFormulaEnable.HideNumberPad();\n                self.BetAmountViewModelForMultiInvestmentWhenFormulaDisable.HideNumberPad();\n                self.calculatorIsOpen(false);\n            }\n\n            /* private function */\n            var setActiveFormula = function (formulaNumberToShow) {\n                //hide current one first\n                self.ActiveFormulaViewModel.BetAmountViewModel.HideNumberPad();\n                self.calculatorIsOpen(false);\n                //set new one\n                var formulaToShow = _.find(self.multiFormulaInvestments(), function (formulaVM) {\n                    if (formulaVM().FormulaNumber === formulaNumberToShow) {\n                        return true;\n                    }\n                });\n                self.ActiveFormulaViewModel = formulaToShow();\n                //show new one\n                self.ActiveFormulaViewModel.BetAmountViewModel.ShowNumberPad();\n                self.calculatorIsOpen(true);\n            }\n\n            self.activateFormula = function (selectedFormulaViewModel) {\n                //make sure other calcs on same page are hidden\n                hideOtherSingleCalculators();\n                //hide current active formula calculator as well\n                hideActiveFormulaCalculator();\n                //activate new one\n                self.ActiveFormulaViewModel = selectedFormulaViewModel;\n                self.ActiveFormulaViewModel.BetAmountViewModel.ShowNumberPad();\n                self.calculatorIsOpen(true);\n            }\n\n            self.activatePreviousFormula = function () {\n                if (self.ActiveFormulaViewModel != undefined && self.ActiveFormulaViewModel.FormulaNumber > 1) {\n                    var previousFormulaNumber = self.ActiveFormulaViewModel.FormulaNumber - 1;\n                    setActiveFormula(previousFormulaNumber);\n                }\n            }\n\n            self.activateNextFormula = function () {\n                if (self.ActiveFormulaViewModel != undefined && self.ActiveFormulaViewModel.FormulaNumber < self.multiFormulaInvestments().length) {\n                    var nextFormulaNumber = self.ActiveFormulaViewModel.FormulaNumber + 1;\n                    setActiveFormula(nextFormulaNumber);\n                }\n            }\n            //===============================\n\n            self.closeCalc = function() {\n                \n                if (self.useNewLookCalculator) {\n                    hideOtherSingleCalculators();\n                    hideActiveFormulaCalculator();\n                } else {\n                    _.each(self.multiFormulaInvestments(), function (viewModel) {\n                        viewModel().HideCalculator();\n                    });\n                }\n                self.calculatorIsOpen(false);\n                self.multiFormulaInFocus(false);\n                saveInvestments();\n            }\n\n            self.calcClear = function(calcTarget, event) {\n                calcTarget(0);\n            }\n\n            self.calcChange = function(calcTarget, event, change) {\n                calcTarget(0.5 * Math.floor(Math.min(99999.5, Math.max(0, Number(calcTarget()) + change)) / 0.5));\n            }\n\n            self.toggleMySelectionsSection = function() {\n                var sectionIsVisible = ko.unwrap(self.mySelectionsSectionVisible);\n                self.mySelectionsSectionVisible(!sectionIsVisible);\n            }\n\n            self.toggleMultiFormulaSection = function() {\n                var sectionIsVisible = ko.unwrap(self.multiFormulaSectionVisible);\n                self.multiFormulaSectionVisible(!sectionIsVisible);\n            }\n\n            /* private function */\n            var saveInvestments = function () {             \n                var multiBetData = multiStore.get();\n\n                if (self.useNewLookCalculator) {\n                    multiBetData = {\n                        uuid: viewModel.Uuid,\n                        investment: self.BetAmountViewModelForMultiInvestmentWhenFormulaEnable.Amount(),\n                        multiFormulas: multiBetData.multiFormulas,\n                        numberOfLegs: viewModel.NumberOfLegs\n                    };\n                } else {\n                    multiBetData = {\n                        uuid: viewModel.Uuid,\n                        investment: self.multiInvestmentAmount(),\n                        multiFormulas: multiBetData.multiFormulas,\n                        numberOfLegs: viewModel.NumberOfLegs\n                    };\n                }\n\n\n                if (viewModel.NumberOfLegs <= viewModel.FormulaMaxLegs) {\n                    var enabledFormulas;\n                    if (self.useNewLookCalculator) {\n                        enabledFormulas = _.map(self.multiFormulaInvestments(), function (vm) {\n                            return { FormulaNumber: vm().FormulaNumber, Stake: vm().BetAmountViewModel.Amount() }\n                        });\n                    } else {\n                        enabledFormulas = _.map(self.multiFormulaInvestments(), function(vm) {\n                            return { FormulaNumber: vm().FormulaNumber(), Stake: vm().Stake() }\n                        });\n                    }\n\n                    var disabledFormulas = _.filter(multiBetData.multiFormulas, function(mf) {\n                        return (mf.FormulaNumber >= viewModel.NumberOfLegs) && (mf.FormulaNumber < (viewModel.NumberOfExcludedLegs + viewModel.NumberOfLegs));\n                    });\n\n                    multiBetData.multiFormulas = enabledFormulas.concat(disabledFormulas);\n                }\n\n                multiStore.set(multiBetData);\n            }        \n\n            /* private function */\n            var loadInvestments = function () {\n                var multiBetData = multiStore.get();\n\n                if (multiBetData.uuid !== viewModel.Uuid) {\n                    return multiStore.clear(), multiStore.get();\n                }\n                else if (viewModel.NumberOfLegs < multiBetData.numberOfLegs) {\n                    multiBetData.multiFormulas = _.filter(multiBetData.multiFormulas, function (mf) { return mf.FormulaNumber < viewModel.NumberOfLegs; });\n                }\n\n                return multiBetData;\n            }\n\n            /* private function */\n            var clearSummary = function() {\n                self.numberOfCombinations(0);\n                self.totalCost(0);\n                self.projectedPay(0);\n                self.accountBettingIsEnabled(false);\n            };\n\n            /* private function */\n            var updateSummary = function() {\n\n                loggingService.logDebug('multiinvestment-viewmodel : updateSummary');\n\n                var multiBetAmount;\n                var multiFormulas;\n                if (self.useNewLookCalculator) {\n                    multiBetAmount = Number(self.BetAmountViewModelForMultiInvestmentWhenFormulaEnable.Amount());\n                    multiFormulas = _.map(self.multiFormulaInvestments(), function (multiFormula) {\n                        var formula = multiFormula();\n                        return {\n                            FormulaNumber: formula.FormulaNumber,\n                            FormulaName: formula.FormulaName,\n                            Stake: formula.BetAmountViewModel.Amount(),\n                            NumberOfCombinations: formula.NumberOfCombinations\n                        };\n                    });\n                } else {\n                    multiBetAmount = Number(self.multiInvestmentAmount());\n                    multiFormulas = _.map(self.multiFormulaInvestments(), function (multiFormula) {\n                        var formula = multiFormula();\n                        return {\n                            FormulaNumber: formula.FormulaNumber(),\n                            FormulaName: formula.FormulaName(),\n                            Stake: formula.Stake(),\n                            NumberOfCombinations: formula.NumberOfCombinations()\n                        };\n                    });\n                }\n\n                \n                var summary = multiFormulaSummaryBuilder.buildSummary(multiBetAmount, multiFormulas, viewModel.SelectionReturns);\n                var nonSingleTotal = _.reduce(multiFormulas, function(sum, multiFormula) {\n                    if (multiFormula.FormulaNumber !== 1) {\n                        return sum + multiFormula.Stake;\n                    } else {\n                        return sum;\n                    }\n                }, 0);\n                var singleAmount = _.reduce(multiFormulas, function(sum, multiFormula) {\n                    if (multiFormula.FormulaNumber === 1) {\n                        return sum + multiFormula.Stake;\n                    } else {\n                        return sum;\n                    }\n                }, 0);\n\n                self.numberOfCombinations(summary.numberOfCombinations);\n                self.totalCost(summary.totalCost);\n                self.projectedPay(summary.projectedPay);\n\n                var zeroTotal = (summary.totalCost === 0);\n                var singleFormulaOnly = (singleAmount > 0 && (nonSingleTotal === 0 && multiBetAmount === 0));\n                var readyToBet = !zeroTotal && !singleFormulaOnly;\n                var multiFormulaTotalStake = _.reduce(multiFormulas, function(sum, multiFormula) { return multiFormula.Stake + sum; }, 0);\n                var preferences = preferencesService;\n                var cashBettingEnabled = preferences.cashBettingEnabled() && !viewModel.IsAccumulator;\n                var enableCashBettingButton =\n                        readyToBet &&\n                        (viewModel.AllowMultiFormulaWithCash || multiFormulaTotalStake === 0) &&\n                        cashBettingEnabled;\n                var showMultiFormulaCashWarning =\n                        !viewModel.AllowMultiFormulaWithCash &&\n                        multiFormulaTotalStake > 0 &&\n                        cashBettingEnabled &&\n                        !self.hasLiveBettingLeg() &&\n                        !viewModel.IsAccumulator;\n                var liveBetWithCashWarning = self.hasLiveBettingLeg() && !cashBettingEnabled;\n                var showCashBettingButton = cashBettingEnabled && !viewModel.IsAccumulator;\n                self.singleFormulaOnly(singleFormulaOnly);\n                self.accountBettingIsEnabled(readyToBet && !self.hasLiveBettingLeg());\n                self.cashBettingIsEnabled(enableCashBettingButton);\n                self.multiFormulaCashWarningVisible(!showMultiFormulaCashWarning); // Force refresh after webkit has done its style change\n                self.multiFormulaCashWarningVisible(showMultiFormulaCashWarning);\n                self.liveBettingWithCashWarningVisible(liveBetWithCashWarning);\n                self.cashBettingIsVisible(showCashBettingButton);\n                self.multiBetType(viewModel.IsAccumulator ? \"bettype-multi-accumulator\" : \"bettype-multi\");\n\n                loggingService.logDebug('multiinvestment-viewmodel : numberOfCombinations=' + self.numberOfCombinations());\n\n                saveInvestments();\n            };\n          \n            function initMultiCalculator(intOnly, showCashButton) {\n                CALC.initCommonCalculator(intOnly === undefined || intOnly);\n                CALC.initCalculator('calculator1');\n                CALC.setCalcButtonState();\n                self.initMultiLegDetail();\n                OFFERS.initOffersHelp();\n\n                nav.overrideBack(function () {\n                    nav.ajaxPost(self.backUrl,\n                        jQuery('form#calculator-form').serialize(),\n                        self.processRedirectResponse,\n                        {\n                            hideOverlay: false\n                        }\n                    );\n                    return false;\n                });\n\n                jQuery('.propose-multi').click(function (e) {\n                    e.preventDefault();\n                    if (jQuery(this).is('.disabled') === false) {\n                        nav.ajaxPost(jQuery(this).attr('href'),\n                            jQuery('form#calculator-form').serialize(),\n                            nav.showContent,\n                            {\n                                control: jQuery(this),\n                                timeout: self.multiTimeout\n                            });\n                        msgBusService.publish('bet.multi.review');\n                    }\n                });\n\n                var cashBettingEnabled = preferencesService.cashBettingEnabled() && showCashButton;\n                var placeInStoreButton = jQuery('#placeInStoreButton');\n                //placeInStoreButton.toggle(cashBettingEnabled);\n                self.addBetSlipController.bindAddMultiToWalletButtonClickHandler(placeInStoreButton, true);\n\n                var accountBetButton = jQuery('#bettingFormNext');\n                var hasLiveBettingLeg = jQuery('#calculator-form input:hidden[name=HasLiveBettingLeg][value=True]').length > 0;\n\n                accountBetButton.toggleClass('halfwidth', cashBettingEnabled);\n                accountBetButton.toggleClass('fullwidth', !cashBettingEnabled);\n                if (hasLiveBettingLeg) {\n                    accountBetButton.toggleClass('disabled', true);\n                }\n\n                //var noticeWarning = jQuery('div.notice.warning');\n                //noticeWarning.toggle(hasLiveBettingLeg && !cashBettingEnabled);\n\n                CALC.registerUpdateNotification(function () {\n                    if (hasLiveBettingLeg) {\n                        accountBetButton.toggleClass('disabled', true);\n                    }\n                });\n            }\n\n            /* class constructor */\n            (function ctor() {\n                clearSummary();\n\n                loggingService.logDebug('multiinvestment-viewmodel : initView - numberOfFormulas=' + viewModel.MultiFormulas.length);\n\n                self.useNewLookCalculator = viewModel.UseNewLookCalculator;\n\n                initMultiCalculator(false, !viewModel.IsAccumulator);\n\n                var multiBetData = loadInvestments();\n\n                self.multiFormulaInvestments(_.map(viewModel.MultiFormulas, function (multiFormula) {\n\n                    var stakeFor = function(formulaNumber) {\n                        var mf = _.find(multiBetData.multiFormulas, function (mf) { return mf.FormulaNumber === formulaNumber });\n                        return mf ? mf.Stake : 0;\n                    }\n\n                    var viewModel;\n                    if (self.useNewLookCalculator) {\n                        viewModel = new multiFormulaViewModel(multiFormula.FormulaName, multiFormula.FormulaNumber, multiFormula.NumberOfCombinations, stakeFor(multiFormula.FormulaNumber));\n                        viewModel.BetAmountViewModel.Amount.subscribe(function (newValue) {\n                            updateSummary();\n                        });\n                    } else {\n                        viewModel = new formulaViewModel(multiFormula.FormulaName, multiFormula.FormulaNumber, stakeFor(multiFormula.FormulaNumber), multiFormula.NumberOfCombinations);\n                        viewModel.Stake.subscribe(function(newValue) {\n                            updateSummary();\n                        });\n                    }\n\n                    return ko.observable(viewModel);\n                }));\n\n                self.multiInvestmentInput(multiBetData.investment);\n                self.multiInvestmentAmount.subscribe(function(newValue) {\n                    updateSummary();\n                });\n\n                if (self.useNewLookCalculator) {\n                    //with formula\n                    var betAmountModelInstance = new betAmountViewModel(multiBetData.investment, 0, 99999.5, 0.5);\n                    self.BetAmountViewModelForMultiInvestmentWhenFormulaEnable = betAmountModelInstance;\n                    self.BetAmountViewModelForMultiInvestmentWhenFormulaEnable.Amount(multiBetData.investment);\n                    self.BetAmountViewModelForMultiInvestmentWhenFormulaEnable.Amount.subscribe(function(newValue) {\n                        updateSummary();\n                        jQuery('div.calculator-buttons a, a.calculator-buttons').toggleClass('disabled', (self.BetAmountViewModelForMultiInvestmentWhenFormulaEnable.Amount() <= 0));\n                    });\n                    self.BetAmountViewModelForMultiInvestmentWhenFormulaEnable.IsNumberPadVisible.subscribe(function (newValue) {\n                        hideActiveFormulaCalculator();\n                    });\n                    //without formula\n                    var betAmountModelInstanceAnother = new betAmountViewModel(multiBetData.investment, 0, 99999, 1);\n                    self.BetAmountViewModelForMultiInvestmentWhenFormulaDisable = betAmountModelInstanceAnother;\n                    self.BetAmountViewModelForMultiInvestmentWhenFormulaDisable.Amount.subscribe(function (newValue) {\n                        jQuery('div.calculator-buttons a, a.calculator-buttons').toggleClass('disabled', (self.BetAmountViewModelForMultiInvestmentWhenFormulaDisable.Amount() <= 0));\n                    });\n                    self.BetAmountViewModelForMultiInvestmentWhenFormulaDisable.IsNumberPadVisible.subscribe(function (newValue) {\n                        hideActiveFormulaCalculator();\n                    });\n\n                    self.ActiveFormulaViewModel = null; //for keeping track of active formula\n                }\n\n                var illegalMultiFormulaLegCount = (viewModel.NumberOfLegs > viewModel.FormulaMaxLegs || viewModel.NumberOfLegs < 2);\n                var multiFormulaVisible = !illegalMultiFormulaLegCount;\n                self.illegalMultiFormulaLegCount(illegalMultiFormulaLegCount);\n                self.multiFormulaVisible(multiFormulaVisible);\n                self.mySelectionsSectionVisible(false);\n\n                var multiFormulaTotalStake = _(multiBetData.multiFormulas)\n                    .filter(function(mf) { return mf.FormulaNumber < viewModel.NumberOfLegs; })\n                    .reduce(function (sum, multiFormula) { return multiFormula.Stake + sum; }, 0);\n\n                self.multiFormulaSectionVisible(multiFormulaTotalStake > 0);\n                self.hasLiveBettingLeg(viewModel.HasLiveBettingLeg);\n                \n                self.totalCost.subscribe(function(newValue) {\n                    _.each(self.multiFormulaInvestments(), function(formulaViewModel) {\n                        formulaViewModel().TotalCost(newValue);\n                    });\n                });\n\n                //construct warning message\n                if (viewModel.IsAccumulator) {\n                    self.legNumberLimitWarnigMessage = \"Accumulator Formula is only available for bets that contain between 2 and 6 legs.\";\n                }\n\n                msgBusService.subscribe('preferences.cash', function() {\n                    updateSummary();\n                });\n\n                updateSummary();\n                self.buttonsVisible(true);\n            })();\n        }\n\n        MultiInvestmentViewModel.prototype = Object.create(MultiViewModel.prototype, {\n            addBetSlipController: {\n                value: new Controllers.BetBuilder.AddBetSlip(new BetWalletService())\n            }\n        });\n        Object.defineProperty(MultiInvestmentViewModel, 'constructor', {\n            enumerable: false,\n            value: MultiInvestmentViewModel\n        });\n\n        return MultiInvestmentViewModel;\n    }\n);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/MultiBet/viewmodel/multiinvestment-viewmodel.js\n// module id = 110\n// module chunks = 5","define([\"knockout\", \"underscore\", \"jquery\", \"../../Navigation/Nav\", \"./multi-viewmodel\", \"../../LocationDetailsAppender\"], function (ko, _, jQuery, nav, MultiViewModel, locationDetailsAppender) {\n    function MultiProposeViewModel(params) {\n        var self = this;\n\n        MultiViewModel.call(this, {\n            backUrl: params.backUrl,\n            backText: params.backText\n        });\n        self.initMultiLegDetail();\n        OFFERS.initOffersHelp();\n        jQuery('.place-bet').click(function (e) {\n            e.preventDefault();\n            nav.ajaxPost(\n                jQuery('.place-bet').attr('href'),\n                new locationDetailsAppender().addToUrlEncodedData(null),\n                function (data) {\n                    nav.hideBack();\n                    nav.showContent(data);\n                },\n                {\n                    control: jQuery(this),\n                    timeout: this.multiTimeout\n                });\n        });\n    }\n\n    MultiProposeViewModel.prototype = Object.create(MultiViewModel.prototype, {\n\n    });\n    Object.defineProperty(MultiProposeViewModel, 'constructor', {\n        enumerable: false,\n        value: MultiProposeViewModel\n    });\n\n    return MultiProposeViewModel;\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/MultiBet/viewmodel/multipropose-viewmodel.js\n// module id = 111\n// module chunks = 5","define([\"knockout\", \"jquery\", \"underscore\", \"./multi-viewmodel\", \"../../Services/MessageBusService\"], function (ko, jQuery, _, MultiViewModel, msgBusService) {\n    function MultiReceiptViewModel(params) {\n        var self = this;\n\n        MultiViewModel.call(this, {\n            backUrl: params.backUrl,\n            backText: params.backText\n        });\n        var items = jQuery('ul.multi-selections a');\n        items.click(function (e) {\n            e.preventDefault();\n            self.processMultiLegDetail(jQuery(this).children('.prop-details').html());\n        });\n        var ticketNumber = jQuery('span:contains(\"Ticket\")').parent().find('span.data').html();\n        var totalCost = jQuery('[data-key=\"TotalCost\"]').html();\n        msgBusService.publish('bet.multi.receipt', { ticketNumber: ticketNumber, totalCost: totalCost });\n    }\n\n    MultiReceiptViewModel.prototype = Object.create(MultiViewModel.prototype);\n    Object.defineProperty(MultiReceiptViewModel, 'constructor', {\n        enumerable: false,\n        value: MultiReceiptViewModel\n    });\n\n    return MultiReceiptViewModel;\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/MultiBet/viewmodel/multireceipt-viewmodel.js\n// module id = 112\n// module chunks = 5","define([\"knockout\", \"underscore\", \"jquery\", \"../../Navigation/Nav\", \"./multi-viewmodel\"], function (ko, _, jQuery, nav, MultiViewModel) {\n    function MultiViewViewModel(params) {\n        var self = this;\n\n        MultiViewModel.call(this, {\n            backUrl: params.backUrl,\n            backText: params.backText\n        });\n        var legs = jQuery('#multi-bet-list');\n\n        legs.find('input[type=\"checkbox\"]').change(function () {\n            nav.ajaxPost(jQuery(this).next('input').val(), null, null);\n        }).click(function (e) { e.stopPropagation(); });\n\n        legs.find('label').click(function () {\n            var input = jQuery(this).children('input');\n            if (!input.is(':disabled')) {\n                input.prop('checked', true);\n                input.change();\n            }\n            return false;\n        });\n    }\n\n    MultiViewViewModel.prototype = Object.create(MultiViewModel.prototype);\n    Object.defineProperty(MultiViewViewModel, 'constructor', {\n        enumerable: false,\n        value: MultiViewViewModel\n    });\n\n    return MultiViewViewModel;\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/MultiBet/viewmodel/multiview-viewmodel.js\n// module id = 113\n// module chunks = 5","define(['underscore', '../LoggingService', '../StorageService'], function (_, loggingService, storage) {\n    var _storeKey = 'OnCourse-Checkin';\n\n    // use session scope storage for now - may change to local storage\n    return {\n        clear: clear,\n        get: get,\n        set: set\n    }\n\n    function clear() {\n        if (arguments.length > 0) {\n            var locationId = arguments[0];\n            storage.store(_storeKey, _.filter(storage.store(_storeKey), function(x) { return x.LocationId !== locationId; }));\n        } else {\n            loggingService.logDebug(\"checkinStore.clear\");\n            storage.store(_storeKey, null);\n        }\n    };\n\n    function get() {\n        var data = storage.store(_storeKey);\n        if (data !== undefined && data !== null && data.length > 0) {\n            if (arguments.length > 0) {\n                var locationId = arguments[0];\n                var checkins = _.filter(data, function(checkin) {\n                    return (checkin.LocationId === locationId);\n                });\n                if (checkins && checkins.length > 0) {\n                    return checkins[0];\n                }\n            } else {\n                return data;\n            }\n        } else {\n            return [];\n        }\n    };\n\n    function set(locationId,locationData) {\n        var data = get();\n\n        var checkins = _.filter(data, function (x) { return x.LocationId === locationId; });\n        if (checkins && checkins.length > 0) {\n            data = _.filter(data, function(x) { return checkins[0] !== x });\n        }\n\n        data[data.length] = _.extend({}, checkins[0], locationData);\n        storage.store(_storeKey, data);\n    };\n});\n\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/Services/Location/CheckInStore.js\n// module id = 114\n// module chunks = 5","define(['underscore', './LbsConfigService'], function (_, lbsConfigService) {\n    var minAccuracy = 500;\n    var unknownLocation = \"Unknown\";\n\n    return {\n        whereAmI: whereAmI,\n        unknownLocation: unknownLocation,\n        getClosestFence: getClosestFence\n    };\n\n    function whereAmI(position) {\n        var geoLocation = unknownLocation;\n        var fences = lbsConfigService.getFences();\n\n        if (fences.length > 0) {\n            var match = false;\n            _.each(fences, function (fence) {\n                if (!match && isPositionInPoly(fence.GeoFence, position)) {\n                    geoLocation = fence.Name;\n                    match = true;\n                }\n            });\n        }\n\n        return geoLocation;\n    }\n\n    function toRadians(v) {\n        if (v == 0) return 0;\n        return v * Math.PI / 180;\n    }\n\n    function toPoint(position) {\n        return { X: position.coords.latitude, Y: position.coords.longitude };\n    }\n\n    function isPositionInPoly(poly, position) {\n        var ingeofence = false;\n\n        if (position.coords.accuracy > minAccuracy) return false;\n\n        var pt = toPoint(position);\n\n        for (var i = -1, l = poly.length, j = l - 1; ++i < l; j = i) {\n            ((poly[i].Y <= pt.Y && pt.Y < poly[j].Y) || (poly[j].Y <= pt.Y && pt.Y < poly[i].Y))\n                && (pt.X < (poly[j].X - poly[i].X) * (pt.Y - poly[i].Y) / (poly[j].Y - poly[i].Y) + poly[i].X)\n                && (ingeofence = !ingeofence);\n        }\n\n        if (ingeofence) {\n            var distanceToEdgeOfPoly = shortestDistanceToEdgeOfPoly(poly, position);\n\n            ingeofence = (distanceToEdgeOfPoly >= position.coords.accuracy);\n\n        }\n\n        return ingeofence;\n    }\n\n    function getClosestFence(position) {\n        var shortestDistance = { FenceId: '', DistanceToFence: 0 };\n        var allShortestDistances = [];\n        var fences = lbsConfigService.getFences();\n\n        //console.log('getClosestFence => ' + JSON.stringify(position));\n\n        if (fences.length > 0) {\n            _.each(fences, function (fence) {\n                var distanceToEdgeOfPoly = shortestDistanceToEdgeOfPoly(fence.GeoFence, position) - position.coords.accuracy;\n                var object = { DistanceToFence: distanceToEdgeOfPoly, FenceId: fence.Name };\n                //console.log('getClosestFence => ' + JSON.stringify(object));\n                allShortestDistances.push(object);\n            });\n        }\n\n        if (allShortestDistances.length > 0) {\n            allShortestDistances = _.sortBy(allShortestDistances,'DistanceToFence');\n            shortestDistance = allShortestDistances[0];\n        }\n\n        return shortestDistance;\n    }\n\n    function shortestDistanceToEdgeOfPoly(poly, position) {\n        var mind = 9999999,\n            pt = toPoint(position);\n        var p1, p2;\n        for (i = -1, l = poly.length, j = l - 1; ++i < l; j = i) {\n            d = distToSegment(pt, poly[i], poly[j]);\n            if (d <= mind) { mind = d; p1 = poly[i]; p2 = poly[j]; }\n        }\n        return mind * 1000;\n    }\n\n\n    function latlantometer(p1, p2) {\n        var R = 6371; // km Earth radius\n        var 1 = toRadians(p1.X);\n        var 2 = toRadians(p2.X);\n        var  = toRadians((p2.X - p1.X));\n        var  = toRadians((p2.Y - p1.Y));\n\n        var a = Math.sin( / 2) * Math.sin( / 2) +\n            Math.cos(1) * Math.cos(2) *\n            Math.sin( / 2) * Math.sin( / 2);\n        var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n        var d = R * c;\n        return d;\n    }\n\n    function sqr(x) {\n        return x * x;\n    }\n\n    function dist2(v, w) {\n        return sqr(v.X - w.X) + sqr(v.Y - w.Y);\n    }\n\n    function distToSegment(p, v, w) {\n        var l2 = dist2(v, w);\n\n        if (l2 == 0) return latlantometer(p, v);\n\n        var t = ((p.X - v.X) * (w.X - v.X) + (p.Y - v.Y) * (w.Y - v.Y)) / l2;\n\n        if (t < 0) return latlantometer(p, v);\n        if (t > 1) return latlantometer(p, w);\n\n        var poi = { x: v.X + t * (w.X - v.X), y: v.Y + t * (w.Y - v.Y) };\n        return latlantometer(p, poi);\n    }\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/Services/Location/GeoFenceService.js\n// module id = 115\n// module chunks = 5","define(['underscore', '../LoggingService', 'amplify'], function(_, loggingService, amplify) {\n    var _storeKey = 'Gps';\n\n    return {\n        clear: clear,\n        get: get,\n        set: set\n    }\n\n    function clear() {\n        loggingService.logDebug(\"gpsStore.clear\");\n        amplify.store(_storeKey, null);\n    }\n\n    function get() {\n        loggingService.logDebug(\"gpsStore.get\");\n        return amplify.store(_storeKey);\n    }\n\n    function set(data) {\n        loggingService.logDebug(\"gpsStore.set - \" + JSON.stringify(data));\n        amplify.store(_storeKey, data);\n    }\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/Services/Location/GpsStore.js\n// module id = 116\n// module chunks = 5","define(['../LoggingService', 'amplify', 'underscore'], function(loggingService, amplify, _) {\n    var _storeKey = 'location';\n\n    // use session scope storage for now - may change to local storage\n    var _store = function () {\n        if (amplify.store.types.sessionStorage) {\n            return amplify.store.sessionStorage;\n        }\n        return amplify.store.memory;\n    }();\n\n    return {\n        clear: clear,\n        get: get,\n        set: set\n    }\n\n    function clear() {\n\n        loggingService.logDebug(\"locationStore.clear\");\n\n        _store(_storeKey, null);\n    };\n\n    function get() {\n        var result = {\n            ProviderLocations: []\n        };\n\n        var locationData = _store(_storeKey);\n\n        if (locationData && _.isObject(locationData)) {\n            result.ProviderLocations = locationData.ProviderLocations || result.ProviderLocations;\n        }\n\n        return result;\n    };\n\n    function set(locationData) {\n\n        loggingService.logDebug(\"locationStore.set\", JSON.stringify(locationData));\n\n        var data = {\n            ProviderLocations: locationData.ProviderLocations,\n        };\n        _store(_storeKey, data);\n    };\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/Services/Location/LocationStore.js\n// module id = 117\n// module chunks = 5","define([], function() {\n\n    var versionElementSel = \"input#Version[data-key='X-TabTouch-Version']\";\n\n    var getTabTouchVersion = function() {\n        var elem = document.querySelector(versionElementSel);\n\n        if (elem) {\n            var xTabTouchVersion = elem.value;\n            if (typeof xTabTouchVersion !== 'undefined') {\n                return xTabTouchVersion;\n            }\n        }\n        return null;\n    };\n\n    return {\n        getTabTouchVersion: getTabTouchVersion\n    };\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/Version.js\n// module id = 118\n// module chunks = 5","define([\n    'requireExternal',\n    '../Services/MessageBusService',\n    '../Navigation/Nav',\n    'immutable',\n    'moment',\n    'hammerjs',\n    '../Analytics/AdobeDTMService'\n], function(requirejs, messageBus, nav, immutable, moment, hammer, dtm) {\n\n    return {\n        init: function(baseUrl, tabName) {\n\n            require.ensure([], function() {\n                var rx = require('rx'); \n                var react = require('react');\n                var reactDom = require('react-dom');\n                var rest = require('rwwa-rest');\n                var stateMachine = require('rwwa-rx-state-machine');\n                var authIntents = require('../../AppUtils/Framework/Intent/authentication');\n                var menuIntents = require('../../AppUtils/Framework/Intent/menu');\n                var navIntents = require('../../AppUtils/Framework/Intent/navigation');\n\n                var container = document.getElementById('account-activity-container');\n\n                var externalComponentRequire = requirejs.config({\n                    context: 'externalRequire',\n                    waitSeconds: 15\n                });\n\n                nav.showLoading();\n\n                externalComponentRequire([baseUrl + \"/static/react-client.js\"],\n                    function(accountActivity) {\n                        nav.hideLoading();\n\n                        var config = {\n                            host: baseUrl,\n                            initalTab: accountActivity.tabs[tabName]\n                        }\n\n                        var dependencies = {\n                            react: react,\n                            'react-dom': reactDom,\n                            rx: Rx,\n                            rest: rest.default,\n                            immutable: immutable,\n                            moment: moment,\n                            hammerjs: hammer,\n                            'state-machine': stateMachine,\n                            'host-intents': {\n                                auth: authIntents,\n                                nav: navIntents,\n                                menu: menuIntents,\n                            },\n                            analytics: { track: function(key) { dtm.trackActivity(key); } }\n                        }\n\n                        accountActivity.run(container, config, dependencies);\n\n                        function onNav() {\n                            messageBus.unsubscribe('nav.nav', onNav);\n                            messageBus.unsubscribe('nav.resetback', onNav);\n                            reactDom.unmountComponentAtNode(container);\n                        }\n\n                        messageBus.subscribe('nav.nav', onNav);\n                        messageBus.subscribe('nav.resetback', onNav);                    \n                    },\n\n                    function(err) {\n                        var failedId = err.requireModules && err.requireModules[0];\n                        requirejs.undef(failedId);\n\n                        nav.ajaxError(0, null, true);\n                    });\n\n            }, 'extcomponents'); \n        }\n    }\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/ViewModels/AccountActivityViewModel.js\n// module id = 119\n// module chunks = 5","define(['jquery', './AccountViewModel', '../Services/MessageBusService', '../Common', '../Navigation/Nav', '../Logon'], function (jQuery, AccountViewModel, msgBusService, common, nav, logon) {\n    function AccountChangePasswordViewModel(params) {\n        AccountViewModel.call(this, {\n            backUrl: params.backUrl,\n            backText: params.backText\n        });\n        initChangePasswordForm();\n    }\n\n    function submitChangePwd() {\n        nav.ajaxPost(\n            jQuery('form#change-password-form').attr('action'),\n            jQuery('form#change-password-form').serialize(),\n            processChangePasswordResponse,\n            {\n                error: logon.closeLoginPopup,\n                control: jQuery('#change-password-button'),\n                reenable: false\n            }\n        );\n    }\n\n    function processChangePasswordResponse(data) {\n        jQuery('form#change-password-form').parent().html(data);\n        initChangePasswordForm();\n        logon.ajaxLogonState();\n        msgBusService.publish('account.processed', 'password change');\n\n    }\n\n    function initChangePasswordForm() {\n        jQuery('#change-password-form input[type=password]').val('')\n                .keyup(function() {\n                    updateChangePasswordState();\n                })\n                .keypress(function(e) {\n                    common.numericKeyPress(e, true);\n                })\n                .change(function(e) {\n                    common.numericKeyPress(e, true);\n                    updateChangePasswordState(e);\n                });\n    }\n\n    function updateChangePasswordState(e) {\n        common.setDisableState(jQuery('button.change-password'), (jQuery('input#CurrentPassword').val().length > 0));\n    }\n\n    AccountChangePasswordViewModel.prototype = Object.create(AccountViewModel.prototype, {\n        submitChangePwd: {\n            value: submitChangePwd\n        }\n    });\n\n    Object.defineProperty(AccountChangePasswordViewModel, 'constructor', {\n        enumerable: false,\n        value: AccountChangePasswordViewModel\n    });\n\n    return AccountChangePasswordViewModel;\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/ViewModels/AccountChangePasswordViewModel.js\n// module id = 120\n// module chunks = 5","define([\"jquery\", \"./AccountViewModel\", \"../Services/MessageBusService\", \"../Common\",\"../Navigation/Nav\"], function (jQuery, AccountViewModel, msgBusService, common, nav) {\n    function AccountDepositPayConnectViewModel(params) {\n        AccountViewModel.call(this, {\n            backUrl: params.backUrl,\n            backText: params.backText\n        });\n        this.NoRefresh();\n    }\n\n    /* ---------------------\n    Deposit Payment Connect Start\n    --------------------- */\n\n    function submitDepositPaymentConnect() {\n        if (!validateDepositForm()) return;\n        jQuery('form#init-pay-connect-form #DepositAmount').val(jQuery('div#deposit-form #deposit-amount').val());\n        nav.ajaxPost(\n            jQuery('form#init-pay-connect-form').attr('action'),\n            jQuery('form#init-pay-connect-form').serialize(),\n            processDepositResponsePaymentConnect,\n            {\n                error: nav.resetBack,\n                control: jQuery('#deposit-button')\n            });\n    }\n\n    function validateDepositForm() {\n        var errorArray = [];\n        var errorHtml;\n        var ccRegEx = /^\\d{16}$/;\n        var codeRegEx = /^\\d{3}$/;\n        var amountRegEx = /^\\d[\\d\\.]*$/;\n\n        jQuery('div.validation-summary-errors').remove();\n\n        if (!ccRegEx.test(jQuery('input#cc-number').val())) {\n            errorArray.push(\"Invalid credit card number.\");\n        }\n\n        if (!codeRegEx.test(jQuery('input#security-code').val())) {\n            errorArray.push(\"Invalid security code.\");\n        }\n\n        if (jQuery('#expiry-mm').val() === '' || jQuery('#expiry-yy').val() === '') {\n            errorArray.push(\"Invalid expiry date.\");\n        }\n\n        if (!amountRegEx.test(jQuery('input#deposit-amount').val())) {\n            errorArray.push(\"Invalid deposit amount.\");\n        }\n\n        if (errorArray.length > 0) {\n            errorHtml = \"<div class='validation-summary-errors' style='margin-top: 1em; color: #CC0404;'><h5 style='text-align:left;'>Please correct these fields:</h5><ul><li>\";\n            errorHtml += errorArray.join(\"</li><li>\");\n            errorHtml += \"</li></ul></div>\";\n\n            jQuery('div#deposit-form fieldset').prepend(errorHtml);\n            return false;\n        }\n\n        return true;\n    }\n\n    function processDepositResponsePaymentConnect(data) {\n\n        if (data == null\n            || data == undefined\n            || data.ReceiptPageUrl == null\n            || data.ReceiptPageUrl == undefined) {\n            nav.resetBack(\"Account\");\n            jQuery('#content').html(data);\n        }\n        else {\n            //set up the form data for submission\n            jQuery('#in_merchant_number').val(data.MerchantNumber);\n            jQuery('#in_pay_token').val(data.PaymentToken);\n            jQuery('#in_amount').val(data.AmountInCents);\n            jQuery('#in_merchant_reference').val(data.AccountNumber);\n            jQuery('#in_crn1').val(data.PaymentCRN1);\n            jQuery('#in_crn2').val(data.PaymentCRN2);\n            jQuery('#in_crn3').val(data.PaymentCRN3);\n\n            jQuery('#in_credit_card').val(jQuery('#cc-number').val());\n            jQuery('#in_expiry_month').val(jQuery('#expiry-mm').val());\n            jQuery('#in_expiry_year').val(jQuery('#expiry-yy').val());\n            jQuery('#in_cvv').val(jQuery('#security-code').val());\n\n            jQuery('#in_receipt_page_url').val(data.ReceiptPageUrl);\n            jQuery('#rwwa_bet_account_number').val(data.AccountNumber);\n            jQuery('#rwwa_deposit_amount').val(data.AmountInCents);\n            jQuery('#rwwa_unconf_txn_number').val(data.PaymentCRN1);\n\n            // clean the existing form to be posted to bpoint MAC validation will fail at bpoint\n            var form = jQuery('#ccSubmissionForm');\n            if (form != undefined) {\n                form.submit();\n                msgBusService.publish('account.processed', 'deposit');\n            }\n        }\n    }\n    /* ---------------------\n    Deposit Payment Connect Finish\n    --------------------- */\n\n    AccountDepositPayConnectViewModel.prototype = Object.create(AccountViewModel.prototype, {\n        submitDepositPaymentConnect: {\n            value: submitDepositPaymentConnect\n        }\n    });\n    Object.defineProperty(AccountDepositPayConnectViewModel, 'constructor', {\n        enumerable: false,\n        value: AccountDepositPayConnectViewModel\n    });\n\n    return AccountDepositPayConnectViewModel;\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/ViewModels/AccountDepositPayconnectViewModel.js\n// module id = 121\n// module chunks = 5","define([\"jquery\", \"./AccountViewModel\", \"../Services/MessageBusService\", \"../Common\", \"../Navigation/Nav\"], function (jQuery, AccountViewModel, msgBusService, common, nav) {\n    function AccountDepositViewModel(params) {\n        AccountViewModel.call(this, {\n            backUrl: params.backUrl,\n            backText: params.backText\n        });\n        jQuery('.page-heading .refresh-button').hide();\n        jQuery('.creditcard-part').on('keyup', function (e) {\n            var $textBox = jQuery(this);\n            if ($textBox.val().length >= 4 && IsKeyCodeForNumber(e.keyCode)) {\n                $textBox.nextAll(\"input\").first().focus();\n            }\n        });\n    }\n\n    /* ---------------------\n    Deposit Start\n    --------------------- */\n\n    function IsKeyCodeForNumber(keyCode) {\n        return ((keyCode >= 48 && keyCode <= 57) | (keyCode >= 96 && keyCode <= 105));\n    }\n\n    function proposeDeposit() {\n\n        var ccPart1 = jQuery('#CreditCardNumberPart1').val();\n        var ccPart2 = jQuery('#CreditCardNumberPart2').val();\n        var ccPart3 = jQuery('#CreditCardNumberPart3').val();\n        var ccPart4 = jQuery('#CreditCardNumberPart4').val();\n\n        if (ccPart1 && ccPart2 && ccPart3 && ccPart4)\n            jQuery('#CreditCardNumber').val(ccPart1 + ccPart2 + ccPart3 + ccPart4);\n\n        //analytics\n        var validationErrorMessageHeader = jQuery('#validation-error-message-header');\n        if (validationErrorMessageHeader == undefined || validationErrorMessageHeader.length <= 0) {    //means first time click on continue button. I know what you mean here!!!\n            msgBusService.publish('account.deposit', { step: 'started', amount: 0 });\n        } else {\n            msgBusService.publish('account.deposit', { step: 'correctvalidationerror', amount: 0 });  // means coming back to same page because of validation error\n        }\n\n        postDeposit(jQuery('form#deposit-form').attr('action'), function (data) {\n            jQuery('#content').html(data);\n        });\n    }\n\n    function overrideDepositBack(url) {\n        nav.overrideBack(function () {\n            postDeposit(url, processDepositResponse);\n            return false;\n        });\n    }\n\n    function postDeposit(action, success) {\n        nav.ajaxPost(\n            action,\n            jQuery('form#deposit-form').serialize(),\n            success,\n            {\n                error: nav.resetBack,\n                control: jQuery('#deposit-button'),\n                timeout: 90000  //90 seconds for deposit!\n            }\n        );\n    }\n\n    function submitDeposit() {\n        msgBusService.publish('account.deposit', { step: 'confirmed', amount: 0 });\n        postDeposit(jQuery('form#deposit-form').attr('action'), processDepositResponse);\n    }\n\n    function processDepositResponse(data) {\n        nav.resetBack(\"Account\");\n        jQuery('#content').html(data);\n        //msgBusService.publish('account.processed', 'deposit');    //ToDo: Misleading. This event can fire many time than actual deposit happens. e.g. Deposit success, deposit error, refresh button, creditcard register success, creditcard register fail etc.\n\n        //analytics\n        var depositSuccess = jQuery('#deposit-success');\n        var depositError = jQuery('#deposit-error');\n        if (depositSuccess != undefined && depositSuccess.length > 0) {\n            var depositAmount = 0;\n            var depositAmountElement = jQuery('#depositAmount');\n            if (depositAmountElement != undefined && depositAmountElement.length > 0) {\n                depositAmount = depositAmountElement.val();\n            }\n            msgBusService.publish('account.deposit', { step: 'success', amount: depositAmount });\n        } else if (depositError != undefined && depositError.length > 0) {\n            msgBusService.publish('account.deposit', {step: 'error', amount: 0});\n        }\n    }\n\n    /* ---------------------\n    Deposit Finish\n    --------------------- */\n\n    AccountDepositViewModel.prototype = Object.create(AccountViewModel.prototype, {\n        proposeDeposit : {\n            value: proposeDeposit\n        },\n        overrideDepositBack : {\n            value: overrideDepositBack\n        },\n        submitDeposit : {\n            value: submitDeposit\n        }\n    });\n    Object.defineProperty(AccountDepositViewModel, 'constructor', {\n        enumerable: false,\n        value: AccountDepositViewModel\n    });\n\n    return AccountDepositViewModel;\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/ViewModels/AccountDepositViewModel.js\n// module id = 122\n// module chunks = 5","define([\"jquery\", \"./AccountViewModel\", \"../Services/MessageBusService\", \"../Common\", \"../Navigation/Nav\", \"../StringExtensions\"], function (jQuery, AccountViewModel, msgBusService, common, nav) {\n    function AccountPreCommitmentViewModel(params) {\n\n        var preCommitmentViewModel = null;\n\n        AccountViewModel.call(this, {\n            backUrl: params.backUrl,\n            backText: params.backText\n        });\n        initPreCommitmentForm(params.model);\n    }\n\n    /* ---------------------\n    Pre-Commitment Start\n    --------------------- */\n\n    function initPreCommitmentForm(model) {\n        var precommitTimeoutMs = 90000;\n        var radix = 10;\n\n        function setModel(model) {\n            if (model) {\n                preCommitmentViewModel = model;\n            }\n        };\n\n        function getModel() {\n            return preCommitmentViewModel;\n        };\n\n        var messages = {\n            CallCustomerManagement: 'Please call our Customer Management Team on <a class=\"telephone\" href=\"tel:{0}\">{0}</a>',\n            ProposedLimitText: 'Proposed {0} of {1} effective {2}',\n            ProposedUnblockText: 'Proposed unblock of credit card deposits effective {0}',\n            EmptyField: 'Please fill in the {0} field',\n            TooManyDigits: 'Please enter a number with {0} digits or less in the {1} field',\n            NotInteger: '{0} must be whole dollars only',\n            TooSmall: '{0} must be greater than or equal to ${1}',\n            TooBig: '{0} must be less than or equal to ${1}',\n            ConfirmationTemplates: {\n                bet: {\n                    nolimit: 'Confirming this action will <strong>remove</strong> the single bet limit from your account. This change will be effective from {{effectiveDate}}, due to a <strong>{{coolingOffPeriodDays}} day cooling off period</strong>. Would you like to continue?',\n                    immediate: 'Your new single bet limit of {{value}} will be effective immediately! If you wish to increase or remove your single bet limit in the future, it will be subject to a <strong>{{coolingOffPeriodDays}} day cooling off period</strong>. Would you like to continue?',\n                    altered: 'Your new single bet limit of {{value}} will be effective from {{effectiveDate}}. Increasing or removing your single bet limit in the future will be subject to a <strong>{{coolingOffPeriodDays}} day cooling off period</strong>. Would you like to continue?'\n                },\n                deposit: {\n                    nolimit: 'Confirming this action will <strong>remove</strong> the total weekly deposit limit from your account. This change will be effective from {{effectiveDate}}, due to a <strong>{{coolingOffPeriodDays}} day cooling off period</strong>. Would you like to continue?',\n                    immediate: 'Your new total weekly deposit limit of {{value}} will be effective immediately! This deposit limit is inclusive of all deposit types that have been made within the past 7 days (e.g. credit card, cash, BPAY). Increasing or removing your total weekly deposit limit in the future will be subject to a <strong>{{coolingOffPeriodDays}} day cooling off period</strong>. Would you like to continue?',\n                    altered: 'Your new total weekly deposit limit of {{value}} will be effective from {{effectiveDate}}. This deposit limit is inclusive of all deposit types that have been made within the past 7 days (e.g. credit card, cash, BPAY). Increasing or removing your total weekly deposit limit in the future will be subject to a <strong>{{coolingOffPeriodDays}} day cooling off period</strong>. Would you like to continue?'\n                }\n            },\n            CreditCardBlock: 'Credit card deposits to your account will be blocked effective immediately! If you choose to <strong>remove</strong> this block in the future, it will be subject to a <strong>{{coolingOffPeriodDays}} day cooling off period</strong>. Would you like to continue?',\n            CreditCardUnblock: 'Removing your existing block on your credit card will allow credit card deposits to your TAB account. This change will become effective from {{effectiveDate}} due to a <strong>{{coolingOffPeriodDays}} day cooling off period</strong>. Would you like to continue?',\n            BetLimitLabel: jQuery('#bet-limits-form h3').text(),\n            DepositLimitLabel: jQuery('#deposit-limits-form h3').text()\n        };\n\n        var toLimitText = function (s) {\n            if (s != null) {\n                return \"$\" + s;\n            }\n            return \"None\";\n        };\n\n        var getProposedLimitText = function (type, proposedLimit) {\n            if (proposedLimit) {\n                return messages.ProposedLimitText.format(type, toLimitText(proposedLimit.Amount), proposedLimit.ActiveDate);\n            }\n            return '';\n        };\n\n        var getProposedUnblockText = function (model) {\n            if (!model.BlockCreditCardDepositsEnable) {\n                return messages.CallCustomerManagement.format(model.RwwaAccountsContactTel);\n            }\n            else if (model.ProposedCreditCardReleaseDate) {\n                return messages.ProposedUnblockText.format(model.ProposedCreditCardReleaseDate);\n            }\n            return '';\n        };\n\n        var betLimitOptOutEnable = function (model) {\n            return model.BetLimit != null && (model.ProposedBetLimit == null || model.ProposedBetLimit.Amount != null);\n        };\n\n        var depositLimitOptOutEnable = function (model) {\n            return model.DepositLimit && (model.ProposedDepositLimit == null || model.ProposedDepositLimit.Amount != null);\n        };\n\n        var updateView = function () {\n            var model = getModel();\n\n            jQuery('#credit-card-deposits').prop('checked', model.BlockCreditCardDeposits);\n            jQuery('#bet-limit').val(toLimitText(model.BetLimit));\n            jQuery('#deposit-limit').val(toLimitText(model.DepositLimit));\n            jQuery('#proposed-bet-limit').text(getProposedLimitText(messages.BetLimitLabel, model.ProposedBetLimit));\n            jQuery('#proposed-deposit-limit').text(getProposedLimitText(messages.DepositLimitLabel, model.ProposedDepositLimit));\n            jQuery('#proposed-credit-release').html(getProposedUnblockText(model));\n            common.setDisableState(jQuery('#credit-card-deposits'), !model.ProposedCreditCardReleaseDate && model.BlockCreditCardDepositsEnable);\n            common.setDisableState(jQuery('#bet-limit-optout'), betLimitOptOutEnable(model));\n            common.setDisableState(jQuery('#deposit-limit-optout'), depositLimitOptOutEnable(model));\n        };\n\n        var validateBetLimit = function (model, newLimit) {\n            return validateLimit(model, messages.BetLimitLabel, newLimit, model.BetLimitRange);\n        };\n\n        var validateDepositLimit = function (model, newLimit) {\n            return validateLimit(model, messages.DepositLimitLabel, newLimit, model.DepositRange);\n        };\n\n        var validateLimit = function (model, label, newLimit, range) {\n            if (!newLimit || newLimit.length == 0) {\n                model.ValidationErrors.push(messages.EmptyField.format(label));\n                return false;\n            }\n\n            var maxDigits = range.Max.toString().length;\n            if (newLimit.Length > maxDigits) {\n                model.ValidationErrors.push(messages.TooManyDigits.format(maxDigits, label));\n                return false;\n            }\n\n            var intRegex = /^\\d+$/;\n            if (!intRegex.test(newLimit)) {\n                model.ValidationErrors.push(messages.NotInteger.format(label));\n                return false;\n            }\n\n            var n = parseInt(newLimit, radix);\n            if (n < range.Min) {\n                model.ValidationErrors.push(messages.TooSmall.format(label, range.Min));\n                return false;\n            }\n            if (n > range.Max) {\n                model.ValidationErrors.push(messages.TooBig.format(label, range.Max));\n                return false;\n            }\n\n            return true;\n        };\n\n        /* where null represents no limit(the 'greatest' limit) */\n        var compareLimit = function (a, b) {\n            if ((a == null && b == null) || (a == b)) {\n                return 0;\n            } else if (a == null) {\n                return 1;\n            } else if (b == null) {\n                return -1;\n            } else if (a > b) {\n                return 1;\n            }\n            return -1;\n        };\n\n        var calcConfirmationText = function (model, templates, currentLimit, newLimit, proposedLimit) {\n            var msgTemplate = templates.altered;\n            var ed = model.CoolingOffDate;\n\n            if (compareLimit(newLimit, currentLimit) <= 0) {\n                msgTemplate = templates.immediate;\n                ed = 'immediately';\n            }\n            else if (proposedLimit && compareLimit(newLimit, proposedLimit.Amount) <= 0) {\n                msgTemplate = templates.altered;\n                ed = proposedLimit.ActiveDate;\n            }\n\n            if (newLimit == null) {\n                msgTemplate = templates.nolimit;\n            }\n\n            return msgTemplate.template({ value: toLimitText(newLimit), effectiveDate: ed, coolingOffPeriodDays: model.CoolingOffPeriodDays });\n        };\n\n        var showValidationErrors = function (model) {\n            if (model && model.ValidationErrors && model.ValidationErrors.length) {\n                jQuery('#validation-error-list').html('<p>' + model.ValidationErrors[0] + '</p>');\n                jQuery('#validation-error-window').unbind('click').click(function () { jQuery('#validation-error-window').fadeOut('fast'); });\n                common.showPopup(jQuery('#validation-error-window'));\n                model.ValidationErrors = [];\n                return true;\n            }\n            return false;\n        };\n\n        var showConfirmation = function (model, msg, onConfirm, onCancel) {\n            if (model) {\n                var confirmDialog = new confirmation.Dialog(jQuery, common);\n                confirmDialog.show(msg, onConfirm, onCancel);\n            }\n        };\n\n        var setBetLimitEditing = function (editing) {\n            if (editing) {\n                jQuery('.bet-limit-collapsed').show();\n                jQuery('#bet-limit-edit').addClass('disabled');\n                jQuery('#new-bet-limit').val(null);\n            } else {\n                jQuery('.bet-limit-collapsed').hide();\n                jQuery('#bet-limit-edit').removeClass('disabled');\n            }\n        };\n\n        var setDepositLimitEditing = function (editing) {\n            if (editing) {\n                jQuery('.deposit-limit-collapsed').show();\n                jQuery('#deposit-limit-edit').addClass('disabled');\n                jQuery('#new-deposit-limit').val(null);\n            } else {\n                jQuery('.deposit-limit-collapsed').hide();\n                jQuery('#deposit-limit-edit').removeClass('disabled');\n            }\n        };\n\n        var submitOption = function (url, checkbox, success, error) {\n            var checked = checkbox.is(':checked');\n\n            nav.ajaxPost(\n                url,\n                jQuery.param(\n                {\n                    enable: checked\n                }),\n                function (data) {\n                    common.setDisableState(checkbox, true);\n                    if (success) {\n                        success(data);\n                    }\n                },\n                {\n                    error: function (x, s) {\n                        error();\n                    },\n                    control: checkbox,\n                    timeout: precommitTimeoutMs\n                }\n            );\n        };\n\n        var submitLimit = function (url, value, success, error) {\n            nav.ajaxPost(\n                url,\n                jQuery.param(\n                {\n                    newLimit: value\n                }),\n                function (data) {\n                    if (success) {\n                        success(data);\n                    }\n                },\n                {\n                    error: function (x, s) {\n                        error();\n                    },\n                    timeout: precommitTimeoutMs\n                }\n            );\n        };\n\n\n        var editBetLimitKeyUpHandler = function () {\n            setBetLimitEditing(true);\n        };\n\n        var cancelBetLimitKeyUpHandler = function () {\n            setBetLimitEditing(false);\n        };\n\n        var optOutBetLimitKeyUpHandler = function () {\n            var url = jQuery('#bet-limit-optout-action').attr('href');\n            var model = getModel();\n            var confirmText = calcConfirmationText(model, messages.ConfirmationTemplates.bet, model.BetLimit, null, model.ProposedBetLimit);\n\n            if (!betLimitOptOutEnable(model)) {\n                return;\n            }\n\n            showConfirmation(\n                model,\n                confirmText,\n                function () {\n                    nav.ajaxPost(\n                        url,\n                        null,\n                        function (data) {\n                            setModel(data.viewModel);\n                            updateView();\n                            setBetLimitEditing(false);\n                        },\n                        {\n                            error: function (x, s) {\n                                updateView();\n                            },\n                            timeout: precommitTimeoutMs\n                        }\n                    );\n                }\n            );\n        };\n\n        var confirmBetLimitSubmitHandler = function () {\n            var url = jQuery('#bet-limit-confirm-action').attr('href');\n            var value = jQuery('#new-bet-limit').val();\n            var model = getModel();\n            if (!validateBetLimit(model, value)) {\n                showValidationErrors(model);\n                return;\n            }\n\n            var intValue = parseInt(value, radix);\n            var confirmText = calcConfirmationText(model, messages.ConfirmationTemplates.bet, model.BetLimit, intValue, model.ProposedBetLimit);\n\n            showConfirmation(\n                model,\n                confirmText,\n                function () {\n                    submitLimit(\n                        url,\n                        value,\n                        function (data) {\n                            setModel(data.viewModel);\n                            updateView();\n                            if (!showValidationErrors(data.viewModel)) {\n                                setBetLimitEditing(false);\n                            }\n                        },\n                        function () {\n                            updateView();\n                        }\n                    );\n                }\n            );\n        };\n\n        var confirmBetLimitKeyUpHandler = function () {\n            var form = jQuery('#bet-limits-form');\n            form.find(':submit').click();\n        };\n\n        var editDepositLimitKeyUpHandler = function () {\n            setDepositLimitEditing(true);\n        };\n\n        var cancelDepositLimitKeyUpHandler = function () {\n            setDepositLimitEditing(false);\n        };\n\n        var optOutDepositLimitKeyUpHandler = function () {\n            var url = jQuery('#deposit-limit-optout-action').attr('href');\n            var model = getModel();\n            var confirmText = calcConfirmationText(model, messages.ConfirmationTemplates.deposit, model.DepositLimit, null, model.ProposedDepositLimit);\n\n            if (!depositLimitOptOutEnable(model)) {\n                return;\n            }\n\n            showConfirmation(\n                model,\n                confirmText,\n                function () {\n                    nav.ajaxPost(\n                        url,\n                        null,\n                        function (data) {\n                            setModel(data.viewModel);\n                            updateView();\n                            setDepositLimitEditing(false);\n                        },\n                        {\n                            error: function (x, s) {\n                                updateView();\n                            },\n                            timeout: precommitTimeoutMs\n                        }\n                    );\n                }\n            );\n        };\n\n        var confirmDepositLimitSubmitHandler = function () {\n            var url = jQuery('#deposit-limit-confirm-action').attr('href');\n            var value = jQuery('#new-deposit-limit').val();\n            var model = getModel();\n            if (!validateDepositLimit(model, value)) {\n                showValidationErrors(model);\n                return;\n            }\n\n            var intValue = parseInt(value, radix);\n            var confirmText = calcConfirmationText(model, messages.ConfirmationTemplates.deposit, model.DepositLimit, intValue, model.ProposedDepositLimit);\n\n            showConfirmation(\n                model,\n                confirmText,\n                function () {\n                    submitLimit(\n                        url,\n                        value,\n                        function (data) {\n                            setModel(data.viewModel);\n                            updateView();\n                            if (!showValidationErrors(data.viewModel)) {\n                                setDepositLimitEditing(false);\n                            }\n                        },\n                        function () {\n                            updateView();\n                        }\n                    );\n                }\n            );\n        };\n\n        var confirmDepositLimitKeyUpHandler = function () {\n            var form = jQuery('#deposit-limits-form');\n            form.find(':submit').click();\n        };\n\n        var creditCardDepositsChangeHandler = function () {\n            var url = jQuery('#credit-card-deposits-action').attr('href');\n            var checkbox = jQuery('#credit-card-deposits');\n            var checked = checkbox.is(':checked');\n            var model = getModel();\n            if (!model.BlockCreditCardDepositsEnable) {\n                model.ValidationErrors.push(messages.CallCustomerManagement.format(model.RwwaAccountsContactTel));\n                updateView();\n                showValidationErrors(model);\n                return;\n            }\n\n            showConfirmation(\n                model,\n                (checked ? messages.CreditCardBlock : messages.CreditCardUnblock).template({ coolingOffPeriodDays: model.CoolingOffPeriodDays, effectiveDate: model.CoolingOffDate }),\n                function () {\n                    submitOption(\n                        url,\n                        checkbox,\n                        function (data) {\n                            setModel(data.viewModel);\n                            updateView();\n                            showValidationErrors(data.viewModel);\n                        },\n                        function () {\n                            updateView();\n                        }\n                    );\n                },\n                updateView\n            );\n        };\n\n        jQuery('#bet-limit-edit').click(editBetLimitKeyUpHandler);\n        jQuery('#bet-limit-cancel').click(cancelBetLimitKeyUpHandler);\n        jQuery('#bet-limit-optout').click(optOutBetLimitKeyUpHandler);\n        jQuery('#bet-limit-confirm').click(confirmBetLimitKeyUpHandler);\n        jQuery('#deposit-limit-edit').click(editDepositLimitKeyUpHandler);\n        jQuery('#deposit-limit-cancel').click(cancelDepositLimitKeyUpHandler);\n        jQuery('#deposit-limit-optout').click(optOutDepositLimitKeyUpHandler);\n        jQuery('#deposit-limit-confirm').click(confirmDepositLimitKeyUpHandler);\n\n        jQuery('#credit-card-deposits').change(creditCardDepositsChangeHandler);\n\n        jQuery('#deposit-limits-form').submit(confirmDepositLimitSubmitHandler);\n        jQuery('#bet-limits-form').submit(confirmBetLimitSubmitHandler);\n\n        jQuery('#new-deposit-limit').keypress(function (e) { common.numericKeyPress(e, true); });\n        jQuery('#new-bet-limit').keypress(function (e) { common.numericKeyPress(e, true); });\n        jQuery('a.scroll-to').click(function (e) { return nav.scrollTo(this.attributes['href'].value); });\n        jQuery('input[maxlength]').keypress(function (e) { return common.maxlengthKeyPress(this, e); });\n\n        setModel(model);\n        updateView();\n    }\n\n\n    /* ---------------------    \n    Pre-Commitment Finish\n    --------------------- */\n\n    AccountPreCommitmentViewModel.prototype = Object.create(AccountViewModel.prototype, {\n\n    });\n    Object.defineProperty(AccountPreCommitmentViewModel, 'constructor', {\n        enumerable: false,\n        value: AccountPreCommitmentViewModel\n    });\n\n    return AccountPreCommitmentViewModel;\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/ViewModels/AccountPrecommitmentViewModel.js\n// module id = 123\n// module chunks = 5","define([\"jquery\", \"./AccountViewModel\", \"../Services/MessageBusService\", \"../Common\", \"../Navigation/Nav\"], function (jQuery, AccountViewModel, msgBusService, common, nav) {\n    function AccountTransactionViewModel(params) {\n        AccountViewModel.call(this, {\n            backUrl: params.backUrl,\n            backText: params.backText\n        });\n        jQuery('ul.transactions a').click(function () {\n            nav.ajaxPost(jQuery(this).attr('href'),\n                     null,\n                     processTransactionsResponse);\n\n            return false;\n        });\n\n        jQuery('div.button-group a.disabled').click(function (e) {\n            e.preventDefault();\n        });\n    }\n\n    /* ---------------------\n    Transactions Start\n    --------------------- */\n\n    function processTransactionsResponse(data) {\n        jQuery('#transaction-details').html(data);\n        jQuery('#transaction-details ul.display-list').each(function () { jQuery(this).children(\"li:odd\").addClass('alt'); });\n        jQuery('.popup').click(function () { jQuery('#transaction-window').fadeOut('fast'); });\n        common.showPopup(jQuery('#transaction-window'));\n        msgBusService.publish('account.processed', 'transaction');\n\n    }\n\n    /* ---------------------\n    Transactions Finish\n    --------------------- */\n\n    AccountTransactionViewModel.prototype = Object.create(AccountViewModel.prototype, {\n\n    });\n    Object.defineProperty(AccountTransactionViewModel, 'constructor', {\n        enumerable: false,\n        value: AccountTransactionViewModel\n    });\n\n    return AccountTransactionViewModel;\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/ViewModels/AccountTransactionViewModel.js\n// module id = 124\n// module chunks = 5","define([\"jquery\", \"./AccountViewModel\", \"../Services/MessageBusService\", \"../Common\",\"../Navigation/Nav\"], function (jQuery, AccountViewModel, msgBusService, common, nav) {\n    function AccountWithdrawalViewModel(params) {\n        AccountViewModel.call(this, {\n            backUrl: params.backUrl,\n            backText: params.backText\n        });\n    }\n\n    /* ---------------------\n    Withdrawal Start\n    --------------------- */\n\n    function postWithdrawal() {\n        nav.ajaxPost(\n            jQuery('form#withdrawal-form').attr('action'),\n            jQuery('form#withdrawal-form').serialize(),\n            processWithdrawalResponse,\n            {\n                control: jQuery('#withdrawal-button')\n            }\n        );\n    }\n\n    function processWithdrawalResponse(data) {\n        jQuery('#content').html(data);\n        msgBusService.publish('account.processed', 'withdrawal');\n    }\n\n    /* ---------------------\n    Withdrawal Finish\n    --------------------- */\n\n    AccountWithdrawalViewModel.prototype = Object.create(AccountViewModel.prototype, {\n        postWithdrawal: {\n            value: postWithdrawal\n        }\n    });\n    Object.defineProperty(AccountWithdrawalViewModel, 'constructor', {\n        enumerable: false,\n        value: AccountWithdrawalViewModel\n    });\n\n    return AccountWithdrawalViewModel;\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/ViewModels/AccountWithdrawalViewModel.js\n// module id = 125\n// module chunks = 5","define(['knockout', 'underscore', '../Services/Device/DeviceIdentificationService', './Location/LbsViewModel'], function (ko, _, deviceIdService, lbs) {\n    var deviceDownloadLines = ko.observableArray([]);\n    var deviceDownloadLinks = ko.observableArray([]);\n\n    return {\n        initView: initView,\n        deviceDownloadLines: deviceDownloadLines,\n        deviceDownloadLinks: deviceDownloadLinks\n    }\n\n    function filterLinksForDevice(rawDeviceDownloadLinks) {\n        return _.filter(rawDeviceDownloadLinks, function(link) {\n            var isInAndroidBrowser = deviceIdService.isInAndroidBrowser();\n            var isInIosBrowser = deviceIdService.isInIosBrowser();\n            var isInMobileBrowser = deviceIdService.isInMobileBrowser();\n            if (!isInMobileBrowser) return true;\n            if (isInAndroidBrowser && link.name == 'Android') {\n                return true;\n            }\n            if (isInIosBrowser && link.name == 'iPhone') {\n                return true;\n            }\n            return false;\n        });\n    }\n\n    function initView(rawDeviceDownloadLinks) {\n        lbs.initView();\n        deviceDownloadLines([\n            \"Download the free app to get access to:\", \n            \"Every race and sporting events covered by the TAB\",\n            \"Fixed and tote odds side by side for most races\",\n            \"Watch Sky racing live\",\n            \"Listen to TABradio\" ,\n            \"Mystery Bets and Jackpots\" ,\n            \"Track your favourites with Blackbook+ and never miss a runner again.\",\n        ]);\n        deviceDownloadLinks(filterLinksForDevice(rawDeviceDownloadLinks));\n    }\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/ViewModels/AppDownloadViewModel.js\n// module id = 126\n// module chunks = 5","define([\"jquery\"], function (jQuery) {\n    return {\n        init: function() {\n            var $raceButtonUrl = jQuery('#racesReturnUrl');\n            if ($raceButtonUrl.length > 0) {\n                jQuery('#racesReturnButton').attr('href', $raceButtonUrl.val());\n            }\n        }\n    };\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/ViewModels/Fob/fob-singlebetreceipt.js\n// module id = 127\n// module chunks = 5","define([\"jquery\", \"../../Services/MessageBusService\"], function (jQuery, messageBusService) {\n    var fob = FOB,\n        offers = OFFERS,\n        tote = TOTE;\n\n    return {\n        init: function() {\n                \n            offers.initOffersHelp();\n\n            fob.initButton(jQuery('.place-bet'), function (data) {\n                fob.noback(data);\n                    \n                messageBusService.publish('bet.single.receipt', {\n                    betType: 'fobsports',\n                    ticket: jQuery('ul').find(':contains(\"Ticket\")').find('span.data').html(),\n                    fobWinValue: jQuery('ul').find(':contains(\"Win Bet Amount\")').find('span.data').html(),\n                    fobPlaceValue: jQuery('ul').find(':contains(\"Place Bet Amount\")').find('span.data').html()\n                });\n            });\n\n            fob.initPost(jQuery('.place-foo-bet'), jQuery('form#betting-form'), function (data) {\n                tote.changeToteStarterState(tote.states.receipt, data);\n                    \n                var specialOffer = jQuery('[data-key=\"special-offer-title\"]').html();\n\n                messageBusService.publish('bet.single.receipt', {\n                    betType: 'fobracing',\n                    ticket: jQuery('ul').find(':contains(\"Ticket\")').find('span.data').html(),\n                    fobWinValue: jQuery('ul').find(':contains(\"Win Bet Amount\")').find('span.data').html(),\n                    fobPlaceValue: jQuery('ul').find(':contains(\"Place Bet Amount\")').find('span.data').html(),\n                    specialOffer: jQuery.trim(specialOffer)\n                });\n            });\n        }\n    };\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/ViewModels/Fob/foo-propose.js\n// module id = 128\n// module chunks = 5","define(\n    [\n        'knockout',\n        '../TabTouch',\n        '../Services/FeatureService',\n        '../Services/MessageBusService',\n        '../Services/AccountMonitoringService',\n        '../Services/Device/DeviceIdentificationService',\n        '../Analytics/AnalyticsService',\n        '../JockeyJS/JockeyJSMessageService',\n        '../Services/Location/CheckInService'\n    ],\n    function(ko, tabtouch, featureService, msgBusService, accountMonitoringService, deviceIdentificationService, analyticsService, jockeyJsMessageService, checkInService) {\n        var tabAndTrackButtonText = ko.observable(\"FIND A TAB\");\n        var tabAndTrackUrl = ko.observable(\"/#tablocator/\");\n\n        return {\n            initView: initHome,\n            tabAndTrackButtonText: tabAndTrackButtonText,\n            tabAndTrackUrl: tabAndTrackUrl\n        };\n\n        function initHome() {\n            tabtouch.initHome();\n            checkFeatures();\n        }\n\n        function tabAndTrack() {\n            tabAndTrackButtonText('Check In');\n            var locationId = checkInService.checkedInLocationId();\n            if (locationId !== undefined && locationId !== null && locationId !== '') {\n                tabAndTrackUrl('/#lbs/attheraces?code=GPS' + '&id=' + locationId);\n            } else {\n                tabAndTrackUrl('/#lbs/checkin');\n            }\n        }\n\n        function findATab() {\n            tabAndTrackButtonText('FIND A TAB');\n            tabAndTrackUrl('/#tablocator/');\n        }\n\n        function checkFeatures() {\n            findATab();\n            featureService.isActive(\"LocationBasedServices\")\n                .then(function(active) {\n                    if (active) {\n                        featureService.isActive(\"HomeTabAndTrack\")\n                            .then(function(active) {\n                                if (active) {\n                                    tabAndTrack();\n                                }\n                            });\n                    }\n                });\n        }\n    }\n);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/ViewModels/HomeViewModel.js\n// module id = 129\n// module chunks = 5","define([\"requireExternal\", \"../Navigation/Nav\", \"../Services/ApiService\", \"../Error\"], function (requirejs, nav, apiService, errorHandler) {\n    var _delegate = {\n        handle401: function() {\n            _apiServiceError();\n        },\n        showError: function (message, ok) {\n           errorHandler.showErrorPopup(\"Communication Error\", message);\n        }\n    };\n\n    var _apiServiceError = function() {\n        _delegate.showError(\"Sorry, We were unable to retrieve your communication preferences. Please try again later.\");\n    }\n\n    var _init = function (element) {\n        nav.showLoading();\n\n        apiService.fetchJsonFromApi(\"/api/config/RwwaPreferencesHost\").then(function (hostUrl) {\n            apiService.fetchJsonFromApi(hostUrl).then(function (data) {\n                requirejs([data.components.react.version[0]], function(lib) {\n                    lib.init(hostUrl, element, _delegate);\n                    nav.hideLoading();\n                }, _apiServiceError);\n            }).catch(_apiServiceError);\n        }).catch(_apiServiceError);\n    };\n\n    return {\n        init: _init\n    }\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/ViewModels/MarketingCommsViewModel.js\n// module id = 130\n// module chunks = 5","define(['knockout', 'underscore', '../Components/MysteryBet/Model/tabs-component-viewmodel', '../Components/MysteryBet/Model/quickpickpage-component-viewmodel', '../Components/MysteryBet/Model/customisebetpage-component-viewmodel', '../Window' /* for mocking */],\n    function (ko, _, tabsComponentViewModel, quickPickPageComponentViewModel, customiseBetPageComponentViewModel, window) {\n        var TOTE = window.TOTE;\n\n        return function(viewModel, backUrl, backText) {\n\n            var self = this;\n\n            /* private vars */\n            var _backUrl;\n            var _backText;\n\n            /* private function */\n\n\n            /* class constructor */\n            (function ctor() {\n                _backUrl = backUrl;\n                _backText = backText;\n\n                TOTE.initToteMystery(_backUrl, _backText, true);\n\n                //Tabs\n                var tabNamesArray = [];\n                tabNamesArray.push(\"QUICK PICK\");\n                tabNamesArray.push(\"CUSTOMISE BET\");\n                self.TabsComponentViewModel = new tabsComponentViewModel(tabNamesArray);\n                self.TabsComponentViewModel.ActiveTab.subscribe(function (newValue) {\n                    if (newValue.Name === \"QUICK PICK\") {\n                        self.QuickPickPageComponentViewModel.UpdatePage();\n                    }\n                    if (newValue.Name === \"CUSTOMISE BET\") {\n                        self.CustomiseBetPageComponentViewModel.UpdatePage();\n                    }\n                });\n\n                self.ProductCode = ko.observable(\"\");\n                self.OptionNumber = ko.observable(0);\n                self.NumberOfBets = ko.observable(0);\n                self.Investment = ko.observable(0);\n                self.PlaceInvestment = ko.observable(0);\n                self.TotalCost = ko.observable(0);\n                self.AccountButtonDisabled = ko.observable(true);\n                self.CashButtonDisabled = ko.observable(true);\n                self.CashButtonVisible = ko.observable(false);\n                self.BetSlipButtonDisabled = ko.observable(true);\n                self.BetSlipButtonVisible = ko.observable(false);\n\n                //Quick Picks\n                self.QuickPickPageComponentViewModel = new quickPickPageComponentViewModel({\n                    ProductCode: self.ProductCode,\n                    OptionNumber: self.OptionNumber,\n                    NumberOfBets: self.NumberOfBets,\n                    Investment: self.Investment,\n                    PlaceInvestment: self.PlaceInvestment,\n                    TotalCost: self.TotalCost,\n                    AccountButtonDisabled: self.AccountButtonDisabled,\n                    CashButtonDisabled: self.CashButtonDisabled,\n                    CashButtonVisible: self.CashButtonVisible,\n                    BetSlipButtonDisabled: self.BetSlipButtonDisabled,\n                    BetSlipButtonVisible: self.BetSlipButtonVisible,\n                    DisabledMysteryProducts: viewModel.DisabledMysteryOptions\n                });\n                \n                //Bet Types\n                self.CustomiseBetPageComponentViewModel = new customiseBetPageComponentViewModel({\n                    ProductCode: self.ProductCode,\n                    OptionNumber: self.OptionNumber,\n                    NumberOfBets: self.NumberOfBets,\n                    Investment: self.Investment,\n                    PlaceInvestment: self.PlaceInvestment,\n                    TotalCost: self.TotalCost,\n                    AccountButtonDisabled: self.AccountButtonDisabled,\n                    CashButtonDisabled: self.CashButtonDisabled,\n                    CashButtonVisible: self.CashButtonVisible,\n                    BetSlipButtonDisabled: self.BetSlipButtonDisabled,\n                    BetSlipButtonVisible: self.BetSlipButtonVisible,\n                    DisplayQuaddie: viewModel.Race.IsFirstQuaddieRace,\n                    QuaddieRaceNumbers: viewModel.Race.QuaddieRaceNumbers,\n                    DisabledMysteryProducts: viewModel.DisabledMysteryOptions\n                });\n                ko.tasks.runEarly();\n                self.QuickPickPageComponentViewModel.UpdatePage();\n            })();\n\n            self.closeCalc = function () {\n                self.CustomiseBetPageComponentViewModel.HideActiveCalculator();\n            }\n        }\n    }\n);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/ViewModels/MysteryViewModel.js\n// module id = 131\n// module chunks = 5","define([\n    'jquery',\n    'knockout',\n    '../TabTouch',\n    '../Services/FeatureService',\n    '../Services/Preferences/PreferencesService',\n    '../Services/Location/LocationProvider',\n    '../Services/Location/LocationService',\n    '../Services/MessageBusService',\n    '../Services/AccountMonitoringService',\n    '../Services/Device/DeviceIdentificationService',\n    '../Services/LoggingService',\n    '../Services/Location/CheckInService',\n    '../Services/Location/LbsConfigService',\n    'Base64',\n    '../Services/Location/GpsStore',\n    '../Services/Location/LocationStore',\n    '../Services/Location/CheckInStore',\n    '../Services/Location/GeoFenceService',\n    'js-cookie'\n], function (jQuery, ko, tabtouch, featureService, preferencesService, locationProvider, locationService, msgBusService, accountMonitoringService, deviceIdentificationService, loggingService, checkInService, lbsConfigService, base64, gpsStore, locationStore, checkInStore, geofenceService, cookies) {\n    var homeUrl = '/#';\n    var defaultCoords = {\n        latitude: -31.937240, \n        longitude: 115.922925,\n        accuracy: 3\n    };\n    var gpsStatus = 0; // 0 = good 1 = gps unavailable 2 = unknown location\n    var currentVersionCookieName = 'androidapp';\n    var cashBettingEnabled = ko.observable(preferencesService.cashBettingEnabled());\n    var bettingPageRefreshEnabled = ko.observable(preferencesService.bettingPageRefreshEnabled());\n    var showBettingPageRefresh = ko.observable(false);\n    var locationServicesEnabled = ko.observable(preferencesService.locationServicesEnabled());\n    var locationServicesSwitchVisible = ko.observable(false);\n    var gpsTestFireFeature = ko.observable(false);\n    var gpsTestFireButtonVisible = ko.computed(function() { return locationServicesEnabled() && gpsTestFireFeature(); });\n    var gpsTestFireInput = ko.observable(defaultCoords.latitude + ',' + defaultCoords.longitude + ',' + defaultCoords.accuracy);\n    var gpsTestFireActive = ko.observable(false);\n    var currentLocations = ko.observable(locationService.getLocationDetails());\n    var showCookieButton = ko.observable(false);\n    var currentCoords = ko.observable('');\n    var locationProviderOnOffText = ko.observable(\"\");\n    var checkedInText = ko.observable(\"\");\n    var versionCookieName = ko.observable(currentVersionCookieName);\n    var versionNumber = ko.observable(\"1.10\");\n    var capabilities = ko.observable(\"LocationServices\");\n    var closestFence = ko.observable(\"\");\n\n    featureService.isActive('BettingPageRefreshToggle')\n        .then(function(isActive) {\n            showBettingPageRefresh(isActive);\n        });\n\n    var fauxNativeGps = {\n        isActive: gpsTestFireActive(),\n        latitude: defaultCoords.latitude,\n        longitude: defaultCoords.longitude,\n        accuracy: defaultCoords.accuracy\n    }\n\n    return {\n        initView: initView,\n        locationServicesSwitchVisible: locationServicesSwitchVisible,\n        locationServicesEnabled: locationServicesEnabled,\n        cashBettingEnabled: cashBettingEnabled,\n        bettingPageRefreshEnabled: bettingPageRefreshEnabled,\n        showBettingPageRefresh: showBettingPageRefresh,\n        gpsTestFireButtonVisible: gpsTestFireButtonVisible,\n        gpsTestFireInput: gpsTestFireInput,\n        gpsToggleTestFire: gpsToggleTestFire,\n        gpsTestFireActive: gpsTestFireActive,\n        gpsUpdateTestFire: gpsUpdateTestFire,\n        gpsStart: gpsStart,\n        gpsStop: gpsStop,\n        gpsErrorNoLocation: gpsErrorNoLocation,\n        gpsErrorUnavailable: gpsErrorUnavailable,\n        setCookie: setCookie,\n        removeCookie: removeCookie,\n        currentLocations: currentLocations,\n        toggleCashBetting: toggleCashBetting,\n        toggleBettingPageRefresh: toggleBettingPageRefresh,\n        toggleLocationServices: toggleLocationServices,\n        showCookieButton: showCookieButton,\n        currentCoords: currentCoords,\n        locationProviderOnOffText: locationProviderOnOffText,\n        showCheckOut: showCheckOut,\n        checkedInText: checkedInText,\n        versionCookieName: versionCookieName,\n        versionNumber: versionNumber,\n        capabilities: capabilities,\n        clearLocalStorage: clearLocalStorage,\n        closestFence: closestFence,\n        refresh: refreshDisplay\n    }\n\n    function initView() {\n        refreshToggles();\n        tabtouch.initCommon(homeUrl, \"Home\");\n        gpsSubscribe();\n        setupLoginRefresh();\n        checkFeatures();\n    }\n\n    function refreshDisplay() {        \n        refreshCoords();\n        refreshLocationDetailsView();\n        refreshLocationProviderDetails();\n        refreshCheckedInDetails();\n    }\n\n    function clearLocalStorage() {\n        locationStore.clear();\n        checkInStore.clear();\n        gpsStore.clear();\n        refreshDisplay();\n    }\n\n    function refreshCheckedInDetails() {\n        var checkedInLocationId = checkInService.checkedInLocationId();\n        if (checkedInLocationId !== '') {\n            checkedInText('Checked in at ' + checkedInLocationId + ' Award ' + ((checkInService.wasRedeemedToday() === true) ? 'Redeemed' : 'not yet Redeemed'));\n        } else {\n            checkedInText('Not checked in today');\n        }\n    }\n\n    function refreshLocationProviderDetails() {       \n        if (locationProvider.isActive()) {\n            locationProviderOnOffText(\"Location Provider is On\");\n        } else {\n            locationProviderOnOffText(\"Location Provider is Off\");\n        }\n    }\n\n    function showCheckOut() {\n        var checkedInLocationId = checkInService.checkedInLocationId();\n        return (checkedInLocationId !== '');\n    }\n\n    function setCookie() {\n        removeCookie();\n        cookies.set(versionCookieName(), versionNumber());\n        cookies.set('AppCapability', base64.encode(capabilities()));\n        currentVersionCookieName = versionCookieName();\n    }\n\n    function removeCookie() {\n        cookies.remove(currentVersionCookieName);\n        cookies.remove('AppCapability');\n    }\n\n    function refreshToggles() {\n        cashBettingEnabled(preferencesService.cashBettingEnabled());\n        locationServicesEnabled(preferencesService.locationServicesEnabled());\n    }\n\n    function toggleCashBetting() {\n        var currentValue = preferencesService.cashBettingEnabled();\n        currentValue = preferencesService.cashBettingEnabled(!currentValue);\n        cashBettingEnabled(currentValue);\n        msgBusService.publish('preferences.cash', currentValue);\n    }\n\n    function toggleBettingPageRefresh() {\n        var currentValue = preferencesService.bettingPageRefreshEnabled();\n        currentValue = preferencesService.bettingPageRefreshEnabled(!currentValue);\n        bettingPageRefreshEnabled(currentValue);\n        msgBusService.publish('preferences.bettingPageRefresh', currentValue);\n    }\n\n    function toggleLocationServices() {\n        setLocationPreference(!preferencesService.locationServicesEnabled());\n    }\n\n    function gpsStart() {\n        locationProvider.start();\n        refreshDisplay();\n    }\n\n    function gpsStop() {\n        locationProvider.stop();\n        refreshDisplay();\n    }\n\n    function refreshClosestFenceDisplay(position) {\n        var bufferZone = lbsConfigService.getParameters().maxOutsideDistance;\n        if (position !== null) {\n            closestFence('Closest Fence: ' + JSON.stringify(geofenceService.getClosestFence(position)) + ' Buffer Zone: ' + bufferZone);\n        } else {\n            closestFence('Closest Fence: N/A');\n        }\n    }\n\n    function gpsToggleTestFire() {\n        gpsStatus = 0;\n        if (!gpsTestFireActive()) {\n            var inputs = gpsTestFireInput().split(',');\n            fauxNativeGps.latitude = Number(inputs[0]);\n            fauxNativeGps.longitude = Number(inputs[1]);\n            fauxNativeGps.accuracy = Number(inputs[2]);\n            setupFauxNativeGpsFire();\n            refreshClosestFenceDisplay({\n                coords: {\n                    latitude: fauxNativeGps.latitude,\n                    longitude: fauxNativeGps.longitude,\n                    accuracy: fauxNativeGps.accuracy\n                }\n            });\n        }\n        fauxNativeGps.isActive = !fauxNativeGps.isActive;\n        gpsTestFireActive(fauxNativeGps.isActive);\n    }\n\n    function setupFauxNativeGpsFire() {\n        fireNativeGps();\n        setTimeout(function () {\n            if (fauxNativeGps.isActive) {\n                setupFauxNativeGpsFire();\n            }\n        }, lbsConfigService.getParameters().gpsTimeoutMs / 4);\n    }\n\n    function gpsUpdateTestFire() {\n        var inputs = gpsTestFireInput().split(',');\n        fauxNativeGps.latitude = Number(inputs[0]);\n        fauxNativeGps.longitude = Number(inputs[1]);\n        fauxNativeGps.accuracy = Number(inputs[2]);\n        gpsStatus = 0;\n        if (gpsTestFireActive()) {\n            fireNativeGps();\n        }\n        refreshClosestFenceDisplay({\n            coords: {\n                latitude: fauxNativeGps.latitude,\n                longitude: fauxNativeGps.longitude,\n                accuracy: fauxNativeGps.accuracy\n            }\n        });\n    }\n\n    function fireNativeGps() {\n        if (gpsStatus === 0) {\n            var position = {\n                coords: {\n                    latitude: fauxNativeGps.latitude,\n                    longitude: fauxNativeGps.longitude,\n                    accuracy: fauxNativeGps.accuracy\n                }\n            };\n            console.log('fireNativeGps => ' + JSON.stringify(position));\n            msgBusService.publish('NATIVEGPSCOORDINATES', position);\n            //locationProvider.testfire(position);\n        } else if (gpsStatus === 1) {\n            console.log('fireNativeGps => Unavailable');\n            msgBusService.publish('NATIVEGPSERROR', { code: '1', message: 'Gps Is Off' });\n            //locationProvider.testfail({ code: 1, message: 'Gps Is Off' });\n        } else {\n            console.log('fireNativeGps => No Location');\n            msgBusService.publish('NATIVEGPSERROR', { code: '2', message: 'No location!' });\n            //locationProvider.testfail({ code: 2, message: 'No location!' });   \n        }\n    }\n\n    function gpsErrorNoLocation() {\n        gpsStatus = 2;\n    }\n\n    function gpsErrorUnavailable() {\n        gpsStatus = 1;\n    }\n\n    function setupLoginRefresh() {\n        accountMonitoringService\n            .onLogin(checkFeatures)\n            .onLogout(checkFeatures)\n            .start();\n    }\n\n    function refreshCoords() {\n        var data = gpsStore.get();\n        if (data !== null && data !== undefined) {\n            var timeStamp = new Date(data.timeStamp);\n            if (data.position) {\n                refreshClosestFenceDisplay(data.position);\n                currentCoords('Stored GPS Location @ [' + timeStamp.toLocaleDateString() + ' ' + timeStamp.toLocaleTimeString() + '] => ' + data.position.coords.latitude + ',' + data.position.coords.longitude + ',' + data.position.coords.accuracy);\n            } else if (data.error) {\n                refreshClosestFenceDisplay(null);\n                currentCoords('Stored GPS Error @ [' + timeStamp.toLocaleDateString() + ' ' + timeStamp.toLocaleTimeString() + '] => code=' + data.error.code + ', msg=' + data.error.message);\n            } else {\n                refreshClosestFenceDisplay(null);\n                currentCoords('No Store Gps Location');\n            }\n        } else {\n            refreshClosestFenceDisplay(null);\n            currentCoords('No Store Gps Location');\n        }\n    }\n\n    function gpsError(data) {\n        var msg = 'settings : GPSERROR - code=[' + data.code + '] message=[' + data.message + ']';\n        loggingService.logDebug(msg);\n        refreshDisplay();\n    }\n\n    function gpsSuccess(data) {\n        var msg = 'settings : GPSSUCCESS - data=[' + data.position.coords.latitude + ',' + data.position.coords.longitude + ',' + data.position.coords.accuracy + ']';\n        loggingService.logDebug(msg);\n        refreshDisplay();\n    }\n\n    function gpsUnsubscribe() {\n        var msg = 'settings : gpsUnsubscribe';\n        loggingService.logDebug(msg);\n        msgBusService.unsubscribe('GPSERROR', gpsError);\n        msgBusService.unsubscribe('GPSSUCCESS', gpsSuccess);\n        msgBusService.unsubscribe('nav.nav', gpsUnsubscribe);\n    }\n\n    function gpsSubscribe() {\n        var msg = 'settings : gpsSubscribe';\n        loggingService.logDebug(msg);\n        msgBusService.subscribe('GPSERROR', gpsError);\n        msgBusService.subscribe('GPSSUCCESS', gpsSuccess);\n        msgBusService.subscribe('nav.nav', gpsUnsubscribe);\n    }\n\n    function setLocationPreference(value) {\n        preferencesService.locationServicesEnabled(value);\n        locationServicesEnabled(value);\n        if (value) {\n            gpsSubscribe();\n            locationProvider.start();\n        } else {\n            locationProvider.stop();\n            locationService.clearAll();\n            refreshLocationDetailsView();\n            gpsUnsubscribe();\n        }\n    }\n\n    function refreshLocationDetailsView() {\n        var locationDetails = locationService.getLocationDetails();\n        currentLocations(locationDetails);\n    }\n\n    function lbsInMobileApp() {\n        featureService.isActive(\"LocationBasedServices\")\n            .then(function(active) {\n                locationServicesSwitchVisible(active);\n                refreshDisplay();\n                if (!active) {\n                    setLocationPreference(false);\n                }\n            });\n        featureService.isActive(\"GPSTestFire\")\n            .then(function(active) {\n                gpsTestFireFeature(active);\n                showCookieButton(active);\n            });\n    }\n\n    function lbsInBrowserApp(reason) {\n        featureService.isActive(\"GPSTestFire\")\n            .then(function(active) {\n                showCookieButton(active);\n            });\n        locationServicesSwitchVisible(false);\n        setLocationPreference(false);\n    }\n\n    function checkFeatures() {\n        deviceIdentificationService.isInMobileApp([{Value:'LocationServices',ErrorResponse:'Version'}],lbsInMobileApp , lbsInBrowserApp);\n    }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/ViewModels/SettingsViewModel.js\n// module id = 132\n// module chunks = 5","define(['knockout', 'moment'], function (ko, moment) {\n\n    var self;\n\n    var tote = window.TOTE,\n        toteSel = window.TOTESEL;\n\n    /* private function */\n    var supportsSNotation = function (toteBetType) {\n        switch (toteBetType) {\n            case 'Trifecta':\n            case 'Exacta':\n            case 'First4':\n                return true;\n        }\n\n        return false;\n    };\n\n    var isMultiRaceBet = function (toteBetType) {\n        switch (toteBetType) {\n            case 'Double':\n            case 'Quaddie':\n            case 'AllUp':\n                return true;\n        }\n\n        return false;\n    };\n\n    var executeTabInitialisationFunction = function (model) {\n        var raceArray = [];\n        model.BetViewModel.Tabs.forEach(function (tab) {\n            raceArray.push(tab.RaceNo);\n        });\n\n        toteSel.initTabArray(\n            model.BetViewModel.Tabs.length,\n            raceArray,\n            true, // All Bet types now support Field\n            supportsSNotation(model.BetViewModel.BetTypeString),\n            isMultiRaceBet(model.BetViewModel.BetTypeString),\n            (model.BetViewModel.BetTypeString === 'Quinella'),\n            (model.BetViewModel.BetTypeString === 'AllUp'),\n            model.BetViewModel.HasPreselections\n        );\n        return;\n    };\n\n    /* class constructor */\n    function StartersPageViewModel(model, backUrl, backText) {\n        self = this;\n        if (model.BetViewModel.IsRefresh) {\n            tote.refreshToteStarterList(backUrl, backText, model.BetViewModel.BetTypeString === \"Quinella\");\n        } else {\n            tote.initToteStarterList(backUrl, backText, model.BetViewModel.BetTypeString === \"Quinella\");\n            executeTabInitialisationFunction(model);\n            if (model.BetViewModel.HasPreselections) {\n                tote.preselect(tote.states.calc);\n            }\n        }\n    }\n\n    StartersPageViewModel.prototype = Object.create(Object.prototype, {\n    });\n\n    Object.defineProperty(StartersPageViewModel, 'constructor', {\n        enumerable: false,\n        value: StartersPageViewModel\n    });\n\n    return StartersPageViewModel;\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/ViewModels/StartersPageViewModel.js\n// module id = 133\n// module chunks = 5","/**\n * Handles the \"Tab Locator\" page. Uses the Google Maps API (assumes GOG in window). API calls has callback initLocator().\n */\ndefine([\"jquery\", \"../TabTouch\", \"../Common\"], function(jQuery, tabtouch, common) {\n    var getPositionTimeOut;\n    var geoCodeWatchId;\n    var loadingOverlay;\n    var currentLocationRequestInProgress;\n    var canUpdateLocation = true;\n    var newPosition;\n    var monitorLocationTimeout;\n    var mapDefaultHeight = 600;\n    var followingGPS = false;\n    var hasGoogleMapsBeenFetched = false;\n\n\n    function initPage(url, backText, displayTitle) {\n        if (displayTitle === \"True\") {\n            jQuery('#header-container').hide();\n        }\n\n        tabtouch.initCommon(url, backText);\n\n        if (hasGoogleMapsBeenFetched) {\n            initLocator();\n        } else {\n            jQuery.ajax(\"https://maps.google.com/maps/api/js?sensor=false&callback=LOC.initLocator\", { method: \"GET\", cache: true, dataType: 'script' });\n            hasGoogleMapsBeenFetched = true;\n        }\n    }\n\n    function initLocator() {\n\n\n        loadingOverlay = jQuery('#loading-overlay');\n\n        jQuery('#directions, #viewDirectionButton, #newLocation').hide();\n\n        addHandlers();\n\n        if (navigator.geolocation) {\n            navigator.geolocation.getCurrentPosition(function (geoLocation) {\n                GOG.setUsersGeoLocation(geoLocation);\n                if (canUpdateLocation) {\n                    GOG.updateFromCurrentLocation(geoLocation);\n                    followingGPS = true;\n                    geoCodeWatchId = navigator.geolocation.watchPosition(handlePositionChange);\n                    monitorCurrentLocation();\n                }\n            });\n\n            setTimeout(function () {\n                canUpdateLocation = false;\n            }, 10000);\n\n            loadingOverlay.hide();\n        }\n\n        setMapHeight();\n        GOG.initialise();\n        GOG.viewMap(true);\n        \n        jQuery('#tabtouch-notification, #tablocator-intro-notification').css({ 'height': jQuery(document).height() });\n    }\n\n    function setMapHeight() {\n        var maxAllowedHeight = jQuery(window).height() - jQuery('#tabTypeSelectionContainer').height() - jQuery('#viewList').height() - 50;\n        jQuery(\"#map_canvas\").height(Math.min(mapDefaultHeight, maxAllowedHeight));\n\n        GOG.resizeGoogleMap();\n    }\n\n    function addHandlers() {\n        jQuery('#SL1Item').click(function () { monitorChangeLocationRequest(function () { GOG.boxclick('SL1'); }); });\n        jQuery('#SL2Item').click(function () { monitorChangeLocationRequest(function () { GOG.boxclick('SL2'); }); });\n        jQuery('#SL3Item').click(function () { monitorChangeLocationRequest(function () { GOG.boxclick('SL3'); }); });\n\n        var addressTextBox = jQuery('#address');\n\n        jQuery('#currentLocation').click(function () {\n            addressTextBox.val('');\n            addressTextBox.blur();\n            if (!currentLocationRequestInProgress) {\n                currentLocationRequestInProgress = true;\n                monitorChangeLocationRequest(changeLocationToCurrentLocation);\n            }\n        });\n\n        jQuery('#viewList').click(viewList);\n        jQuery('#viewMapButton').click(viewMap);\n        jQuery('#viewDirectionButton').click(viewDirections);\n\n\n        var goButton = jQuery('#go_button');\n        goButton.click(function () {\n            addressTextBox.blur();\n\n            monitorChangeLocationRequest(function () {\n                if (!addressTextBox.hasClass('watermark-textbox')) {\n                    clearLocationWatch();\n                    followingGPS = false;\n                    var query = addressTextBox.val();\n                    GOG.geocode(query);\n                }\n            });\n        }\n        );\n\n        addressTextBox.keydown(function (e) {\n            if (e.keyCode == 13) {\n                e.preventDefault();\n                goButton.click();\n            }\n        });\n\n        jQuery(window).resize(handleResize);\n\n        jQuery('#directions').on(\"click\", \"tr\", function () {\n            GOG.viewMap();\n            GOG.closeInfoWindow();\n        });\n    }\n\n    function handleResize() {\n        if (jQuery('#map_canvas').length == 0) {\n            jQuery(window).unbind('resize', handleResize);\n            return;\n        }\n\n        setMapHeight();\n        jQuery('#tabtouch-notification, #tablocator-intro-notification').css({ 'height': jQuery(document).height() });\n        loadingOverlay.css({ 'height': jQuery(document).height() });\n    }\n\n    function changeLocationToCurrentLocation() {\n        loadingOverlay.show();\n        clearLocationWatch();\n        if (navigator.geolocation) {\n            navigator.geolocation.getCurrentPosition(handleSuccessfulLocationFind);\n            clearTimeout(getPositionTimeOut);\n            getPositionTimeOut = setTimeout(handleGetCurrentPositionError, 10000);\n        }\n        loadingOverlay.hide();\n    }\n\n    function clearLocationWatch() {\n        navigator.geolocation.clearWatch(geoCodeWatchId);\n        clearTimeout(monitorCurrentLocation);\n    }\n\n    function handleSuccessfulLocationFind(pos) {\n        currentLocationRequestInProgress = false;\n        clearTimeout(getPositionTimeOut);\n        GOG.updateFromCurrentLocation(pos);\n        followingGPS = true;\n        geoCodeWatchId = navigator.geolocation.watchPosition(handlePositionChange);\n        monitorCurrentLocation();\n    }\n\n    function handlePositionChange(position) {\n        newPosition = position;\n    }\n\n    function monitorCurrentLocation() {\n        var currentPosition = GOG.getCurrentLocation();\n\n        if (newPosition &&\n            (newPosition.coords.latitude !== currentPosition.latitude ||\n            newPosition.coords.longitude !== currentPosition.longitude) &&\n            !currentLocationRequestInProgress && followingGPS) {\n            var distanceTravelledLessThen100 = GOG.getDistanceBetweenGeoLocations(newPosition.coords.latitude, newPosition.coords.longitude, currentPosition.latitude, currentPosition.longitude) < 100;\n            GOG.updateFromCurrentLocation(newPosition, true, distanceTravelledLessThen100);\n        }\n\n        if (jQuery('#map_canvas').length > 0) {\n            monitorLocationTimeout = setTimeout(monitorCurrentLocation, 5000);\n        } else {\n            navigator.geolocation.clearWatch(geoCodeWatchId);\n        }\n    }\n\n    function monitorChangeLocationRequest(callback) {\n        if (GOG.canUpdateLocation()) {\n            callback();\n            loadingOverlay.hide();\n        } else {\n            loadingOverlay.show();\n            setTimeout(function () { monitorChangeLocationRequest(callback); }, 2000);\n        }\n    }\n\n    function handleGetCurrentPositionError() {\n        currentLocationRequestInProgress = false;\n        clearTimeout(getPositionTimeOut);\n        common.showPopup(jQuery('#tabtouch-notification'));\n    }\n\n    function viewList() {\n        jQuery('#map_container, #directions, #viewDirectionButton').hide();\n        jQuery('#location_list, #viewMapButton, #tabTypeSelectionContainer').show();\n    }\n\n    function viewDirections() {\n        jQuery('#map_container, #viewDirectionButton, #location_list, #tabTypeSelectionContainer').hide();\n        jQuery('#directions, #viewMapButton').show();\n    }\n\n    function viewMap() {\n        GOG.viewMap();\n    }\n\n    return {\n        initLocator: initLocator,\n        monitorChangeLocationRequest: monitorChangeLocationRequest,\n        initPage: initPage\n    };\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/ViewModels/TabLocatorViewModel.js\n// module id = 134\n// module chunks = 5","define([\"jquery\", \"../../Navigation/Nav\", \"../../TabTouch\", \"./ToteSports\"], function (jQuery, nav, tabtouch, tip) {\n    return {\n        init: initToteSportsCurrent\n    };\n\n    function initToteSportsCurrent(url, backText) {\n        tabtouch.initCommon(url, backText);\n\n        tip.initHomeButton();\n\n        jQuery('.totesports-pool').click(function () {\n            return tip.navigateToHref(jQuery(this));\n        });\n\n        jQuery('.refresh-button').click(function () {\n            return refreshPools();\n        });\n    }\n\n    function refreshPools() {\n        return nav.refresh();\n    }\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/ViewModels/ToteSports/ToteSportsCurrent.js\n// module id = 135\n// module chunks = 5","define([\"jquery\", \"../../Navigation/Nav\", \"./ToteSports\"], function (jQuery, nav, tip) {\n    return {\n        init: initToteSportsError\n    };\n\n    function initToteSportsError(backUrl, backText) {\n        jQuery('#btnBetErrorBackToPools').click(function() {\n            return tip.navigateErrorToHref(jQuery(this));\n        });\n\n        jQuery('#btnBetErrorBackToGames').click(function () {\n            return tip.navigateErrorToHref(jQuery(this));\n        });\n\n        jQuery('#btnBetErrorBackToCalc').click(function () {\n            return handleBetError(tip.states.calc);\n        });\n\n        jQuery('#btnBetErrorDone').click(function () {\n            return handleBetError(tip.states.none);\n        });\n    }\n\n    //Returns the bet to a new state after an error has occurred\n    //only supported states are none and calculator (which don't require data).\n    function handleBetError(newState) {\n        nav.hideErrorPopup();\n        return tip.changeTippingState(newState);\n    }\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/ViewModels/ToteSports/ToteSportsError.js\n// module id = 136\n// module chunks = 5","define([\"jquery\", \"../../Navigation/Nav\", \"../../TabTouch\", \"../../Common\", \"./ToteSports\"], function(jquery, nav, tabtouch, common, tip) {\n    var checked = \"checked\";\n    var teams = { A: \"Away\", D: \"Draw\", H: \"Home\" };\n    var gameArray = []; //Array holding the checkbox name for each game.\n\n    return {\n        init: initToteSportsGames\n    };\n\n    function initToteSportsGames(url, backText) {\n        tabtouch.initCommon(url, backText);\n        common.initSlideToggleHandlers();\n\n        CALC.initCommonCalculator(false);\n        CALC.initCalculator('calculator');\n\n        tip.initHomeButton();\n\n        jQuery('.refresh-button').click(function () {\n            refreshGames();\n            return false;\n        });\n\n        //create the game array -- grab all the home checkbox names.\n        gameArray = [];\n        jQuery('#tip-list input[type=\"checkbox\"][value=\"H\"]').each(function () {\n            gameArray.push(jQuery(this).attr('name'));\n        });\n\n        jQuery('button.cancel').click(function () {\n            jQuery('#tip-list input[type=\"checkbox\"]').removeAttr(checked);\n            updateUIState();\n        });\n\n        jQuery('button.place-bet-player').click(function () {\n            saveSelections();\n            tip.changeTippingState(tip.states.calc);\n        });\n\n        jQuery('#tip-list input[type=\"checkbox\"]').change(function () {\n            updateUIState();\n        });\n\n        tip.initInfoScroll();\n        initProcessButtons();\n        updateUIState();\n    }\n\n\n    function refreshGames() {\n        saveSelections();\n        saveInvestment();\n        var action = jQuery('.refresh-button').attr('href');\n        nav.ajaxPost(action,\n                     jQuery('form#betting-form').serialize(),\n                     processRefreshResponse);\n    }\n\n    function initProcessButtons() {\n        jQuery(\"a#betcost\").click(function () {\n            if (jQuery(this).is('.disabled') === false) {\n\n                saveInvestment();\n                nav.ajaxPost(jQuery(this).attr('href'),\n                   jQuery('form#betting-form').serialize(),\n                   processBetCostResponse,\n                   {\n                       control: jQuery(this)\n                   }\n                );\n            }\n            return false;\n\n        });\n\n        jQuery(\"a#bettingFormNext\").click(function () {\n            if (jQuery(this).is('.disabled') === false) {\n\n                saveInvestment();\n                nav.ajaxPost(jQuery(this).attr('href'),\n                    jQuery('form#betting-form').serialize(),\n                    processProposeBetResponse);\n            }\n            return false;\n        });\n    }\n\n    function saveSelections() {\n        jQuery('#SelectionsString').val(extractSelectionArray(true).join('/'));\n    }\n\n    function saveInvestment() {\n        jQuery('#Investment').val(jQuery('input.bet-value').val());\n    }\n\n    // Converts the current selections into an array for easy processing\n    function extractSelectionArray(updateSelSummary) {\n        var selections = [];\n        var display;\n        var gameRow;\n\n        if (updateSelSummary) {\n            jQuery('ul#sel-summary').html('');\n        }\n\n        for (var i = 0; i < gameArray.length; i++) {\n            selections[i] = '';\n            display = '';\n            gameRow = jQuery('#tip-list li').eq(i);\n            jQuery('#tip-list input[name=\"' + gameArray[i] + '\"]:checked').each(function () {\n                selections[i] += jQuery(this).val();\n                if (updateSelSummary) {\n                    display += ((display.length > 0) ? ', ' : '') + teams[jQuery(this).val()];\n                }\n            });\n\n            if (updateSelSummary) {\n                jQuery('ul#sel-summary').append('<li>Game ' + gameArray[i].substring(1) + ' - ' + gameRow.find('label.home').text() + ' v ' + gameRow.find('label.away').text() + '<br />' + display + '</span></li>');\n            }\n        }\n\n        common.initDisplayListStyle(jQuery('ul#sel-summary'));\n\n        return selections;\n    }\n\n    function processBetCostResponse(data) {\n        common.showPopup(jQuery('#how-much').html(data));\n\n        jQuery('#how-much').click(function () {\n            jQuery(this).fadeOut('fast', function () {\n                common.setDisableState(jQuery(\"a#betcost\"), true);\n            });\n        });\n    }\n\n    function processProposeBetResponse(data) {\n        tip.changeTippingState(tip.states.confirm, data);\n    }\n\n    function processRefreshResponse(data) {\n        jQuery('#main-container').html(data);\n\n        //test for existence of input#SelectionsString -- it won't be there if the pool has closed.\n        if (jQuery(\"input#SelectionsString\").length) {\n            saveSelections();\n        }\n    }\n\n    // Enables/Disables buttons based on the current selections\n    function updateUIState() {\n        var selections = extractSelectionArray(false);\n        var noSelections = true;\n        var allSelected = true;\n\n        for (var i = 0; i < selections.length; i++) {\n            if (selections[i] !== '') {\n                noSelections = false;\n            }\n\n            if (selections[i] === '') {\n                allSelected = false;\n            }\n        }\n\n        common.setDisableState(jQuery('button.cancel'), !noSelections);\n        common.setDisableState(jQuery('button.place-bet-player'), allSelected);\n    }\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/ViewModels/ToteSports/ToteSportsGames.js\n// module id = 137\n// module chunks = 5","define([\"jquery\", \"../../Navigation/Nav\", \"../../Common\", \"../../TabTouch\", \"./ToteSports\"], function (jQuery, nav, common, tabtouch, tip) {\n    return {\n        init: initToteSportsGamesResults\n    };\n\n    function initToteSportsGamesResults(url, backText) {\n        tabtouch.init(url, backText);\n        common.initSlideToggleHandlers();\n        tip.initInfoScroll();\n\n        tip.initHomeButton();\n\n        jQuery('.refresh-button').click(function() {\n            return refreshResults();\n        });\n    }\n\n    function refreshResults() {\n        return nav.refresh();\n    }\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/ViewModels/ToteSports/ToteSportsGamesResults.js\n// module id = 138\n// module chunks = 5","define([\"jquery\", \"../../Navigation/Nav\", \"./ToteSports\", \"../../LocationDetailsAppender\"], function(jQuery, nav, tip, lda) {\n    return {\n        init: initToteSportsPropose\n    };\n   \n    function initToteSportsPropose(backUrl, backText) {\n        var locationDetailsAppender = new lda();\n\n        jQuery('#btnCancel').click(function () {\n            return tip.navigateToHref(jQuery(this));\n        });\n\n        jQuery(\"a#placeBetNow\").click(function () {\n            nav.ajaxPost(jQuery(this).attr('href'),\n                locationDetailsAppender.addToUrlEncodedData(jQuery('form#betting-form').serialize()),\n                processBetPlacedResponse,\n                {\n                    control: jQuery(this)\n                }\n            );\n\n            return false;\n        });\n    }\n\n    function processBetPlacedResponse(data) {\n        tip.changeTippingState(tip.states.receipt, data);\n    }\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/ViewModels/ToteSports/ToteSportsPropose.js\n// module id = 139\n// module chunks = 5","define(['jquery', '../../Navigation/Nav', '../../TabTouch', './ToteSports'], function (jQuery, nav, tabtouch, tip) {\n    return {\n        init: initToteSportsResults\n    };\n\n    function initToteSportsResults(url, backText) {\n        tabtouch.initCommon(url, backText);\n\n        tip.initHomeButton();\n\n        jQuery('.totesports-pool').click(function () {\n            return tip.navigateToHref(jQuery(this));\n        });\n\n        jQuery('.refresh-button').click(function () {\n            return refreshPools();\n        });\n\n        jQuery('#prev-day').click(function () {\n            return tip.navigateToHref(jQuery(this));\n        });\n\n        jQuery('#next-day').click(function () {\n            return tip.navigateToHref(jQuery(this));\n        });\n    }\n\n    function refreshPools() {\n        return nav.refresh();\n    }\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/ViewModels/ToteSports/ToteSportsResults.js\n// module id = 140\n// module chunks = 5","/**\n * Used in JNSpec tests.\n */\ndefine([], function() {\n    return window;\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/Window.js\n// module id = 141\n// module chunks = 5","/*** IMPORTS FROM imports-loader ***/\nvar jQuery = require(\"jquery\");\nvar _ = require(\"underscore\");\nvar legacyReturn = {};\nvar amplify = require(\"amplify\");\nvar cryptojsm5d = require(\"crypto-js/md5\");\nvar cryptojs = { MD5: cryptojsm5d };\nvar numeral = require(\"numeral\");\nvar swipe = require(\"swipe\");\nvar MSG = require(\"../Foundation/Services/MessageBusService\");\nvar LocationDetailsAppender = require(\"../Foundation/LocationDetailsAppender\");\nvar locking = require(\"../Foundation/Lock\");\nvar NAV = require(\"../Foundation/Navigation/Nav\");\nvar CMN = require(\"../Foundation/Common\");\nvar TT = require(\"../Foundation/TabTouch\");\nvar ErrorController = require(\"../Foundation/Error\");\nvar PreferencesService = require(\"../Foundation/Services/Preferences/PreferencesService\");\nvar TupleSpace = require(\"../Foundation/TupleSpace\");\nvar raceReplay = require(\"../Betting-v1/RaceReplay\");\nvar blackbookAddViewBinding = require(\"../Foundation/Components/Blackbook/myblackbook-add-viewbinding\");\nvar blackbookAddViewController = require(\"../Foundation/Components/Blackbook/myblackbook-add-viewcontroller\");\nvar NOTE = require(\"../Foundation/Notification\");\nvar jQueryToDictionary = require(\"jquery-todictionary\");\n\nwindow.BetSlipService = (function(betSlipStore, configurationService, locationDetailsAppender) {\n    var _betSlipStore = betSlipStore || new window.BetSlipStore();\n    var _configurationService = configurationService || new ConfigurationService();\n    var _locationDetailsAppender = locationDetailsAppender || new LocationDetailsAppender();\n\n    var maxBetsPerBetSlip = _configurationService.MaxBetsPerBetSlip;\n    var _lock = new locking.lock();\n    var _reloadUrl = '';\n    var _reloadReceipt = false;\n\n    function getBetSlip() {\n        return _betSlipStore.get().Bets;\n    }\n\n    function getBetSlipCount() {\n        return getBetSlip().length;\n    }\n\n    function isMaxBets(numberOfBetsToAdd) {\n        var isMax = false;\n\n        if (getBetSlipCount() + parseInt(numberOfBetsToAdd) > maxBetsPerBetSlip) {\n            ErrorController.showErrorPopup(\"A maximum of \" + maxBetsPerBetSlip + \" bets are allowed in the bet slip.\", null);\n            isMax = true;\n        }\n        return isMax;\n    }\n\n    function onAddToBetSlipButtonClick (jsonModel) {\n        var data = jQuery.param(jsonModel, true);\n        addBetToBetSlip(\"/api/BetSlip/PostToteRacingBetToBetSlip\", data, \"/#betbuilder/betslip\");\n    }\n\n    function addBetToBetSlip(url, data, betSlipUrl) {\n        NAV.showLoading();\n        var isMax = isMaxBets(1);\n        if (isMax === false) {\n            if (_lock.trylock()) {\n                var request = jQuery.post(url, data);\n\n                request.done(function (bets) {\n                    if (_.isArray(bets)) {\n                        //at moment, we only have list of bets for mystery,\n                        //so, we will ignore the checks for all mystery bets\n                        _.each(bets, function (bet) {\n                            if ((bets.IsMystery !== undefined && bet.IsMystery === true) || !doesBetExistInBetSlip(bet)) {\n                                addBetToBetSlipStore(bet);\n                                NAV.navChange(betSlipUrl);\n                            } else {\n                                ErrorController.showErrorPopup(\"Same bet exists in bet slip\", null);\n                            }\n                        });\n                    } else {\n                        if ((bets.IsMystery !== undefined && bets.IsMystery === true) || !doesBetExistInBetSlip(bets)) {\n                            addBetToBetSlipStore(bets);\n                            NAV.navChange(betSlipUrl);\n                        } else {\n                            ErrorController.showErrorPopup(\"Same bet exists in bet slip\", null);\n                        }\n                    }\n                });\n\n                request.fail(function (http) {\n                    if (http.status === 400) {\n                        var caughtException = jQuery.parseJSON(http.responseText);\n                        ErrorController.showErrorPopup(caughtException.Message, caughtException.ExceptionMessage);\n                    } else {\n                        NAV.ajaxError(http.status, http, false);\n                    }\n                });\n\n                request.always(function () {\n                    _lock.unlock();\n                });\n            }\n        }\n    }\n\n    function addBatchBetsToBetSlip(numberOfBetsToAdd, url, data, betSlipUrl) {\n        NAV.showLoading();\n        var isMax = isMaxBets(numberOfBetsToAdd);\n        if (isMax === false) {\n            if (_lock.trylock()) {\n                var request = jQuery.post(url, data);\n\n                request.done(function (bets) {\n                    _.each(bets, function (bet) {\n                        addBetToBetSlipStore(bet);\n                    });\n                    NAV.navChange(betSlipUrl);\n                });\n\n                request.fail(function (http) {\n                    if (http.status === 400) {\n                        var caughtException = jQuery.parseJSON(http.responseText);\n                        ErrorController.showErrorPopup(caughtException.Message, caughtException.ExceptionMessage);\n                    } else {\n                        NAV.ajaxError(http.status, http, false);\n                    }\n                });\n\n                request.always(function () {\n                    _lock.unlock();\n                });\n            }\n        }\n    }\n\n    function addBetSlipClickHandler($button, getData, isMystery, beforeRequest) {\n        $button.click(function (e) {\n            if ($(this).is('.disabled') === false) {\n                if (beforeRequest && !beforeRequest()) {\n                    return false;\n                } else {\n                    e.preventDefault();\n                    addBetToBetSlip($(this).attr('href'), getData(), $(this).attr('data-betslipurl'), isMystery);\n                }\n            }\n            return false;\n        });\n    }\n\n    function placeInStore(url, betWalletUrl, betWalletService) {\n        if (_lock.trylock()) {\n            var payLoad = {};\n            payLoad.Bets = getBetSlip();\n            payLoad.VisitorTrackingId = betWalletService.getVisitorTrackingId();\n            var requestPayLoad = JSON.stringify(payLoad);\n            var request = jQuery.ajax(url, {\n                data: requestPayLoad,\n                contentType: 'application/json; charset=utf-8',\n                type: 'POST'\n            });\n\n            request.done(function (betslipseq) {\n                if (!isNaN(betslipseq)) {\n                    betWalletService.addBetSlip(betslipseq);\n                    _betSlipStore.tag('wallet_' + betslipseq);\n                    _betSlipStore.clear();\n                    NAV.navChange(betWalletUrl);\n                    MSG.publish('bet.cash.receipt', { ticket: betslipseq });\n                }\n            });\n\n            request.fail(function (http) {\n                if (http.status === 400) {\n                    var caughtException = jQuery.parseJSON(http.responseText);\n                    ErrorController.showErrorPopup(caughtException.Message, caughtException.ExceptionMessage);\n                } else {\n                    NAV.ajaxError(http.status, http, false);\n                }\n            });\n\n            request.always(function () {\n                _lock.unlock();\n            });\n        }\n    }\n\n    function canUndoPlaceInStore(restoreTag) {\n        return restoreTag\n            && (_.indexOf(_betSlipStore.history(), restoreTag) >= 0)\n            && (getBetSlipCount() == 0);\n    }\n\n    function undoPlaceInStore(restoreTag) {\n        return _betSlipStore.restore(restoreTag);\n    }\n\n    function reloadBetSlips() {\n        loadBetSlips(_reloadUrl, _reloadReceipt);\n    }\n\n    function loadBetSlips(url, receipt) {\n        var requestData;\n        _reloadUrl = url;\n        _reloadReceipt = receipt;\n        if (receipt) {\n            requestData = JSON.stringify({ betReceipts: receipt });\n        } else {\n            requestData = JSON.stringify({ bets: getBetSlip() });\n        }\n        NAV.ajaxPost(url,\n            requestData,\n            function (data) {\n                $('#content').html(data);\n            },\n            {\n                contentType: 'application/json; charset=utf-8'\n            },\n            true);\n    }\n\n    function addBetToBetSlipStore(bet) {\n        var betSlip = _betSlipStore.get();\n        betSlip.Bets.unshift(bet);\n        _betSlipStore.set(betSlip);\n        MSG.publish('bet.betslip.add', betSlip);\n    };\n\n    ///Please check on server side, how to generate same hashcode for the object with same value\n    function doesBetExistInBetSlip(bet) {\n        var betsInSlip = _betSlipStore.get().Bets;\n        var result = jQuery.grep(betsInSlip, function (localBet) { return localBet.HashCode === bet.HashCode; });\n        return result.length > 0;\n    }\n\n    function hasLiveBettingBets() {\n        var betsInSlip = _betSlipStore.get().Bets;\n        return _.some(betsInSlip, function(localBet) {\n           return localBet.HasLiveBettingLegs;\n        });\n    }\n\n    function hasBetWarning() {\n        var betsInSlip = _betSlipStore.get().Bets;\n        var result = jQuery.grep(betsInSlip, function (localBet) { return localBet.HasWarning === true; });\n        return result.length > 0;\n    }\n\n    function hasBetError() {\n        var betsInSlip = _betSlipStore.get().Bets;\n        var result = jQuery.grep(betsInSlip, function (localBet) { return localBet.HasError === true; });\n        return result.length > 0;\n    }\n\n    function calculateTotalCost() {\n        var totalCost = 0;\n        var bets = getBetSlip();\n        for (var i = 0; i < bets.length; i++) {\n            var bet = bets[i];\n            totalCost += parseFloat(bet.ExpectedCost);\n        }\n        return totalCost;\n    }\n\n    function clearAll() {\n        _betSlipStore.clear();\n        return true;\n    }\n\n    function createBetSlipRequest(url) {\n        // We need to send the data up in a url encoded format rather then json so the Verification Token will be picked up\n        //  the to Dictionary make this conversion while maintaining a format the MVC model binder understands.\n        var payload;\n        var antiForgeryToken = $('#anti-forgery [name=__RequestVerificationToken]').val();\n        var betSlip = getBetSlip();\n\n        if (antiForgeryToken) {\n            payload = jQuery.toDictionary({ bets: getBetSlip(), __RequestVerificationToken: antiForgeryToken });\n        } else {\n            payload = jQuery.toDictionary({ bets: betSlip });\n        }\n         \n        payload = _locationDetailsAppender.addToDictionary(payload);\n        var request = jQuery.ajax(url, {\n            data: payload,\n            type: 'POST'\n        });\n        return request;\n    }\n\n    function placeBetSlipNow(url, betSlipUrl) {\n        if (_lock.trylock()) {\n            NAV.showLoading();\n\n            var request = createBetSlipRequest(url);\n\n            request.done(function (draftBets) {\n                _betSlipStore.set({ Bets: draftBets });\n                loadBetSlips(betSlipUrl);\n                MSG.publish('bet.betslip.review', draftBets);\n            });\n\n            request.error(function (xhr, textStatus) {\n                var status = textStatus === \"timeout\" ? 0 : xhr.status;\n                NAV.ajaxError(status, xhr, false);\n            });\n\n            request.always(function () {\n                _lock.unlock();\n            });\n        }\n    }\n\n    function getFailedBetSlips(betReceipts) {\n        var failedBetSlips = [];\n        _.each(betReceipts, function (betReceipt) {\n            if (betReceipt.Bet.HasError) {\n                failedBetSlips.push(betReceipt.Bet);\n            }\n        });\n        return failedBetSlips;\n    }\n\n    function commitBetSlipNow(url, betSlipUrl) {\n        if (_lock.trylock()) {\n            NAV.showLoading();\n\n            var request = createBetSlipRequest(url);\n\n            request.done(function (betReceipts) {\n                _betSlipStore.clear();\n                var failedBetSlips = getFailedBetSlips(betReceipts);\n                _betSlipStore.set({ Bets: failedBetSlips });\n                loadBetSlips(betSlipUrl, betReceipts);\n                if (failedBetSlips.length < betReceipts.length) {\n                    MSG.publish('bet.betslip.receipt', betReceipts);\n                } else {\n                    MSG.publish('bet.betslip.allfailed', betReceipts);\n                }\n            });\n\n            request.error(function (xhr, textStatus) {\n                var status = textStatus === \"timeout\" ? 0 : xhr.status;\n                NAV.ajaxError(status, xhr, false);\n            });\n\n            request.always(function () {\n                _lock.unlock();\n            });\n        }\n    }\n\n    function removeBetSlipItem(index) {\n        var betSlip = getBetSlip();\n        if (index > -1 && index < betSlip.length) {\n            betSlip.splice(index, 1);\n            _betSlipStore.set({ Bets: betSlip });\n        }\n    }\n\n    return {\n        addBetSlipClickHandler: addBetSlipClickHandler,\n        addBatchBetsToBetSlip: addBatchBetsToBetSlip,\n        loadBetSlips: loadBetSlips,\n        getBetSlipCount: getBetSlipCount,\n        clearAll: clearAll,\n        placeBetSlipNow: placeBetSlipNow,\n        commitBetSlipNow: commitBetSlipNow,\n        placeInStore: placeInStore,\n        canUndoPlaceInStore: canUndoPlaceInStore,\n        undoPlaceInStore: undoPlaceInStore,\n        removeBetSlipItem: removeBetSlipItem,\n        getBetSlip: getBetSlip,\n        calculateTotalCost: calculateTotalCost,\n        hasBetWarning: hasBetWarning,\n        hasBetError: hasBetError,\n        hasLiveBettingBets: hasLiveBettingBets,\n        reloadBetSlips: reloadBetSlips,\n        onAddToBetSlipButtonClick: onAddToBetSlipButtonClick\n    };\n});\n\nmodule.exports = new window.BetSlipService();\n\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Betting-v1/betslipservice.legacy.js\n// module id = 147\n// module chunks = 5","/*** IMPORTS FROM imports-loader ***/\nvar jQuery = require(\"jquery\");\nvar _ = require(\"underscore\");\nvar legacyReturn = {};\nvar amplify = require(\"amplify\");\nvar cryptojsm5d = require(\"crypto-js/md5\");\nvar cryptojs = { MD5: cryptojsm5d };\nvar numeral = require(\"numeral\");\nvar swipe = require(\"swipe\");\nvar MSG = require(\"../Foundation/Services/MessageBusService\");\nvar LocationDetailsAppender = require(\"../Foundation/LocationDetailsAppender\");\nvar locking = require(\"../Foundation/Lock\");\nvar NAV = require(\"../Foundation/Navigation/Nav\");\nvar CMN = require(\"../Foundation/Common\");\nvar TT = require(\"../Foundation/TabTouch\");\nvar ErrorController = require(\"../Foundation/Error\");\nvar PreferencesService = require(\"../Foundation/Services/Preferences/PreferencesService\");\nvar TupleSpace = require(\"../Foundation/TupleSpace\");\nvar raceReplay = require(\"../Betting-v1/RaceReplay\");\nvar blackbookAddViewBinding = require(\"../Foundation/Components/Blackbook/myblackbook-add-viewbinding\");\nvar blackbookAddViewController = require(\"../Foundation/Components/Blackbook/myblackbook-add-viewcontroller\");\nvar NOTE = require(\"../Foundation/Notification\");\nvar jQueryToDictionary = require(\"jquery-todictionary\");\n\nwindow.BetWalletService = function(configurationService) {\n    var self = this;\n\n    var _walletStore = new BetWalletStore();\n    var _configurationService = configurationService || new ConfigurationService();\n\n    var _searchIndex = function (betGroups, betSlipSeq) {\n        var result = -1;\n\n        jQuery.each(betGroups, function (index, inxBetSlip) {\n            if (inxBetSlip.BetSlipSeq == betSlipSeq) {\n                result = index;\n                return false;\n            }\n        });\n\n        return result;\n    };\n\n    self.maxNumOfBets = function() {\n        return _configurationService.MaxBetsPerCashWallet;\n    };\n\n    self.isBetWalletFull = function () {\n        return this.getBetWalletCount() >= _configurationService.MaxBetsPerCashWallet;\n    };\n\n    /* test/dev only */\n    self.clearAll = function () {\n        _walletStore.clear();\n        return true;\n    };\n\n    self.getBetWalletCount = function () {\n        return _walletStore.get_bet_groups_count();\n    };\n\n    self.getFirstBetSlip = function () {\n        var betGroups = _walletStore.get_bet_groups();\n        if (betGroups.length) {\n            return betGroups[0].BetSlipSeq;\n        }\n        return null;\n    };\n\n    self.getLastBetSlip = function () {\n        var betGroups = _walletStore.get_bet_groups();\n        if (betGroups.length) {\n            return betGroups[betGroups.length - 1].BetSlipSeq;\n        }\n        return null;\n    };\n\n    self.nextOrFirstBetSlip = function (curBetSlipSeq) {\n        var betGroups = _walletStore.get_bet_groups();\n        var index = _searchIndex(betGroups, curBetSlipSeq);\n        if (index > -1) {\n            index = (index + 1) % betGroups.length;\n            return betGroups[index].BetSlipSeq;\n        }\n        return null;\n    };\n\n    self.previousOrLastBetSlip = function (curBetSlipSeq) {\n        var betGroups = _walletStore.get_bet_groups();\n        var index = _searchIndex(betGroups, curBetSlipSeq);\n        var count = betGroups.length;\n        if (index > -1) {\n            index = (count + index - 1) % count;\n            return betGroups[index].BetSlipSeq;\n        }\n        return null;\n    };\n\n    self.searchIndex = function (betSlipSeq) {\n        return _searchIndex(_walletStore.get_bet_groups(), betSlipSeq);\n    };\n\n    self.getVisitorTrackingId = function() {\n        return _walletStore.get_visitor_tracking_id();\n    };\n\n    self.addBetSlip = function (betSlipSeq) {\n        _walletStore.add(betSlipSeq);\n    };\n\n    self.deleteBetSlip = function (betSlipSeq) {\n        _walletStore.remove(Number(betSlipSeq));\n    };\n\n    self.deleteAllbetSlips = function () {\n        _walletStore.remove_all();\n    };\n};\n\nmodule.exports = new window.BetWalletService();\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Betting-v1/betwalletservice.legacy.js\n// module id = 148\n// module chunks = 5","/*** IMPORTS FROM imports-loader ***/\nvar jQuery = require(\"jquery\");\nvar _ = require(\"underscore\");\nvar legacyReturn = {};\nvar amplify = require(\"amplify\");\nvar cryptojsm5d = require(\"crypto-js/md5\");\nvar cryptojs = { MD5: cryptojsm5d };\nvar numeral = require(\"numeral\");\nvar swipe = require(\"swipe\");\nvar MSG = require(\"../Foundation/Services/MessageBusService\");\nvar LocationDetailsAppender = require(\"../Foundation/LocationDetailsAppender\");\nvar locking = require(\"../Foundation/Lock\");\nvar NAV = require(\"../Foundation/Navigation/Nav\");\nvar CMN = require(\"../Foundation/Common\");\nvar TT = require(\"../Foundation/TabTouch\");\nvar ErrorController = require(\"../Foundation/Error\");\nvar PreferencesService = require(\"../Foundation/Services/Preferences/PreferencesService\");\nvar TupleSpace = require(\"../Foundation/TupleSpace\");\nvar raceReplay = require(\"../Betting-v1/RaceReplay\");\nvar blackbookAddViewBinding = require(\"../Foundation/Components/Blackbook/myblackbook-add-viewbinding\");\nvar blackbookAddViewController = require(\"../Foundation/Components/Blackbook/myblackbook-add-viewcontroller\");\nvar NOTE = require(\"../Foundation/Notification\");\nvar jQueryToDictionary = require(\"jquery-todictionary\");\n\nlegacyReturn.LEGIN = window.LEGIN = (function() {\n    function InitQuinellaLegIn() {\n        jQuery('ul.tabs li:not(.ex-option)').hide();\n        var toggleButton = jQuery('#quinellalegin-toggle');\n\n        toggleButton.click(legInButtonClick);\n\n        setToMultiSelection();\n    }\n\n    function isLeginSelected() {\n        return jQuery('#quinellalegin-toggle').hasClass('selected');\n    }\n\n    function legInButtonClick() {\n        toggleLegInButton(!jQuery(this).hasClass('selected'));\n    }\n\n    function toggleLegInButton(isSelected) {\n        TOTESEL.setSelectedTab(0);\n        var button = jQuery('.legin-box');\n        if (isSelected) {\n            button.addClass('selected');\n        } else {\n            button.removeClass('selected');\n        }\n\n        jQuery('#IsQuinellaLegIn').val(isSelected);\n        jQuery('div.starter-tab input').prop('checked', false);\n        var fieldButton = jQuery('.totebet-field-button');\n        fieldButton.removeClass('selected');\n        TOTESEL.clearAllSelections();\n        TOTE.updateStartersState(true);\n\n        if (isSelected) {\n            button.children('em').html('ON');\n            jQuery('ul.tabs li').show();\n            starterTabSelect(null, 0);\n            setToSingleSelection();\n        } else {\n            button.children('em').html('OFF');\n            jQuery('ul.tabs li:not(.ex-option)').hide();\n            jQuery('.totebet-field-button').show();\n            setToMultiSelection();\n            jQuery(\"ul.tabs li\").removeClass('ui-state-active');\n            jQuery(\"ul.tabs\").each(function () { jQuery(this).children(\"li:first\").addClass('ui-state-active'); });\n        }\n    }\n\n    function toggleOn() {\n        var button = jQuery('.legin-box');\n        button.addClass('selected');\n        button.children('em').html('ON');\n        jQuery('ul.tabs li').show();\n\n        if (jQuery('ul.tabs li:first').hasClass('ui-state-active')) {\n            setToSingleSelection();\n        } else {\n            setToMultiSelection();\n            disableLegInStarter();\n        }\n\n    }\n\n\n    function setToSingleSelection() {\n        showAndEnable(jQuery('div.starter-tab input[type=\"radio\"]'));\n        hideAndDisable(jQuery('div.starter-tab input[type=\"checkBox\"]'));\n    }\n\n    function setToMultiSelection() {\n        hideAndDisable(jQuery('div.starter-tab input[type=\"radio\"]'));\n        showAndEnable(jQuery('div.starter-tab input[type=\"checkBox\"]'));\n    }\n\n\n    function showAndEnable(controls) {\n        controls.show();\n        controls.prop('disabled', false);\n    }\n\n    function hideAndDisable(controls) {\n        controls.hide();\n        controls.prop('disabled', true);\n    }\n\n\n    function starterTabSelect(a, newIndex) {\n        jQuery('.leginselection').removeClass('leginselection');\n        TOTE.starterTabSelect(a, newIndex);\n\n        if (newIndex == 0) {\n            jQuery('.totebet-field-button').hide();\n            setToSingleSelection();\n        } else {\n            jQuery('.totebet-field-button').show();\n            setToMultiSelection();\n            disableLegInStarter();\n        }\n\n        return false;\n    }\n\n    function disableLegInStarter() {\n        var starters = TOTESEL.getSelections(0);\n        if (starters.length > 0) {\n            jQuery('div.starter-tab input[type=\"checkBox\"][value=\"' + starters[0] + '\"]').prop('disabled', true).prop('checked', true).addClass('leginselection');\n        }\n    }\n\n\n    return {\n        InitQuinellaLegIn: InitQuinellaLegIn,\n        starterTabSelect: starterTabSelect,\n        isLeginSelected: isLeginSelected,\n        toggleOn: toggleOn\n    };\n})();\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Betting-v1/quinellalegin.legacy.js\n// module id = 149\n// module chunks = 5","define([\"require\", \"exports\"], function (require, exports) {\r\n    \"use strict\";\r\n    var LegTypeCode = (function () {\r\n        function LegTypeCode() {\r\n        }\r\n        return LegTypeCode;\r\n    }());\r\n    LegTypeCode.Win = \"W\";\r\n    LegTypeCode.Place = \"P\";\r\n    LegTypeCode.WinPlace = \"WP\";\r\n    exports.LegTypeCode = LegTypeCode;\r\n});\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Specials/Model/LegTypeCode.ts\n// module id = 158\n// module chunks = 5","define([\"require\", \"exports\", \"decimal-js\"], function (require, exports, Decimal) {\r\n    \"use strict\";\r\n    var PriceDetails = (function () {\r\n        function PriceDetails() {\r\n        }\r\n        PriceDetails._toDecimal = function (value) {\r\n            return value ? new Decimal(value) : new Decimal(0);\r\n        };\r\n        PriceDetails.normalise = function (priceDetails) {\r\n            return priceDetails ? {\r\n                Win: { DollarReturn: PriceDetails._toDecimal(priceDetails.Win.DollarReturn) },\r\n                Place: { DollarReturn: PriceDetails._toDecimal(priceDetails.Place.DollarReturn) }\r\n            } : {\r\n                Win: { DollarReturn: new Decimal(0) },\r\n                Place: { DollarReturn: new Decimal(0) }\r\n            };\r\n        };\r\n        return PriceDetails;\r\n    }());\r\n    exports.PriceDetails = PriceDetails;\r\n});\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Specials/Model/PriceDetails.ts\n// module id = 159\n// module chunks = 5","define([\"require\", \"exports\", \"decimal-js\"], function (require, exports, Decimal) {\r\n    \"use strict\";\r\n    var Stake = (function () {\r\n        function Stake() {\r\n        }\r\n        Stake._toDecimal = function (value) {\r\n            return value ? new Decimal(value) : new Decimal(0);\r\n        };\r\n        Stake.normalise = function (stake) {\r\n            return stake ? {\r\n                Win: Stake._toDecimal(stake.Win),\r\n                Place: Stake._toDecimal(stake.Place)\r\n            } : {\r\n                Win: Stake._toDecimal(0),\r\n                Place: Stake._toDecimal(0)\r\n            };\r\n        };\r\n        return Stake;\r\n    }());\r\n    exports.Stake = Stake;\r\n});\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Specials/Model/Stake.ts\n// module id = 160\n// module chunks = 5","define([\"require\", \"exports\", \"tslib\", \"inversify\", \"../Model/LegTypeCode\"], function (require, exports, tslib_1, inversify_1, LegTypeCode_1) {\r\n    \"use strict\";\r\n    var PyosExtensions = (function () {\r\n        function PyosExtensions() {\r\n        }\r\n        PyosExtensions.prototype.getLegTypeForDisplay = function (specialOffer) {\r\n            if (specialOffer) {\r\n                if (specialOffer.IsExclusiveLegType) {\r\n                    switch (specialOffer.LegTypeCode) {\r\n                        case LegTypeCode_1.LegTypeCode.Win:\r\n                            return \"win only\";\r\n                        case LegTypeCode_1.LegTypeCode.Place:\r\n                            return \"place only\";\r\n                        case LegTypeCode_1.LegTypeCode.WinPlace:\r\n                            return \"win or place only\";\r\n                    }\r\n                }\r\n                else {\r\n                    switch (specialOffer.LegTypeCode) {\r\n                        case LegTypeCode_1.LegTypeCode.Win:\r\n                            return \"win\";\r\n                        case LegTypeCode_1.LegTypeCode.Place:\r\n                            return \"place\";\r\n                        case LegTypeCode_1.LegTypeCode.WinPlace:\r\n                            return \"win + place\";\r\n                    }\r\n                }\r\n            }\r\n            return null;\r\n        };\r\n        PyosExtensions.prototype.getLegTypeIneligibilityDisplay = function (specialOffer) {\r\n            if (specialOffer) {\r\n                if (specialOffer.IsExclusiveLegType) {\r\n                    switch (specialOffer.LegTypeCode) {\r\n                        case LegTypeCode_1.LegTypeCode.Win:\r\n                            return \"Only a Win amount can be entered for the selected SuperPick. Please amend your bet\";\r\n                        case LegTypeCode_1.LegTypeCode.Place:\r\n                            return \"Only a Place amount can be entered for the selected SuperPick. Please amend your bet\";\r\n                        case LegTypeCode_1.LegTypeCode.WinPlace:\r\n                            return null;\r\n                    }\r\n                }\r\n                else {\r\n                    switch (specialOffer.LegTypeCode) {\r\n                        case LegTypeCode_1.LegTypeCode.Win:\r\n                            return \"A Win amount must be entered for the selected SuperPick. Please amend your bet\";\r\n                        case LegTypeCode_1.LegTypeCode.Place:\r\n                            return \"A Place amount must be entered for the selected SuperPick. Please amend your bet\";\r\n                        case LegTypeCode_1.LegTypeCode.WinPlace:\r\n                            return null;\r\n                    }\r\n                }\r\n            }\r\n            return null;\r\n        };\r\n        return PyosExtensions;\r\n    }());\r\n    PyosExtensions = tslib_1.__decorate([\r\n        inversify_1.injectable(),\r\n        tslib_1.__metadata(\"design:paramtypes\", [])\r\n    ], PyosExtensions);\r\n    exports.PyosExtensions = PyosExtensions;\r\n});\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Specials/Store/PyosExtensions.ts\n// module id = 161\n// module chunks = 5","/**\n * Exposes Webpack'd modules for any injected markup and remote components.\n * You need to specify the Webpack module path every time so Webpack knows you want to include them and their dependencies in your bundle.\n */\ndefine([\"../AppUtils/inline-require\"], function(handler) {\n\n  const Tipping = require(\"./Tipping/Tipping\");\n  const TippingError = require(\"./Tipping/TippingError\");\n  const TippingGame = require(\"./Tipping/TippingGame\");\n  const TippingPool = require(\"./Tipping/TippingPool\");\n  const TippingPropose = require(\"./Tipping/TippingPropose\");\n  const TippingReceipt = require(\"./Tipping/TippingReceipt\");\n  const TippingResults = require(\"./Tipping/TippingResults\");\n\n  handler.define(\"./Tipping/Tipping\", function(cb) { cb(Tipping); });\n  handler.define(\"./Tipping/TippingError\", function(cb) { cb(TippingError); });\n  handler.define(\"./Tipping/TippingGame\", function(cb) { cb(TippingGame); });\n  handler.define(\"./Tipping/TippingPool\", function(cb) { cb(TippingPool); });\n  handler.define(\"./Tipping/TippingPropose\", function(cb) { cb(TippingPropose); });\n  handler.define(\"./Tipping/TippingReceipt\", function(cb) { cb(TippingReceipt); });\n  handler.define(\"./Tipping/TippingResults\", function(cb) { cb(TippingResults); });\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Betting-v1/InlineRequireDefinitions.js\n// module id = 163\n// module chunks = 5","define([\"./Services/MessageBusService\", \"exports-loader?ADRUM!adrum\"], function(msgBus, adrum) {\n    var vPageView = null;\n\n    function init() {\n        msgBus.subscribe(\"nav.content.start\", function(url) {\n            vPageView = new adrum.events.VPageView();\n            vPageView.start();\n            vPageView.markViewChangeStart();\n        });\n\n        msgBus.subscribe(\"nav.content.showing\", function() {\n            vPageView.markViewChangeEnd();\n        });\n\n        msgBus.subscribe(\"nav.content.shown\", function() {\n            vPageView.markViewDOMLoaded();\n        });\n\n        msgBus.subscribe(\"nav.content.complete\", function() {\n            vPageView.end();\n            adrum.report(vPageView);\n        });\n\n        msgBus.subscribe(\"nav.content.error\", function() {\n            vPageView.markViewChangeEnd();\n        });\n    }\n\n    return {\n        init: init\n    }\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/AppDynamics.js\n// module id = 164\n// module chunks = 5","define([\"requireExternal\", \"defineExternal\", \"jquery\"], function(requireExternal, defineExternal, jQuery) {\n    if (!requireExternal.defined(\"knockout\")) defineExternal('knockout', function() { return require('knockout'); });\n    if (!requireExternal.defined(\"jquery\")) defineExternal('jquery', function() { return require('jquery'); });\n    if (!requireExternal.defined(\"LoggingService\")) defineExternal('LoggingService', function() { return require('./Services/LoggingService'); });\n\n    //CMS - Check In\n    if (!requireExternal.defined(\"LocationBasedServices/viewmodel/attheraces-viewmodel\")) defineExternal('LocationBasedServices/viewmodel/attheraces-viewmodel', function() { return require('./ViewModels/Location/AtTheRacesViewModel'); });\n    if (!requireExternal.defined(\"CheckInService\")) defineExternal('CheckInService', function() { return require('./Services/Location/CheckInService'); });\n\n    //CMS - Specials T&C\n    if (!requireExternal.defined(\"Tabtouch\")) defineExternal('Tabtouch', function() { return require('./TabTouch'); });\n    if (!(\"$\" in window)) window.$ = jQuery; //No dependency declared for this - assumed to be global\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/ContentManagementSystem.js\n// module id = 165\n// module chunks = 5","/**\n * Exposes Webpack'd modules for any injected markup and remote components.\n * You need to specify the Webpack module path every time so Webpack knows you want to include them and their dependencies in your bundle.\n */\ndefine([\"../AppUtils/inline-require\", \"knockout\", \"jquery\", \"underscore\"], function(handler, ko, jquery, _) {\n\n    handler.define(\"knockout\", function(cb) { cb(ko); });\n    handler.define(\"jquery\", function(cb) { cb(jquery); });\n    handler.define(\"underscore\", function(cb) { cb(_); });\n\n    require.ensure([], function() {\n        const analytics = require(\"./Analytics/Analytics\");\n        const react = require(\"react\");\n        const dom = require(\"react-dom\");\n        const rest = require(\"rwwa-rest\");\n        handler.define(\"rwwa-analytics\", function(cb) { cb(analytics); });\n        handler.define(\"react\", function(cb) { cb(react); });\n        handler.define(\"react-dom\", function(cb) { cb(dom); });\n        handler.define(\"rwwa-rest\", function(cb) { cb(rest); });\n    }, 'extcomponents');\n\n    const hammer = require(\"hammerjs\");\n    const HomeViewModel = require(\"./ViewModels/HomeViewModel\");\n    const StartersPageViewModel = require(\"./ViewModels/StartersPageViewModel\");\n    const AppDownloadViewModel = require(\"./ViewModels/AppDownloadViewModel\");\n    const SettingsViewModel = require(\"./ViewModels/SettingsViewModel\");\n    const MysteryViewModel = require(\"./ViewModels/MysteryViewModel\");\n    const singlebetreceipt = require(\"./ViewModels/Fob/fob-singlebetreceipt\");\n    const foopropose = require(\"./ViewModels/Fob/foo-propose\");\n    const TabLocatorViewModel = require(\"./ViewModels/TabLocatorViewModel\");\n    const AccountActivityViewModel = require(\"./ViewModels/AccountActivityViewModel\");\n    const AccountChangePasswordViewModel = require(\"./ViewModels/AccountChangePasswordViewModel\");\n    const MarketingCommsViewModel = require(\"./ViewModels/MarketingCommsViewModel\");\n    const AccountDepositViewModel = require(\"./ViewModels/AccountDepositViewModel\");\n    const AccountDepositPayconnectViewModel = require(\"./ViewModels/AccountDepositPayconnectViewModel\");\n    const AccountPrecommitmentViewModel = require(\"./ViewModels/AccountPrecommitmentViewModel\");\n    const AccountTransactionViewModel = require(\"./ViewModels/AccountTransactionViewModel\");\n    const AccountWithdrawalViewModel = require(\"./ViewModels/AccountWithdrawalViewModel\");\n    const multiinvestmentviewmodel = require(\"./MultiBet/viewmodel/multiinvestment-viewmodel\");\n    const multiviewviewmodel = require(\"./MultiBet/viewmodel/multiview-viewmodel\");\n    const multiproposeviewmodel = require(\"./MultiBet/viewmodel/multipropose-viewmodel\");\n    const multireceiptviewmodel = require(\"./MultiBet/viewmodel/multireceipt-viewmodel\");\n    const ToteSports = require(\"./ViewModels/ToteSports/ToteSports\");\n    const ToteSportsCurrent = require(\"./ViewModels/ToteSports/ToteSportsCurrent\");\n    const ToteSportsError = require(\"./ViewModels/ToteSports/ToteSportsError\");\n    const ToteSportsGamesResults = require(\"./ViewModels/ToteSports/ToteSportsGamesResults\");\n    const ToteSportsGames = require(\"./ViewModels/ToteSports/ToteSportsGames\");\n    const ToteSportsPropose = require(\"./ViewModels/ToteSports/ToteSportsPropose\");\n    const ToteSportsResults = require(\"./ViewModels/ToteSports/ToteSportsResults\");\n    const currencybinding = require(\"./KnockoutExtensions/Bindings/currency-binding\");\n    const scrolltobinding = require(\"./KnockoutExtensions/Bindings/scrollto-binding\");\n    const authenticationcomponent = require(\"./Components/Authentication/Neo/register\");\n    const MysteryBetregister = require(\"./Components/MysteryBet/register\");\n    const Calculatorregister = require(\"./Components/Calculator/register\");\n    const viewbinding = require(\"./Components/Blackbook/myblackbook-viewbinding\");\n    const viewcontroller = require(\"./Components/Blackbook/myblackbook-viewcontroller\");\n    const PyosSelectregister = require(\"../Specials/Components/PyosSelect/register\");\n    const ProjectedPayregister = require(\"../Specials/Components/ProjectedPay/register\");\n    const PyosMessageregister = require(\"../Specials/Components/PyosMessage/register\");\n\n    handler.define(\"requireExternal\", function(cb) { require([\"requireExternal\"], cb); }); /* CMS content areas */\n    handler.define(\"hammer\", function(cb) { require([\"hammerjs\"], cb); });\n    handler.define(\"./Navigation/Nav\", function(cb) { require([\"./Navigation/Nav\"], cb); });\n    handler.define(\"./TabTouch\", function(cb) { require([\"./TabTouch\"], cb); });\n    handler.define(\"./Notification\", function(cb) { require([\"./Notification\"], cb); });\n    handler.define(\"./Services/MessageBusService\", function(cb) { require([\"./Services/MessageBusService\"], cb); });\n    handler.define(\"./Services/Preferences/PreferencesService\", function(cb) { require([\"./Services/Preferences/PreferencesService\"], cb); });\n    handler.define(\"./ViewModels/HomeViewModel\", function(cb) { require([\"./ViewModels/HomeViewModel\"], cb); });\n    handler.define(\"./ViewModels/StartersPageViewModel\", function(cb) { require([\"./ViewModels/StartersPageViewModel\"], cb); });\n    handler.define(\"./ViewModels/AppDownloadViewModel\", function(cb) { require([\"./ViewModels/AppDownloadViewModel\"], cb); });\n    handler.define(\"./ViewModels/SettingsViewModel\", function(cb) { require([\"./ViewModels/SettingsViewModel\"], cb); });\n    handler.define(\"./ViewModels/MysteryViewModel\", function(cb) { require([\"./ViewModels/MysteryViewModel\"], cb); });\n    handler.define(\"./ViewModels/Fob/fob-singlebetreceipt\", function(cb) { require([\"./ViewModels/Fob/fob-singlebetreceipt\"], cb); });\n    handler.define(\"./ViewModels/Fob/foo-propose\", function(cb) { require([\"./ViewModels/Fob/foo-propose\"], cb); });\n    handler.define(\"./ViewModels/TabLocatorViewModel\", function(cb) { require([\"./ViewModels/TabLocatorViewModel\"], cb); });\n    handler.define(\"./ViewModels/AccountActivityViewModel\", function(cb) { require([\"./ViewModels/AccountActivityViewModel\"], cb); });\n    handler.define(\"./ViewModels/AccountChangePasswordViewModel\", function(cb) { require([\"./ViewModels/AccountChangePasswordViewModel\"], cb); });\n    handler.define(\"./ViewModels/MarketingCommsViewModel\", function(cb) { require([\"./ViewModels/MarketingCommsViewModel\"], cb); });\n    handler.define(\"./ViewModels/AccountDepositViewModel\", function(cb) { require([\"./ViewModels/AccountDepositViewModel\"], cb); });\n    handler.define(\"./ViewModels/AccountDepositPayconnectViewModel\", function(cb) { require([\"./ViewModels/AccountDepositPayconnectViewModel\"], cb); });\n    handler.define(\"./ViewModels/AccountPrecommitmentViewModel\", function(cb) { require([\"./ViewModels/AccountPrecommitmentViewModel\"], cb); });\n    handler.define(\"./ViewModels/AccountTransactionViewModel\", function(cb) { require([\"./ViewModels/AccountTransactionViewModel\"], cb); });\n    handler.define(\"./ViewModels/AccountWithdrawalViewModel\", function(cb) { require([\"./ViewModels/AccountWithdrawalViewModel\"], cb); });\n    handler.define(\"MultiBet/viewmodel/multiinvestment-viewmodel\", function(cb) { require([\"./MultiBet/viewmodel/multiinvestment-viewmodel\"], cb); });\n    handler.define(\"MultiBet/viewmodel/multiview-viewmodel\", function(cb) { require([\"./MultiBet/viewmodel/multiview-viewmodel\"], cb); });\n    handler.define(\"MultiBet/viewmodel/multipropose-viewmodel\", function(cb) { require([\"./MultiBet/viewmodel/multipropose-viewmodel\"], cb); });\n    handler.define(\"MultiBet/viewmodel/multireceipt-viewmodel\", function(cb) { require([\"./MultiBet/viewmodel/multireceipt-viewmodel\"], cb); });\n    handler.define(\"ToteSports\", function(cb) { require([\"./ViewModels/ToteSports/ToteSports\"], cb); });\n    handler.define(\"ToteSportsCurrent\", function(cb) { require([\"./ViewModels/ToteSports/ToteSportsCurrent\"], cb); });\n    handler.define(\"ToteSportsError\", function(cb) { require([\"./ViewModels/ToteSports/ToteSportsError\"], cb); });\n    handler.define(\"ToteSportsGamesResults\", function(cb) { require([\"./ViewModels/ToteSports/ToteSportsGamesResults\"], cb); });\n    handler.define(\"ToteSportsGames\", function(cb) { require([\"./ViewModels/ToteSports/ToteSportsGames\"], cb); });\n    handler.define(\"ToteSportsPropose\", function(cb) { require([\"./ViewModels/ToteSports/ToteSportsPropose\"], cb); });\n    handler.define(\"ToteSportsResults\", function(cb) { require([\"./ViewModels/ToteSports/ToteSportsResults\"], cb); });\n    handler.define(\"ToteSportsReceipt\", function(cb) { require([\"./ViewModels/ToteSports/ToteSportsReceipt\"], cb); });\n    handler.define(\"./KnockoutExtensions/Bindings/currency-binding\", function(cb) { require([\"./KnockoutExtensions/Bindings/currency-binding\"], cb); });\n    handler.define(\"./KnockoutExtensions/Bindings/scrollto-binding\", function(cb) { require([\"./KnockoutExtensions/Bindings/scrollto-binding\"], cb); });\n    handler.define(\"./Components/Authentication/Neo/register\", function(cb) { require([\"./Components/Authentication/Neo/register\"], cb); });\n    handler.define(\"./Components/MysteryBet/register\", function(cb) { require([\"./Components/MysteryBet/register\"], cb); });\n    handler.define(\"./Components/Calculator/register\", function(cb) { require([\"./Components/Calculator/register\"], cb); });\n    handler.define(\"./Components/Blackbook/myblackbook-viewbinding\", function(cb) { require([\"./Components/Blackbook/myblackbook-viewbinding\"], cb); });\n    handler.define(\"./Components/Blackbook/myblackbook-viewcontroller\", function(cb) { require([\"./Components/Blackbook/myblackbook-viewcontroller\"], cb); });\n    handler.define(\"../Specials/Components/PyosSelect/register\", function(cb) { require([\"../Specials/Components/PyosSelect/register\"], cb); });\n    handler.define(\"../Specials/Components/ProjectedPay/register\", function(cb) { require([\"../Specials/Components/ProjectedPay/register\"], cb); });\n    handler.define(\"../Specials/Components/PyosMessage/register\", function(cb) { require([\"../Specials/Components/PyosMessage/register\"], cb); });\n    handler.define(\"./Foundation/Logon\", function(cb) { require([\"./Logon\"], cb); });\n    handler.define(\"./Foundation/Error\", function(cb) { require([\"./Error\"], cb); });\n    handler.define(\"./ViewModels/Location/CheckInViewModel\", function(cb) { require([\"./ViewModels/Location/CheckInViewModel\"], cb); });\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/InlineRequireDefinitions.js\n// module id = 166\n// module chunks = 5","/**\n * Handler for all \"#tote/meetings/meetingCode/raceNumber?date=meetingDate\" routes.\n * \n * Route initiators include:\n * - Home -> Races (and trots, dogs) -> Race List\n * - Home -> Next Events\n * - Home -> Jackpots\n * - Account Activity -> Go To Race\n */\ndefine([\"./Services/FeatureService\", \"./Services/MessageBusService\", \"./Navigation/Nav\", 'knockout'], function (featureService, msgBus, nav, ko) {\n    \"use strict\";\n\n    function bootstrapComponent(route) {\n        var request = route.split(\"/\"),\n            meetingId = request[2],\n            rawRaceNumber = request[3].split(\"?\"),\n            queryStrings = rawRaceNumber[1].split(\"&\"),\n            raceNumber = rawRaceNumber[0],\n            meetingDate = \"\";\n\n        //TODO: Do this better - maybe depend on a third party to parse our request?\n        queryStrings.forEach(function (queryString) {\n            var parsed = queryString.split(\"=\"),\n                key = parsed[0],\n                value = parsed[1];\n\n            if (key == \"date\") {\n                meetingDate = value;\n            }\n        });\n\n        function NewStartersPageViewModel() {\n            var self = this;\n            self.meetingId = meetingId;\n            self.raceNumber = parseInt(raceNumber);\n            self.meetingDate = new Date(meetingDate);\n        }\n\n        // For Analytics\n        msgBus.publish(\"nav.content.start\", route);\n\n        // Code Spliiting point for webpack\n        require.ensure([], function() {\n            nav.hideLoading();\n\n            require('../include-betting-v2');\n            require(\"../Specials/IOC/inversify.config\");\n            require(\"../Specials/Components/ProjectedPay/register\");\n            require(\"../Specials/Components/PyosMessage/register\");\n            require(\"../Specials/Components/PyosSelect/register\");\n            require(\"../AppUtils/Framework/CustomBindings/SlideBinding\");\n    \n            document.getElementById(\"main-container\").innerHTML = \"<div id='starters-content'><race-display-state params='meetingId: $data.meetingId, raceNumber: $data.raceNumber, meetingDate: $data.meetingDate, raceStatus: $data.raceStatus'></race-display-state></div>\";\n\n            ko.applyBindings(new NewStartersPageViewModel(), document.getElementById(\"starters-content\"));\n\n        }, 'betting-v2')\n    }\n\n    function handle(route) {\n        return new Promise(function(resolve, reject) {\n            featureService.isActive(\"BettingPageRefresh\")\n                .then(function(isActive) {\n                    if (isActive) {\n                        bootstrapComponent(route);\n                        resolve();\n                    } else {\n                        reject();\n                    }\n                }).catch(function(err) {\n                    reject(err);\n                });\n           });\n        }\n\n    return {\n        handle: handle\n    }\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/RaceBettingPageRouteHandler.js\n// module id = 167\n// module chunks = 5","define(['knockout', '../Services/Preferences/PreferencesService', '../Services/MessageBusService', '../Services/Location/CheckInService', '../Services/FeatureService', '../Services/LoggingService', '../Navigation/Nav'], function (ko, preferencesService, msgBusService, checkInService, featureService, loggingService, nav) {\n    var homeUrl = '/#';\n    var cashBettingEnabled = ko.observable(preferencesService.cashBettingEnabled());\n    var bettingPageRefreshEnabled = ko.observable(preferencesService.bettingPageRefreshEnabled());\n    var showBettingPageRefresh = ko.observable(false);\n\n    return {\n        initView: initView,\n        toggleCashBetting: toggleCashBetting,\n        cashBettingEnabled: cashBettingEnabled,\n        toggleBettingPageRefresh: toggleBettingPageRefresh,\n        bettingPageRefreshEnabled: bettingPageRefreshEnabled,\n        showBettingPageRefresh: showBettingPageRefresh,\n        onTabAndTrack: onTabAndTrack\n    }\n\n    function initView() {\n        loggingService.logDebug(\"right-menu-viewmodel.initView\");\n        cashBettingEnabled(preferencesService.cashBettingEnabled());\n        bettingPageRefreshEnabled(preferencesService.bettingPageRefreshEnabled());\n        refreshToggles({reload:false});\n        msgBusService.subscribe('lo.login',function(accountNumber) {\n            loggingService.logDebug(\"right-menu-viewmodel.initView lo.login accountNumber(\" + accountNumber + \")\");\n            preferencesService.loggedInUser(accountNumber);\n            preferencesService.bettingPageRefreshEnabled(true);\n            refreshToggles({reload:false});\n        });\n        msgBusService.subscribe('lo.logout',function() {\n            preferencesService.loggedInUser(0);\n            refreshToggles({reload:false});\n        });\n    }\n\n    function reloadPage(params) {\n        setTimeout(function() {\n            location.reload(true);\n        },params.delay);\n    }\n\n    function refreshToggles(params) {\n        loggingService.logDebug(\"right-menu-viewmodel.refreshToggles\");\n        featureService.isActive('BettingPageRefreshToggle')\n            .then(function(active) {\n                if (active) {\n                    loggingService.logDebug(\"right-menu-viewmodel.refreshToggles - featureService.isActive('BettingPageRefreshToggle') = \" + active);\n                    showBettingPageRefresh(active);\n                    if (bettingPageRefreshEnabled() !== preferencesService.bettingPageRefreshEnabled()) {\n                        bettingPageRefreshEnabled(preferencesService.bettingPageRefreshEnabled());\n                        if (params.reload) {\n                            reloadPage({ delay: 400 });\n                        }\n                    }\n                } else {\n                    loggingService.logDebug(\"right-menu-viewmodel.refreshToggles - featureService.isActive FAIL\");\n                    showBettingPageRefresh(false);\n                }\n            });\n    }\n\n    function toggleCashBetting() {\n        var currentValue = preferencesService.cashBettingEnabled();\n        currentValue = preferencesService.cashBettingEnabled(!currentValue);\n        cashBettingEnabled(currentValue);\n        msgBusService.publish('preferences.cash', currentValue);\n    }\n\n    function toggleBettingPageRefresh() {\n        var currentValue = preferencesService.bettingPageRefreshEnabled();\n        currentValue = preferencesService.bettingPageRefreshEnabled(!currentValue);\n        bettingPageRefreshEnabled(currentValue);\n        msgBusService.publish('preferences.bettingPageRefresh', currentValue);\n        reloadPage({delay:200});\n    }\n\n    function onTabAndTrack() {\n        var locationId = checkInService.checkedInLocationId();\n        if (locationId !== undefined && locationId !== null && locationId !== '') {\n            return nav.navChange('/#lbs/attheraces?code=GPS' + '&id=' + locationId);\n        } else {\n            return nav.navChange('/#lbs/checkin');\n        }\n    }\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/ViewModels/PrimaryMenuViewModel.js\n// module id = 168\n// module chunks = 5","/* entry point just for referencing require.js - so that webpack processes it          */\n// Include require.min first using the cshtml of the asset for require setup by the file-loader. \n// Then include this file.  Require is then available on requireExternal and defineExternal.\n\nrequire(\"require.min\");\n\nimport('requireExternal').then( function(requireExternal) {\n\n    requireExternal.config({\n        map: {\n            \"*\": {\n                \"ko\": \"knockout\",\n                \"$\": \"jquery\",\n                \"jQuery\": \"jquery\",\n                \"_\": \"underscore\"\n            }\n        },\n        config: {\n            text: {\n                useXhr: function (url, protocol, hostname, port) {\n                    // allow cross-domain requests\n                    // remote server allows CORS\n                    return true;\n                }\n            }\n        }\n    });\n\n});\n\nvar defineExternal = require('defineExternal');\n\n// Some marketing scripts will depend on using require to get to these modules.\ndefineExternal('knockout', function() { return require('knockout'); });\ndefineExternal('jquery', function() { return require('jquery'); });\ndefineExternal('underscore', function() { return require('underscore'); });\n\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/entry-require.js\n// module id = 173\n// module chunks = 5","// LEGACY MAIN\n\n// \"Services\"\nimport './Betting-v1/betwalletstore.legacy'\nimport './Betting-v1/configuration-service.legacy'\nimport './Betting-v1/betwalletservice.legacy'\nimport './Betting-v1/flexiservice.legacy'\nimport './Betting-v1/popupservice.legacy'\nimport './Betting-v1/totebettingservice.legacy'\nimport './Betting-v1/betslipstore.legacy'\nimport './Betting-v1/betslipservice.legacy'\nimport './Betting-v1/modal-service.legacy'\n\n// \"core\"\nimport './Betting-v1/betwalletindicator.legacy'\nimport './Betting-v1/namespace.legacy'\nimport './Betting-v1/collections.legacy'\nimport './Betting-v1/feature-detection-service.legacy'\nimport './Betting-v1/confirmation.legacy'\nimport './Betting-v1/models.legacy'\nimport './Betting-v1/totecalculator.legacy'\nimport './Betting-v1/betslip.legacy'\nimport './Betting-v1/summarypanel.legacy'\nimport './Betting-v1/offers.legacy'\nimport './Betting-v1/BettingCalculator.legacy'\nimport './Betting-v1/toteselections.legacy'\nimport './Betting-v1/fobracing-calculator.legacy'\nimport './Betting-v1/betwallet.legacy'\n\n// \"prod\"\nimport './Betting-v1/controllers.legacy'\nimport './Betting-v1/quinellalegin.legacy'\nimport './Betting-v1/controller-tote-calculator.legacy'\nimport './Betting-v1/controller-betslip.legacy'\nimport './Betting-v1/controller-addbetslip.legacy'\nimport './Betting-v1/tote.legacy'\nimport './Betting-v1/fob.legacy'\nimport './Betting-v1/specials.legacy'\nimport './Betting-v1/fobracing.legacy'\nimport './Betting-v1/quinellalegin.legacy'\nimport './Betting-v1/cash-ui-toggler.legacy'\n\n// Other\nimport './Betting-v1/maps.legacy'\nimport './Betting-v1/favouritenumbers.legacy'\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/include-legacy.js\n// module id = 174\n// module chunks = 5","define([\"require\", \"exports\", \"./Exceptions/InvariantFailureException\"], function (require, exports, InvariantFailureException_1) {\r\n    \"use strict\";\r\n    var Guard = (function () {\r\n        function Guard() {\r\n        }\r\n        Guard.stringNotNullOrEmpty = function (value) {\r\n            if (value == null || value.length === 0)\r\n                throw new InvariantFailureException_1.default(\"Invariant: String not empty not satisfied.\");\r\n        };\r\n        Guard.notNull = function (value) {\r\n            if (value == null)\r\n                throw new InvariantFailureException_1.default(\"Invariant: Value not null not satisfied.\");\r\n        };\r\n        Guard.arrayNotNullOrEmpty = function (value) {\r\n            if (value == null || value.length == 0)\r\n                throw new InvariantFailureException_1.default(\"Invariant: Array not null or empty not satisfied.\");\r\n        };\r\n        Guard.greaterThanZero = function (value) {\r\n            if (value <= 0)\r\n                throw new InvariantFailureException_1.default(\"Invariant: Value > 0 not satisfied.\");\r\n        };\r\n        Guard.greaterThanOrEqualZero = function (value) {\r\n            if (value < 0)\r\n                throw new InvariantFailureException_1.default(\"Invariant: Value >= 0 not satisfied.\");\r\n        };\r\n        Guard.greaterOrEqual = function (min, value) {\r\n            if (value < min)\r\n                throw new InvariantFailureException_1.default(\"Invariant: Value < Min not satisfied.\");\r\n        };\r\n        return Guard;\r\n    }());\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    exports.default = Guard;\r\n});\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/AppUtils/Framework/Guard.ts\n// module id = 179\n// module chunks = 5","define([\"require\", \"exports\", \"tslib\", \"../Map\", \"inversify\"], function (require, exports, tslib_1, Map_1, inversify_1) {\r\n    \"use strict\";\r\n    var Disposable = (function () {\r\n        function Disposable(eventAggregator, appWindow) {\r\n            this.evtAggregator = eventAggregator;\r\n            this.appWindow = appWindow;\r\n            this.disposableEventAggregatorSubscriptions = new Map_1.default();\r\n            this.disposed = false;\r\n            this.onDisposal = function () { };\r\n        }\r\n        Disposable.prototype.registerDisposals = function (func) {\r\n            this.onDisposal = func;\r\n        };\r\n        Disposable.prototype.dispose = function () {\r\n            if (this.disposed)\r\n                return;\r\n            this.disposed = true;\r\n            this.onDisposal();\r\n            for (var _i = 0, _a = this.disposableEventAggregatorSubscriptions.keys(); _i < _a.length; _i++) {\r\n                var topic = _a[_i];\r\n                this.removeSubscriptions(topic);\r\n            }\r\n            this.disposableEventAggregatorSubscriptions.clear();\r\n        };\r\n        Disposable.prototype.mergeDisposables = function (other) {\r\n            for (var _i = 0, _a = other.keys(); _i < _a.length; _i++) {\r\n                var topic = _a[_i];\r\n                if (this.disposableEventAggregatorSubscriptions.has(topic)) {\r\n                    this.disposableEventAggregatorSubscriptions.get(topic).concat(other.get(topic));\r\n                }\r\n                else {\r\n                    this.disposableEventAggregatorSubscriptions.set(topic, other.get(topic));\r\n                }\r\n            }\r\n        };\r\n        Disposable.prototype.safeSubscribe = function (topic, func) {\r\n            if (this.disposableEventAggregatorSubscriptions.has(topic)) {\r\n                this.disposableEventAggregatorSubscriptions.get(topic).push(func);\r\n            }\r\n            else {\r\n                this.disposableEventAggregatorSubscriptions.set(topic, [func]);\r\n            }\r\n            this.evtAggregator.subscribe(topic, func);\r\n        };\r\n        Disposable.prototype.removeSubscriptions = function (topic) {\r\n            var callbacks = this.disposableEventAggregatorSubscriptions.get(topic);\r\n            if (callbacks) {\r\n                for (var _i = 0, callbacks_1 = callbacks; _i < callbacks_1.length; _i++) {\r\n                    var func = callbacks_1[_i];\r\n                    this.evtAggregator.unsubscribe(topic, func);\r\n                }\r\n            }\r\n            this.disposableEventAggregatorSubscriptions.delete(topic);\r\n        };\r\n        return Disposable;\r\n    }());\r\n    Disposable = tslib_1.__decorate([\r\n        inversify_1.injectable(),\r\n        tslib_1.__metadata(\"design:paramtypes\", [Object, Object])\r\n    ], Disposable);\r\n    exports.Disposable = Disposable;\r\n});\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/AppUtils/Framework/Disposable/Disposable.ts\n// module id = 180\n// module chunks = 5","define([\"require\", \"exports\", \"tslib\", \"../Guard\", \"inversify\"], function (require, exports, tslib_1, Guard_1, inversify_1) {\r\n    \"use strict\";\r\n    var EventAggregator = (function () {\r\n        function EventAggregator() {\r\n        }\r\n        EventAggregator.prototype.subscribe = function (topic, func) {\r\n            Guard_1.default.stringNotNullOrEmpty(topic);\r\n            Guard_1.default.notNull(func);\r\n            amplify.subscribe(topic, func);\r\n        };\r\n        EventAggregator.prototype.publish = function (topic) {\r\n            var args = [];\r\n            for (var _i = 1; _i < arguments.length; _i++) {\r\n                args[_i - 1] = arguments[_i];\r\n            }\r\n            Guard_1.default.stringNotNullOrEmpty(topic);\r\n            amplify.publish.apply(amplify, [topic].concat(args));\r\n        };\r\n        EventAggregator.prototype.unsubscribe = function (topic, func) {\r\n            amplify.unsubscribe(topic, func);\r\n        };\r\n        return EventAggregator;\r\n    }());\r\n    EventAggregator = tslib_1.__decorate([\r\n        inversify_1.injectable(),\r\n        tslib_1.__metadata(\"design:paramtypes\", [])\r\n    ], EventAggregator);\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    exports.default = EventAggregator;\r\n});\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/AppUtils/Framework/Messaging/EventAggregator.ts\n// module id = 182\n// module chunks = 5","define([\"require\", \"exports\", \"tslib\", \"jquery\", \"Version\", \"inversify\", \"../../../Betting-v2/Model/ServiceError\"], function (require, exports, tslib_1, jQuery, version, inversify_1, ServiceError_1) {\r\n    \"use strict\";\r\n    var AppWindow = (function () {\r\n        function AppWindow(preferenceService) {\r\n            this.preferenceService = preferenceService;\r\n        }\r\n        AppWindow.prototype.addEventListener = function (evt, func, capture) {\r\n            window.addEventListener(evt, func, capture);\r\n        };\r\n        AppWindow.prototype.removeEventListener = function (evt, func) {\r\n            window.removeEventListener(evt, func);\r\n        };\r\n        AppWindow.prototype.scrollTo = function (selector, offset, delay) {\r\n            jQuery('html, body').animate({\r\n                scrollTop: jQuery(selector).offset().top + offset\r\n            }, delay);\r\n        };\r\n        AppWindow.prototype.domElementExists = function (selector) {\r\n            return !!jQuery(selector).length;\r\n        };\r\n        AppWindow.prototype.fetch = function (url, includeCredential) {\r\n            var request;\r\n            if (includeCredential) {\r\n                var requestInit = { credentials: \"include\" };\r\n                request = new Request(url, requestInit);\r\n            }\r\n            else {\r\n                request = new Request(url);\r\n            }\r\n            var clientTimeZoneOffset = (new Date().getTimezoneOffset()) / 60;\r\n            request.headers.set(\"Accept\", \"application/json\");\r\n            request.headers.set(\"ClientTimeZone\", clientTimeZoneOffset.toString());\r\n            request.headers.set(\"ClientScreenWidth\", window.innerWidth.toString());\r\n            request.headers.set(\"BettingPageRefresh\", this.preferenceService.bettingPageRefreshEnabled() ? \"True\" : \"False\");\r\n            var xTabTouchVersion = version.getTabTouchVersion();\r\n            if (xTabTouchVersion) {\r\n                request.headers.set(\"X-TabTouch-Version\", xTabTouchVersion);\r\n            }\r\n            return window.fetch(request)\r\n                .then(function (response) {\r\n                if (response.ok) {\r\n                    return response.json();\r\n                }\r\n                else {\r\n                    throw new ServiceError_1.ServiceError(response.status, response.statusText);\r\n                }\r\n            });\r\n        };\r\n        AppWindow.prototype.post = function (url, payload, includeCredential) {\r\n            var requestInit = { method: \"post\", body: JSON.stringify(payload) };\r\n            if (includeCredential) {\r\n                requestInit.credentials = \"include\";\r\n            }\r\n            var request = new Request(url, requestInit);\r\n            request.headers.set(\"Content-Type\", \"application/json\");\r\n            request.headers.set(\"Accept\", \"application/json\");\r\n            return window.fetch(request)\r\n                .then(function (response) {\r\n                if (response.ok) {\r\n                    return response.json();\r\n                }\r\n                else {\r\n                    throw new ServiceError_1.ServiceError(response.status, response.statusText);\r\n                }\r\n            });\r\n        };\r\n        AppWindow.prototype.changeHashTo = function (suffix) {\r\n            window.location.hash = suffix;\r\n        };\r\n        AppWindow.prototype.redirectTo = function (href) {\r\n            window.location.href = href;\r\n        };\r\n        AppWindow.prototype.requestAnimationFrame = function (fn) {\r\n            window.requestAnimationFrame(fn);\r\n        };\r\n        AppWindow.prototype.clearInterval = function (timerId) {\r\n            window.clearInterval(timerId);\r\n        };\r\n        return AppWindow;\r\n    }());\r\n    AppWindow = tslib_1.__decorate([\r\n        inversify_1.injectable(),\r\n        tslib_1.__param(0, inversify_1.inject(\"IPreferencesServiceWrapper\")),\r\n        tslib_1.__metadata(\"design:paramtypes\", [Object])\r\n    ], AppWindow);\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    exports.default = AppWindow;\r\n});\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/AppUtils/Framework/WindowManagement/AppWindow.ts\n// module id = 183\n// module chunks = 5","define([\"require\", \"exports\", \"tslib\", \"inversify\", \"PreferencesService\"], function (require, exports, tslib_1, inversify_1, PreferencesService) {\r\n    \"use strict\";\r\n    var PreferencesServiceWrapper = (function () {\r\n        function PreferencesServiceWrapper() {\r\n        }\r\n        PreferencesServiceWrapper.prototype.loggedInUser = function () {\r\n            var preferencesServiceLocal = PreferencesService;\r\n            return preferencesServiceLocal.loggedInUser();\r\n        };\r\n        PreferencesServiceWrapper.prototype.cashBettingEnabled = function () {\r\n            var preferencesServiceLocal = PreferencesService;\r\n            return preferencesServiceLocal.cashBettingEnabled();\r\n        };\r\n        PreferencesServiceWrapper.prototype.bettingPageRefreshEnabled = function () {\r\n            var preferencesServiceLocal = PreferencesService;\r\n            return preferencesServiceLocal.bettingPageRefreshEnabled();\r\n        };\r\n        return PreferencesServiceWrapper;\r\n    }());\r\n    PreferencesServiceWrapper = tslib_1.__decorate([\r\n        inversify_1.injectable(),\r\n        tslib_1.__metadata(\"design:paramtypes\", [])\r\n    ], PreferencesServiceWrapper);\r\n    exports.PreferencesServiceWrapper = PreferencesServiceWrapper;\r\n});\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/AppUtils/Framework/Utils/PreferencesServiceWrapper.ts\n// module id = 184\n// module chunks = 5","define([\"require\", \"exports\"], function (require, exports) {\r\n    \"use strict\";\r\n    var Map = (function () {\r\n        function Map() {\r\n            this._dict = {};\r\n            this._size = 0;\r\n        }\r\n        Object.defineProperty(Map.prototype, \"size\", {\r\n            get: function () {\r\n                return this._size;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Map.prototype.keys = function () {\r\n            var keys = [];\r\n            for (var hash in this._dict) {\r\n                if (this._dict.hasOwnProperty(hash)) {\r\n                    keys.push(this._dict[hash].key);\r\n                }\r\n            }\r\n            return keys;\r\n        };\r\n        Map.prototype.has = function (key) {\r\n            return this._dict.hasOwnProperty(this.toHash(key));\r\n        };\r\n        Map.prototype.get = function (key) {\r\n            var hash = this.toHash(key);\r\n            if (this._dict.hasOwnProperty(hash)) {\r\n                return this._dict[hash].value;\r\n            }\r\n            return undefined;\r\n        };\r\n        Map.prototype.set = function (key, value) {\r\n            var hash = this.toHash(key);\r\n            if (!this._dict.hasOwnProperty(hash)) {\r\n                ++this._size;\r\n            }\r\n            this._dict[hash] = { key: key, value: value };\r\n            return this;\r\n        };\r\n        Map.prototype.delete = function (key) {\r\n            var hash = this.toHash(key);\r\n            if (this._dict.hasOwnProperty(hash)) {\r\n                --this._size;\r\n                delete this._dict[hash];\r\n                return true;\r\n            }\r\n            return false;\r\n        };\r\n        Map.prototype.clear = function () {\r\n            this._dict = {};\r\n            this._size = 0;\r\n        };\r\n        Map.prototype.toHash = function (key) {\r\n            return \"#\" + key;\r\n        };\r\n        return Map;\r\n    }());\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    exports.default = Map;\r\n});\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/AppUtils/Framework/Map.ts\n// module id = 185\n// module chunks = 5","define([\"require\", \"exports\", \"tslib\", \"jquery\", \"inversify\", \"Logon\"], function (require, exports, tslib_1, jQuery, inversify_1, logon) {\r\n    \"use strict\";\r\n    var LogInHelper = (function () {\r\n        function LogInHelper() {\r\n        }\r\n        LogInHelper.prototype.isUserLoggedIn = function () {\r\n            var loggedOn = (jQuery('#LoggedOn').val() === 'True');\r\n            return loggedOn;\r\n        };\r\n        LogInHelper.prototype.presentLogIn = function () {\r\n            logon.login();\r\n            jQuery('html, body').animate({ scrollTop: 0 }, 0);\r\n        };\r\n        return LogInHelper;\r\n    }());\r\n    LogInHelper = tslib_1.__decorate([\r\n        inversify_1.injectable(),\r\n        tslib_1.__metadata(\"design:paramtypes\", [])\r\n    ], LogInHelper);\r\n    exports.LogInHelper = LogInHelper;\r\n});\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/AppUtils/Framework/Utils/LogInHelper.ts\n// module id = 186\n// module chunks = 5","define([\"rwwa-rx-state-machine\"],\n    function(stateMachine) {\n\n        return {\n            open: stateMachine.createIntent('OPEN MODAL'),\n            close: stateMachine.createIntent('CLOSE MODAL')\n        }\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/AppUtils/Framework/Intent/modal.js\n// module id = 187\n// module chunks = 5","define([\"require\", \"exports\", \"tslib\", \"./ProgressIndicatorBase\", \"inversify\", \"Nav\"], function (require, exports, tslib_1, ProgressIndicatorBase_1, inversify_1, nav) {\r\n    \"use strict\";\r\n    var ProgressIndicator = (function (_super) {\r\n        tslib_1.__extends(ProgressIndicator, _super);\r\n        function ProgressIndicator() {\r\n            return _super.call(this) || this;\r\n        }\r\n        ProgressIndicator.prototype.beginning = function () {\r\n            this.setServiceCallCompleted(false);\r\n            nav.showLoadingNoAuto();\r\n        };\r\n        ProgressIndicator.prototype.finished = function () {\r\n            this.setServiceCallCompleted(true);\r\n            nav.hideLoading();\r\n        };\r\n        ProgressIndicator.prototype.displayFor = function (promise) {\r\n            return nav.pushLoadingFor(promise);\r\n        };\r\n        return ProgressIndicator;\r\n    }(ProgressIndicatorBase_1.default));\r\n    ProgressIndicator = tslib_1.__decorate([\r\n        inversify_1.injectable(),\r\n        tslib_1.__metadata(\"design:paramtypes\", [])\r\n    ], ProgressIndicator);\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    exports.default = ProgressIndicator;\r\n});\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/AppUtils/Framework/ProgressIndicator/ProgressIndicator.ts\n// module id = 189\n// module chunks = 5","define([\"require\", \"exports\", \"tslib\", \"inversify\", \"countdown\"], function (require, exports, tslib_1, inversify_1, countdown) {\r\n    \"use strict\";\r\n    var CountdownTimer = (function () {\r\n        function CountdownTimer() {\r\n        }\r\n        CountdownTimer.prototype.register = function (start, callback, options) {\r\n            return countdown(start, callback, options);\r\n        };\r\n        CountdownTimer.prototype.cancel = function (timer) {\r\n            window.clearInterval(timer);\r\n        };\r\n        Object.defineProperty(CountdownTimer.prototype, \"HOURS\", {\r\n            get: function () {\r\n                return countdown.HOURS;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(CountdownTimer.prototype, \"MINUTES\", {\r\n            get: function () {\r\n                return countdown.MINUTES;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(CountdownTimer.prototype, \"SECONDS\", {\r\n            get: function () {\r\n                return countdown.SECONDS;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        return CountdownTimer;\r\n    }());\r\n    CountdownTimer = tslib_1.__decorate([\r\n        inversify_1.injectable(),\r\n        tslib_1.__metadata(\"design:paramtypes\", [])\r\n    ], CountdownTimer);\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    exports.default = CountdownTimer;\r\n});\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/AppUtils/Framework/Timers/CountdownTimer.ts\n// module id = 190\n// module chunks = 5","define([\"require\", \"exports\"], function (require, exports) {\r\n    \"use strict\";\r\n    var CurrencyConverter = (function () {\r\n        function CurrencyConverter() {\r\n        }\r\n        CurrencyConverter.prototype.toMoney = function (value, decimalNumbers, currencySymbol, decimalSymbol, thousandsSymbol) {\r\n            var n = value, c = isNaN(decimalNumbers = Math.abs(decimalNumbers)) ? 2 : decimalNumbers, d = decimalSymbol == undefined ? \".\" : decimalSymbol, t = thousandsSymbol == undefined ? \",\" : thousandsSymbol, m = currencySymbol == undefined ? \"$\" : currencySymbol, s = n < 0 ? \"-\" : \"\", nubmerValue = Number(Math.abs(+n || 0).toFixed(c)), integerValue = parseInt(nubmerValue.toString()), integerString = integerValue.toString(), j = (j = integerString.length) > 3 ? j % 3 : 0;\r\n            var str = s + m + (j ? integerString.substr(0, j) + t : \"\") + integerString.substr(j).replace(/(\\d{3})(?=\\d)/g, \"$1\" + t) + (c ? d + Math.abs(nubmerValue - integerValue).toFixed(c).slice(2) : \"\");\r\n            return str;\r\n        };\r\n        return CurrencyConverter;\r\n    }());\r\n    exports.CurrencyConverter = CurrencyConverter;\r\n});\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/AppUtils/Utils/CurrencyConverter.ts\n// module id = 191\n// module chunks = 5","define([\"require\", \"exports\"], function (require, exports) {\r\n    \"use strict\";\r\n    var ServiceError = (function () {\r\n        function ServiceError(status, responseText) {\r\n            this.status = status;\r\n            this.responseText = responseText;\r\n        }\r\n        return ServiceError;\r\n    }());\r\n    exports.ServiceError = ServiceError;\r\n});\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Betting-v2/Model/ServiceError.ts\n// module id = 192\n// module chunks = 5","define([\"./Tipping\", \"jquery\", \"../../Foundation/Navigation/Nav\"], function (tip, jQuery, nav) {\n    return {\n        init: initTippingError\n    };\n\n    function initTippingError(backUrl, backText) {\n        jQuery('#btnBetErrorBackToPools').click(function () {\n            return tip.navigateErrorToHref(jQuery(this));\n        });\n\n        jQuery('#btnBetErrorBackToGames').click(function () {\n            return tip.navigateErrorToHref(jQuery(this));\n        });\n\n        jQuery('#btnBetErrorBackToCalc').click(function () {\n            return handleBetError(tip.states.calc);\n        });\n\n        jQuery('#btnBetErrorDone').click(function () {\n            return handleBetError(tip.states.none);\n        });\n    }\n\n    //Returns the bet to a new state after an error has occurred\n    //only supported states are none and calculator (which don't require data).\n    function handleBetError(newState) {\n        nav.hideErrorPopup();\n        return tip.changeTippingState(newState);\n    }\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Betting-v1/Tipping/TippingError.js\n// module id = 193\n// module chunks = 5","define([\"./Tipping\", \"jquery\", \"../../Foundation/Navigation/Nav\", \"../../Foundation/TabTouch\", \"../../Foundation/Common\"], function (tip, jQuery, nav, tabtouch, common) {\n    var checked = \"checked\";\n    var teams = { A: \"Away\", D: \"Draw\", H: \"Home\" };\n    var gameArray = []; //Array holding the checkbox name for each game.\n\n    return {\n        init: initTippingGames\n    };\n\n    function initTippingGames(url, backText) {\n        tabtouch.initCommon(url, backText);\n\n        CALC.initCommonCalculator(false);\n        CALC.initCalculator('calculator');\n\n        tip.initHomeButton();\n\n        jQuery('.refresh-button').click(function () {\n            refreshGames();\n            return false;\n        });\n\n        //create the game array -- grab all the home checkbox names.\n        gameArray = [];\n        jQuery('#tip-list input[type=\"checkbox\"][value=\"H\"]').each(function () {\n            gameArray.push(jQuery(this).attr('name'));\n        });\n\n        jQuery('button.cancel').click(function () {\n            jQuery('#tip-list input[type=\"checkbox\"]').removeAttr(checked);\n            updateUIState();\n        });\n\n        jQuery('button.place-bet-player').click(function () {\n            saveSelections();\n            tip.changeTippingState(tip.states.calc);\n        });\n\n        jQuery('#tip-list input[type=\"checkbox\"]').change(function () {\n            updateUIState();\n        });\n\n        tip.initInfoScroll();\n        initProcessButtons();\n        updateUIState();\n    }\n\n\n    function refreshGames() {\n        saveSelections();\n        saveInvestment();\n        var action = jQuery('.refresh-button').attr('href');\n        nav.ajaxPost(action,\n                     jQuery('form#betting-form').serialize(),\n                     processRefreshResponse);\n    }\n\n    function initProcessButtons() {\n        jQuery(\"a#betcost\").click(function () {\n            if (jQuery(this).is('.disabled') === false) {\n\n                saveInvestment();\n                nav.ajaxPost(jQuery(this).attr('href'),\n                   jQuery('form#betting-form').serialize(),\n                   processBetCostResponse,\n                   {\n                       control: jQuery(this)\n                   }\n                );\n            }\n            return false;\n\n        });\n\n        jQuery(\"a#bettingFormNext\").click(function () {\n            if (jQuery(this).is('.disabled') === false) {\n\n                saveInvestment();\n                nav.ajaxPost(jQuery(this).attr('href'),\n                    jQuery('form#betting-form').serialize(),\n                    processProposeBetResponse);\n            }\n            return false;\n        });\n    }\n\n    function saveSelections() {\n        jQuery('#Selections').val(extractSelectionArray(true).join('/'));\n    }\n\n    function saveInvestment() {\n        jQuery('#Investment').val(jQuery('input.bet-value').val());\n    }\n\n    // Converts the current selections into an array for easy processing\n    function extractSelectionArray(updateSelSummary) {\n        var selections = [];\n        var display;\n        var gameRow;\n\n        if (updateSelSummary) {\n            jQuery('ul#sel-summary').html('');\n        }\n\n        for (var i = 0; i < gameArray.length; i++) {\n            selections[i] = '';\n            display = '';\n            gameRow = jQuery('#tip-list li').eq(i);\n            jQuery('#tip-list input[name=\"' + gameArray[i] + '\"]:checked').each(function () {\n                selections[i] += jQuery(this).val();\n                if (updateSelSummary) {\n                    display += ((display.length > 0) ? ', ' : '') + teams[jQuery(this).val()];\n                }\n            });\n\n            if (updateSelSummary) {\n                jQuery('ul#sel-summary').append('<li>Game ' + gameArray[i].substring(1) + ' - ' + gameRow.find('label.home').text() + ' v ' + gameRow.find('label.away').text() + '<br />' + display + '</span></li>');\n            }\n        }\n\n        common.initDisplayListStyle(jQuery('ul#sel-summary'));\n\n        return selections;\n    }\n\n    function processBetCostResponse(data) {\n        common.showPopup(jQuery('#how-much').html(data));\n\n        jQuery('#how-much').click(function () {\n            jQuery(this).fadeOut('fast', function () {\n                common.setDisableState(jQuery(\"a#betcost\"), true);\n            });\n        });\n    }\n\n    function processProposeBetResponse(data) {\n        tip.changeTippingState(tip.states.confirm, data);\n    }\n\n    function processRefreshResponse(data) {\n        jQuery('#main-container').html(data);\n\n        //test for existence of input#Selections -- it won't be there if the pool has closed.\n        if (jQuery(\"input#Selections\").length) {\n            saveSelections();\n        }\n    }\n\n    // Enables/Disables buttons based on the current selections\n    function updateUIState() {\n        var selections = extractSelectionArray(false);\n        var noSelections = true;\n        var allSelected = true;\n\n        for (var i = 0; i < selections.length; i++) {\n            if (selections[i] !== '') {\n                noSelections = false;\n            }\n\n            if (selections[i] === '') {\n                allSelected = false;\n            }\n        }\n\n        common.setDisableState(jQuery('button.cancel'), !noSelections);\n        common.setDisableState(jQuery('button.place-bet-player'), allSelected);\n    }\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Betting-v1/Tipping/TippingGame.js\n// module id = 194\n// module chunks = 5","define([\"jquery\", \"./Tipping\", \"../../Foundation/Navigation/Nav\", \"../../Foundation/TabTouch\"], function (jQuery, tip, nav, tabtouch) {\n    return {\n        init: initTippingPools\n    };\n\n    function initTippingPools(url, backText) {\n        tabtouch.initCommon(url, backText);\n\n        tip.initHomeButton();\n\n        jQuery('#prev-day').click(function () {\n            return tip.navigateToHref(jQuery(this));\n        });\n\n        jQuery('#next-day').click(function () {\n            return tip.navigateToHref(jQuery(this));\n        });\n\n        jQuery('.pool').click(function () {\n            return tip.navigateToHref(jQuery(this));\n        });\n\n        jQuery('.refresh-button').click(function () {\n            return refreshPools();\n        });\n    }\n\n    function refreshPools() {\n        return nav.refresh();\n    }\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Betting-v1/Tipping/TippingPool.js\n// module id = 195\n// module chunks = 5","define([\"./Tipping\", \"jquery\", \"../../Foundation/Navigation/Nav\"], function (tip, jQuery, nav) {\n    return {\n        init: initTippingPropose\n    };\n   \n    function initTippingPropose(backUrl, backText) {\n        var locationDetailsAppender = new LocationDetailsAppender();\n\n        jQuery('#btnCancel').click(function () {\n            return tip.navigateToHref(jQuery(this));\n        });\n\n        jQuery(\"a#placeBetNow\").click(function () {\n            nav.ajaxPost(jQuery(this).attr('href'),\n                    //jQuery('form#betting-form').serialize(),\n                    locationDetailsAppender.addToUrlEncodedData(jQuery('form#betting-form').serialize()),\n                    processBetPlacedResponse,\n                    {\n                        control: jQuery(this)\n                    }\n            );\n\n            return false;\n        });\n    }\n\n    function processBetPlacedResponse(data) {\n        tip.changeTippingState(tip.states.receipt, data);\n    }\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Betting-v1/Tipping/TippingPropose.js\n// module id = 196\n// module chunks = 5","define([\"jquery\", \"./Tipping\"], function (jQuery, tip) {\n    return {\n        init: initTippingReceipt\n    };\n\n    function initTippingReceipt(backUrl, backText) {\n        jQuery('#btnTippingPools').click(function() {\n            return tip.navigateToHref(jQuery(this));\n        });\n\n        jQuery('#btnTippingGames').click(function() {\n            return tip.navigateToHref(jQuery(this));\n        });\n    }\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Betting-v1/Tipping/TippingReceipt.js\n// module id = 197\n// module chunks = 5","define([\"jquery\", \"../../Foundation/Navigation/Nav\", \"../../Foundation/TabTouch\", \"./Tipping\"], function(jQuery, nav, tabtouch, tip) {\n    return {\n        init: initTippingResults\n    };\n\n    function initTippingResults(url, backText) {\n        tabtouch.initCommon(url, backText);\n        tip.initInfoScroll();\n\n        tip.initHomeButton();\n\n        jQuery('.refresh-button').click(function() {\n            return refreshResults();\n        });\n    }\n\n    function refreshResults() {\n        return nav.refresh();\n    }\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Betting-v1/Tipping/TippingResults.js\n// module id = 198\n// module chunks = 5","define([\"knockout\", \"jquery\", \"underscore\", \"../Utils/defineDelegate\"], function(ko, jQuery, _, defineDelegate) {\n    var Delegate = defineDelegate({ require: [\"heading\", \"onLogonSuccessful\", \"loading\"] });\n\n    function logonViewModel(params) {\n        var self = this;\n        _.bindAll(self, \"attemptChangePassword\");\n        var delegate = self.delegate = new Delegate(params.delegate);\n\n        delegate.heading(\"Temporary Password\");\n\n        delegate.notifyNavigation(\"\");\n\n        _.extend(self, {\n            changePasswordUrl: params.changePasswordUrl,\n            loading: delegate.loading,\n\n            accountNumber: delegate.accountNumber,\n            currentPassword: delegate.password,\n\n            plaintextPassword: ko.observable(\"\"),\n            plaintextPasswordFocused: ko.observable(false),\n\n            displayPassword: ko.observable(false),\n            displayPasswordFocused: ko.observable(false),\n            errorMessage: ko.observable(),\n\n\n        });\n\n        self.displayPasswordLabelText = ko.pureComputed(function() {\n            if (self.displayPassword()) {\n                return \"Hide\";\n            }\n            return \"Show\";\n        });\n\n\n        self.passwordInputType = ko.pureComputed(function() {\n            if (self.displayPassword()) {\n                return \"text\";\n            }\n            return \"password\";\n        });\n\n\n        self.conditionNumbersOnly = ko.pureComputed(function() {\n            return !!self.plaintextPassword() && !!self.plaintextPassword().match(/^\\d*$/);\n        });\n\n        self.conditionLength = ko.pureComputed(function() {\n            return !!self.plaintextPassword().match(/^\\d{4,8}$/);\n        });\n        self.conditionNotEqualToAccountNumber = ko.pureComputed(function() {\n            return !!self.plaintextPassword() && self.plaintextPassword() != self.accountNumber;\n        });\n        self.conditionRepeatingDigits = ko.pureComputed(function() {\n            return !!self.plaintextPassword() && !self.plaintextPassword().match(/(.)\\1{2,}/);\n        });\n\n        self.isValid = ko.pureComputed(function() {\n            return self.conditionNumbersOnly() && self.conditionLength() && self.conditionRepeatingDigits() && self.conditionNotEqualToAccountNumber();\n        });\n\n\n        delegate.loading(false);\n    }\n\n    _.extend(logonViewModel.prototype, {\n        attemptChangePassword: function() {\n            var self = this;\n\n            if (!this.isValid()) {\n                return;\n            }\n\n            self.loading(true);\n\n            var data = {\n                accountNumber: this.accountNumber,\n                password: this.currentPassword,\n                newPassword: this.plaintextPassword(),\n            };\n\n            jQuery.ajax(\n                {\n                    type: \"POST\",\n                    url: this.changePasswordUrl,\n                    contentType: \"application/x-www-form-urlencoded; charset=UTF-8\",\n                    data: data\n                })\n                .always(function() {\n                    self.loading(false);\n                })\n                .then(function(result) {\n                    if (result.IsSuccessful) {\n                        self.delegate.onLogonSuccessful(data.accountNumber);\n                        self.delegate.notifyNavigation(\"success\");\n                    } else {\n                        self.delegate.notifyNavigation(\"invalid\");\n                        self.errorMessage(result.ErrorMessage);\n                    }\n                }).fail(function() {\n                    self.errorMessage(\"Sorry, something went wrong. Please try again.\");\n                });\n        }\n    });\n\n\n    return logonViewModel;\n})\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/Components/Authentication/ChangePassword/ChangePasswordViewModel.js\n// module id = 199\n// module chunks = 5","define(['knockout', \"./ChangePasswordViewModel\", 'text-loader!./ChangePassword.tpl.html'], function (ko, Vm, template) {\n    ko.components.register('tt-logon-change-password', {\n        viewModel: Vm,\n        template: template\n    });\n})\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/Components/Authentication/ChangePassword/register.js\n// module id = 200\n// module chunks = 5","define([\"knockout\", \"jquery\", \"underscore\", \"../Utils/defineDelegate\"], function(ko, jQuery, _, defineDelegate) {\n    var Delegate = defineDelegate({ require: [\"heading\", \"beginRecoverPassword\", \"beginChangePassword\", \"onLogonSuccessful\", \"loading\"] });\n\n    function logonViewModel(params) {\n        var self = this;\n        _.bindAll(self, \"reset\", \"attemptLogin\");\n        var delegate = self.delegate = new Delegate(params.delegate);\n        delegate.heading(\"Login\");\n\n        delegate.setResetFn(this.reset);\n\n        _.extend(self, {\n            logonUrl: params.logonUrl,\n            loading: delegate.loading,\n            accountNumber: ko.observable(delegate.defaultAccountNumber),\n            accountNumberFocused: ko.observable(),\n            password: ko.observable(),\n            passwordFocused: ko.observable(),\n            rememberUser: ko.observable(delegate.defaultRememberAccount),\n            rememberUserFocused: ko.observable(),\n            errorMessage: ko.observable(),\n            beginRecoverPassword: delegate.beginRecoverPassword,\n            beginRecoverAccountNumber: delegate.beginRecoverAccountNumber,\n            beginChangePassword: delegate.beginChangePassword,\n            signUp: delegate.beginSignUp\n        });\n\n        self.isValid = ko.pureComputed(function() {\n            return !!self.accountNumber() && !!self.password();\n        });\n    }\n\n    _.extend(logonViewModel.prototype, {\n        reset: function() {\n            this.accountNumber(this.delegate.defaultAccountNumber);\n            this.accountNumberFocused(false);\n            this.password(\"\");\n            this.passwordFocused(false);\n            this.rememberUser(this.delegate.defaultRememberAccount);\n            this.rememberUserFocused(false);\n            this.errorMessage(null);\n        },\n\n        attemptLogin: function() {\n            var self = this;\n\n            self.loading(true);\n\n            var data = {\n                accountNumber: this.accountNumber(),\n                password: this.password(),\n                rememberAccount: this.rememberUser()\n            };\n\n            jQuery.ajax(\n                {\n                    type: \"POST\",\n                    url: this.logonUrl,\n                    contentType: \"application/x-www-form-urlencoded; charset=UTF-8\",\n                    data: data\n                })\n                .always(function() {\n                    self.delegate.loading(false);\n                })\n                .then(function(result) {\n                    if (result.IsSuccessful) {\n                        self.delegate.onLogonSuccessful(data.accountNumber);\n                        self.delegate.notifyNavigation(\"success\");\n                    } else {\n                        if (result.MustChangePassword) {\n                            self.beginChangePassword(data);\n                        } else {\n                            self.delegate.notifyNavigation(\"invalid\");\n                            self.errorMessage(\"The account or password details you entered are invalid. Please try again.\");\n                        }\n\n                    }\n                }).fail(function() {\n                    self.errorMessage(\"Sorry, something went wrong. Please try again.\");\n                });;\n        }\n    });\n\n\n    return logonViewModel;\n})\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/Components/Authentication/Logon/LogonViewModel.js\n// module id = 201\n// module chunks = 5","define(['knockout', \"./LogonViewModel\", 'text-loader!./Logon.tpl.html'], function (ko, Vm, template) {\n    ko.components.register('tt-logon', {\n        viewModel: Vm,\n        template: template\n    });\n})\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/Components/Authentication/Logon/register.js\n// module id = 202\n// module chunks = 5","define(['knockout', 'underscore', '../../../Services/MessageBusService', '../../../Navigation/Nav', '../../../Logon', '../../../Window'], function (ko, _, msgBusService, nav, logon, window) {\n    //\"window\" was a dependency - removed?\n\n    function authenticationViewModel(params) {\n        var self = this;\n\n        self.currentStepNumber = 1;\n        self.shouldUpdateStepNumber = true;\n        self.steppedThroughForgottenPassword = false;\n        self.registeredPopState = false;\n        self.depth = 0;\n        self.stack = [1];\n        self.pastFinalStep = false;\n\n        _.bindAll(self, \"beginRecoverPassword\", \"willShow\", \"popstate\", \"prepare\", \"beginRecoverAccountNumber\", \"beginChangePassword\", \"beginSignUp\", \"close\", \"reset\", \"_showLogon\", \"_showRecoverPassword\", \"_showChangePassword\", \"_showRecoverAccountNumber\");\n\n        self.currentWorkflow = ko.observable();\n        self.loading = ko.observable();\n        self.heading = ko.observable();\n        self.showLogon = ko.pureComputed(self._showLogon);\n        self.showRecoverPassword = ko.pureComputed(self._showRecoverPassword);\n        self.showRecoverAccountNumber = ko.pureComputed(self._showRecoverAccountNumber);\n        self.showChangePassword = ko.pureComputed(self._showChangePassword);\n        self.logonUrl = params.logonUrl;\n        self.changePasswordUrl = params.changePasswordUrl;\n        self.progressStepNumSub = null;\n        self.loadingSub = null;\n\n        self.backHandler = ko.observable();\n\n        var currentStepNumber = function (stepNumber) {\n\n            if (!self.shouldUpdateStepNumber) {\n                self.shouldUpdateStepNumber = true;\n                return;\n            }\n\n            if (++stepNumber === self.currentStepNumber) {\n                return;\n            }\n            self.currentStepNumber = Math.max(self.currentStepNumber, stepNumber);\n            self.stack.push(stepNumber);\n\n            history.pushState({ stepNumber: stepNumber, stack: _.clone(self.stack) }, null);\n\n            self.shouldUpdateStepNumber = false;\n        };\n\n        self.progressDelegate = {\n            numberOfSteps: ko.observable(0),\n            currentStepNumber: ko.observable(1).extend({ notify: \"always\" })\n        };\n\n        self.progressStepNumSub = self.progressDelegate.currentStepNumber.subscribe(function (value) {\n            currentStepNumber(value);\n        });\n\n        self.recoverPasswordDelegate = {\n            onWorkflowComplete: function () {\n                self.reset();\n                self.pastFinalStep = true;\n            },\n            onWorkflowBackedOut: self.reset,\n            heading: self.heading,\n            loading: self.loading,\n            currentStepNumber: self.progressDelegate.currentStepNumber,\n            numberOfSteps: self.progressDelegate.numberOfSteps,\n            attachBackHandler: function (fn) {\n                self.backHandler(fn);\n            },\n            beginSignUp: self.beginSignUp,\n            beginAccountNumberRecovery: self.beginRecoverAccountNumber,\n            notifyNavigation: function (p) { msgBusService.publish('nav.nav', \"#account/recoverPassword/\" + p); }\n        };\n\n        self.recoverAccountNumberDelegate = {\n            onWorkflowComplete: function () {\n                self.reset();\n                self.pastFinalStep = true;\n            },\n            onWorkflowBackedOut: function () {\n\n\n                self.backHandler(null);\n                self.progressDelegate.numberOfSteps(0);\n\n                if (self.steppedThroughForgottenPassword) {\n                    self.currentStepNumber = 2;\n                    history.pushState({ stepNumber: 1 }, null);\n                    self.currentWorkflow(self.WORKFLOW_RECOVER_PASSWORD);\n                } else {\n                    self.currentStepNumber = 1;\n                    self.currentWorkflow(self.WORKFLOW_LOGON);\n                }\n                self.loading(false);\n\n            },\n            heading: self.heading,\n            loading: self.loading,\n            currentStepNumber: self.progressDelegate.currentStepNumber,\n            numberOfSteps: self.progressDelegate.numberOfSteps,\n            attachBackHandler: function (fn) {\n                self.backHandler(fn);\n            },\n            beginSignUp: self.beginSignUp,\n            notifyNavigation: function (p) { msgBusService.publish('nav.nav', \"#account/accountNumber/\" + p); }\n        };\n\n        self.logonDelegate = {\n            setResetFn: function (fn) { self.resetLogon = fn; },\n            onLogonSuccessful: function (accountNumber) { logon.ajaxLogonState(true, accountNumber) },\n            beginRecoverPassword: self.beginRecoverPassword,\n            beginRecoverAccountNumber: self.beginRecoverAccountNumber,\n            beginChangePassword: self.beginChangePassword,\n            beginSignUp: self.beginSignUp,\n            loading: self.loading,\n            heading: self.heading,\n            defaultRememberAccount: params.rememberAccount,\n            defaultAccountNumber: params.accountNumber,\n            notifyNavigation: function (p) { msgBusService.publish('nav.nav', \"#account/login/\" + p); }\n        };\n\n        self.changePasswordDelegate = {\n            heading: self.heading,\n            loading: self.loading,\n            changePasswordUrl: params.changePasswordUrl,\n            onLogonSuccessful: function (accountNumber) { logon.ajaxLogonState(true, accountNumber) },\n            notifyNavigation: function (p) { msgBusService.publish('nav.nav', \"#account/changePassword/\" + p); }\n        }\n\n        self.reset();\n\n        self.loadingSub = self.loading.subscribe(function (value) {\n            if (value) {\n                nav.showLoadingFullScreenFixed();\n            } else {\n                nav.hideLoading();\n            };\n        });\n\n        msgBusService.publish('AUTH.onCreate', this.uniqueId);\n\n        self.dispose = function() {\n            self.progressStepNumSub.dispose();\n            self.loadingSub.dispose();\n\n            window.removeEventListener(\"popstate\", this.popstate);\n        }\n    }\n\n    _.extend(authenticationViewModel.prototype, {\n        WORKFLOW_LOGON: { type: 'Logon' },\n        WORKFLOW_RECOVER_PASSWORD: { type: 'RecoverPassword' },\n        WORKFLOW_RECOVER_ACCOUNT_NUMBER: { type: 'RecoverAccountNumber' },\n        WORKFLOW_CHANGE_PASSWORD: { type: 'ChangePassword' },\n\n\n        beginSignUp: function () {\n            nav.showLoading();\n            location.href = \"/SignUp/CreateAccount\";\n        },\n\n        beginRecoverPassword: function () {\n            var self = this;\n            self.loading(true);\n            self.steppedThroughForgottenPassword = true;\n            self.shouldUpdateStepNumber = true;\n            self.currentWorkflow(this.WORKFLOW_RECOVER_PASSWORD);\n        },\n\n        beginChangePassword: function (data) {\n            _.extend(this.changePasswordDelegate, data);\n            var self = this;\n            self.loading(true);\n            self.currentWorkflow(this.WORKFLOW_CHANGE_PASSWORD);\n        },\n\n        beginRecoverAccountNumber: function () {\n            var self = this;\n            self.loading(true);\n            self.currentWorkflow(this.WORKFLOW_RECOVER_ACCOUNT_NUMBER);\n        },\n\n        popstate: function (event) {\n            var state = event.state;\n            var that = this;\n\n            if (state && state.stepNumber) {\n\n                if (state.stepNumber < that.currentStepNumber) {\n                    if (typeof that.backHandler() === \"function\") {\n                        that.backHandler()();\n                    } else {\n                        that.close();\n                    }\n                } else {\n\n                    if (that.pastFinalStep) {\n                        that.pastFinalStep = false;\n                        history.pushState({ stepNumber: 1, stack: [1] }, null);\n                        that.close();\n                    } else {\n                        that.close();\n                    }\n                }\n            } else {\n                that.close();\n            }\n        },\n\n        reset: function () {\n            window.removeEventListener(\"popstate\", this.popstate);\n\n            if (!!this.resetLogon) {\n                this.resetLogon();\n            }\n            this.backHandler(null);\n            this.currentStepNumber = 1;\n            this.progressDelegate.numberOfSteps(0);\n            this.steppedThroughForgottenPassword = false;\n            this.stack = [];\n            this.pastFinalStep = false;\n            this.currentWorkflow(this.WORKFLOW_LOGON);\n            this.loading(false);\n        },\n\n        prepare: function () {\n            this.depth = 0;\n            this.backHandler(null);\n            this.progressDelegate.numberOfSteps(0);\n            this.currentStepNumber = 1;\n            history.pushState({ stepNumber: 1, stack: [1] }, null);\n            this.currentWorkflow(this.WORKFLOW_LOGON);\n            this.loading(false);\n            this.steppedThroughForgottenPassword = false;\n            this.stack = [1];\n            this.shouldUpdateStepNumber = true;\n            this.pastFinalStep = false;\n        },\n\n        close: function () {\n            this.reset();\n\n            logon.closeLoginPopup();\n\n            this.registeredPopState = false;\n            this.shouldUpdateStepNumber = false;\n        },\n\n        _showLogon: function () {\n            return this.currentWorkflow() === this.WORKFLOW_LOGON;\n        },\n\n        _showRecoverPassword: function () {\n            return this.currentWorkflow() === this.WORKFLOW_RECOVER_PASSWORD;\n        },\n        _showRecoverAccountNumber: function () {\n            return this.currentWorkflow() === this.WORKFLOW_RECOVER_ACCOUNT_NUMBER;\n        },\n\n        _showChangePassword: function (data) {\n            return this.currentWorkflow() === this.WORKFLOW_CHANGE_PASSWORD;\n        },\n\n        _notifyNavigation: function (path) {\n            msgBusService.publish('nav.nav', url);\n        },\n\n        willShow: function () {\n            this.reset();\n            this.prepare();\n            \n            this.depth = Math.max(window.history.length, 0);\n\n            if (!this.registeredPopState) {\n                window.addEventListener(\"popstate\", this.popstate);\n                this.registeredPopState = true;\n            }\n        }\n\n    });\n\n\n    return authenticationViewModel;\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/Components/Authentication/Neo/NeoViewModel.js\n// module id = 203\n// module chunks = 5","define([\"knockout\", \"underscore\", \"../Utils/defineDelegate\"], function(ko, _, defineDelegate) {\n    var Delegate = defineDelegate({ required: ['numberOfSteps', \"currentStepNumber\"] });\n\n    function progressViewmodel(params) {\n        var self = this;\n\n        _.bindAll(self, \"isCurrentStep\", \"steps\");\n\n        var delegate = new Delegate(params.delegate);\n\n        self.numberOfSteps = delegate.numberOfSteps;\n        self.currentStepNumber = delegate.currentStepNumber;\n    }\n\n    _.extend(progressViewmodel.prototype, {\n        isCurrentStep: function(index) {\n            return this.currentStepNumber() === (index() + 1);\n        },\n\n        steps: function() {\n            return Array(this.numberOfSteps() || 0);         \n        }\n    });\n    return progressViewmodel;\n})\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/Components/Authentication/Progress/ProgressViewModel.js\n// module id = 204\n// module chunks = 5","define(['knockout', \"./ProgressViewModel\", 'text-loader!./Progress.tpl.html'], function(ko, Vm, template) {\n        ko.components.register('tt-progress-steps', {\n            viewModel: Vm,\n            template: template\n        });\n    });  \n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/Components/Authentication/Progress/register.js\n// module id = 205\n// module chunks = 5","define([\"knockout\", \"underscore\", \"../Utils/defineDelegate\", \"../../../Services/ApiService\", \"../../../Services/RemoteComponentService\"], function (ko, _, defineDelegate, apiService, remoteComponents) {\n\n    var Delegate = defineDelegate({ required: ['heading', \"loading\"] });\n\n    function viewModel(params) {\n        var self = this;\n        _.bindAll(self, \"_onLoadError\", '_loadRemoteComponent', '_onRemoteComponentLoaded');\n\n        var delegate = self.delegate = new Delegate(params.delegate);\n\n        delegate.heading(\"Account Number Recovery\");\n\n        self.loading = delegate.loading;\n        self.loading(true);\n        self.remoteComponentLoadedWithoutError = ko.observable(false);\n        self.errorLoadingRemote = ko.observable(false);\n\n        self._loadRemoteComponent();\n    }\n\n    _.extend(viewModel.prototype, {\n        _loadRemoteComponent: function () {\n            var self = this;\n\n            apiService.fetchJsonFromApi(\"/api/config/RwwaIdentityHost\").then(function(identityHost) {\n                apiService.fetchJsonFromApi(identityHost).then(function(identityIndex) {\n                    var url = identityIndex.recoverAccountNumber.components.knockout.version[2].url;\n\n                    remoteComponents.defineModule('knockout', function() {\n                        return require('knockout');\n                    });\n\n                    remoteComponents.fetchComponent(url).then(function(component) {\n                        component.init(identityHost);\n                        self._onRemoteComponentLoaded();\n                    }).catch(self._onLoadError);\n                }).catch(self._onLoadError);\n            }).catch(self._onLoadError);\n        },\n\n        _onRemoteComponentLoaded: function() {\n            this.remoteComponentLoadedWithoutError(true);\n            this.loading(false);\n        },\n\n        _onLoadError: function (err) {\n            this.delegate.heading(\"Sorry\");\n            this.loading(false);\n            this.errorLoadingRemote(true);\n            console.error(\"Failed to load: \" + err);\n        }\n    });\n\n    return viewModel;\n})\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/Components/Authentication/RecoverAccountNumber/RecoverAccountNumberViewModel.js\n// module id = 206\n// module chunks = 5","define(['knockout', \"./RecoverAccountNumberViewModel\", 'text-loader!./RecoverAccountNumber.tpl.html'], function (ko, Vm, template) {\n  \n    ko.components.register('tt-recover-account-number', {\n        viewModel: Vm,\n        template: template\n    });\n})\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/Components/Authentication/RecoverAccountNumber/register.js\n// module id = 207\n// module chunks = 5","define([\"knockout\", \"underscore\", \"../Utils/defineDelegate\"], function (ko, _, defineDelegate) {\n\n    var Delegate = defineDelegate({ required: ['heading', \"loading\"] });\n\n    function viewModel(params) {\n        var self = this;\n        _.bindAll(self, \"_onLoadError\", '_loadRemoteComponent', '_onRemoteComponentLoaded');\n\n        var delegate = self.delegate = new Delegate(params.delegate);\n\n        delegate.heading(\"Password Reset\");\n\n        self.loading = delegate.loading;\n        self.loading(true);\n        self.remoteComponentLoadedWithoutError = ko.observable(false);\n        self.errorLoadingRemote = ko.observable(false);\n\n        self._loadRemoteComponent();\n    }\n\n    _.extend(viewModel.prototype, {\n        _loadRemoteComponent: function () {\n            var self = this;\n\n            try {\n                apiService.fetchXmlFromApiAsString(\"/api/config/RwwaIdentityHost\").then(function(identityHost) {\n                    apiService.fetchXmlFromApi(identityHost).then(function(identityIndex) {\n                        apiService.fetchXmlFromApi(identityIndex.recoverPassword.components.knockout.version[2].url, function(_) {\n                            _.init(identityHost);\n                            self._onRemoteComponentLoaded();\n                        });\n                    });\n                });\n            } catch (_) {\n                self._onLoadError();\n            }\n        },\n\n        _onRemoteComponentLoaded: function() {\n            this.remoteComponentLoadedWithoutError(true);\n            this.loading(false);\n        },\n\n        _onLoadError: function () {\n            this.delegate.heading(\"Sorry\");\n            this.loading(false);\n            this.errorLoadingRemote(true);\n        }\n    });\n\n    return viewModel;\n})\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/Components/Authentication/RecoverPassword/RecoverPasswordViewModel.js\n// module id = 208\n// module chunks = 5","define(['knockout', \"./RecoverPasswordViewModel\", 'text-loader!./RecoverPassword.tpl.html'], function (ko, Vm, template) {\n\n    ko.components.register('tt-recover-password', {\n        viewModel: Vm,\n        template: template\n    });\n})\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/Components/Authentication/RecoverPassword/register.js\n// module id = 209\n// module chunks = 5","(function () {\n    define([\"knockout\"], function () {\n        return function (betAmount) {\n            var self = this;\n\n            self.BetAmount = betAmount;\n        };\n    });\n})();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/Components/Calculator/Model/amountinput-component-viewmodel.js\n// module id = 210\n// module chunks = 5","define([\"knockout\", '../../../Math', \"underscore\"], function (ko, rwwaMath, _) {\n    return function (betAmount) {\n        var self = this;\n\n        self.BetAmount = betAmount;\n        self.PreviousIsPreset = true;\n\n        function floorToStep(step, value) {\n            return step * Math.floor(value / step);\n        }\n\n        function clampAmountValue(amount) {\n            var minf = _.partial(Math.min, self.BetAmount.Max);\n            var maxf = _.partial(Math.max, self.BetAmount.Min);\n            var stepf = _.partial(floorToStep, self.BetAmount.Step());\n            return _.compose(minf, maxf, stepf)(amount);\n        }\n\n        function updateAmountIfNumber() {\n            var amountString = self.BetAmount.AmountString();\n            if (!isNaN(amountString) && self.BetAmount.Pattern().test(amountString)) {\n                self.BetAmount.Amount(clampAmountValue(Number(amountString)));\n            }\n        }\n\n        self.BetAmount.IsNumberPadVisible.subscribe(function (newValue) {\n            if (newValue == true) {\n                self.BetAmount.AmountString(self.BetAmount.Amount().toString());\n            } else {\n                self.BetAmount.Amount(clampAmountValue(self.BetAmount.Amount()));\n                self.BetAmount.AmountString(rwwaMath.toMoney(self.BetAmount.Amount(), 2, ''));\n            }\n        });\n\n        self.UpdateAmount = function (delta) {\n            self.PreviousIsPreset = true;\n            self.BetAmount.Amount(clampAmountValue(self.BetAmount.Amount() + delta));\n            self.BetAmount.AmountString(self.BetAmount.Amount().toString());\n        }\n\n        self.ClearAmount = function () {\n            self.BetAmount.Amount(clampAmountValue(0));\n            self.BetAmount.AmountString(self.BetAmount.Amount().toString());\n        }\n\n        self.AppendAmount = function (str) {\n            if ((self.BetAmount.Amount() < self.BetAmount.Max) && (str != '.' || self.BetAmount.Step() == 0.5)) {\n                if (str == '.') {\n                    self.PreviousIsPreset = false;\n                }\n\n                if (self.PreviousIsPreset) {\n                    self.ClearAmount();\n                    self.PreviousIsPreset = false;\n                }\n                var amountString = self.BetAmount.AmountString();\n\n                if (amountString == '0') {\n                    amountString = '';\n                }\n\n                if (str != '.' || !amountString.match(/\\./)) {\n                    var appendedAmountString = amountString + str;\n\n                    if (self.BetAmount.Pattern().test(appendedAmountString)) {\n                        self.BetAmount.AmountString(appendedAmountString);\n                        updateAmountIfNumber();\n                    }\n                }\n            }\n        }\n\n        self.BackSpaceAmount = function () {\n            var strLen = self.BetAmount.AmountString().length;\n            self.PreviousIsPreset = false;\n            if (strLen > 1) {\n                var amountString = self.BetAmount.AmountString();\n                var backSpacedAmountString = amountString.substring(0, strLen - 1);\n                self.BetAmount.AmountString(backSpacedAmountString);\n                updateAmountIfNumber();\n            } else {\n                self.BetAmount.Amount(0);\n                self.BetAmount.AmountString('0');\n            }\n        }\n    };\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/Components/Calculator/Model/betamount-calculator.js\n// module id = 211\n// module chunks = 5","(function () {\n    define([\"knockout\", \"./betamount-calculator\"], function (ko, calculator) {\n        return function (betAmountViewModel) {\n            var self = this;\n\n            self.BetAmount = betAmountViewModel;\n            self.Calculator = new calculator(self.BetAmount);\n        };\n    });\n})();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/Components/Calculator/Model/calculator-component-viewmodel.js\n// module id = 212\n// module chunks = 5","(function () {\n    define([\"knockout\"], function () {\n        return function (calculator) {\n            var self = this;\n\n            self.Calculator = calculator;\n            //self.Step = calculator.BetAmount.Step;\n\n            self.UpdateAmount = function (delta) {\n                self.Calculator.UpdateAmount(delta);\n            }\n\n            self.AppendAmount = function (str) {\n                self.Calculator.AppendAmount(str);\n            }\n\n            self.BackSpaceAmount = function () {\n                self.Calculator.BackSpaceAmount();\n            }\n        };\n    });\n})();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/Components/Calculator/Model/numberpad-component-viewmodel.js\n// module id = 213\n// module chunks = 5","define(['knockout'], function (ko) {\n    function betTypeViewModel(type, name, options, defaultOptionNumber, isDisabled) {\n        var self = this;\n\n        self.Type = type;\n        self.Name = name;\n        self.Options = options;\n        self.DefaultOptionNumber = defaultOptionNumber;\n        self.IsActive = ko.observable(false);\n        self.IsDisabled = isDisabled;\n    };\n\n    return betTypeViewModel;\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/Components/MysteryBet/Model/bettype-viewmodel.js\n// module id = 214\n// module chunks = 5","define(['knockout'], function(ko) {\n    function numberOfBetsViewModel(value) {\n        var self = this;\n\n        self.Value = value;\n        self.IsActive = ko.observable(false);\n    }\n\n    return numberOfBetsViewModel;\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/Components/MysteryBet/Model/numberofbets-viewmodel.js\n// module id = 215\n// module chunks = 5","define(['knockout'], function(ko) {\n    function optionViewModel(optionNumber, noOfCombinations, betExplanation) {\n        var self = this;\n\n        self.OptionNumber = optionNumber;\n        self.NumberOfCombinations = noOfCombinations;\n        //self.Description = description;\n        self.Description = noOfCombinations <= 1 ? \"Combination\" : \"Combinations\";\n        self.BetExplanation = betExplanation;\n        self.IsActive = ko.observable(false);\n    }\n\n    return optionViewModel;\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/Components/MysteryBet/Model/option-viewmodel.js\n// module id = 216\n// module chunks = 5","define(['knockout'], function (ko) {\n    function quickPickModel(type, name, optionNumber, investmentAmount, cost, isDisabled) {\n        var self = this;\n\n        self.Type = type;\n        self.Name = name;\n        self.OptionNumber = optionNumber;\n        self.InvestmentAmount = investmentAmount;\n        self.Cost = cost;\n        self.CostString = '$' + cost;\n        self.IsActive = ko.observable(false);\n        self.IsDisabled = isDisabled;\n    };\n\n    return quickPickModel;\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/Components/MysteryBet/Model/quickpick-viewmodel.js\n// module id = 217\n// module chunks = 5","define(['knockout'], function(ko) {\n    function tabViewModel(name) {\n        var self = this;\n\n        self.Name = name;\n        self.IsActive = ko.observable(false);\n    }\n\n    return tabViewModel;\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/Components/MysteryBet/Model/tab-viewmodel.js\n// module id = 218\n// module chunks = 5","define([\"knockout\"], function(ko) {\n    ko.bindingHandlers['css2'] = ko.bindingHandlers.css;\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/KnockoutExtensions/Bindings/css2.js\n// module id = 221\n// module chunks = 5","define([\"knockout\", \"jquery\"], function (ko, $) {\n    ko.extenders.pattern = function (target, pattern) {\n        //create a writable computed observable to intercept writes to our observable\n        var result = ko.pureComputed({\n            read: target,  //always return the original observables value\n            write: function (newValue) {\n                var current = target();\n                var valueToWrite = pattern.test(newValue) ? newValue : current;\n\n                //only write if it changed\n                if (valueToWrite !== current) {\n                    target(valueToWrite);\n                } else {\n                    //if the write value is the same, but a different value was written, force a notification for the current field\n                    if (newValue !== current) {\n                        target.notifySubscribers(valueToWrite);\n                    }\n                }\n            }\n        }).extend({ notify: 'always' });\n\n        return result;\n    };\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/KnockoutExtensions/Extenders/pattern.js\n// module id = 224\n// module chunks = 5","define(['knockout', 'text-loader!./modal-template.html', './remote-component'], function (ko, template) {\n\n    ko.components.register('tt-modal', {\n        viewModel: {\n            createViewModel: function (params) {\n                return params.viewModel;\n            }\n        },\n        template: template\n       \n    });\n    return true;\n})  \n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/Modal/modal-component.js\n// module id = 233\n// module chunks = 5","define([\"knockout\", \"jquery\", \"text-loader!./remote-template.html\"], function(ko, jQuery, template) {\n    var $loadingOverlay = jQuery(\"#loading-overlay\");\n\n    function ViewModel(params, element) {\n        var app = null;\n        var self = this;\n        var factory = params.factory;\n\n        self.isError = ko.observable(false);\n        self.isLoading = ko.observable(false);\n        self.title = params.title;\n\n        self.dispose = function () {\n            app && app.dispose();\n            app = null;\n            factory = null;\n            self = null;\n            element = null;\n        };\n\n        self.onError = function (err) {\n            if (console && typeof (console.error) == \"function\") {\n                console.error(err);\n            }\n\n            if (!self)\n                return;\n\n            self.isError(true);\n        };\n\n        self.load = function () {\n            if (!self)\n                return;\n\n            self.isLoading(true);\n            factory()\n                .then(function (run) {\n                    self.isLoading(false);\n                    app = run(element.querySelector(\".remote-app-host\"));\n                })\n                .catch(function(err) {\n                    self.isLoading(false);\n                    self.onError(err);\n                });\n        };\n        self.retry = function () {\n            if (!self)\n                return;\n\n            self.isError(false);\n            self.load();\n        };\n        self.load();\n    }\n\n    ko.components.register('tt-remote', {\n        viewModel: {\n            createViewModel: function (params, meta) {\n                return new ViewModel({ factory: params.factory }, meta.element);\n            }\n        },\n        template: template\n\n    });\n    return true;\n})\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/Modal/remote-component.js\n// module id = 234\n// module chunks = 5","define(['../../Math', 'decimal-js', 'underscore'], function (rwwaMath, Decimal, _) {\n    return {\n        calculate: calculate\n    };\n\n    function product(currencyValues) {\n        return _.reduce(currencyValues, function (memo, num) {\n            return Decimal(Decimal(memo).mul(num));\n        }, Decimal(1));\n    }\n\n    function sum(currencyValues) {\n        return _.reduce(currencyValues, function (memo, num) {\n            var res1 = Decimal(memo.add(num));\n            return res1;\n        }, Decimal(0));\n    }\n\n    function combReturn(set, size, investment) {\n        return _.reduce(rwwaMath.combinations(set, size), function(memo, comb) {\n            var combinationProduct = Decimal(rwwaMath.truncate(Decimal(product(comb).toNumber()).mul(100).mul(investment.toNumber()))).div(100);\n            return sum([memo, combinationProduct]);\n        }, Decimal(0));\n    }\n\n    function calculate(stakes, legReturn) {\n        var decLegReturns = _.map(legReturn, function (value) {\n            return Decimal(value);\n        });\n        var decStakes = _.map(stakes, function(value) {\n            return Decimal(value);\n        });\n\n        var decReturns = [];\n\n        _.each(decStakes, function (stake, idx) {\n            decReturns.push(combReturn(decLegReturns, (idx + 1), stake));\n        });\n\n        var pp = sum(decReturns);\n\n        return pp.toNumber();\n    }\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/MultiBet/services/ProjectedPayCalculator.js\n// module id = 235\n// module chunks = 5","define([\"../../Services/LoggingService\", \"amplify\", \"underscore\"], function (loggingService, amplify, _) {\n    var _storeKey = 'multi';\n\n    // use session scope storage for now - may change to local storage\n    var _store = function () {\n        if (amplify.store.types.sessionStorage) {\n            return amplify.store.sessionStorage;\n        }\n        return amplify.store.memory;\n    }();\n\n    return {\n        clear: clear,\n        get: get,\n        set: set\n    }\n\n    function clear() {\n        loggingService.logDebug(\"multiStore.clear\");\n\n        _store(_storeKey, null);\n    };\n\n    function get() {\n        var result = {\n            uuid: null,\n            investment: 0,\n            multiFormulas: [],\n            numberOfLegs: 0\n        };\n\n        var multiBetData = _store(_storeKey);\n\n        if (multiBetData && _.isObject(multiBetData)) {\n            result.uuid = multiBetData.uuid || result.uuid;\n            result.investment = multiBetData.investment || result.investment;\n            result.multiFormulas = multiBetData.multiFormulas || result.multiFormulas;\n            result.numberOfLegs = multiBetData.numberOfLegs || result.numberOfLegs;\n        }\n\n        return result;\n    };\n\n    function set(multiBetData) {\n\n        loggingService.logDebug(\"multiStore.set\", JSON.stringify(multiBetData));\n\n        var data = {\n            uuid: multiBetData.uuid,\n            investment: multiBetData.investment,\n            multiFormulas: multiBetData.multiFormulas,\n            numberOfLegs: multiBetData.numberOfLegs\n        };\n        _store(_storeKey, data);\n    };\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/MultiBet/services/multi-store.js\n// module id = 236\n// module chunks = 5","define(['./ProjectedPayCalculator', 'underscore'], function (projectedPayCalculator, _) {\n    return {\n        buildSummary: buildSummary\n    };\n\n    function buildSummary(multiBetAmount, multiFormulas, multiBetLegReturns) {\n        var combinations = 0;\n        var total = 0;\n        var projectedPay = 0;\n\n        _.each(multiFormulas, function (multiFormula) {\n            total += multiFormula.Stake * multiFormula.NumberOfCombinations;\n            if (multiFormula.Stake > 0) {\n                combinations += multiFormula.NumberOfCombinations;\n            }\n        });\n\n        var stakes = _.map(_.sortBy(multiFormulas, 'FormulaNumber'), function(multiFormula) {\n            return multiFormula.Stake;\n        });\n\n        if (stakes.length == 0) {\n            for (var legCnt = 1; legCnt < multiBetLegReturns.length; legCnt++) {\n                stakes.push(0);\n            };\n        }\n\n        if (multiBetAmount > 0) {\n            combinations++;\n            total += multiBetAmount;\n            stakes.push(multiBetAmount);\n        }\n\n        projectedPay += projectedPayCalculator.calculate(stakes, multiBetLegReturns);\n\n\n        return {\n            numberOfCombinations: combinations,\n            totalCost: total,\n            projectedPay: projectedPay\n        };\n    }\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/MultiBet/services/multiformulasummary-builder.js\n// module id = 237\n// module chunks = 5","define(['knockout', '../../Math', 'underscore', 'decimal-js'], function (ko, rwwaMath, _) {\n    return function(amount,min,max,step,pattern) {\n        var self = this;\n        self.Amount = ko.observable(amount);\n        self.AmountString = ko.observable(amount.toString());\n        self.HasFocus = ko.observable();\n        self.PreviousIsPreset = true;\n        self.TotalCost = ko.observable(0);\n\n        self.Step = step;\n        self.Min = min;\n        self.Max = max;\n        self.Pattern = pattern;\n\n        self.HasFocus.subscribe(function(newValue) {\n            if (newValue == true) {\n                self.AmountString(self.Amount().toString());\n            } else {\n                self.Amount(clampAmountValue(self.Amount()));\n                self.AmountString(rwwaMath.toMoney(self.Amount(), 2, ''));\n            }\n        });\n        self.HasFocus(false);\n      \n        function floorToStep(step, value) {\n            return step * Math.floor(value / step);\n        }\n\n        function clampAmountValue(amount) {\n            var minf = _.partial(Math.min, self.Max);\n            var maxf = _.partial(Math.max, self.Min);\n            var stepf = _.partial(floorToStep, self.Step);\n            return _.compose(minf, maxf, stepf)(amount);\n        }\n\n        function updateAmountIfNumber() {\n            var amountString = self.AmountString();\n            if (!isNaN(amountString) && self.Pattern.test(amountString)) {\n                self.Amount(clampAmountValue(Number(amountString)));\n            }\n        }\n\n        self.UpdateAmount = function (delta) {\n            self.PreviousIsPreset = true;\n            self.Amount(clampAmountValue(self.Amount() + delta));\n            self.AmountString(self.Amount().toString());\n        }\n\n        self.ClearAmount = function () {\n            self.Amount(clampAmountValue(0));\n            self.AmountString(self.Amount().toString());\n        }\n     \n        self.AppendAmount = function (str) {\n            if ((self.Amount() < max) && (str != '.' || self.Step == 0.5)) {\n                if (str == '.') {\n                    self.PreviousIsPreset = false;\n                }\n\n                if (self.PreviousIsPreset) {\n                    self.ClearAmount();\n                    self.PreviousIsPreset = false;\n                }\n                var amountString = self.AmountString();\n\n                if (amountString == '0') {\n                    amountString = '';\n                }\n\n                if (str != '.' || !amountString.match(/\\./)) {\n                    var appendedAmountString = amountString + str;\n\n                    if (self.Pattern.test(appendedAmountString)) {\n                        self.AmountString(appendedAmountString);\n                        updateAmountIfNumber();\n                    }\n                }\n            }\n        }\n\n        self.BackSpaceAmount = function () {\n            var strLen = self.AmountString().length;\n            self.PreviousIsPreset = false;\n            if (strLen > 1) {\n                var amountString = self.AmountString();\n                var backSpacedAmountString = amountString.substring(0, strLen - 1);\n                self.AmountString(backSpacedAmountString);\n                updateAmountIfNumber();\n            } else {\n                self.Amount(0);\n                self.AmountString('0');\n            }\n        }\n\n        self.Enter = function() {\n            self.HasFocus(true);\n        }\n\n        self.Leave = function () {\n            self.HasFocus(false);\n        }\n    }\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/MultiBet/viewmodel/calculator-viewmodel.js\n// module id = 238\n// module chunks = 5","define(['knockout', './calculator-viewmodel', 'decimal-js'], function (ko, calculatorViewModel) {\n    return function (formulaName, formulaNumber, stake, numberOfCombinations) {\n        var self = this;\n\n        function buildCalculatorFor(formulaNum, initStake) {\n            if (formulaNum === 1) {\n                return new calculatorViewModel(initStake, 0, 99999, 1, /^\\d{0,5}$/);\n            }\n            return new calculatorViewModel(initStake, 0, 99999.5, 0.5, /^\\d{0,5}(\\.\\d?)?$/);\n        }\n\n        self.calculator = buildCalculatorFor(formulaNumber, stake);\n        self.Stake = self.calculator.Amount;\n        self.StakeString = self.calculator.AmountString;\n        self.FormulaName = ko.observable(formulaName);\n        self.FormulaNumber = ko.observable(formulaNumber);\n        self.NumberOfCombinations = ko.observable(numberOfCombinations);\n        self.CalculatorVisible = ko.observable(false);\n        self.TotalCost = self.calculator.TotalCost;\n        self.CalcHasFocus = self.calculator.HasFocus;\n        self.Step = self.calculator.Step;\n\n        self.Cost = ko.computed(function () {\n            return self.Stake() * self.NumberOfCombinations();\n        });\n        self.UpdateStake = function (value) {\n            self.calculator.UpdateAmount(value);\n        }\n        self.ClearStake = function () {\n            self.calculator.ClearAmount();\n        }\n        self.AppendStake = function (str) {\n            self.calculator.AppendAmount(str);\n        }\n        self.BackSpaceStake = function () {\n            self.calculator.BackSpaceAmount();\n        }\n        self.ShowCalculator = function() {\n            self.CalculatorVisible(true);\n            self.calculator.Enter();\n        }\n        self.HideCalculator = function() {\n            self.calculator.Leave();\n            self.CalculatorVisible(false);\n        }\n        self.SetCalculatorPresetMode = function (presetMode) {\n            self.calculator.PreviousIsPreset = presetMode;\n        }\n    }\n\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/MultiBet/viewmodel/formula-viewmodel.js\n// module id = 239\n// module chunks = 5","define([\"knockout\", '../../Components/Calculator/Model/betamount-viewmodel'], function (ko, betAmountViewModel) {\n    return function (formulaName, formulaNumber, numberOfCombinations, stake) {\n        var self = this;\n\n        function buildBetAmountModelFor(formulaNum, initStake) {\n            if (formulaNum === 1) {\n                return new betAmountViewModel(initStake, 0, 99999, 1);\n            }\n            return new betAmountViewModel(initStake, 0, 99999.5, 0.5);\n        }\n\n        self.FormulaName = formulaName;\n        self.FormulaNumber = formulaNumber;\n        self.NumberOfCombinations = numberOfCombinations;\n        self.BetAmountViewModel = buildBetAmountModelFor(formulaNumber, stake);\n        self.Cost = ko.computed(function () {\n            return self.BetAmountViewModel.Amount() * self.NumberOfCombinations;\n        });\n        self.TotalCost = ko.observable(0);\n    };\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/MultiBet/viewmodel/multiformula-viewmodel.js\n// module id = 240\n// module chunks = 5","/**\n * A constructor for a loading indicator used in page navigation.\n */\ndefine(['jquery'], function(jQuery) {\n    var indicator = function(elementSelector) {\n        var self = this;\n\n        var _styles = {\n            none: \"none\",\n            autoTop: \"autoTop\",\n            fullScreenFixed: \"fullScreenFixed\"\n        };\n\n        self.selector = elementSelector;\n        self.shownFlag = false; /* standard show/hide flag */\n        self.counter = 0;   /* stack counter for pop/push */\n        self.style = _styles.none;\n\n        function render() {\n            var $overlay = jQuery(self.selector);\n            if (self.shownFlag || self.counter) {\n                switch (self.style) {\n                    case _styles.fullScreenFixed:\n                        $overlay.css({ 'height': jQuery(document).height() })\n                            .css({ 'position': \"fixed\" })\n                            .css({ 'top': 0, 'left': 0, 'right': 0, 'bottom': 0 })\n                            .show();\n                        break;\n                    case _styles.autoTop:\n                        $overlay.css({ 'height': jQuery(document).height(), 'top': \"auto\" }).show();\n                        break;\n                    default:\n                        $overlay.css({ 'height': jQuery(document).height() }).show();\n                        break;\n                }\n            } else {\n                $overlay.hide();\n            }\n            //console.log(\"=>\" + JSON.stringify(self));\n        }\n\n        self.showLoading = function() {\n            self.shownFlag = true;\n            self.counter = 0;\n            self.style = _styles.autoTop;\n            render();\n        }\n\n        self.showLoadingNoAuto = function() {\n            self.shownFlag = true;\n            self.counter = 0;\n            self.style = _styles.none;\n            render();\n        }\n\n        self.showLoadingFullScreenFixed = function() {\n            self.shownFlag = true;\n            self.counter = 0;\n            self.style = _styles.fullScreenFixed;\n            render();\n        }\n\n        self.hideLoading = function() {\n            self.shownFlag = false;\n            render();\n        }\n\n        /* allow nested show/hides, operates in addition to show/hide function */\n        self.pushLoading = function(action) {\n            if (!self.shownFlag) {\n                self.style = _styles.autoTop;\n            }\n            self.counter++;\n            render();\n\n            return action(function hide() {\n                if (self.counter > 0) {\n                    self.counter--;\n                }\n                render();\n            });\n        }\n    }\n\n    return indicator;\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/Navigation/NavigationLoading.js\n// module id = 241\n// module chunks = 5","/**\n * Returns configuration rules for navigation.\n */\ndefine([], function() {\n    var self = this;\n\n    //\n    // urlPattern: regex to match destination url.\n    //\n    // useNavStack: if true historical navigation is enabled for this page,\n    //              if false the standard tabtouch structural nav is used.\n    //\n    // returnUrl: optionally override the back target that will be pushed for this page \n    //\n    self.NAV_CONFIG = [\n        { urlPattern: \"^betbuilder.*$\", useNavStack: true, returnUrl: null },\n        { urlPattern: \"^account.*$\", useNavStack: true, returnUrl: null },\n        { urlPattern: \"^password.*$\", useNavStack: true, returnUrl: null },\n        { urlPattern: \"^settings.*$\", useNavStack: true, returnUrl: null },\n        { urlPattern: \"^cms.*$\", useNavStack: true, returnUrl: null },\n        { urlPattern: \"^.*$\", useNavStack: false, returnUrl: null }\n    ];\n\n\n    //\n    // Get the first matching rule given url\n    //\n    self.configFor = function(url) {\n        for (var i = 0; i < self.NAV_CONFIG.length; ++i) {\n            var config = self.NAV_CONFIG[i];\n            var pattern = new RegExp(config.urlPattern);\n            if (pattern.test(url)) {\n                return config;\n            }\n        }\n        return { urlPattern: null, useNavStack: false, returnUrl: null };\n    };\n\n    return self;\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/Navigation/NavigationRules.js\n// module id = 242\n// module chunks = 5","/**\n * Handles redirection stuff.\n */\ndefine(['jquery', './Navigation/Nav', './Common', 'js-cookie'], function(jQuery, nav, common, cookies) {\n    var isChecked = false,\n        closePopup = function() {\n            jQuery('#redirect-window').fadeOut('fast');\n        },\n        addCookie = function(remember) {\n            cookies.set(\"RememberDesktopRedirect\", remember, { expires: 365 });\n        },\n        getCookie = function() {\n            return cookies.get(\"RememberDesktopRedirect\");\n        },\n        initialiseRedirectPopup = function() {\n            jQuery('#redirect-desktop').on(\"click\", function(e) {\n                if (isChecked === true) {\n                    addCookie(true);\n                }\n            });\n\n            jQuery('#redirect-mobile').on(\"click\", function(e) {\n                e.preventDefault();\n                closePopup();\n                if (isChecked === true) {\n                    addCookie(false);\n                }\n            });\n\n            jQuery('#RememberSelection').change(function() {\n                if (this.checked === true) {\n                    isChecked = true;\n                } else {\n                    isChecked = false;\n                }\n            });\n        },\n        showPopup = function() {\n            jQuery(\"#redirect-window\").show();\n        },\n        initialiseRedirect = function() {\n            var isDesktopUser = jQuery(\"#desktop-user\").val();\n            var localUrlReferral = jQuery(\"#localUrlReferral\").val();\n            var isHome = nav.isHome(location.hash);\n            if (isHome && isDesktopUser === \"True\") {\n                if (typeof getCookie() === \"undefined\" && localUrlReferral !== \"True\") {\n                    showPopup();\n                } else if (getCookie() === \"true\" && localUrlReferral !== \"True\") {\n                    var referrer = jQuery('#referrer');\n                    var externalReferrer = null;\n                    if (referrer.length !== 0) {\n                        externalReferrer = referrer.val();\n                    }\n                    if (externalReferrer === null) {\n                        var tabtouchDesktopUrl = jQuery(\"#tabtouch-desktop-url\").val();\n                        nav.redirectExternal(tabtouchDesktopUrl);\n                        return;\n                    }\n                }\n            }\n        };\n\n    (function() {\n        common.bindLiveEvent('click', '[data-redirect-close-popup]', function(e) {\n            closePopup();\n            e.preventDefault();\n            return false;\n        });\n    })();\n\n    return {\n        closePopup: closePopup,\n        initialiseRedirectPopup: initialiseRedirectPopup,\n        getCookie: getCookie,\n        initialiseRedirect: initialiseRedirect\n    };\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/Redirect.js\n// module id = 243\n// module chunks = 5","define(['jquery'], function(jQuery) {\n    var ajax = function(type, url, data) {\n        return jQuery.ajax({\n            type: type,\n            url: url,\n            data: data,\n            cache: false,\n            contentType: 'application/json'\n        });\n    };\n\n    return {\n        get: function(url, data) {\n            return ajax('GET', url, data);\n        },\n        put: function (url, data) {\n            return ajax('PUT', url, data);\n        },\n        post: function (url, data) {\n            return ajax('POST', url, data);\n        }\n    };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/Services/HttpService.js\n// module id = 244\n// module chunks = 5","define(['../MessageBusService', '../LoggingService'], function (messageBusService, loggingService) {\n    var onError = null;\n    var onSuccess = null;\n    var watchId = null;\n    var isGpsNative = false;\n\n    return {\n        init: init,\n        cancel: cancel,\n        success: success,\n        error: error\n    }\n\n    function init() {\n        messageBusService.subscribe(\"NATIVEBEACONID\", onSuccess);\n        messageBusService.subscribe(\"NATIVEBEACONERROR\", onError);\n        loggingService.logDebug('BeaconLocationService.init');\n    }\n\n    function cancel() {\n        messageBusService.unsubscribe(\"NATIVEBEACONID\", onSuccess);\n        messageBusService.unsubscribe(\"NATIVEBEACONERROR\", onError);\n        loggingService.logDebug('BeaconLocationService.cancel');\n    }\n\n    function success(callback) {\n        loggingService.logDebug('BeaconLocationService.success - callback set');\n        onSuccess = callback;\n        return this;\n    }\n\n    function error(callback) {\n        loggingService.logDebug('BeaconLocationService.error - callback set');\n        onError = callback;\n        return this;\n    }\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/Services/Location/BeaconLocationService.js\n// module id = 245\n// module chunks = 5","define(['../FeatureService', '../MessageBusService', '../LoggingService', './LbsConfigService'], function (featureService, messageBusService, loggingService, lbsConfigService) {\n    var onError = null;\n    var onSuccess = null;\n    var watchId = null;\n    var isGpsNative = false;\n\n    return {\n        init: init,\n        cancel: cancel,\n        jolt: jolt,\n        success: success,\n        error: error\n    }\n\n    function init() {\n        var msg = 'GeoLocationService.init';\n        loggingService.logDebug(msg);\n        featureService.isActive('NativeGps')\n            .then(function(active) {\n                if (active) {\n                    isGpsNative = true;\n                    setupNativeGps();\n                } else {\n                    isGpsNative = false;\n                    setupJsGps();\n                }\n            });\n    }\n\n    function turnOnNativeGps() {\n        var parameters = lbsConfigService.getParameters();\n        var data = parameters;\n        data[\"state\"] = \"on\";\n        var msg = \"GeoLocationService - turnOnNativeGps : \" + JSON.stringify(data);\n        loggingService.logDebug(msg);\n        messageBusService.publish(\"LBSTRACKING\", data);\n    }\n\n    function turnOffNativeGps() {\n        messageBusService.publish(\"LBSTRACKING\", { state: \"off\" });\n    }\n\n    function setupNativeGps() {\n        if (watchId == null) {\n            var msg = \"GeoLocationService - setupNativeGps\";\n            loggingService.logDebug(msg);\n            messageBusService.subscribe(\"NATIVEGPSCOORDINATES\", onSuccess);\n            messageBusService.subscribe(\"NATIVEGPSERROR\", onError);\n            turnOnNativeGps();\n            watchId = 1;\n        }\n    }\n\n    function destroyNativeGps() {\n            if (watchId) {\n                var msg = \"GeoLocationService - setupNativeGps\";\n                loggingService.logDebug(msg);\n                messageBusService.unsubscribe(\"NATIVEGPSCOORDINATES\", onSuccess);\n                messageBusService.unsubscribe(\"NATIVEGPSERROR\", onError);\n                turnOffNativeGps();\n                watchId = null;\n            }      \n    }\n\n    function setupJsGps() {\n        if (watchId == null) {\n            watchId = navigator.geolocation.watchPosition(onSuccess, onError, { enableHighAccuracy: true, maximumAge: 40000, timeout: 60000 });\n        }\n    }\n\n    function cancel() {\n        var msg = 'GeoLocationService.cancel';\n        loggingService.logDebug(msg);\n        if (isGpsNative) {\n            destroyNativeGps();\n        } else {\n            if (watchId) {\n                navigator.geolocation.clearWatch(watchId);\n                watchId = null;\n            }\n        }\n    }\n\n    function jolt() {\n        var msg = 'GeoLocationService.jolt';\n        loggingService.logDebug(msg);\n        turnOffNativeGps();\n        turnOnNativeGps();\n    }\n\n    function success(callback) {\n        var msg = 'GeoLocationService.success - callback set';\n        loggingService.logDebug(msg);\n        onSuccess = callback;\n        return this;\n    }\n\n    function error(callback) {\n        var msg = 'GeoLocationService.error - callback set';\n        loggingService.logDebug(msg);\n        onError = callback;\n        return this;\n    }\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/Services/Location/GeoLocationService.js\n// module id = 246\n// module chunks = 5","/**\n * Handles storing sessions (and history?).\n */\ndefine(['amplify', 'underscore'], function(amplify, _) {\n    var self = this;\n\n    var _storeKey = 'nav';\n\n    //\n    // store the nav settings per browser session\n    //\n    var _store = function() {\n        if (amplify.store.types.sessionStorage) {\n            return amplify.store.sessionStorage;\n        }\n        return amplify.store.memory;\n    }();\n\n    var _getData = function() {\n        var data = _store(_storeKey);\n        if (data) {\n            return data;\n        }\n        return { backUrl: '#', urlStack: [] };\n    };\n\n    var _setData = function(data) {\n        _store(_storeKey, data);\n    };\n\n    self.getData = function() {\n        return _getData();\n    }\n\n    //\n    // set the fixed back url which applies not using stack\n    //   based nav for this page\n    //\n    self.setBackUrl = function (backUrl) {\n        console.log('NavigationService: setBackUrl(' + backUrl + ')');\n        console.log(_getData());\n        var navData = _getData();\n        navData.backUrl = backUrl;\n        _setData(navData);\n    };\n\n    //\n    // get the current back url and removing it from the stack if any,\n    //   or return the fixed back url\n    //\n    self.popUrl = function (navTo) {\n        console.log('NavigationService: popUrl(' + navTo + ')');\n        console.log(_getData());\n        var navData = _getData();\n        if (navData.urlStack.length) {\n            var head = navData.urlStack.shift();\n            _setData(navData);\n            return navTo(head);\n        }\n        if (navData.backUrl) {\n            return navTo(navData.backUrl);\n        }\n        return false;\n    };\n\n    //\n    // push url to stack, if url already in stack, bring it to the top\n    //\n    self.pushUrl = function (url) {\n        console.log('NavigationService: pushUrl(' + url + ')');\n        console.log(_getData());\n        var navData = _getData();\n        navData.urlStack = _.filter(navData.urlStack, function(elem) {\n            return elem != url;\n        });\n        navData.urlStack.unshift(url);\n        _setData(navData);\n    };\n\n    //\n    // get the current back url without removing it\n    //\n    self.peekUrl = function () {\n        console.log('NavigationService: peekUrl()');\n        console.log(_getData());\n        var navData = _getData();\n        if (navData.urlStack.length) {\n            return navData.urlStack[0];\n        }\n        return navData.backUrl;\n    };\n\n    //\n    // remove all instances of url from stack\n    //\n    self.clearUrl = function (url) {\n        console.log('NavigationService: clearUrl()');\n        console.log(_getData());\n        var navData = _getData();\n        navData.urlStack = _.filter(navData.urlStack, function(elem) {\n            return elem != url;\n        });\n        _setData(navData);\n    };\n\n    //\n    // remove all instances of urls starting with url from stack\n    //\n    self.pruneUrl = function (baseUrl) {\n        console.log('NavigationService: pruneUrl(' + baseUrl + ')');\n        console.log(_getData());\n        var navData = _getData();\n        navData.urlStack = _.filter(navData.urlStack, function(elem) {\n            return elem.substring(0, baseUrl.length) != baseUrl;\n        });\n        _setData(navData);\n    };\n\n    //\n    // clear the nav stack, effectivly reverting to the normal \n    // fixed structural nav\n    //\n    self.clearUrlStack = function () {\n        console.log('NavigationService: clearUrlStack()');\n        console.log(_getData());\n        var navData = _getData();\n        navData.urlStack = [];\n        _setData(navData);\n    };\n\n    return self;\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/Services/NavigationService.js\n// module id = 247\n// module chunks = 5","define(['amplify', 'jquery', '../../TupleSpace'], function(amplify, jQuery, TupleSpace) {\n    window.PreferencesStore = function() {\n        var self = this;\n\n        var _storeKey = 'userprefs';\n\n        //\n        // the persistant store is shared across browser sessions and tabs per user-device\n        // and has a long life-time\n        //\n        var _localStore = amplify.store;\n\n        //\n        // memory store is temporary and renewed each full page load\n        //\n        var _memoryStore = amplify.store.memory;\n\n        //\n        // allow for possible future data-migration\n        //\n        var _version = \"1\";\n\n        // \n        // get preferences data from persistent storage, substitute in any missing attributes to \n        // ensure the data is well-formed before returning. If the key is missing then\n        // initialise a new bet wallet, then write it to storage and return \n        //   \n        var _readStorage = function() {\n            var data = _localStore(_storeKey);\n            if (!data || !jQuery.isArray(data)) {\n                data = [];\n                var space = new TupleSpace(data);\n                space.put(\"Version\", _version);\n                _localStore(_storeKey, data);\n            }\n            return data;\n        };\n\n        //\n        // load in-memory copy of prefs, otherwise sync with persistent store\n        //\n        var _readMemory = function() {\n            var result = _memoryStore(_storeKey);\n            if (!result) {\n                result = _readStorage();\n                _memoryStore(_storeKey, result);\n            }\n            return result;\n        };\n\n        // \n        //  update prefs, writing-through updates to in-memory and persistent-storage,\n        //  which will keep data in sync without exposing the user to unexpected updates\n        //\n        var _updateStorage = function(operation, params) {\n            var localData = _readStorage();\n            var memData = _readMemory();\n\n            localData = operation(localData, params);\n            memData = operation(memData, params);\n\n            _localStore(_storeKey, localData);\n            _memoryStore(_storeKey, memData);\n        };\n\n        var _operations = {\n            clear: function(data, params) {\n                return null;\n            },\n            set: function(data, params) {\n                var space = new TupleSpace(data);\n                space.take_many(params.key);\n                space.put(params.key, params.value);\n                return data;\n            },\n            remove: function(data, params) {\n                var space = new TupleSpace(data);\n                space.take_many(params.key);\n                return data;\n            },\n        };\n\n        //\n        // blast away any prefs data\n        //\n        self.clear = function() {\n            _updateStorage(_operations.clear);\n        };\n\n        //\n        // read operations\n        //\n\n        self.get = function(key) {\n            var space = new TupleSpace(_readMemory());\n            var tuple = space.copy(key);\n            return tuple ? tuple[1] : null;\n        };\n\n        //\n        // update operations\n        //\n        self.set = function(key, value) {\n            _updateStorage(_operations.set, { key: key, value: value });\n        };\n\n        self.remove = function(key) {\n            _updateStorage(_operations.remove, { key: key });\n        };\n\n    };\n\n    return new window.PreferencesStore();\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/Services/Preferences/PreferencesStore.js\n// module id = 248\n// module chunks = 5","define([\"requireExternal\", \"defineExternal\"], function(rjsRequire, rjsDefine) {\n    /**\n     * Uses RequireJS to import a component from anywhere.\n     */\n    function fetchComponent(url) {\n        return new Promise(function(resolve) {\n            rjsRequire([url], function(component) {\n                resolve(component);\n            });\n        });\n    }\n\n\n    /**\n     * Define a RequireJS for remote components to be able to import.\n     */\n    function defineModule(name, func) {\n        rjsDefine(name, func);\n    }\n\n\n    return {\n        fetchComponent: fetchComponent,\n        defineModule: defineModule\n    }\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/Services/RemoteComponentService.js\n// module id = 249\n// module chunks = 5","define([\"amplify\"], function(amplify) {\n    function store(key, value) {\n        if (value !== undefined) {\n            return amplify.store(key, value);\n        } else {\n            return amplify.store(key);\n        }\n    }\n\n    return {\n        store: store\n    }\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/Services/StorageService.js\n// module id = 250\n// module chunks = 5","/**\n * Extends the string prototype with special \"format\" methods. This is ugly.\n */\ndefine([], function() {\n    if (!String.prototype.format) {\n        String.prototype.format = function() {\n            var args = arguments;\n            return this.replace(/{(\\d+)}/g, function(match, number) {\n                return typeof args[number] != 'undefined' ? args[number] : match;\n            });\n        };\n    };\n    if (!String.prototype.template) {\n        String.prototype.template = function(data) {\n            return this.replace(/{{(\\w+)}}/g, function(match, token) {\n                return typeof data[token] != 'undefined' ? data[token] : match;\n            });\n        };\n    };\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/StringExtensions.js\n// module id = 251\n// module chunks = 5","define([], function() {\n    return {\n        getTime: function() {\n            return new Date().getTime();\n        }\n    }\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/TimeProvider.js\n// module id = 252\n// module chunks = 5","define(['knockout', './LbsViewModel', '../../Navigation/Nav'], function (ko, lbs, nav) {\n    return {\n        initView: initView\n    }\n\n    function initView() {\n        lbs.initView();\n        nav.resetBack(\"Back\");\n    }\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Foundation/ViewModels/Location/AtTheRacesViewModel.js\n// module id = 253\n// module chunks = 5","/*global window */\n/**\n * @license countdown.js v2.6.0 http://countdownjs.org\n * Copyright (c)2006-2014 Stephen M. McKamey.\n * Licensed under The MIT License.\n */\n/*jshint bitwise:false */\n\n/**\n * @public\n * @type {Object|null}\n */\nvar module;\n\n/**\n * API entry\n * @public\n * @param {function(Object)|Date|number} start the starting date\n * @param {function(Object)|Date|number} end the ending date\n * @param {number} units the units to populate\n * @return {Object|number}\n */\nvar countdown = (\n\n/**\n * @param {Object} module CommonJS Module\n */\nfunction(module) {\n\t/*jshint smarttabs:true */\n\n\t'use strict';\n\n\t/**\n\t * @private\n\t * @const\n\t * @type {number}\n\t */\n\tvar MILLISECONDS\t= 0x001;\n\n\t/**\n\t * @private\n\t * @const\n\t * @type {number}\n\t */\n\tvar SECONDS\t\t\t= 0x002;\n\n\t/**\n\t * @private\n\t * @const\n\t * @type {number}\n\t */\n\tvar MINUTES\t\t\t= 0x004;\n\n\t/**\n\t * @private\n\t * @const\n\t * @type {number}\n\t */\n\tvar HOURS\t\t\t= 0x008;\n\n\t/**\n\t * @private\n\t * @const\n\t * @type {number}\n\t */\n\tvar DAYS\t\t\t= 0x010;\n\n\t/**\n\t * @private\n\t * @const\n\t * @type {number}\n\t */\n\tvar WEEKS\t\t\t= 0x020;\n\n\t/**\n\t * @private\n\t * @const\n\t * @type {number}\n\t */\n\tvar MONTHS\t\t\t= 0x040;\n\n\t/**\n\t * @private\n\t * @const\n\t * @type {number}\n\t */\n\tvar YEARS\t\t\t= 0x080;\n\n\t/**\n\t * @private\n\t * @const\n\t * @type {number}\n\t */\n\tvar DECADES\t\t\t= 0x100;\n\n\t/**\n\t * @private\n\t * @const\n\t * @type {number}\n\t */\n\tvar CENTURIES\t\t= 0x200;\n\n\t/**\n\t * @private\n\t * @const\n\t * @type {number}\n\t */\n\tvar MILLENNIA\t\t= 0x400;\n\n\t/**\n\t * @private\n\t * @const\n\t * @type {number}\n\t */\n\tvar DEFAULTS\t\t= YEARS|MONTHS|DAYS|HOURS|MINUTES|SECONDS;\n\n\t/**\n\t * @private\n\t * @const\n\t * @type {number}\n\t */\n\tvar MILLISECONDS_PER_SECOND = 1000;\n\n\t/**\n\t * @private\n\t * @const\n\t * @type {number}\n\t */\n\tvar SECONDS_PER_MINUTE = 60;\n\n\t/**\n\t * @private\n\t * @const\n\t * @type {number}\n\t */\n\tvar MINUTES_PER_HOUR = 60;\n\n\t/**\n\t * @private\n\t * @const\n\t * @type {number}\n\t */\n\tvar HOURS_PER_DAY = 24;\n\n\t/**\n\t * @private\n\t * @const\n\t * @type {number}\n\t */\n\tvar MILLISECONDS_PER_DAY = HOURS_PER_DAY * MINUTES_PER_HOUR * SECONDS_PER_MINUTE * MILLISECONDS_PER_SECOND;\n\n\t/**\n\t * @private\n\t * @const\n\t * @type {number}\n\t */\n\tvar DAYS_PER_WEEK = 7;\n\n\t/**\n\t * @private\n\t * @const\n\t * @type {number}\n\t */\n\tvar MONTHS_PER_YEAR = 12;\n\n\t/**\n\t * @private\n\t * @const\n\t * @type {number}\n\t */\n\tvar YEARS_PER_DECADE = 10;\n\n\t/**\n\t * @private\n\t * @const\n\t * @type {number}\n\t */\n\tvar DECADES_PER_CENTURY = 10;\n\n\t/**\n\t * @private\n\t * @const\n\t * @type {number}\n\t */\n\tvar CENTURIES_PER_MILLENNIUM = 10;\n\n\t/**\n\t * @private\n\t * @param {number} x number\n\t * @return {number}\n\t */\n\tvar ceil = Math.ceil;\n\n\t/**\n\t * @private\n\t * @param {number} x number\n\t * @return {number}\n\t */\n\tvar floor = Math.floor;\n\n\t/**\n\t * @private\n\t * @param {Date} ref reference date\n\t * @param {number} shift number of months to shift\n\t * @return {number} number of days shifted\n\t */\n\tfunction borrowMonths(ref, shift) {\n\t\tvar prevTime = ref.getTime();\n\n\t\t// increment month by shift\n\t\tref.setMonth( ref.getMonth() + shift );\n\n\t\t// this is the trickiest since months vary in length\n\t\treturn Math.round( (ref.getTime() - prevTime) / MILLISECONDS_PER_DAY );\n\t}\n\n\t/**\n\t * @private\n\t * @param {Date} ref reference date\n\t * @return {number} number of days\n\t */\n\tfunction daysPerMonth(ref) {\n\t\tvar a = ref.getTime();\n\n\t\t// increment month by 1\n\t\tvar b = new Date(a);\n\t\tb.setMonth( ref.getMonth() + 1 );\n\n\t\t// this is the trickiest since months vary in length\n\t\treturn Math.round( (b.getTime() - a) / MILLISECONDS_PER_DAY );\n\t}\n\n\t/**\n\t * @private\n\t * @param {Date} ref reference date\n\t * @return {number} number of days\n\t */\n\tfunction daysPerYear(ref) {\n\t\tvar a = ref.getTime();\n\n\t\t// increment year by 1\n\t\tvar b = new Date(a);\n\t\tb.setFullYear( ref.getFullYear() + 1 );\n\n\t\t// this is the trickiest since years (periodically) vary in length\n\t\treturn Math.round( (b.getTime() - a) / MILLISECONDS_PER_DAY );\n\t}\n\n\t/**\n\t * Applies the Timespan to the given date.\n\t * \n\t * @private\n\t * @param {Timespan} ts\n\t * @param {Date=} date\n\t * @return {Date}\n\t */\n\tfunction addToDate(ts, date) {\n\t\tdate = (date instanceof Date) || ((date !== null) && isFinite(date)) ? new Date(+date) : new Date();\n\t\tif (!ts) {\n\t\t\treturn date;\n\t\t}\n\n\t\t// if there is a value field, use it directly\n\t\tvar value = +ts.value || 0;\n\t\tif (value) {\n\t\t\tdate.setTime(date.getTime() + value);\n\t\t\treturn date;\n\t\t}\n\n\t\tvalue = +ts.milliseconds || 0;\n\t\tif (value) {\n\t\t\tdate.setMilliseconds(date.getMilliseconds() + value);\n\t\t}\n\n\t\tvalue = +ts.seconds || 0;\n\t\tif (value) {\n\t\t\tdate.setSeconds(date.getSeconds() + value);\n\t\t}\n\n\t\tvalue = +ts.minutes || 0;\n\t\tif (value) {\n\t\t\tdate.setMinutes(date.getMinutes() + value);\n\t\t}\n\n\t\tvalue = +ts.hours || 0;\n\t\tif (value) {\n\t\t\tdate.setHours(date.getHours() + value);\n\t\t}\n\n\t\tvalue = +ts.weeks || 0;\n\t\tif (value) {\n\t\t\tvalue *= DAYS_PER_WEEK;\n\t\t}\n\n\t\tvalue += +ts.days || 0;\n\t\tif (value) {\n\t\t\tdate.setDate(date.getDate() + value);\n\t\t}\n\n\t\tvalue = +ts.months || 0;\n\t\tif (value) {\n\t\t\tdate.setMonth(date.getMonth() + value);\n\t\t}\n\n\t\tvalue = +ts.millennia || 0;\n\t\tif (value) {\n\t\t\tvalue *= CENTURIES_PER_MILLENNIUM;\n\t\t}\n\n\t\tvalue += +ts.centuries || 0;\n\t\tif (value) {\n\t\t\tvalue *= DECADES_PER_CENTURY;\n\t\t}\n\n\t\tvalue += +ts.decades || 0;\n\t\tif (value) {\n\t\t\tvalue *= YEARS_PER_DECADE;\n\t\t}\n\n\t\tvalue += +ts.years || 0;\n\t\tif (value) {\n\t\t\tdate.setFullYear(date.getFullYear() + value);\n\t\t}\n\n\t\treturn date;\n\t}\n\n\t/**\n\t * @private\n\t * @const\n\t * @type {number}\n\t */\n\tvar LABEL_MILLISECONDS\t= 0;\n\n\t/**\n\t * @private\n\t * @const\n\t * @type {number}\n\t */\n\tvar LABEL_SECONDS\t\t= 1;\n\n\t/**\n\t * @private\n\t * @const\n\t * @type {number}\n\t */\n\tvar LABEL_MINUTES\t\t= 2;\n\n\t/**\n\t * @private\n\t * @const\n\t * @type {number}\n\t */\n\tvar LABEL_HOURS\t\t\t= 3;\n\n\t/**\n\t * @private\n\t * @const\n\t * @type {number}\n\t */\n\tvar LABEL_DAYS\t\t\t= 4;\n\n\t/**\n\t * @private\n\t * @const\n\t * @type {number}\n\t */\n\tvar LABEL_WEEKS\t\t\t= 5;\n\n\t/**\n\t * @private\n\t * @const\n\t * @type {number}\n\t */\n\tvar LABEL_MONTHS\t\t= 6;\n\n\t/**\n\t * @private\n\t * @const\n\t * @type {number}\n\t */\n\tvar LABEL_YEARS\t\t\t= 7;\n\n\t/**\n\t * @private\n\t * @const\n\t * @type {number}\n\t */\n\tvar LABEL_DECADES\t\t= 8;\n\n\t/**\n\t * @private\n\t * @const\n\t * @type {number}\n\t */\n\tvar LABEL_CENTURIES\t\t= 9;\n\n\t/**\n\t * @private\n\t * @const\n\t * @type {number}\n\t */\n\tvar LABEL_MILLENNIA\t\t= 10;\n\n\t/**\n\t * @private\n\t * @type {Array}\n\t */\n\tvar LABELS_SINGLUAR;\n\n\t/**\n\t * @private\n\t * @type {Array}\n\t */\n\tvar LABELS_PLURAL;\n\n\t/**\n\t * @private\n\t * @type {string}\n\t */\n\tvar LABEL_LAST;\n\n\t/**\n\t * @private\n\t * @type {string}\n\t */\n\tvar LABEL_DELIM;\n\n\t/**\n\t * @private\n\t * @type {string}\n\t */\n\tvar LABEL_NOW;\n\n\t/**\n\t * Formats a number & unit as a string\n\t * \n\t * @param {number} value\n\t * @param {number} unit\n\t * @return {string}\n\t */\n\tvar formatter;\n\n\t/**\n\t * Formats a number as a string\n\t * \n\t * @private\n\t * @param {number} value\n\t * @return {string}\n\t */\n\tvar formatNumber;\n\n\t/**\n\t * @private\n\t * @param {number} value\n\t * @param {number} unit unit index into label list\n\t * @return {string}\n\t */\n\tfunction plurality(value, unit) {\n\t\treturn formatNumber(value)+((value === 1) ? LABELS_SINGLUAR[unit] : LABELS_PLURAL[unit]);\n\t}\n\n\t/**\n\t * Formats the entries with singular or plural labels\n\t * \n\t * @private\n\t * @param {Timespan} ts\n\t * @return {Array}\n\t */\n\tvar formatList;\n\n\t/**\n\t * Timespan representation of a duration of time\n\t * \n\t * @private\n\t * @this {Timespan}\n\t * @constructor\n\t */\n\tfunction Timespan() {}\n\n\t/**\n\t * Formats the Timespan as a sentence\n\t * \n\t * @param {string=} emptyLabel the string to use when no values returned\n\t * @return {string}\n\t */\n\tTimespan.prototype.toString = function(emptyLabel) {\n\t\tvar label = formatList(this);\n\n\t\tvar count = label.length;\n\t\tif (!count) {\n\t\t\treturn emptyLabel ? ''+emptyLabel : LABEL_NOW;\n\t\t}\n\t\tif (count === 1) {\n\t\t\treturn label[0];\n\t\t}\n\n\t\tvar last = LABEL_LAST+label.pop();\n\t\treturn label.join(LABEL_DELIM)+last;\n\t};\n\n\t/**\n\t * Formats the Timespan as a sentence in HTML\n\t * \n\t * @param {string=} tag HTML tag name to wrap each value\n\t * @param {string=} emptyLabel the string to use when no values returned\n\t * @return {string}\n\t */\n\tTimespan.prototype.toHTML = function(tag, emptyLabel) {\n\t\ttag = tag || 'span';\n\t\tvar label = formatList(this);\n\n\t\tvar count = label.length;\n\t\tif (!count) {\n\t\t\temptyLabel = emptyLabel || LABEL_NOW;\n\t\t\treturn emptyLabel ? '<'+tag+'>'+emptyLabel+'</'+tag+'>' : emptyLabel;\n\t\t}\n\t\tfor (var i=0; i<count; i++) {\n\t\t\t// wrap each unit in tag\n\t\t\tlabel[i] = '<'+tag+'>'+label[i]+'</'+tag+'>';\n\t\t}\n\t\tif (count === 1) {\n\t\t\treturn label[0];\n\t\t}\n\n\t\tvar last = LABEL_LAST+label.pop();\n\t\treturn label.join(LABEL_DELIM)+last;\n\t};\n\n\t/**\n\t * Applies the Timespan to the given date\n\t * \n\t * @param {Date=} date the date to which the timespan is added.\n\t * @return {Date}\n\t */\n\tTimespan.prototype.addTo = function(date) {\n\t\treturn addToDate(this, date);\n\t};\n\n\t/**\n\t * Formats the entries as English labels\n\t * \n\t * @private\n\t * @param {Timespan} ts\n\t * @return {Array}\n\t */\n\tformatList = function(ts) {\n\t\tvar list = [];\n\n\t\tvar value = ts.millennia;\n\t\tif (value) {\n\t\t\tlist.push(formatter(value, LABEL_MILLENNIA));\n\t\t}\n\n\t\tvalue = ts.centuries;\n\t\tif (value) {\n\t\t\tlist.push(formatter(value, LABEL_CENTURIES));\n\t\t}\n\n\t\tvalue = ts.decades;\n\t\tif (value) {\n\t\t\tlist.push(formatter(value, LABEL_DECADES));\n\t\t}\n\n\t\tvalue = ts.years;\n\t\tif (value) {\n\t\t\tlist.push(formatter(value, LABEL_YEARS));\n\t\t}\n\n\t\tvalue = ts.months;\n\t\tif (value) {\n\t\t\tlist.push(formatter(value, LABEL_MONTHS));\n\t\t}\n\n\t\tvalue = ts.weeks;\n\t\tif (value) {\n\t\t\tlist.push(formatter(value, LABEL_WEEKS));\n\t\t}\n\n\t\tvalue = ts.days;\n\t\tif (value) {\n\t\t\tlist.push(formatter(value, LABEL_DAYS));\n\t\t}\n\n\t\tvalue = ts.hours;\n\t\tif (value) {\n\t\t\tlist.push(formatter(value, LABEL_HOURS));\n\t\t}\n\n\t\tvalue = ts.minutes;\n\t\tif (value) {\n\t\t\tlist.push(formatter(value, LABEL_MINUTES));\n\t\t}\n\n\t\tvalue = ts.seconds;\n\t\tif (value) {\n\t\t\tlist.push(formatter(value, LABEL_SECONDS));\n\t\t}\n\n\t\tvalue = ts.milliseconds;\n\t\tif (value) {\n\t\t\tlist.push(formatter(value, LABEL_MILLISECONDS));\n\t\t}\n\n\t\treturn list;\n\t};\n\n\t/**\n\t * Borrow any underflow units, carry any overflow units\n\t * \n\t * @private\n\t * @param {Timespan} ts\n\t * @param {string} toUnit\n\t */\n\tfunction rippleRounded(ts, toUnit) {\n\t\tswitch (toUnit) {\n\t\t\tcase 'seconds':\n\t\t\t\tif (ts.seconds !== SECONDS_PER_MINUTE || isNaN(ts.minutes)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t// ripple seconds up to minutes\n\t\t\t\tts.minutes++;\n\t\t\t\tts.seconds = 0;\n\n\t\t\t\t/* falls through */\n\t\t\tcase 'minutes':\n\t\t\t\tif (ts.minutes !== MINUTES_PER_HOUR || isNaN(ts.hours)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t// ripple minutes up to hours\n\t\t\t\tts.hours++;\n\t\t\t\tts.minutes = 0;\n\n\t\t\t\t/* falls through */\n\t\t\tcase 'hours':\n\t\t\t\tif (ts.hours !== HOURS_PER_DAY || isNaN(ts.days)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t// ripple hours up to days\n\t\t\t\tts.days++;\n\t\t\t\tts.hours = 0;\n\n\t\t\t\t/* falls through */\n\t\t\tcase 'days':\n\t\t\t\tif (ts.days !== DAYS_PER_WEEK || isNaN(ts.weeks)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t// ripple days up to weeks\n\t\t\t\tts.weeks++;\n\t\t\t\tts.days = 0;\n\n\t\t\t\t/* falls through */\n\t\t\tcase 'weeks':\n\t\t\t\tif (ts.weeks !== daysPerMonth(ts.refMonth)/DAYS_PER_WEEK || isNaN(ts.months)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t// ripple weeks up to months\n\t\t\t\tts.months++;\n\t\t\t\tts.weeks = 0;\n\n\t\t\t\t/* falls through */\n\t\t\tcase 'months':\n\t\t\t\tif (ts.months !== MONTHS_PER_YEAR || isNaN(ts.years)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t// ripple months up to years\n\t\t\t\tts.years++;\n\t\t\t\tts.months = 0;\n\n\t\t\t\t/* falls through */\n\t\t\tcase 'years':\n\t\t\t\tif (ts.years !== YEARS_PER_DECADE || isNaN(ts.decades)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t// ripple years up to decades\n\t\t\t\tts.decades++;\n\t\t\t\tts.years = 0;\n\n\t\t\t\t/* falls through */\n\t\t\tcase 'decades':\n\t\t\t\tif (ts.decades !== DECADES_PER_CENTURY || isNaN(ts.centuries)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t// ripple decades up to centuries\n\t\t\t\tts.centuries++;\n\t\t\t\tts.decades = 0;\n\n\t\t\t\t/* falls through */\n\t\t\tcase 'centuries':\n\t\t\t\tif (ts.centuries !== CENTURIES_PER_MILLENNIUM || isNaN(ts.millennia)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t// ripple centuries up to millennia\n\t\t\t\tts.millennia++;\n\t\t\t\tts.centuries = 0;\n\t\t\t\t/* falls through */\n\t\t\t}\n\t}\n\n\t/**\n\t * Ripple up partial units one place\n\t * \n\t * @private\n\t * @param {Timespan} ts timespan\n\t * @param {number} frac accumulated fractional value\n\t * @param {string} fromUnit source unit name\n\t * @param {string} toUnit target unit name\n\t * @param {number} conversion multiplier between units\n\t * @param {number} digits max number of decimal digits to output\n\t * @return {number} new fractional value\n\t */\n\tfunction fraction(ts, frac, fromUnit, toUnit, conversion, digits) {\n\t\tif (ts[fromUnit] >= 0) {\n\t\t\tfrac += ts[fromUnit];\n\t\t\tdelete ts[fromUnit];\n\t\t}\n\n\t\tfrac /= conversion;\n\t\tif (frac + 1 <= 1) {\n\t\t\t// drop if below machine epsilon\n\t\t\treturn 0;\n\t\t}\n\n\t\tif (ts[toUnit] >= 0) {\n\t\t\t// ensure does not have more than specified number of digits\n\t\t\tts[toUnit] = +(ts[toUnit] + frac).toFixed(digits);\n\t\t\trippleRounded(ts, toUnit);\n\t\t\treturn 0;\n\t\t}\n\n\t\treturn frac;\n\t}\n\n\t/**\n\t * Ripple up partial units to next existing\n\t * \n\t * @private\n\t * @param {Timespan} ts\n\t * @param {number} digits max number of decimal digits to output\n\t */\n\tfunction fractional(ts, digits) {\n\t\tvar frac = fraction(ts, 0, 'milliseconds', 'seconds', MILLISECONDS_PER_SECOND, digits);\n\t\tif (!frac) { return; }\n\n\t\tfrac = fraction(ts, frac, 'seconds', 'minutes', SECONDS_PER_MINUTE, digits);\n\t\tif (!frac) { return; }\n\n\t\tfrac = fraction(ts, frac, 'minutes', 'hours', MINUTES_PER_HOUR, digits);\n\t\tif (!frac) { return; }\n\n\t\tfrac = fraction(ts, frac, 'hours', 'days', HOURS_PER_DAY, digits);\n\t\tif (!frac) { return; }\n\n\t\tfrac = fraction(ts, frac, 'days', 'weeks', DAYS_PER_WEEK, digits);\n\t\tif (!frac) { return; }\n\n\t\tfrac = fraction(ts, frac, 'weeks', 'months', daysPerMonth(ts.refMonth)/DAYS_PER_WEEK, digits);\n\t\tif (!frac) { return; }\n\n\t\tfrac = fraction(ts, frac, 'months', 'years', daysPerYear(ts.refMonth)/daysPerMonth(ts.refMonth), digits);\n\t\tif (!frac) { return; }\n\n\t\tfrac = fraction(ts, frac, 'years', 'decades', YEARS_PER_DECADE, digits);\n\t\tif (!frac) { return; }\n\n\t\tfrac = fraction(ts, frac, 'decades', 'centuries', DECADES_PER_CENTURY, digits);\n\t\tif (!frac) { return; }\n\n\t\tfrac = fraction(ts, frac, 'centuries', 'millennia', CENTURIES_PER_MILLENNIUM, digits);\n\n\t\t// should never reach this with remaining fractional value\n\t\tif (frac) { throw new Error('Fractional unit overflow'); }\n\t}\n\n\t/**\n\t * Borrow any underflow units, carry any overflow units\n\t * \n\t * @private\n\t * @param {Timespan} ts\n\t */\n\tfunction ripple(ts) {\n\t\tvar x;\n\n\t\tif (ts.milliseconds < 0) {\n\t\t\t// ripple seconds down to milliseconds\n\t\t\tx = ceil(-ts.milliseconds / MILLISECONDS_PER_SECOND);\n\t\t\tts.seconds -= x;\n\t\t\tts.milliseconds += x * MILLISECONDS_PER_SECOND;\n\n\t\t} else if (ts.milliseconds >= MILLISECONDS_PER_SECOND) {\n\t\t\t// ripple milliseconds up to seconds\n\t\t\tts.seconds += floor(ts.milliseconds / MILLISECONDS_PER_SECOND);\n\t\t\tts.milliseconds %= MILLISECONDS_PER_SECOND;\n\t\t}\n\n\t\tif (ts.seconds < 0) {\n\t\t\t// ripple minutes down to seconds\n\t\t\tx = ceil(-ts.seconds / SECONDS_PER_MINUTE);\n\t\t\tts.minutes -= x;\n\t\t\tts.seconds += x * SECONDS_PER_MINUTE;\n\n\t\t} else if (ts.seconds >= SECONDS_PER_MINUTE) {\n\t\t\t// ripple seconds up to minutes\n\t\t\tts.minutes += floor(ts.seconds / SECONDS_PER_MINUTE);\n\t\t\tts.seconds %= SECONDS_PER_MINUTE;\n\t\t}\n\n\t\tif (ts.minutes < 0) {\n\t\t\t// ripple hours down to minutes\n\t\t\tx = ceil(-ts.minutes / MINUTES_PER_HOUR);\n\t\t\tts.hours -= x;\n\t\t\tts.minutes += x * MINUTES_PER_HOUR;\n\n\t\t} else if (ts.minutes >= MINUTES_PER_HOUR) {\n\t\t\t// ripple minutes up to hours\n\t\t\tts.hours += floor(ts.minutes / MINUTES_PER_HOUR);\n\t\t\tts.minutes %= MINUTES_PER_HOUR;\n\t\t}\n\n\t\tif (ts.hours < 0) {\n\t\t\t// ripple days down to hours\n\t\t\tx = ceil(-ts.hours / HOURS_PER_DAY);\n\t\t\tts.days -= x;\n\t\t\tts.hours += x * HOURS_PER_DAY;\n\n\t\t} else if (ts.hours >= HOURS_PER_DAY) {\n\t\t\t// ripple hours up to days\n\t\t\tts.days += floor(ts.hours / HOURS_PER_DAY);\n\t\t\tts.hours %= HOURS_PER_DAY;\n\t\t}\n\n\t\twhile (ts.days < 0) {\n\t\t\t// NOTE: never actually seen this loop more than once\n\n\t\t\t// ripple months down to days\n\t\t\tts.months--;\n\t\t\tts.days += borrowMonths(ts.refMonth, 1);\n\t\t}\n\n\t\t// weeks is always zero here\n\n\t\tif (ts.days >= DAYS_PER_WEEK) {\n\t\t\t// ripple days up to weeks\n\t\t\tts.weeks += floor(ts.days / DAYS_PER_WEEK);\n\t\t\tts.days %= DAYS_PER_WEEK;\n\t\t}\n\n\t\tif (ts.months < 0) {\n\t\t\t// ripple years down to months\n\t\t\tx = ceil(-ts.months / MONTHS_PER_YEAR);\n\t\t\tts.years -= x;\n\t\t\tts.months += x * MONTHS_PER_YEAR;\n\n\t\t} else if (ts.months >= MONTHS_PER_YEAR) {\n\t\t\t// ripple months up to years\n\t\t\tts.years += floor(ts.months / MONTHS_PER_YEAR);\n\t\t\tts.months %= MONTHS_PER_YEAR;\n\t\t}\n\n\t\t// years is always non-negative here\n\t\t// decades, centuries and millennia are always zero here\n\n\t\tif (ts.years >= YEARS_PER_DECADE) {\n\t\t\t// ripple years up to decades\n\t\t\tts.decades += floor(ts.years / YEARS_PER_DECADE);\n\t\t\tts.years %= YEARS_PER_DECADE;\n\n\t\t\tif (ts.decades >= DECADES_PER_CENTURY) {\n\t\t\t\t// ripple decades up to centuries\n\t\t\t\tts.centuries += floor(ts.decades / DECADES_PER_CENTURY);\n\t\t\t\tts.decades %= DECADES_PER_CENTURY;\n\n\t\t\t\tif (ts.centuries >= CENTURIES_PER_MILLENNIUM) {\n\t\t\t\t\t// ripple centuries up to millennia\n\t\t\t\t\tts.millennia += floor(ts.centuries / CENTURIES_PER_MILLENNIUM);\n\t\t\t\t\tts.centuries %= CENTURIES_PER_MILLENNIUM;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Remove any units not requested\n\t * \n\t * @private\n\t * @param {Timespan} ts\n\t * @param {number} units the units to populate\n\t * @param {number} max number of labels to output\n\t * @param {number} digits max number of decimal digits to output\n\t */\n\tfunction pruneUnits(ts, units, max, digits) {\n\t\tvar count = 0;\n\n\t\t// Calc from largest unit to smallest to prevent underflow\n\t\tif (!(units & MILLENNIA) || (count >= max)) {\n\t\t\t// ripple millennia down to centuries\n\t\t\tts.centuries += ts.millennia * CENTURIES_PER_MILLENNIUM;\n\t\t\tdelete ts.millennia;\n\n\t\t} else if (ts.millennia) {\n\t\t\tcount++;\n\t\t}\n\n\t\tif (!(units & CENTURIES) || (count >= max)) {\n\t\t\t// ripple centuries down to decades\n\t\t\tts.decades += ts.centuries * DECADES_PER_CENTURY;\n\t\t\tdelete ts.centuries;\n\n\t\t} else if (ts.centuries) {\n\t\t\tcount++;\n\t\t}\n\n\t\tif (!(units & DECADES) || (count >= max)) {\n\t\t\t// ripple decades down to years\n\t\t\tts.years += ts.decades * YEARS_PER_DECADE;\n\t\t\tdelete ts.decades;\n\n\t\t} else if (ts.decades) {\n\t\t\tcount++;\n\t\t}\n\n\t\tif (!(units & YEARS) || (count >= max)) {\n\t\t\t// ripple years down to months\n\t\t\tts.months += ts.years * MONTHS_PER_YEAR;\n\t\t\tdelete ts.years;\n\n\t\t} else if (ts.years) {\n\t\t\tcount++;\n\t\t}\n\n\t\tif (!(units & MONTHS) || (count >= max)) {\n\t\t\t// ripple months down to days\n\t\t\tif (ts.months) {\n\t\t\t\tts.days += borrowMonths(ts.refMonth, ts.months);\n\t\t\t}\n\t\t\tdelete ts.months;\n\n\t\t\tif (ts.days >= DAYS_PER_WEEK) {\n\t\t\t\t// ripple day overflow back up to weeks\n\t\t\t\tts.weeks += floor(ts.days / DAYS_PER_WEEK);\n\t\t\t\tts.days %= DAYS_PER_WEEK;\n\t\t\t}\n\n\t\t} else if (ts.months) {\n\t\t\tcount++;\n\t\t}\n\n\t\tif (!(units & WEEKS) || (count >= max)) {\n\t\t\t// ripple weeks down to days\n\t\t\tts.days += ts.weeks * DAYS_PER_WEEK;\n\t\t\tdelete ts.weeks;\n\n\t\t} else if (ts.weeks) {\n\t\t\tcount++;\n\t\t}\n\n\t\tif (!(units & DAYS) || (count >= max)) {\n\t\t\t//ripple days down to hours\n\t\t\tts.hours += ts.days * HOURS_PER_DAY;\n\t\t\tdelete ts.days;\n\n\t\t} else if (ts.days) {\n\t\t\tcount++;\n\t\t}\n\n\t\tif (!(units & HOURS) || (count >= max)) {\n\t\t\t// ripple hours down to minutes\n\t\t\tts.minutes += ts.hours * MINUTES_PER_HOUR;\n\t\t\tdelete ts.hours;\n\n\t\t} else if (ts.hours) {\n\t\t\tcount++;\n\t\t}\n\n\t\tif (!(units & MINUTES) || (count >= max)) {\n\t\t\t// ripple minutes down to seconds\n\t\t\tts.seconds += ts.minutes * SECONDS_PER_MINUTE;\n\t\t\tdelete ts.minutes;\n\n\t\t} else if (ts.minutes) {\n\t\t\tcount++;\n\t\t}\n\n\t\tif (!(units & SECONDS) || (count >= max)) {\n\t\t\t// ripple seconds down to milliseconds\n\t\t\tts.milliseconds += ts.seconds * MILLISECONDS_PER_SECOND;\n\t\t\tdelete ts.seconds;\n\n\t\t} else if (ts.seconds) {\n\t\t\tcount++;\n\t\t}\n\n\t\t// nothing to ripple milliseconds down to\n\t\t// so ripple back up to smallest existing unit as a fractional value\n\t\tif (!(units & MILLISECONDS) || (count >= max)) {\n\t\t\tfractional(ts, digits);\n\t\t}\n\t}\n\n\t/**\n\t * Populates the Timespan object\n\t * \n\t * @private\n\t * @param {Timespan} ts\n\t * @param {?Date} start the starting date\n\t * @param {?Date} end the ending date\n\t * @param {number} units the units to populate\n\t * @param {number} max number of labels to output\n\t * @param {number} digits max number of decimal digits to output\n\t */\n\tfunction populate(ts, start, end, units, max, digits) {\n\t\tvar now = new Date();\n\n\t\tts.start = start = start || now;\n\t\tts.end = end = end || now;\n\t\tts.units = units;\n\n\t\tts.value = end.getTime() - start.getTime();\n\t\tif (ts.value < 0) {\n\t\t\t// swap if reversed\n\t\t\tvar tmp = end;\n\t\t\tend = start;\n\t\t\tstart = tmp;\n\t\t}\n\n\t\t// reference month for determining days in month\n\t\tts.refMonth = new Date(start.getFullYear(), start.getMonth(), 15, 12, 0, 0);\n\t\ttry {\n\t\t\t// reset to initial deltas\n\t\t\tts.millennia = 0;\n\t\t\tts.centuries = 0;\n\t\t\tts.decades = 0;\n\t\t\tts.years = end.getFullYear() - start.getFullYear();\n\t\t\tts.months = end.getMonth() - start.getMonth();\n\t\t\tts.weeks = 0;\n\t\t\tts.days = end.getDate() - start.getDate();\n\t\t\tts.hours = end.getHours() - start.getHours();\n\t\t\tts.minutes = end.getMinutes() - start.getMinutes();\n\t\t\tts.seconds = end.getSeconds() - start.getSeconds();\n\t\t\tts.milliseconds = end.getMilliseconds() - start.getMilliseconds();\n\n\t\t\tripple(ts);\n\t\t\tpruneUnits(ts, units, max, digits);\n\n\t\t} finally {\n\t\t\tdelete ts.refMonth;\n\t\t}\n\n\t\treturn ts;\n\t}\n\n\t/**\n\t * Determine an appropriate refresh rate based upon units\n\t * \n\t * @private\n\t * @param {number} units the units to populate\n\t * @return {number} milliseconds to delay\n\t */\n\tfunction getDelay(units) {\n\t\tif (units & MILLISECONDS) {\n\t\t\t// refresh very quickly\n\t\t\treturn MILLISECONDS_PER_SECOND / 30; //30Hz\n\t\t}\n\n\t\tif (units & SECONDS) {\n\t\t\t// refresh every second\n\t\t\treturn MILLISECONDS_PER_SECOND; //1Hz\n\t\t}\n\n\t\tif (units & MINUTES) {\n\t\t\t// refresh every minute\n\t\t\treturn MILLISECONDS_PER_SECOND * SECONDS_PER_MINUTE;\n\t\t}\n\n\t\tif (units & HOURS) {\n\t\t\t// refresh hourly\n\t\t\treturn MILLISECONDS_PER_SECOND * SECONDS_PER_MINUTE * MINUTES_PER_HOUR;\n\t\t}\n\t\t\n\t\tif (units & DAYS) {\n\t\t\t// refresh daily\n\t\t\treturn MILLISECONDS_PER_SECOND * SECONDS_PER_MINUTE * MINUTES_PER_HOUR * HOURS_PER_DAY;\n\t\t}\n\n\t\t// refresh the rest weekly\n\t\treturn MILLISECONDS_PER_SECOND * SECONDS_PER_MINUTE * MINUTES_PER_HOUR * HOURS_PER_DAY * DAYS_PER_WEEK;\n\t}\n\n\t/**\n\t * API entry point\n\t * \n\t * @public\n\t * @param {Date|number|Timespan|null|function(Timespan,number)} start the starting date\n\t * @param {Date|number|Timespan|null|function(Timespan,number)} end the ending date\n\t * @param {number=} units the units to populate\n\t * @param {number=} max number of labels to output\n\t * @param {number=} digits max number of decimal digits to output\n\t * @return {Timespan|number}\n\t */\n\tfunction countdown(start, end, units, max, digits) {\n\t\tvar callback;\n\n\t\t// ensure some units or use defaults\n\t\tunits = +units || DEFAULTS;\n\t\t// max must be positive\n\t\tmax = (max > 0) ? max : NaN;\n\t\t// clamp digits to an integer between [0, 20]\n\t\tdigits = (digits > 0) ? (digits < 20) ? Math.round(digits) : 20 : 0;\n\n\t\t// ensure start date\n\t\tvar startTS = null;\n\t\tif ('function' === typeof start) {\n\t\t\tcallback = start;\n\t\t\tstart = null;\n\n\t\t} else if (!(start instanceof Date)) {\n\t\t\tif ((start !== null) && isFinite(start)) {\n\t\t\t\tstart = new Date(+start);\n\t\t\t} else {\n\t\t\t\tif ('object' === typeof startTS) {\n\t\t\t\t\tstartTS = /** @type{Timespan} */(start);\n\t\t\t\t}\n\t\t\t\tstart = null;\n\t\t\t}\n\t\t}\n\n\t\t// ensure end date\n\t\tvar endTS = null;\n\t\tif ('function' === typeof end) {\n\t\t\tcallback = end;\n\t\t\tend = null;\n\n\t\t} else if (!(end instanceof Date)) {\n\t\t\tif ((end !== null) && isFinite(end)) {\n\t\t\t\tend = new Date(+end);\n\t\t\t} else {\n\t\t\t\tif ('object' === typeof end) {\n\t\t\t\t\tendTS = /** @type{Timespan} */(end);\n\t\t\t\t}\n\t\t\t\tend = null;\n\t\t\t}\n\t\t}\n\n\t\t// must wait to interpret timespans until after resolving dates\n\t\tif (startTS) {\n\t\t\tstart = addToDate(startTS, end);\n\t\t}\n\t\tif (endTS) {\n\t\t\tend = addToDate(endTS, start);\n\t\t}\n\n\t\tif (!start && !end) {\n\t\t\t// used for unit testing\n\t\t\treturn new Timespan();\n\t\t}\n\n\t\tif (!callback) {\n\t\t\treturn populate(new Timespan(), /** @type{Date} */(start), /** @type{Date} */(end), /** @type{number} */(units), /** @type{number} */(max), /** @type{number} */(digits));\n\t\t}\n\n\t\t// base delay off units\n\t\tvar delay = getDelay(units),\n\t\t\ttimerId,\n\t\t\tfn = function() {\n\t\t\t\tcallback(\n\t\t\t\t\tpopulate(new Timespan(), /** @type{Date} */(start), /** @type{Date} */(end), /** @type{number} */(units), /** @type{number} */(max), /** @type{number} */(digits)),\n\t\t\t\t\ttimerId\n\t\t\t\t);\n\t\t\t};\n\n\t\tfn();\n\t\treturn (timerId = setInterval(fn, delay));\n\t}\n\n\t/**\n\t * @public\n\t * @const\n\t * @type {number}\n\t */\n\tcountdown.MILLISECONDS = MILLISECONDS;\n\n\t/**\n\t * @public\n\t * @const\n\t * @type {number}\n\t */\n\tcountdown.SECONDS = SECONDS;\n\n\t/**\n\t * @public\n\t * @const\n\t * @type {number}\n\t */\n\tcountdown.MINUTES = MINUTES;\n\n\t/**\n\t * @public\n\t * @const\n\t * @type {number}\n\t */\n\tcountdown.HOURS = HOURS;\n\n\t/**\n\t * @public\n\t * @const\n\t * @type {number}\n\t */\n\tcountdown.DAYS = DAYS;\n\n\t/**\n\t * @public\n\t * @const\n\t * @type {number}\n\t */\n\tcountdown.WEEKS = WEEKS;\n\n\t/**\n\t * @public\n\t * @const\n\t * @type {number}\n\t */\n\tcountdown.MONTHS = MONTHS;\n\n\t/**\n\t * @public\n\t * @const\n\t * @type {number}\n\t */\n\tcountdown.YEARS = YEARS;\n\n\t/**\n\t * @public\n\t * @const\n\t * @type {number}\n\t */\n\tcountdown.DECADES = DECADES;\n\n\t/**\n\t * @public\n\t * @const\n\t * @type {number}\n\t */\n\tcountdown.CENTURIES = CENTURIES;\n\n\t/**\n\t * @public\n\t * @const\n\t * @type {number}\n\t */\n\tcountdown.MILLENNIA = MILLENNIA;\n\n\t/**\n\t * @public\n\t * @const\n\t * @type {number}\n\t */\n\tcountdown.DEFAULTS = DEFAULTS;\n\n\t/**\n\t * @public\n\t * @const\n\t * @type {number}\n\t */\n\tcountdown.ALL = MILLENNIA|CENTURIES|DECADES|YEARS|MONTHS|WEEKS|DAYS|HOURS|MINUTES|SECONDS|MILLISECONDS;\n\n\t/**\n\t * Customize the format settings.\n\t * @public\n\t * @param {Object} format settings object\n\t */\n\tvar setFormat = countdown.setFormat = function(format) {\n\t\tif (!format) { return; }\n\n\t\tif ('singular' in format || 'plural' in format) {\n\t\t\tvar singular = format.singular || [];\n\t\t\tif (singular.split) {\n\t\t\t\tsingular = singular.split('|');\n\t\t\t}\n\t\t\tvar plural = format.plural || [];\n\t\t\tif (plural.split) {\n\t\t\t\tplural = plural.split('|');\n\t\t\t}\n\n\t\t\tfor (var i=LABEL_MILLISECONDS; i<=LABEL_MILLENNIA; i++) {\n\t\t\t\t// override any specified units\n\t\t\t\tLABELS_SINGLUAR[i] = singular[i] || LABELS_SINGLUAR[i];\n\t\t\t\tLABELS_PLURAL[i] = plural[i] || LABELS_PLURAL[i];\n\t\t\t}\n\t\t}\n\n\t\tif ('string' === typeof format.last) {\n\t\t\tLABEL_LAST = format.last;\n\t\t}\n\t\tif ('string' === typeof format.delim) {\n\t\t\tLABEL_DELIM = format.delim;\n\t\t}\n\t\tif ('string' === typeof format.empty) {\n\t\t\tLABEL_NOW = format.empty;\n\t\t}\n\t\tif ('function' === typeof format.formatNumber) {\n\t\t\tformatNumber = format.formatNumber;\n\t\t}\n\t\tif ('function' === typeof format.formatter) {\n\t\t\tformatter = format.formatter;\n\t\t}\n\t};\n\n\t/**\n\t * Revert to the default formatting.\n\t * @public\n\t */\n\tvar resetFormat = countdown.resetFormat = function() {\n\t\tLABELS_SINGLUAR = ' millisecond| second| minute| hour| day| week| month| year| decade| century| millennium'.split('|');\n\t\tLABELS_PLURAL = ' milliseconds| seconds| minutes| hours| days| weeks| months| years| decades| centuries| millennia'.split('|');\n\t\tLABEL_LAST = ' and ';\n\t\tLABEL_DELIM = ', ';\n\t\tLABEL_NOW = '';\n\t\tformatNumber = function(value) { return value; };\n\t\tformatter = plurality;\n\t};\n\n\t/**\n\t * Override the unit labels.\n\t * @public\n\t * @param {string|Array=} singular a pipe ('|') delimited list of singular unit name overrides\n\t * @param {string|Array=} plural a pipe ('|') delimited list of plural unit name overrides\n\t * @param {string=} last a delimiter before the last unit (default: ' and ')\n\t * @param {string=} delim a delimiter to use between all other units (default: ', ')\n\t * @param {string=} empty a label to use when all units are zero (default: '')\n\t * @param {function(number):string=} formatNumber a function which formats numbers as a string\n\t * @param {function(number,number):string=} formatter a function which formats a number/unit pair as a string\n\t * @deprecated since version 2.6.0\n\t */\n\tcountdown.setLabels = function(singular, plural, last, delim, empty, formatNumber, formatter) {\n\t\tsetFormat({\n\t\t\tsingular: singular,\n\t\t\tplural: plural,\n\t\t\tlast: last,\n\t\t\tdelim: delim,\n\t\t\tempty: empty,\n\t\t\tformatNumber: formatNumber,\n\t\t\tformatter: formatter\n\t\t});\n\t};\n\n\t/**\n\t * Revert to the default unit labels.\n\t * @public\n\t * @deprecated since version 2.6.0\n\t */\n\tcountdown.resetLabels = resetFormat;\n\n\tresetFormat();\n\n\tif (module && module.exports) {\n\t\tmodule.exports = countdown;\n\n\t} else if (typeof window.define === 'function' && typeof window.define.amd !== 'undefined') {\n\t\twindow.define('countdown', [], function() {\n\t\t\treturn countdown;\n\t\t});\n\t}\n\n\treturn countdown;\n\n})(module);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/countdown/countdown.js\n// module id = 278\n// module chunks = 5",";(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory();\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\troot.CryptoJS = factory();\n\t}\n}(this, function () {\n\n\t/**\n\t * CryptoJS core components.\n\t */\n\tvar CryptoJS = CryptoJS || (function (Math, undefined) {\n\t    /*\n\t     * Local polyfil of Object.create\n\t     */\n\t    var create = Object.create || (function () {\n\t        function F() {};\n\n\t        return function (obj) {\n\t            var subtype;\n\n\t            F.prototype = obj;\n\n\t            subtype = new F();\n\n\t            F.prototype = null;\n\n\t            return subtype;\n\t        };\n\t    }())\n\n\t    /**\n\t     * CryptoJS namespace.\n\t     */\n\t    var C = {};\n\n\t    /**\n\t     * Library namespace.\n\t     */\n\t    var C_lib = C.lib = {};\n\n\t    /**\n\t     * Base object for prototypal inheritance.\n\t     */\n\t    var Base = C_lib.Base = (function () {\n\n\n\t        return {\n\t            /**\n\t             * Creates a new object that inherits from this object.\n\t             *\n\t             * @param {Object} overrides Properties to copy into the new object.\n\t             *\n\t             * @return {Object} The new object.\n\t             *\n\t             * @static\n\t             *\n\t             * @example\n\t             *\n\t             *     var MyType = CryptoJS.lib.Base.extend({\n\t             *         field: 'value',\n\t             *\n\t             *         method: function () {\n\t             *         }\n\t             *     });\n\t             */\n\t            extend: function (overrides) {\n\t                // Spawn\n\t                var subtype = create(this);\n\n\t                // Augment\n\t                if (overrides) {\n\t                    subtype.mixIn(overrides);\n\t                }\n\n\t                // Create default initializer\n\t                if (!subtype.hasOwnProperty('init') || this.init === subtype.init) {\n\t                    subtype.init = function () {\n\t                        subtype.$super.init.apply(this, arguments);\n\t                    };\n\t                }\n\n\t                // Initializer's prototype is the subtype object\n\t                subtype.init.prototype = subtype;\n\n\t                // Reference supertype\n\t                subtype.$super = this;\n\n\t                return subtype;\n\t            },\n\n\t            /**\n\t             * Extends this object and runs the init method.\n\t             * Arguments to create() will be passed to init().\n\t             *\n\t             * @return {Object} The new object.\n\t             *\n\t             * @static\n\t             *\n\t             * @example\n\t             *\n\t             *     var instance = MyType.create();\n\t             */\n\t            create: function () {\n\t                var instance = this.extend();\n\t                instance.init.apply(instance, arguments);\n\n\t                return instance;\n\t            },\n\n\t            /**\n\t             * Initializes a newly created object.\n\t             * Override this method to add some logic when your objects are created.\n\t             *\n\t             * @example\n\t             *\n\t             *     var MyType = CryptoJS.lib.Base.extend({\n\t             *         init: function () {\n\t             *             // ...\n\t             *         }\n\t             *     });\n\t             */\n\t            init: function () {\n\t            },\n\n\t            /**\n\t             * Copies properties into this object.\n\t             *\n\t             * @param {Object} properties The properties to mix in.\n\t             *\n\t             * @example\n\t             *\n\t             *     MyType.mixIn({\n\t             *         field: 'value'\n\t             *     });\n\t             */\n\t            mixIn: function (properties) {\n\t                for (var propertyName in properties) {\n\t                    if (properties.hasOwnProperty(propertyName)) {\n\t                        this[propertyName] = properties[propertyName];\n\t                    }\n\t                }\n\n\t                // IE won't copy toString using the loop above\n\t                if (properties.hasOwnProperty('toString')) {\n\t                    this.toString = properties.toString;\n\t                }\n\t            },\n\n\t            /**\n\t             * Creates a copy of this object.\n\t             *\n\t             * @return {Object} The clone.\n\t             *\n\t             * @example\n\t             *\n\t             *     var clone = instance.clone();\n\t             */\n\t            clone: function () {\n\t                return this.init.prototype.extend(this);\n\t            }\n\t        };\n\t    }());\n\n\t    /**\n\t     * An array of 32-bit words.\n\t     *\n\t     * @property {Array} words The array of 32-bit words.\n\t     * @property {number} sigBytes The number of significant bytes in this word array.\n\t     */\n\t    var WordArray = C_lib.WordArray = Base.extend({\n\t        /**\n\t         * Initializes a newly created word array.\n\t         *\n\t         * @param {Array} words (Optional) An array of 32-bit words.\n\t         * @param {number} sigBytes (Optional) The number of significant bytes in the words.\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.lib.WordArray.create();\n\t         *     var wordArray = CryptoJS.lib.WordArray.create([0x00010203, 0x04050607]);\n\t         *     var wordArray = CryptoJS.lib.WordArray.create([0x00010203, 0x04050607], 6);\n\t         */\n\t        init: function (words, sigBytes) {\n\t            words = this.words = words || [];\n\n\t            if (sigBytes != undefined) {\n\t                this.sigBytes = sigBytes;\n\t            } else {\n\t                this.sigBytes = words.length * 4;\n\t            }\n\t        },\n\n\t        /**\n\t         * Converts this word array to a string.\n\t         *\n\t         * @param {Encoder} encoder (Optional) The encoding strategy to use. Default: CryptoJS.enc.Hex\n\t         *\n\t         * @return {string} The stringified word array.\n\t         *\n\t         * @example\n\t         *\n\t         *     var string = wordArray + '';\n\t         *     var string = wordArray.toString();\n\t         *     var string = wordArray.toString(CryptoJS.enc.Utf8);\n\t         */\n\t        toString: function (encoder) {\n\t            return (encoder || Hex).stringify(this);\n\t        },\n\n\t        /**\n\t         * Concatenates a word array to this word array.\n\t         *\n\t         * @param {WordArray} wordArray The word array to append.\n\t         *\n\t         * @return {WordArray} This word array.\n\t         *\n\t         * @example\n\t         *\n\t         *     wordArray1.concat(wordArray2);\n\t         */\n\t        concat: function (wordArray) {\n\t            // Shortcuts\n\t            var thisWords = this.words;\n\t            var thatWords = wordArray.words;\n\t            var thisSigBytes = this.sigBytes;\n\t            var thatSigBytes = wordArray.sigBytes;\n\n\t            // Clamp excess bits\n\t            this.clamp();\n\n\t            // Concat\n\t            if (thisSigBytes % 4) {\n\t                // Copy one byte at a time\n\t                for (var i = 0; i < thatSigBytes; i++) {\n\t                    var thatByte = (thatWords[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;\n\t                    thisWords[(thisSigBytes + i) >>> 2] |= thatByte << (24 - ((thisSigBytes + i) % 4) * 8);\n\t                }\n\t            } else {\n\t                // Copy one word at a time\n\t                for (var i = 0; i < thatSigBytes; i += 4) {\n\t                    thisWords[(thisSigBytes + i) >>> 2] = thatWords[i >>> 2];\n\t                }\n\t            }\n\t            this.sigBytes += thatSigBytes;\n\n\t            // Chainable\n\t            return this;\n\t        },\n\n\t        /**\n\t         * Removes insignificant bits.\n\t         *\n\t         * @example\n\t         *\n\t         *     wordArray.clamp();\n\t         */\n\t        clamp: function () {\n\t            // Shortcuts\n\t            var words = this.words;\n\t            var sigBytes = this.sigBytes;\n\n\t            // Clamp\n\t            words[sigBytes >>> 2] &= 0xffffffff << (32 - (sigBytes % 4) * 8);\n\t            words.length = Math.ceil(sigBytes / 4);\n\t        },\n\n\t        /**\n\t         * Creates a copy of this word array.\n\t         *\n\t         * @return {WordArray} The clone.\n\t         *\n\t         * @example\n\t         *\n\t         *     var clone = wordArray.clone();\n\t         */\n\t        clone: function () {\n\t            var clone = Base.clone.call(this);\n\t            clone.words = this.words.slice(0);\n\n\t            return clone;\n\t        },\n\n\t        /**\n\t         * Creates a word array filled with random bytes.\n\t         *\n\t         * @param {number} nBytes The number of random bytes to generate.\n\t         *\n\t         * @return {WordArray} The random word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.lib.WordArray.random(16);\n\t         */\n\t        random: function (nBytes) {\n\t            var words = [];\n\n\t            var r = (function (m_w) {\n\t                var m_w = m_w;\n\t                var m_z = 0x3ade68b1;\n\t                var mask = 0xffffffff;\n\n\t                return function () {\n\t                    m_z = (0x9069 * (m_z & 0xFFFF) + (m_z >> 0x10)) & mask;\n\t                    m_w = (0x4650 * (m_w & 0xFFFF) + (m_w >> 0x10)) & mask;\n\t                    var result = ((m_z << 0x10) + m_w) & mask;\n\t                    result /= 0x100000000;\n\t                    result += 0.5;\n\t                    return result * (Math.random() > .5 ? 1 : -1);\n\t                }\n\t            });\n\n\t            for (var i = 0, rcache; i < nBytes; i += 4) {\n\t                var _r = r((rcache || Math.random()) * 0x100000000);\n\n\t                rcache = _r() * 0x3ade67b7;\n\t                words.push((_r() * 0x100000000) | 0);\n\t            }\n\n\t            return new WordArray.init(words, nBytes);\n\t        }\n\t    });\n\n\t    /**\n\t     * Encoder namespace.\n\t     */\n\t    var C_enc = C.enc = {};\n\n\t    /**\n\t     * Hex encoding strategy.\n\t     */\n\t    var Hex = C_enc.Hex = {\n\t        /**\n\t         * Converts a word array to a hex string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @return {string} The hex string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var hexString = CryptoJS.enc.Hex.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray) {\n\t            // Shortcuts\n\t            var words = wordArray.words;\n\t            var sigBytes = wordArray.sigBytes;\n\n\t            // Convert\n\t            var hexChars = [];\n\t            for (var i = 0; i < sigBytes; i++) {\n\t                var bite = (words[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;\n\t                hexChars.push((bite >>> 4).toString(16));\n\t                hexChars.push((bite & 0x0f).toString(16));\n\t            }\n\n\t            return hexChars.join('');\n\t        },\n\n\t        /**\n\t         * Converts a hex string to a word array.\n\t         *\n\t         * @param {string} hexStr The hex string.\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Hex.parse(hexString);\n\t         */\n\t        parse: function (hexStr) {\n\t            // Shortcut\n\t            var hexStrLength = hexStr.length;\n\n\t            // Convert\n\t            var words = [];\n\t            for (var i = 0; i < hexStrLength; i += 2) {\n\t                words[i >>> 3] |= parseInt(hexStr.substr(i, 2), 16) << (24 - (i % 8) * 4);\n\t            }\n\n\t            return new WordArray.init(words, hexStrLength / 2);\n\t        }\n\t    };\n\n\t    /**\n\t     * Latin1 encoding strategy.\n\t     */\n\t    var Latin1 = C_enc.Latin1 = {\n\t        /**\n\t         * Converts a word array to a Latin1 string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @return {string} The Latin1 string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var latin1String = CryptoJS.enc.Latin1.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray) {\n\t            // Shortcuts\n\t            var words = wordArray.words;\n\t            var sigBytes = wordArray.sigBytes;\n\n\t            // Convert\n\t            var latin1Chars = [];\n\t            for (var i = 0; i < sigBytes; i++) {\n\t                var bite = (words[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;\n\t                latin1Chars.push(String.fromCharCode(bite));\n\t            }\n\n\t            return latin1Chars.join('');\n\t        },\n\n\t        /**\n\t         * Converts a Latin1 string to a word array.\n\t         *\n\t         * @param {string} latin1Str The Latin1 string.\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Latin1.parse(latin1String);\n\t         */\n\t        parse: function (latin1Str) {\n\t            // Shortcut\n\t            var latin1StrLength = latin1Str.length;\n\n\t            // Convert\n\t            var words = [];\n\t            for (var i = 0; i < latin1StrLength; i++) {\n\t                words[i >>> 2] |= (latin1Str.charCodeAt(i) & 0xff) << (24 - (i % 4) * 8);\n\t            }\n\n\t            return new WordArray.init(words, latin1StrLength);\n\t        }\n\t    };\n\n\t    /**\n\t     * UTF-8 encoding strategy.\n\t     */\n\t    var Utf8 = C_enc.Utf8 = {\n\t        /**\n\t         * Converts a word array to a UTF-8 string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @return {string} The UTF-8 string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var utf8String = CryptoJS.enc.Utf8.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray) {\n\t            try {\n\t                return decodeURIComponent(escape(Latin1.stringify(wordArray)));\n\t            } catch (e) {\n\t                throw new Error('Malformed UTF-8 data');\n\t            }\n\t        },\n\n\t        /**\n\t         * Converts a UTF-8 string to a word array.\n\t         *\n\t         * @param {string} utf8Str The UTF-8 string.\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Utf8.parse(utf8String);\n\t         */\n\t        parse: function (utf8Str) {\n\t            return Latin1.parse(unescape(encodeURIComponent(utf8Str)));\n\t        }\n\t    };\n\n\t    /**\n\t     * Abstract buffered block algorithm template.\n\t     *\n\t     * The property blockSize must be implemented in a concrete subtype.\n\t     *\n\t     * @property {number} _minBufferSize The number of blocks that should be kept unprocessed in the buffer. Default: 0\n\t     */\n\t    var BufferedBlockAlgorithm = C_lib.BufferedBlockAlgorithm = Base.extend({\n\t        /**\n\t         * Resets this block algorithm's data buffer to its initial state.\n\t         *\n\t         * @example\n\t         *\n\t         *     bufferedBlockAlgorithm.reset();\n\t         */\n\t        reset: function () {\n\t            // Initial values\n\t            this._data = new WordArray.init();\n\t            this._nDataBytes = 0;\n\t        },\n\n\t        /**\n\t         * Adds new data to this block algorithm's buffer.\n\t         *\n\t         * @param {WordArray|string} data The data to append. Strings are converted to a WordArray using UTF-8.\n\t         *\n\t         * @example\n\t         *\n\t         *     bufferedBlockAlgorithm._append('data');\n\t         *     bufferedBlockAlgorithm._append(wordArray);\n\t         */\n\t        _append: function (data) {\n\t            // Convert string to WordArray, else assume WordArray already\n\t            if (typeof data == 'string') {\n\t                data = Utf8.parse(data);\n\t            }\n\n\t            // Append\n\t            this._data.concat(data);\n\t            this._nDataBytes += data.sigBytes;\n\t        },\n\n\t        /**\n\t         * Processes available data blocks.\n\t         *\n\t         * This method invokes _doProcessBlock(offset), which must be implemented by a concrete subtype.\n\t         *\n\t         * @param {boolean} doFlush Whether all blocks and partial blocks should be processed.\n\t         *\n\t         * @return {WordArray} The processed data.\n\t         *\n\t         * @example\n\t         *\n\t         *     var processedData = bufferedBlockAlgorithm._process();\n\t         *     var processedData = bufferedBlockAlgorithm._process(!!'flush');\n\t         */\n\t        _process: function (doFlush) {\n\t            // Shortcuts\n\t            var data = this._data;\n\t            var dataWords = data.words;\n\t            var dataSigBytes = data.sigBytes;\n\t            var blockSize = this.blockSize;\n\t            var blockSizeBytes = blockSize * 4;\n\n\t            // Count blocks ready\n\t            var nBlocksReady = dataSigBytes / blockSizeBytes;\n\t            if (doFlush) {\n\t                // Round up to include partial blocks\n\t                nBlocksReady = Math.ceil(nBlocksReady);\n\t            } else {\n\t                // Round down to include only full blocks,\n\t                // less the number of blocks that must remain in the buffer\n\t                nBlocksReady = Math.max((nBlocksReady | 0) - this._minBufferSize, 0);\n\t            }\n\n\t            // Count words ready\n\t            var nWordsReady = nBlocksReady * blockSize;\n\n\t            // Count bytes ready\n\t            var nBytesReady = Math.min(nWordsReady * 4, dataSigBytes);\n\n\t            // Process blocks\n\t            if (nWordsReady) {\n\t                for (var offset = 0; offset < nWordsReady; offset += blockSize) {\n\t                    // Perform concrete-algorithm logic\n\t                    this._doProcessBlock(dataWords, offset);\n\t                }\n\n\t                // Remove processed words\n\t                var processedWords = dataWords.splice(0, nWordsReady);\n\t                data.sigBytes -= nBytesReady;\n\t            }\n\n\t            // Return processed words\n\t            return new WordArray.init(processedWords, nBytesReady);\n\t        },\n\n\t        /**\n\t         * Creates a copy of this object.\n\t         *\n\t         * @return {Object} The clone.\n\t         *\n\t         * @example\n\t         *\n\t         *     var clone = bufferedBlockAlgorithm.clone();\n\t         */\n\t        clone: function () {\n\t            var clone = Base.clone.call(this);\n\t            clone._data = this._data.clone();\n\n\t            return clone;\n\t        },\n\n\t        _minBufferSize: 0\n\t    });\n\n\t    /**\n\t     * Abstract hasher template.\n\t     *\n\t     * @property {number} blockSize The number of 32-bit words this hasher operates on. Default: 16 (512 bits)\n\t     */\n\t    var Hasher = C_lib.Hasher = BufferedBlockAlgorithm.extend({\n\t        /**\n\t         * Configuration options.\n\t         */\n\t        cfg: Base.extend(),\n\n\t        /**\n\t         * Initializes a newly created hasher.\n\t         *\n\t         * @param {Object} cfg (Optional) The configuration options to use for this hash computation.\n\t         *\n\t         * @example\n\t         *\n\t         *     var hasher = CryptoJS.algo.SHA256.create();\n\t         */\n\t        init: function (cfg) {\n\t            // Apply config defaults\n\t            this.cfg = this.cfg.extend(cfg);\n\n\t            // Set initial values\n\t            this.reset();\n\t        },\n\n\t        /**\n\t         * Resets this hasher to its initial state.\n\t         *\n\t         * @example\n\t         *\n\t         *     hasher.reset();\n\t         */\n\t        reset: function () {\n\t            // Reset data buffer\n\t            BufferedBlockAlgorithm.reset.call(this);\n\n\t            // Perform concrete-hasher logic\n\t            this._doReset();\n\t        },\n\n\t        /**\n\t         * Updates this hasher with a message.\n\t         *\n\t         * @param {WordArray|string} messageUpdate The message to append.\n\t         *\n\t         * @return {Hasher} This hasher.\n\t         *\n\t         * @example\n\t         *\n\t         *     hasher.update('message');\n\t         *     hasher.update(wordArray);\n\t         */\n\t        update: function (messageUpdate) {\n\t            // Append\n\t            this._append(messageUpdate);\n\n\t            // Update the hash\n\t            this._process();\n\n\t            // Chainable\n\t            return this;\n\t        },\n\n\t        /**\n\t         * Finalizes the hash computation.\n\t         * Note that the finalize operation is effectively a destructive, read-once operation.\n\t         *\n\t         * @param {WordArray|string} messageUpdate (Optional) A final message update.\n\t         *\n\t         * @return {WordArray} The hash.\n\t         *\n\t         * @example\n\t         *\n\t         *     var hash = hasher.finalize();\n\t         *     var hash = hasher.finalize('message');\n\t         *     var hash = hasher.finalize(wordArray);\n\t         */\n\t        finalize: function (messageUpdate) {\n\t            // Final message update\n\t            if (messageUpdate) {\n\t                this._append(messageUpdate);\n\t            }\n\n\t            // Perform concrete-hasher logic\n\t            var hash = this._doFinalize();\n\n\t            return hash;\n\t        },\n\n\t        blockSize: 512/32,\n\n\t        /**\n\t         * Creates a shortcut function to a hasher's object interface.\n\t         *\n\t         * @param {Hasher} hasher The hasher to create a helper for.\n\t         *\n\t         * @return {Function} The shortcut function.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var SHA256 = CryptoJS.lib.Hasher._createHelper(CryptoJS.algo.SHA256);\n\t         */\n\t        _createHelper: function (hasher) {\n\t            return function (message, cfg) {\n\t                return new hasher.init(cfg).finalize(message);\n\t            };\n\t        },\n\n\t        /**\n\t         * Creates a shortcut function to the HMAC's object interface.\n\t         *\n\t         * @param {Hasher} hasher The hasher to use in this HMAC helper.\n\t         *\n\t         * @return {Function} The shortcut function.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var HmacSHA256 = CryptoJS.lib.Hasher._createHmacHelper(CryptoJS.algo.SHA256);\n\t         */\n\t        _createHmacHelper: function (hasher) {\n\t            return function (message, key) {\n\t                return new C_algo.HMAC.init(hasher, key).finalize(message);\n\t            };\n\t        }\n\t    });\n\n\t    /**\n\t     * Algorithm namespace.\n\t     */\n\t    var C_algo = C.algo = {};\n\n\t    return C;\n\t}(Math));\n\n\n\treturn CryptoJS;\n\n}));\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/crypto-js/core.js\n// module id = 279\n// module chunks = 5",";/* Version f13718297ad3d9e6b80d6bc11e953001 v:4.2.6.1, c:c8c088bee6f12e7f0aaafbb5d077ef18f63aa268, b:5372 n:35-4.2.6.next-build */(function(){new function(){if(!window.ADRUM&&!0!==window[\"adrum-disable\"]){var g=window.ADRUM={};window[\"adrum-start-time\"]=window[\"adrum-start-time\"]||(new Date).getTime();(function(a){(function(a){a.Zc=function(){for(var a=[],d=0;d<arguments.length;d++)a[d-0]=arguments[d];for(d=0;d<a.length;d++){var b=a[d];b&&b.setUp()}}})(a.monitor||(a.monitor={}))})(g||(g={}));(function(a){a=a.conf||(a.conf={});a.beaconUrlHttp=\"http://col.eum-appdynamics.com\";a.beaconUrlHttps=\"https://col.eum-appdynamics.com\";a.corsEndpointPath=\"/eumcollector/beacons/browser/v1\";\na.imageEndpointPath=\"/eumcollector/adrum.gif?\";a.appKey=window[\"adrum-app-key\"]||\"AD-AAB-AAC-SRG\";var d=\"https:\"===document.location.protocol;a.adrumExtUrl=(d?\"https://cdn.appdynamics.com\":\"http://cdn.appdynamics.com\")+\"/adrum-ext.f13718297ad3d9e6b80d6bc11e953001.js\";a.adrumXdUrl=\"https://cdn.appdynamics.com/adrum-xd.f13718297ad3d9e6b80d6bc11e953001.html\";a.agentVer=\"4.2.6.1\";a.sendImageBeacon=\"false\";if(window[\"adrum-geo-resolver-url\"]){var f=window[\"adrum-geo-resolver-url\"],c=f.indexOf(\"://\");-1!=\nc&&(f=f.substring(c+3));f=(d?\"https://\":\"http://\")+f}else f=d?\"\":\"\";a.geoResolverUrl=f;a.useStrictDomainCookies=!0===window[\"adrum-use-strict-domain-cookies\"];a.userConf=window[\"adrum-config\"];a.$d=10})(g||(g={}));(function(a){(function(d){function f(a){return\"undefined\"!==typeof a&&null!==a}function c(a){return\"[object Array]\"===Object.prototype.toString.apply(a)}function b(a){return\"object\"==typeof a&&!c(a)&&null!==a}function e(a){return\"string\"==\ntypeof a}function h(a,p){for(var e in p){var d=p[e];if(p.hasOwnProperty(e)&&f(d)){var g=a[e];b(d)&&b(g)?h(g,d):a[e]=c(g)&&c(d)?g.concat(d):d}}return a}function p(a){return e(a)?a.replace(/^\\s*/,\"\").replace(/\\s*$/,\"\"):a}d.isDefined=f;d.isArray=c;d.isObject=b;d.isFunction=function(a){return\"function\"==typeof a||!1};d.isString=e;d.isNumber=function(a){return\"number\"==typeof a};d.Ta=function(a){setTimeout(a,0)};d.addEventListener=function(h,b,p){function e(){try{return p.apply(this,Array.prototype.slice.call(arguments))}catch(d){a.exception(d,\n\"M1\",b,h,d)}}a.isDebug&&a.log(\"M0\",b,h);h.addEventListener?h.addEventListener(b,e,!1):h.attachEvent&&h.attachEvent(\"on\"+b,e)};d.loadScriptAsync=function(h){var b=document.createElement(\"script\");b.async=!0;b.src=h;var p=document.getElementsByTagName(\"script\")[0];p?(p.parentNode.insertBefore(b,p),a.log(\"M2\",h)):a.log(\"M3\",h)};d.mergeJSON=h;d.od=function(a){var h=[];a&&(d.isObject(a)?h=[a]:d.isArray(a)&&(h=a));return h};d.generateGUID=\"undefined\"!==typeof window.crypto&&\"undefined\"!==typeof window.crypto.getRandomValues?\nfunction(){function a(h){for(h=h.toString(16);4>h.length;)h=\"0\"+h;return h}var h=new Uint16Array(8);window.crypto.getRandomValues(h);return a(h[0])+a(h[1])+\"_\"+a(h[2])+\"_\"+a(h[3])+\"_\"+a(h[4])+\"_\"+a(h[5])+a(h[6])+a(h[7])}:function(){return\"xxxxxxxx_xxxx_4xxx_yxxx_xxxxxxxxxxxx\".replace(/[xy]/g,function(a){var h=16*Math.random()|0;return(\"x\"==a?h:h&3|8).toString(16)})};d.fd=function(a){return a?(a=a.stack)&&\"string\"===typeof a?a:null:null};d.trim=p;d.wg=function(a){var h={},b,e;if(!a)return h;var d=\na.split(\"\\n\");for(e=0;e<d.length;e++){var c=d[e];b=c.indexOf(\":\");a=p(c.substr(0,b)).toLowerCase();b=p(c.substr(b+1));a&&(h[a]=h[a]?h[a]+(\", \"+b):b)}return h};d.tryPeriodically=function(a,h,b,p){function e(){if(h())b&&b();else{var c=a(++d);0<c?setTimeout(e,c):p&&p()}}var d=0;e()};d.Qb=function(a){return a.charAt(0).toUpperCase()+a.slice(1)};d.Ic=function(a){for(var h=[],b=1;b<arguments.length;b++)h[b-1]=arguments[b];return function(){for(var b=[],p=0;p<arguments.length;p++)b[p-0]=arguments[p];return a.apply(this,\nh.concat(b))}};d.now=Date&&Date.now||function(){return(new Date).getTime()}})(a.utils||(a.utils={}))})(g||(g={}));(function(a){function d(h,b,e,d){h=a.conf.beaconUrlHttps+\"/eumcollector/error.gif?version=1&appKey=\"+e+\"&msg=\"+encodeURIComponent(h.substring(0,500));d&&(h+=\"&stack=\",h+=encodeURIComponent(d.substring(0,1500-h.length)));return h}function f(h,b){2<=e||(document.createElement(\"img\").src=d(h,0,a.conf.appKey,b),e++)}function c(a){return 0<=a.location.search.indexOf(\"ADRUM_debug=true\")||0<=\na.cookie.search(/(^|;)\\s*ADRUM_debug=true/)}a.iDR=c;a.isDebug=c(document);var b=[];a.logMessages=b;a.log=function(h){for(var p=1;p<arguments.length;p++);a.isDebug&&b.push(Array.prototype.slice.call(arguments).join(\" | \"))};a.error=function(h){for(var b=1;b<arguments.length;b++);b=Array.prototype.slice.call(arguments).join(\" | \");a.log(b);f(b,null)};a.exception=function(){for(var h=[],b=0;b<arguments.length;b++)h[b-0]=arguments[b];1>arguments.length||(h=Array.prototype.slice.call(arguments),b=a.utils.fd(h[0]),\nh=h.slice(1).join(\" | \"),a.log(h),f(h,b))};a.assert=function(h,b){h||a.error(\"Assert fail: \"+b)};a.dumpLog=a.isDebug?function(){for(var a=\"\",e=0;e<b.length;e++)a+=b[e].replace(RegExp(\"<br/>\",\"g\"),\"\\n\\t\")+\"\\n\";return a}:function(){};a.cIEBU=d;var e=0;a.log(\"M4\")})(g||(g={}));(function(a){var d=function(){function a(b){this.max=b;this.za=0}a.prototype.Mf=function(){this.la()||this.za++};a.prototype.la=function(){return this.za>=this.max};a.prototype.reset=function(){this.za=0};return a}(),f=function(){function c(){this.ha=\n[];this.Va=new d(c.oe);this.Ka=new d(c.ce)}c.prototype.submit=function(b){this.push(b)&&a.initEXTDone&&this.processQ()};c.prototype.processQ=function(){for(var b=this.ef(),e=0;e<b.length;e++){var h=b[e];\"function\"===typeof a.commands[h[0]]?(a.isDebug&&a.log(\"M5\",h[0],h.slice(1).join(\", \")),a.commands[h[0]].apply(a,h.slice(1))):a.error(\"M6\",h[0])}};c.prototype.ag=function(a){return\"reportXhr\"===a||\"reportPageError\"===a};c.prototype.push=function(b){var e=b[0],h=this.ag(e),p=h?this.Va:this.Ka;if(p.la())return a.log(\"M7\",\nh?\"spontaneous\":\"non spontaneous\",e),!1;this.ha.push(b);p.Mf();return!0};c.prototype.ef=function(){var a=this.ha;this.reset();return a};c.prototype.size=function(){return this.ha.length};c.prototype.reset=function(){this.ha=[];this.Va.reset();this.Ka.reset()};c.prototype.isSpontaneousQueueDead=function(){return this.Va.la()};c.prototype.isNonSpontaneousQueueDead=function(){return this.Ka.la()};c.oe=100;c.ce=100;return c}();a.Cd=f})(g||(g={}));(function(a){a.q=new a.Cd;a.command=function(d){for(var f=\n1;f<arguments.length;f++);a.isDebug&&a.log(\"M8\",d,Array.prototype.slice.call(arguments).slice(1).join(\", \"));a.q.submit(Array.prototype.slice.call(arguments))}})(g||(g={}));(function(a){(function(a){var f=function(){function a(){this.status={}}a.prototype.setUp=function(){};a.prototype.set=function(a,e){this.status[a]=e};return a}();a.mb=f})(a.monitor||(a.monitor={}))})(g||(g={}));(function(a){(function(d){window.ADRUM.aop=d;d.support=function(a){return!a||\"apply\"in a};d.around=function(f,c,b,e){a.assert(d.support(f),\n\"aop.around called on a function which does not support interception\");f=f||function(){};return function(){a.isDebug&&a.log(\"M9\",e,Array.prototype.slice.call(arguments).join(\", \"));var h=Array.prototype.slice.call(arguments),p;try{c&&(p=c.apply(this,h))}catch(d){a.exception(d,\"M10\",e,d)}a.assert(!p||\"[object Array]\"===Object.prototype.toString.call(p));var k=void 0;try{k=f.apply(this,p||h)}finally{try{b&&b.apply(this,h)}catch(g){a.exception(g,\"M11\",e,g)}}return k}};d.before=function(a,c){return d.around(a,\nc)};d.after=function(a,c){return d.around(a,null,c)}})(a.aop||(a.aop={}))})(g||(g={}));(function(a){a=a.EventType||(a.EventType={});a[a.BASE_PAGE=0]=\"BASE_PAGE\";a[a.IFRAME=1]=\"IFRAME\";a[a.XHR=2]=\"XHR\";a[a.VIRTUAL_PAGE=3]=\"VIRTUAL_PAGE\";a[a.PAGE_ERROR=4]=\"PAGE_ERROR\";a[a.ABSTRACT=100]=\"ABSTRACT\";a[a.ADRUM_XHR=101]=\"ADRUM_XHR\";a[a.NG_VIRTUAL_PAGE=102]=\"NG_VIRTUAL_PAGE\"})(g||(g={}));(function(a){a=a.events||(a.events={});a.l={};a.l[100]={guid:\"string\",url:\"string\",parentGUID:\"string\",parentUrl:\"string\",\nparentType:\"number\",timestamp:\"number\"};a.l[3]={resTiming:\"object\"};a.l[102]={digestCount:\"number\"};a.l[2]={method:\"string\",parentPhase:\"string\",parentPhaseId:\"number\",error:\"object\"};a.l[101]={xhr:\"object\"};a.l[4]={msg:\"string\",line:\"number\",stack:\"string\"}})(g||(g={}));(function(a){var d=function(){function a(){this.w={}}a.prototype.mark=function(a,e){f.mark.apply(this,arguments)};a.prototype.getTiming=function(a){return(a=this.getEntryByName(a))&&a.startTime};a.prototype.measure=function(a,e,h){f.measure.apply(this,\narguments)};a.prototype.getEntryByName=function(a){return f.getEntryByName.call(this,a)};a.ia=function(a){return f.ia(a)};return a}();a.PerformanceTracker=d;var f;(function(d){d.mark;d.measure;d.getEntryByName;d.ia;var b=window.performance||window.mozPerformance||window.msPerformance||window.webkitPerformance,e=b&&b.timing&&b.timing.navigationStart?b.timing.navigationStart:window[\"adrum-start-time\"],h=a.utils.now;d.mark=function(b,e){this.w[b]={name:b,entryType:\"mark\",startTime:a.utils.isDefined(e)?\ne:h(),duration:0}};d.measure=function(b,d,c){this.w.hasOwnProperty(d)&&this.w.hasOwnProperty(c)?this.w[b]={name:b,entryType:\"measure\",startTime:d?this.w[d].startTime:e,duration:(c?this.w[c].startTime:h())-(d?this.w[d].startTime:e)}:a.error(\"M12\"+(this.w.hasOwnProperty(d)?c:d)+\" does not exist. \")};d.getEntryByName=function(a){return this.w[a]||null};d.ia=function(a){return a+e}})(f||(f={}))})(g||(g={}));(function(a){(function(d){function f(b,h){b=b||{};for(var d in b)h[d]=function(){var h=d,c=b[d];\nreturn function(b){var e=\"_\"+h,d=this[e];if(a.utils.isDefined(b))if(typeof b===c)this[e]=b;else throw TypeError(\"wrong type of \"+h+\" value, \"+typeof b+\" passed in but should be a \"+c+\".\");return d}}()}function c(a){var h={},b;for(b in a){var d=a[b];h[d.start]=!0;h[d.end]=!0}return h}var b=function(){function b(h){this.perf=new a.PerformanceTracker;this.timestamp(a.utils.now());this.guid(a.utils.generateGUID());this.url(document.URL);this.Yc(h)}b.prototype.type=function(){return 100};b.prototype.Yc=\nfunction(b){if(a.utils.isObject(b))for(var d in b){var e=this[d]||this[\"mark\"+a.utils.Qb(d)];e&&a.utils.isFunction(e)&&e.call(this,b[d])}};b.Mb=function(a,b,d){return{guid:function(){return a},url:function(){return b},type:function(){return d}}};b.prototype.Cf=function(){return b.Mb(this.parentGUID(),this.parentUrl(),this.parentType())};b.prototype.parent=function(b){var d=this.Cf();a.utils.isDefined(b)&&(this.parentGUID(b.guid()),this.parentUrl(b.url()),this.parentType(b.type()));return d};return b}();\nd.EventTracker=b;d.W=f;d.Nb=function(b,h){b=b||{};var d=c(b),l;for(l in d)d=a.utils.Qb(l),h[\"mark\"+d]=a.utils.Ic(function(a,b){this.perf.mark(a,b)},l),h[\"get\"+d]=a.utils.Ic(function(a){return this.perf.getTiming(a)},l)};f(d.l[100],b.prototype)})(a.events||(a.events={}))})(g||(g={}));var s=this.He||function(a,d){function f(){this.constructor=a}for(var c in d)d.hasOwnProperty(c)&&(a[c]=d[c]);f.prototype=d.prototype;a.prototype=new f};(function(a){(function(a){var f=function(a){function b(b){a.call(this,\nb)}s(b,a);b.prototype.type=function(){return 4};return b}(a.EventTracker);a.Error=f;a.W(a.l[4],f.prototype)})(a.events||(a.events={}))})(g||(g={}));(function(a){(function(d){var f=function(d){function b(){d.apply(this,arguments)}s(b,d);b.prototype.setUp=function(){d.prototype.setUp.call(this);a.listenForErrors=this.Ac;this.Ac()};b.prototype.Ac=function(){if(a.aop.support(window.onerror)){var d=this;window.onerror=a.aop.around(window.onerror,function(h,p,c,f,g){b.Ia||(b.errorsSent>=a.conf.$d?a.log(\"M13\"):\n(f=a.utils.fd(g),a.command(\"reportPageError\",new a.events.Error(a.utils.mergeJSON({msg:h,url:p,line:c,stack:f},d.status))),b.errorsSent++,b.Ia=!0))},function(){b.Ia=!1},\"onerror\");a.log(\"M14\")}else a.log(\"M15\")};b.Ia=!1;b.errorsSent=0;return b}(d.mb);d.ErrorMonitor=f;d.Zb=new d.ErrorMonitor})(a.monitor||(a.monitor={}))})(g||(g={}));(function(a){var d=function(){function d(){this.ta=[];this.oa(d.wa,0)}d.prototype.og=function(a){this.oa(d.Gb,a)};d.prototype.qg=function(a){this.oa(d.Ob,a)};d.prototype.pg=\nfunction(a){this.oa(d.Ib,a)};d.prototype.oa=function(a,b){this.ta.push({mg:(new Date).getTime(),lg:b,Jc:a});this.af=a};d.prototype.getPhaseName=function(){return this.af};d.prototype.getPhaseID=function(a){for(var b=0;b<d.Lb.length;b++)if(d.Lb[b]===a)return b;return null};d.prototype.getPhaseCallbackTime=function(a){for(var b=this.ta,d=0;d<b.length;d++)if(b[d].Jc===a)return b[d].mg;return null};d.prototype.findPhaseAtNominalTime=function(c){a.assert(0<=c);for(var b=this.ta,e=b.length-1;0<=e;e--)if(c>=\nb[e].lg)return b[e].Jc;a.error(\"M16\",c,a.utils.ff(b));return d.wa};d.wa=\"AFTER_FIRST_BYTE\";d.Gb=\"AFTER_DOM_INTERACTIVE\";d.Ob=\"AT_ONLOAD\";d.Ib=\"AFTER_ONLOAD\";d.Lb=[d.wa,d.Gb,d.Ob,d.Ib];return d}();a.oh=d;a.lifecycle=new d;a.lifecycle=a.lifecycle})(g||(g={}));(function(a){(function(a){var f=function(a){function b(){a.apply(this,arguments)}s(b,a);b.prototype.type=function(){return 0};return b}(a.EventTracker);a.PageView=f})(a.events||(a.events={}))})(g||(g={}));(function(a){(function(d){var f=function(){function c(){}\nc.prototype.setUp=function(){c.Kg();c.Jg()};c.Jg=function(){a.utils.addEventListener(window,\"load\",c.pa);a.utils.addEventListener(window,\"load\",c.tg)};c.tg=function(b){a.lifecycle.qg(b&&b.timeStamp);a.utils.Ta(function(){var b=(new Date).getTime();a.lifecycle.pg(b);a.command(\"mark\",\"onload\",b);d.yb.perf&&(d.perfMonitor.Xe(),d.perfMonitor.Ye());a.command(\"reportOnload\",new a.events.PageView);a.utils.loadScriptAsync(a.conf.adrumExtUrl)});a.log(\"M17\")};c.Kg=function(){if(document.addEventListener)document.addEventListener(\"DOMContentLoaded\",\nc.ca,!1);else{document.attachEvent(\"onreadystatechange\",c.ca);var b=null;try{b=null===window.frameElement?document.documentElement:null}catch(d){}null!=b&&b.doScroll&&function p(){if(!c.isReady){try{b.doScroll(\"left\")}catch(a){setTimeout(p,10);return}c.pa()}}()}a.log(\"M18\")};c.pa=function(b){c.Dc||(a.lifecycle.og(b&&b.timeStamp),a.command(\"mark\",\"onready\",(new Date).getTime()),c.Dc=!0)};c.ca=function(a){document.addEventListener?(document.removeEventListener(\"DOMContentLoaded\",c.ca,!1),c.pa(a)):\"complete\"===\ndocument.readyState&&(document.detachEvent(\"onreadystatechange\",c.ca),c.pa(a))};c.isReady=!1;c.Dc=!1;return c}();d.Ed=f;d.df=new d.Ed})(a.monitor||(a.monitor={}))})(g||(g={}));(function(a){(function(d){var f=function(){function d(){this.navTiming=this.resTiming=null}d.prototype.setUp=function(){d.perf=window.performance||window.mozPerformance||window.msPerformance||window.webkitPerformance};d.prototype.Xe=function(){var b=d.perf;if(b=b&&b.timing)if(b.navigationStart&&b.navigationStart<=b.loadEventEnd){var e=\n{},h;for(h in b){var p=b[h];\"number\"===typeof p&&(e[h]=p)}this.navTiming=e}else a.log(\"M20\");else a.log(\"M19\")};d.prototype.Ye=function(){this.resTiming=this.hc()};d.prototype.hc=function(){var b=d.perf,e=[];b&&b.getEntriesByType&&(b=b.getEntriesByType(\"resource\"))&&b.length&&0<b.length&&b.unshift&&(e=b);0==e.length&&a.log(\"M21\");return e};d.perf=null;return d}();d.yb=f;d.perfMonitor=new d.yb})(a.monitor||(a.monitor={}))})(g||(g={}));(function(a){a=a.events||(a.events={});a=a.b||(a.b={});a.navigationStart=\n\"navigationStart\";a.domainLookupStart=\"domainLookupStart\";a.domainLookupEnd=\"domainLookupEnd\";a.connectStart=\"connectStart\";a.secureConnectionStart=\"secureConnectionStart\";a.connectEnd=\"connectEnd\";a.requestStart=\"requestStart\";a.responseStart=\"responseStart\";a.responseEnd=\"responseEnd\";a.domContentLoadedEventStart=\"domContentLoadedEventStart\";a.loadEventEnd=\"loadEventEnd\";a.Wc=\"sendTime\";a.ac=\"firstByteTime\";a.Sc=\"respAvailTime\";a.Tc=\"respProcTime\";a.cb=\"viewChangeStart\";a.kd=\"viewChangeEnd\";a.eb=\n\"viewDOMLoaded\";a.qd=\"xhrRequestsCompleted\";a.Vh=\"viewFragmentsLoaded\";a.Wh=\"viewResourcesLoaded\";a.fb=\"virtualPageStart\";a.dh=\"virtualPageEnd\"})(g||(g={}));(function(a){a=a.events||(a.events={});a.B={};a.B[0]={lf:{start:a.b.navigationStart,end:a.b.loadEventEnd,name:\"PLT\"},qf:{start:a.b.navigationStart,end:a.b.responseStart,name:\"FBT\"},Rh:{start:a.b.navigationStart,end:a.b.requestStart,name:\"SCT\"},Sh:{start:a.b.secureConnectionStart,end:a.b.connectEnd,name:\"SHT\"},yh:{start:a.b.domainLookupStart,end:a.b.domainLookupEnd,\nname:\"DLT\"},Uh:{start:a.b.connectStart,end:a.b.connectEnd,name:\"TCP\"},Ph:{start:a.b.requestStart,end:a.b.responseStart,name:\"RAT\"},Ah:{start:a.b.responseStart,end:a.b.loadEventEnd,name:\"FET\"},Ch:{start:a.b.responseStart,end:a.b.domContentLoadedEventStart,name:\"DRT\"},sh:{start:a.b.responseStart,end:a.b.responseEnd,name:\"DDT\"},wh:{start:a.b.responseEnd,end:a.b.domContentLoadedEventStart,name:\"DPT\"},Oh:{start:a.b.domContentLoadedEventStart,end:a.b.loadEventEnd,name:\"PRT\"},xh:{start:a.b.navigationStart,\nend:a.b.domContentLoadedEventStart,name:\"DOM\"}};a.B[2]={qf:{start:a.b.Wc,end:a.b.ac,name:\"FBT\"},Bh:{start:a.b.ac,end:a.b.Sc,name:\"DDT\"},rh:{start:a.b.Sc,end:a.b.Tc,name:\"DPT\"},lf:{start:a.b.Wc,end:a.b.Tc,name:\"PLT\"}};a.B[3]={Ih:{start:a.b.fb,end:a.b.dh,name:\"PLT\"},uh:{start:a.b.cb,end:a.b.kd,name:\"DDT\"},Fh:{start:a.b.cb,end:a.b.eb,name:\"DRT\"},jh:{start:a.b.kd,end:a.b.eb,name:\"DPT\"},kh:{start:a.b.cb,end:a.b.eb,name:\"DOM\"},Nh:{start:\"viewChangeEnd\",end:\"xhrRequestsCompleted\",name:null},Gh:{start:\"viewChangeEnd\",\nend:\"viewPartialsLoaded\",name:null},Eh:{start:\"viewPartialsLoaded\",end:\"viewFragmentsLoaded\",name:null},Hh:{start:\"viewPartialsLoaded\",end:\"viewResourcesLoaded\",name:null}};a.B[102]=a.B[3]})(g||(g={}));(function(a){(function(a){var f=function(a){function b(b){a.call(this,b)}s(b,a);b.prototype.type=function(){return 2};return b}(a.EventTracker);a.Ajax=f;a.W(a.l[2],f.prototype);a.Nb(a.B[2],f.prototype)})(a.events||(a.events={}))})(g||(g={}));(function(a){(function(a){var f=function(a){function b(b){a.call(this,\nb)}s(b,a);b.prototype.type=function(){return 2};return b}(a.Ajax);a.AdrumAjax=f;a.W(a.l[101],f.prototype)})(a.events||(a.events={}))})(g||(g={}));(function(a){(function(d){var f=function(d){function b(){d.call(this);this.conf=null;this.Wa=!1;!0===window[\"adrum-xhr-disable\"]?a.log(\"M22\"):window.XMLHttpRequest?(this.conf={exclude:[{urls:[{pattern:a.conf.beaconUrlHttp+a.conf.corsEndpointPath},{pattern:a.conf.beaconUrlHttps+a.conf.corsEndpointPath}]}],include:[]},b.Mc(this.conf,a.conf.userConf&&a.conf.userConf.xhr),\n(this.d=window.XMLHttpRequest.prototype)?\"open\"in this.d&&\"send\"in this.d?(this.Wa=a.aop.support(this.d.open)&&a.aop.support(this.d.send))||a.log(\"M26\"):a.log(\"M25\"):a.log(\"M24\")):a.log(\"M23\")}s(b,d);b.Mc=function(d,h){h&&(h.include=a.utils.od(h.include),h.exclude=a.utils.od(h.exclude),a.utils.mergeJSON(d,h));var p=d.exclude;if(p)for(var c=0;c<p.length;c++){var k=p[c].urls;k&&0<k.length&&(p[c].urls=b.Ub(k))}if(p=d.include)for(c=0;c<p.length;c++)(k=p[c].urls)&&0<k.length&&(p[c].urls=b.Ub(k))};b.Ub=\nfunction(b){for(var h=[],d=0;d<b.length;d++){var c=b[d].pattern;if(\"string\"===typeof c)try{h.push(new RegExp(c))}catch(k){a.exception(k,\"Parse regex pattern failed.\")}else a.error(\"xhr filter pattern should be a string\")}return h};b.$c=function(a,h,d){var c=d&&d.include;d=d&&d.exclude;return c&&0<c.length&&!b.xc(h,a,c)||d&&0<d.length&&b.xc(h,a,d)};b.prototype.setUp=function(){if(this.Wa){a.log(\"M27\");a.xhrConstructor=window.XMLHttpRequest;a.xhrOpen=this.xhrOpen=this.d.open;a.xhrSend=this.xhrSend=\nthis.d.send;var d=this;this.d.open=a.aop.around(this.d.open,function(){var h=1<=arguments.length?String(arguments[0]):\"\",p=2<=arguments.length?String(arguments[1]):\"\";b.$c(p,h,d.conf)||(this._adrumAjaxT=new a.events.AdrumAjax(a.utils.mergeJSON({method:h,url:p,xhr:this},d.status)))},null,\"XHR.open\");this.d.send=a.aop.around(this.d.send,function(){var h=this,p=h._adrumAjaxT;if(p){var c=a.utils.now(),k=p.getSendTime();a.assert(null===k,\"M28\");p.timestamp(c);p.markSendTime(k||c);p.parentPhase(a.lifecycle.getPhaseName());\nb.Zf(p.url())?h.setRequestHeader(\"ADRUM\",\"isAjax:true\"):a.log(\"M29\",document.location.href,p.url());var f=0,g=function(){if(4==h.readyState)a.log(\"M30\"),d.ua(h);else{var p=null;try{p=h.onreadystatechange}catch(c){a.log(\"M31\",c);d.ua(h);return}f++;p?a.aop.support(p)?(h.onreadystatechange=d.Vb(p,h,\"XHR.onReadyStateChange\"),a.log(\"M32\",f)):(a.log(\"M33\"),d.ua(h)):f<b.Fe?a.utils.Ta(g):(a.log(\"M34\"),d.ua(h))}};g()}},null,\"XHR.send\");\"addEventListener\"in this.d&&\"removeEventListener\"in this.d&&a.aop.support(this.d.addEventListener)&&\na.aop.support(this.d.removeEventListener)?(this.d.addEventListener=a.aop.around(this.d.addEventListener,this.$e(),null,\"XHR.addEventListener\"),this.d.removeEventListener=a.aop.around(this.d.removeEventListener,function(b,d){if(this._adrumAjaxT){var e=Array.prototype.slice.call(arguments);d.__adrumInterceptor?(e[1]=d.__adrumInterceptor,a.log(\"M35\")):a.log(\"M36\");return e}},null,\"XHR.removeEventListener\")):a.log(\"M37\");a.log(\"M38\")}};b.jg=function(a,b){for(var d=!1,c=0;c<b.length;c++){var k=b[c];if(k&&\nk.test(a)){d=!0;break}}return d};b.xc=function(a,d,p){var c=!1;if(d&&p)for(var k=0;k<p.length;k++){var f=p[k];if(!(f.method&&a!==f.method||f.urls&&!b.jg(d,f.urls))){c=!0;break}}return c};b.Zf=function(a){var b=document.createElement(\"a\");b.href=a;a=document.location;return\":\"===b.protocol&&\"\"===b.hostname&&\"\"===b.port||b.protocol===a.protocol&&b.hostname===a.hostname&&b.port===a.port};b.nc=function(b){var d=b._adrumAjaxT;if(d){var p=(new Date).getTime();2==b.readyState?d.markFirstByteTime(d.getFirstByteTime()||\np):4==b.readyState&&(a.assert(null===d.getRespAvailTime(),\"M39\"),d.markRespAvailTime(d.getRespAvailTime()||p),d.markFirstByteTime(d.getFirstByteTime()||p))}};b.prototype.Vb=function(d,h,p){return b.hh(d,function(){b.nc(this)},function(){var d=h._adrumAjaxT;if(d&&4==h.readyState){var e=(new Date).getTime();a.assert(null===d.getRespProcTime(),\"M40\");d.markRespProcTime(d.getRespProcTime()||e);b.a(h,d)}},p)};b.a=function(b,d){var p=b.status;if(400<=p){var c=b.responseText;d.error({status:p,msg:a.utils.isString(c)?\nc:\"\"})}a.command(\"reportXhr\",d)};b.prototype.ua=function(d){if(d._adrumAjaxT){var h=(new Date).getTime()+3E4,p=function(){b.nc(d);var c=d._adrumAjaxT;if(c){var f=(new Date).getTime();4==d.readyState?(a.assert(null===c.getRespProcTime(),\"M41\"),c.markRespProcTime(c.markRespProcTime()||f),a.log(\"M42\"),b.a(d,c),delete d._adrumAjaxT):f<h?setTimeout(p,b.lb):(delete d._adrumAjaxT,a.log(\"M43\"))}};p()}};b.hh=function(b,d,p,c){var f=b;b&&\"object\"===typeof b&&\"toString\"in b&&\"[xpconnect wrapped nsIDOMEventListener]\"===\nb.toString()&&\"handleEvent\"in b&&(f=function(){b.handleEvent.apply(this,Array.prototype.slice.call(arguments))});return a.aop.around(f,d,p,c)};b.prototype.$e=function(){for(var b=0;b<arguments.length;b++);var d=this;return function(b,e){if((\"load\"===b||\"error\"===b)&&e&&this._adrumAjaxT){var c;c=e;if(c.__adrumInterceptor)c=c.__adrumInterceptor;else if(a.aop.support(c)){var f=d.Vb(c,this,\"XHR.invokeEventListener\");c=c.__adrumInterceptor=f}else c=null;if(c)return f=Array.prototype.slice.call(arguments),\nf[1]=c,a.log(\"M44\"),f;a.log(\"M45\",b,e)}}};b.Fe=5;b.lb=50;return b}(d.mb);d.fa=f;d.hb=new d.fa})(a.monitor||(a.monitor={}))})(g||(g={}));(function(a){(function(d){function f(a,b){var d=[],c=/^\\s*(ADRUM_BT\\w*)=(.*)\\s*$/i.exec(a);if(c){var f=c[1],c=c[2].replace(/^\"|\"$/g,\"\"),c=decodeURIComponent(c).split(\"|\"),g=c[0].split(\":\");if(\"R\"===g[0]&&Number(g[1])===b)for(e(f),f=1;f<c.length;f++)d.push(c[f])}return d}function c(a,b){var d=/^\\s*(ADRUM_(\\d+)_(\\d+)_(\\d+))=(.*)\\s*$/i.exec(a);if(d){var c=d[1],f=d[4],\ng=d[5];if(Number(d[3])===b)return e(c),{index:Number(f),value:g}}return null}function b(b){var d=/^\\s*ADRUM=s=([\\d]+)&r=(.*)\\s*/.exec(b);if(d){a.log(\"M48\",b);if(3===d.length)return e(\"ADRUM\"),{startTime:Number(d[1]),startPage:d[2]};a.error(\"M49\",b);return null}}function e(b){a.log(\"M47\",b);var d=new Date;d.setTime(d.getTime()-1E3);document.cookie=b+\"=;Expires=\"+d.toUTCString()}d.startTimeCookie=null;d.cookieMetadataChunks=null;d.Xb=function(h,e){a.log(\"M46\");for(var g=e?e.length:0,k=[],q=h.split(\";\"),\nm=0;m<q.length;m++){var n=q[m],s=c(n,g);s?k.push(s):(n=b(n),null!=n&&(d.startTimeCookie=n))}Array.prototype.sort.call(k,function(a,b){return a.index-b.index});n=[];for(m=0;m<k.length;m++)n.push(k[m].value);for(m=0;m<q.length;m++)(k=f(q[m],g))&&0<k.length&&(n=n.concat(k));d.cookieMetadataChunks=n};a.correlation.eck=d.Xb})(a.correlation||(a.correlation={}))})(g||(g={}));(function(a){a.report=function(d){a.utils.Ta(function(){a.command(\"reportEvent\",d)})}})(g||(g={}));(function(a){\"APP_KEY_NOT_SET\"===\na.conf.appKey&&\"undefined\"!==typeof console&&\"undefined\"!==typeof console.log&&console.log(\"AppDynamics EUM cloud application key missing. Please specify window['adrum-app-key']\");a.correlation.Xb(document.cookie,document.referrer);a.command(\"mark\",\"firstbyte\",window[\"adrum-start-time\"]);a.monitor.Zc(a.monitor.Zb,a.monitor.df,a.monitor.perfMonitor,a.monitor.hb)})(g||(g={}));(function(a){a=a.ng||(a.ng={});a=a.c||(a.c={});a.Bc=\"locationChangeStart\";a.gg=\"locationChangeSuccess\";a.Uc=\"routeChangeStart\";\na.Vc=\"routeChangeSuccess\";a.bd=\"stateChangeStart\";a.cd=\"stateChangeSuccess\";a.ld=\"viewContentLoaded\";a.Jf=\"includeContentRequested\";a.If=\"includeContentLoaded\";a.Wb=\"digest\";a.Kh=\"outstandingRequestsComplete\";a.Pb=\"beforeNgXhrRequested\";a.Hb=\"afterNgXhrRequested\";a.Jh=\"ngXhrLoaded\";a.Sb=\"$$completeOutstandingRequest\"})(g||(g={}));(function(a){(function(a){function f(b,c,h,p,f,g){if(c)try{return c.apply(b,[h,p,f].concat(g))}catch(q){return b.error(h,p,f,g,a.Error.Md,\"an exception occurred in a caller-provided callback function\",\nq)}}function c(b,c){return function(){var h=this.current,p=c[h]||c[a.ea]||h,g=Array.prototype.slice.call(arguments);if(this.Ve(b))return this.error(b,h,p,g,a.Error.Nd,\"event \"+b+\" inappropriate in current state \"+this.current);if(!1===f(this,this[\"onbefore\"+b],b,h,p,g))return a.da.ib;p===a.ea&&(p=h);if(h===p)return f(this,this[\"onafter\"+b]||this[\"on\"+b],b,h,p,g),a.da.qe;var k=this;this.transition=function(){k.transition=null;k.current=p;f(k,k[\"onenter\"+p]||k[\"on\"+p],b,h,p,g);f(k,k[\"onafter\"+b]||k[\"on\"+\nb],b,h,p,g);return a.da.ye};if(!1===f(this,this[\"onleave\"+h],b,h,p,g))return this.transition=null,a.da.ib;if(this.transition)return this.transition()}}a.VERSION=\"2.3.5\";a.da={ye:1,qe:2,ib:3,mh:4};a.Error={Nd:100,nh:200,Md:300};a.ea=\"*\";a.create=function(b,e){function h(b){var h=b.from instanceof Array?b.from:b.from?[b.from]:[a.ea];m[b.name]=m[b.name]||{};for(var c=0;c<h.length;c++)n[h[c]]=n[h[c]]||[],n[h[c]].push(b.name),m[b.name][h[c]]=b.to||h[c]}var p=\"string\"==typeof b.initial?{state:b.initial}:\nb.initial,f=e||b.target||{},g=b.events||[],q=b.callbacks||{},m={},n={};p&&(p.event=p.event||\"startup\",h({name:p.event,from:\"none\",to:p.state}));for(var s=0;s<g.length;s++)h(g[s]);for(var u in m)m.hasOwnProperty(u)&&(f[u]=c(u,m[u]));for(u in q)q.hasOwnProperty(u)&&(f[u]=q[u]);f.current=\"none\";f.Dh=function(a){return a instanceof Array?0<=a.indexOf(this.current):this.current===a};f.Ue=function(b){return!this.transition&&(m[b].hasOwnProperty(this.current)||m[b].hasOwnProperty(a.ea))};f.Ve=function(a){return!this.Ue(a)};\nf.ta=function(){return n[this.current]};f.error=b.error||function(a,b,d,h,c,e,p){throw p||e;};if(p&&!p.defer)f[p.event]();return f}})(a.Bb||(a.Bb={}))})(g||(g={}));(function(a){(function(d){var f=function(c){function b(b){c.call(this,b);this.perf=new a.PerformanceTracker;this.start()}s(b,c);b.prototype.type=function(){return 3};b.prototype.yf=function(){return d.EventTracker.Mb(this.guid(),this.url(),this.type())};b.prototype.ad=function(b){var d=this.yf();b.set(\"parent\",d);a.log(\"M50\",d.guid(),d.url())};\nb.prototype.startCorrelatingXhrs=function(){a.log(\"M51\");this.ad(a.monitor.hb)};b.prototype.stopCorrelatingXhrs=function(){a.monitor.hb.set(\"parent\",null);a.log(\"M52\")};b.prototype.Ng=function(){a.log(\"M53\");this.ad(a.monitor.Zb)};b.prototype.start=function(){this.markVirtualPageStart();this.startCorrelatingXhrs()};b.prototype.end=function(){this.markVirtualPageEnd();this.stopCorrelatingXhrs()};return b}(d.EventTracker);d.VPageView=f;d.W(d.l[3],f.prototype);d.Nb(d.B[3],f.prototype)})(a.events||(a.events=\n{}))})(g||(g={}));(function(a){var d=a.ng||(a.ng={}),d=d.conf||(d.conf={});d.disabled=a.conf.userConf&&a.conf.userConf.spa&&a.conf.userConf.spa.angular&&a.conf.userConf.spa.angular.disable;d.distinguishVPwithItsTemplateUrl=a.conf.userConf&&a.conf.userConf.spa&&a.conf.userConf.spa.angular&&!0===a.conf.userConf.spa.angular.distinguishVPwithItsTemplateUrl?!0:!1;d.xhr={};d.metrics={includeResTimingInEndUserResponseTiming:!0};a.conf.userConf&&a.conf.userConf.spa&&a.conf.userConf.spa.angular&&a.conf.userConf.spa.angular.vp&&\n(a.conf.userConf.spa.angular.vp.xhr&&a.monitor.fa.Mc(d.xhr,a.conf.userConf.spa.angular.vp.xhr),a.conf.userConf.spa.angular.vp.metrics&&a.utils.mergeJSON(d.metrics,a.conf.userConf.spa.angular.vp.metrics))})(g||(g={}));(function(a){(function(d){var f=function(c){function b(a){c.call(this,a);this.vc=!0;this.Y={};this.U=0;this.stopCorrelatingXhrs()}s(b,c);b.prototype.type=function(){return 3};b.prototype.fb=function(){this.markViewChangeStart();this.markVirtualPageStart(this.getViewChangeStart());this.timestamp(this.getViewChangeStart())};\nb.prototype.Kf=function(){this.digestCount(this.digestCount()+1)};b.prototype.Lf=function(){this.U++;a.log(\"increasing xhr count \"+this.U+\" pending xhr requests\")};b.prototype.bf=function(){this.U--;a.log(\"decreasing xhr count \"+this.U+\" pending xhr requests\")};b.prototype.Ff=function(){var b=this.perf.getEntryByName(a.events.b.qd);a.log(\"xhrCount \"+this.U+\" xhrReuqestCompleted \"+b);return 0<this.U};b.prototype.Re=function(){var a={sa:0},d=document.querySelectorAll(\"ng-view, [ng-view], .ng-view, [ui-view]\");\nif(d&&0<d.length)for(var c in b.Rc)for(var f=0;f<d.length;f++){var g=angular.element(d[f]).find(c);if(0<g.length)for(var q=0;q<g.length;q++){var m=g[q][b.Rc[c].Ya];(m=m?decodeURIComponent(m):null)&&!a[m]&&(a[m]=c,a.sa++)}}this.Y=a};b.prototype.Qe=function(a){return!!this.Y[decodeURIComponent(a.name)]};b.prototype.Se=function(){var b=[],d=this;0<this.Y.sa&&(b=a.monitor.perfMonitor.hc().filter(function(a){return d.Qe(a)}));this.resTiming(b)};b.nf=function(b){for(var h=[],c=0;c<b.length;c++){var f=b[c];\n2!==b[c].eventType&&101!==b[c].eventType||a.monitor.fa.$c(f.eventUrl,f.method,d.conf.xhr)||h.push(b[c])}return h};b.zf=function(a){var b,d,c=-1;b=0;for(d=a.length;b<d;b++)c=Math.max(c,a[b].timestamp+a[b].metrics.PLT);return c};b.prototype.Le=function(){if(d.conf.xhr){var c=b.nf(a.channel.getEventsWithParentGUID(this.guid())),c=b.zf(c);if(0<c){var h=this.perf.getEntryByName(a.events.b.qd);this.markXhrRequestsCompleted(Math.min(h&&h.startTime||Number.MAX_VALUE,c))}}};b.prototype.adjustTimings=function(){this.Le();\nvar b=this.getViewDOMLoaded(),h=this.getXhrRequestsCompleted(),b=Math.max(b,h);d.conf.metrics.includeResTimingInEndUserResponseTiming&&(this.Ke(),h=this.getViewResourcesLoaded(),h=Math.max(b,h),a.log(\"adjust this.end from %s to %s\",b,h),b=h);this.markVirtualPageEnd(b)};b.prototype.Ke=function(){if(0<this.Y.sa){this.Se();var b=this.resTiming();if(b&&b.length>=this.Y.sa){for(var d=[],c=0;c<b.length;c++)d.push(b[c].responseEnd);b=Math.max.apply(Math,d);this.markViewResourcesLoaded(a.PerformanceTracker.ia(b))}}};\nb.prototype.identifier=function(d){var h=this.nd;a.utils.isDefined(d)&&(this.nd=b.mf(d),this.url(this.nd.url));return h};b.mf=function(b){var d={};b&&b.g?(d.g={Ma:\"\"},a.utils.mergeJSON(d.g,{Ma:b.g.originalPath,Z:b.g.template,$:b.g.templateUrl})):b&&b.state&&(d.state={url:\"\"},a.utils.mergeJSON(d.state,{url:b.state.url,name:b.state.name,Z:b.state.template,$:b.state.templateUrl}));return d};b.Rc={img:{Ya:\"src\"},script:{Ya:\"src\"},link:{Ya:\"href\"}};return b}(a.events.VPageView);d.NgVPageView=f;a.events.W(a.events.l[102],\nf.prototype)})(a.ng||(a.ng={}))})(g||(g={}));(function(a){(function(d){var f=function(){function c(){this.e=new d.NgVPageView}c.prototype.Dg=function(){var b=this;d.conf.metrics.includeResTimingInEndUserResponseTiming?(a.log(\"M54\"),setTimeout(function(){b.Pa()},c.Ae)):setTimeout(function(){b.Pa()},c.Be)};c.prototype.Pa=function(){a.log(\"M55\");var b=this.e;a.command(\"call\",function(){b.adjustTimings();a.reporter.reportEvent(b)})};c.prototype.Ig=function(a){this.e=a};c.Ae=5E3;c.Be=2*a.monitor.fa.lb;\nreturn c}();d.VirtualPageStateMachine=f;a.Bb.create({events:[{name:\"start\",from:\"none\",to:\"ChangeView\"},{name:\"viewLoaded\",from:\"ChangeView\",to:\"XhrPending\"},{name:\"xhrCompleted\",from:\"XhrPending\",to:\"End\"},{name:\"abort\",from:\"*\",to:\"none\"},{name:\"init\",from:\"*\",to:\"none\"},{name:\"locChange\",from:\"*\",to:\"*\"},{name:\"beforeXhrReq\",from:\"*\",to:\"*\"},{name:\"afterXhrReq\",from:\"*\",to:\"*\"}],error:function(d){a.log(\"M56\"+d)},callbacks:{onChangeView:function(){this.e.fb();this.e.Ng()},onviewLoaded:function(){this.e.markViewDOMLoaded()},\nonXhrPending:function(){this.e.vc&&this.xhrCompleted()},onleaveXhrPending:function(a,b,d){if(\"abort\"===a)return this.Pa(),!0;if(\"xhrCompleted\"===a&&\"End\"===d){if(this.e.Ff())return!1;this.e.markXhrRequestsCompleted();return!0}},onEnd:function(){this.e.Re();this.Dg()},oninit:function(a,b,d,h){this.Ig(h)},onlocChange:function(a,b,d,h){this.e.identifier.url=h},onbeforeXhrReq:function(d,b,f,h){var p=this.e;p.vc=!1;a.log(\"M57\",h&&h[1]||\"\",p.guid());p.Lf();p.startCorrelatingXhrs();h[3]&&(h[3]=a.aop.before(h[3],\nfunction(b,d,h){a.log(\"M58\");p.bf();h&&(b=a.utils.wg(h)[\"content-type\"])&&0<=b.indexOf(\"text/html\")&&p.markViewFragmentsLoaded()}));return h},onafterXhrReq:function(){this.e.stopCorrelatingXhrs()}}},f.prototype)})(a.ng||(a.ng={}))})(g||(g={}));(function(a){(function(d){var f=function(){function c(){this.k=new d.VirtualPageStateMachine;this.distinguishVPwithItsTemplateUrl=a.ng.conf.distinguishVPwithItsTemplateUrl}c.prototype.h=function(b,f){a.log(\"M59\",b);switch(b){case d.c.Uc:case d.c.bd:this.k.start();\nvar h=new d.NgVPageView({url:f.next.url,identifier:f.next});this.distinguishVPwithItsTemplateUrl&&c.Tf(this.k.e,h)?this.k.e.Yc({url:f.next.url,identifier:f.next}):this.Sg(h);break;case d.c.Vc:case d.c.cd:this.k.e.markViewChangeEnd();break;case d.c.ld:this.k.viewLoaded();break;case d.c.Pb:this.k.beforeXhrReq(f);break;case d.c.Hb:this.k.afterXhrReq();break;case d.c.Sb:this.k.xhrCompleted();break;case d.c.Bc:this.k.locChange(f.next.url);break;case d.c.Wb:this.k.e.Kf()}};c.prototype.Sg=function(a){this.k.abort();\nthis.k.init(a);this.k.start()};c.Tf=function(b,d){var h=b.identifier(),c=d.identifier(),f=!1;return f=!a.utils.isDefined(h)&&!a.utils.isDefined(c)||h===c?!0:a.utils.isDefined(h)&&a.utils.isDefined(c)?h.state||c.state?a.utils.isDefined(h.state)&&a.utils.isDefined(c.state)?h.state.name===c.state.name&&h.state.Z===c.state.Z&&h.state.$===c.state.$&&h.state.url===c.state.url:!1:h.g&&c.g?h.g.Ma===c.g.Ma&&h.g.Z===c.g.Z&&h.g.$===c.g.$:h.url===c.url:!1};return c}();d.De=f})(a.ng||(a.ng={}))})(g||(g={}));(function(a){(function(d){var f=\nfunction(){function c(){this.j=new d.De}c.prototype.setUp=function(){var b=this;a.utils.addEventListener(document,\"DOMContentLoaded\",function(){a.log(\"M60\");b.init()})};c.prototype.init=function(){if(\"undefined\"!=typeof angular){a.log(\"M61\");var b=this,d=angular.module(\"ng\");d.config([\"$provide\",function(a){b.Qf(a);b.Pf(a)}]);d.run([\"$browser\",function(a){b.Of(a)}]);a.log(\"M62\")}};c.prototype.Pf=function(b){var c=a.aop,h=this;b.decorator(\"$httpBackend\",[\"$delegate\",function(a){return a=c.around(a,\nfunction(){var a=Array.prototype.slice.call(arguments);h.j.h(d.c.Pb,a);return a},function(){h.j.h(d.c.Hb)})}])};c.prototype.Qf=function(b){var c=a.aop,h=this;b.decorator(\"$rootScope\",[\"$delegate\",function(a){a.$digest=c.after(a.$digest,function(){h.j.h(d.c.Wb)});a.$on(\"$locationChangeStart\",function(a,b){var c={url:b},f=a&&a.X&&a.X.$state&&a.X.$state.current;f&&(c.state=f);h.j.h(d.c.Bc,{next:c})});a.$on(\"$locationChangeSuccess\",function(){h.j.h(d.c.gg)});a.$on(\"$routeChangeStart\",function(a,b){var c=\n{url:location.href},f=b&&b.$$route;f&&(c.g=f);h.j.h(d.c.Uc,{next:c})});a.$on(\"$routeChangeSuccess\",function(){h.j.h(d.c.Vc)});a.$on(\"$stateChangeStart\",function(a,b){h.j.h(d.c.bd,{next:{state:b}})});a.$on(\"$stateChangeSuccess\",function(){h.j.h(d.c.cd)});a.$on(\"$viewContentLoaded\",function(a){var b={url:location.href};if(a=a&&a.X&&a.X.$state&&a.X.$state.current)b.state=a;h.j.h(d.c.ld,{next:b})});a.$on(\"$includeContentRequested\",function(){h.j.h(d.c.Jf)});a.$on(\"$includeContentLoaded\",function(){h.j.h(d.c.If)});\nreturn a}])};c.prototype.Of=function(b){var c=this;b.$$completeOutstandingRequest=a.aop.before(b.$$completeOutstandingRequest,function(){c.j.h(d.c.Sb)})};return c}();d.ih=f;d.ngMonitor=new f})(a.ng||(a.ng={}))})(g||(g={}));(function(a){var d=a.ng||(a.ng={});d.conf.disabled||a.monitor.Zc(d.ngMonitor)})(g||(g={}))}};})();\n\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = ADRUM;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/exports-loader?ADRUM!./Scripts/vendor/adrum.js\n// module id = 283\n// module chunks = 5","module.exports = __webpack_public_path__ + \"require.min_2842d0ca2a86ca59639ffe99308bdf3f.js\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/vendor/require.min.js\n// module id = 284\n// module chunks = 5","/*** IMPORTS FROM imports-loader ***/\nvar jQuery = require(\"jquery\");\nvar _ = require(\"underscore\");\nvar legacyReturn = {};\nvar amplify = require(\"amplify\");\nvar cryptojsm5d = require(\"crypto-js/md5\");\nvar cryptojs = { MD5: cryptojsm5d };\nvar numeral = require(\"numeral\");\nvar swipe = require(\"swipe\");\nvar MSG = require(\"../Foundation/Services/MessageBusService\");\nvar LocationDetailsAppender = require(\"../Foundation/LocationDetailsAppender\");\nvar locking = require(\"../Foundation/Lock\");\nvar NAV = require(\"../Foundation/Navigation/Nav\");\nvar CMN = require(\"../Foundation/Common\");\nvar TT = require(\"../Foundation/TabTouch\");\nvar ErrorController = require(\"../Foundation/Error\");\nvar PreferencesService = require(\"../Foundation/Services/Preferences/PreferencesService\");\nvar TupleSpace = require(\"../Foundation/TupleSpace\");\nvar raceReplay = require(\"../Betting-v1/RaceReplay\");\nvar blackbookAddViewBinding = require(\"../Foundation/Components/Blackbook/myblackbook-add-viewbinding\");\nvar blackbookAddViewController = require(\"../Foundation/Components/Blackbook/myblackbook-add-viewcontroller\");\nvar NOTE = require(\"../Foundation/Notification\");\nvar jQueryToDictionary = require(\"jquery-todictionary\");\n\n//Contains common functions related to calculator controls\nwindow.CALC = (function(calculatorModel) {\n\n    var changeNotificationCallback;\n\n    MSG.subscribe(\"loggedin\", function () {\n        var freeBetPlaceHolder = jQuery(\"#freeBetPlaceHolder\");\n        if (freeBetPlaceHolder.length > 0) {\n            jQuery.ajax(freeBetPlaceHolder.attr(\"data-getoffersbutton\"))\n                .done(function (data) {\n                    freeBetPlaceHolder.html(data);\n                    OFFERS.initOffersHelp();\n                });\n        }\n\n    });\n\n    //adjusts the flexi state.\n    //Note that this is tote-specific -- it will also update the text of the bet cost button.\n    function setFlexi(combinations, investment) {\n        var flexiAmount = FlexiService.calculate(combinations, investment);\n        calculatorModel.setFlexiText(flexiAmount);\n    }\n\n    function roundToHalf(value) {\n        return 0.5 * Math.floor(value / 0.5);\n    }\n\n    // IE7 returns button content instead of value.\n    // this is a fix for the calculator buttons.\n    function ie7CalculatorButtonFix(value) {\n        //Upgraded to jQuery 2.x so don't need this anymore - someone delete kthx\n        return value;\n    }\n    //Sets up common calculator functionality\n    function initCommonCalculator(intOnly) {\n\n        registerUpdateNotification(function () { });\n\n        jQuery('input.bet-value').keypress(function (e) {\n            CMN.numericKeyPress(e, intOnly);\n        });\n\n        setBlurBehaviour(intOnly);\n\n        //set the button state now in case it's populated (e.g. after a refresh)\n        setCalcButtonState();\n    }\n\n    function registerUpdateNotification(callback) {\n        changeNotificationCallback = callback;\n    }\n\n    // Sets the behaviour after the user enters an amount manually. \n    function setBlurBehaviour(intOnly) {\n        //need to unbind since this may be called multiple times with enhanced fob\n        jQuery('input.bet-value').unbind('blur').blur(function () {\n            var betAmount = parseFloat(jQuery(this).val());\n\n            if (!isNaN(betAmount)) {\n                var maxAmount = jQuery(this).attr('max');\n                if (maxAmount) {\n                    var max = parseFloat(maxAmount);\n                    if (betAmount > max) {\n                        betAmount = max;\n                    }\n                }\n\n                if (intOnly) {\n                    jQuery(this).val(Math.floor(betAmount).toFixed(2)).change();\n                } else {\n                    jQuery(this).val(roundToHalf(betAmount).toFixed(2)).change();\n                }\n            } else {\n                jQuery(this).val(\"0.00\").change();\n            }\n\n            setCalcButtonState();\n        });\n    }\n\n    //Initialises a specific calculator (required to support multiple calculators on-screen)\n    function initCalculator(id) {\n\n        registerUpdateNotification(function () {});\n\n        jQuery(\"div#\" + id + \" button.reset\").click(function (e) {\n            e.preventDefault();\n            jQuery(\"div#\" + id + \" input.bet-value\").val(\"0.00\").change();\n            setCalcButtonState();\n        });\n        jQuery(\"div#\" + id + \" button\").not(\".reset\").click(function (e) {\n            e.preventDefault();\n            var target = jQuery(\"div#\" + id + \" input.bet-value\");\n            var buttonValue = ie7CalculatorButtonFix(jQuery(this).val());\n            var newVal = (parseFloat(target.val() ? target.val() : 0) + parseFloat(buttonValue));\n            var maxAmount = target.attr('max');\n\n            if (maxAmount) {\n                var max = parseFloat(maxAmount);\n                if (newVal > max) {\n                    newVal = max;\n                }\n            }\n\n            target.val(newVal.toFixed(2)).change();\n            setCalcButtonState();\n        });\n    }\n\n    // Updates the continue and other calculator button states based on the calculator content.\n    function setCalcButtonState() {\n        var totalBetAmount = 0.00;\n        jQuery('input.bet-value').each(function () {\n            totalBetAmount += parseFloat(jQuery(this).val() ? jQuery(this).val() : 0);\n        });\n        jQuery('div.calculator-buttons a, a.calculator-buttons').toggleClass('disabled', (totalBetAmount <= 0));\n        setFlexi(calculatorModel.getNumberOfCombinations(), totalBetAmount);\n        if (changeNotificationCallback) {\n            changeNotificationCallback();\n        };\n    }\n\n    return {\n        initCommonCalculator: initCommonCalculator,\n        initCalculator: initCalculator,\n        setCalcButtonState: setCalcButtonState,\n        setBlurBehaviour: setBlurBehaviour,\n        registerUpdateNotification: registerUpdateNotification\n    };\n\n})(Models.Tote.Calculator);\n\nmodule.exports = window.CALC;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Betting-v1/BettingCalculator.legacy.js\n// module id = 286\n// module chunks = 5","/*** IMPORTS FROM imports-loader ***/\nvar jQuery = require(\"jquery\");\nvar _ = require(\"underscore\");\nvar legacyReturn = {};\nvar amplify = require(\"amplify\");\nvar cryptojsm5d = require(\"crypto-js/md5\");\nvar cryptojs = { MD5: cryptojsm5d };\nvar numeral = require(\"numeral\");\nvar swipe = require(\"swipe\");\nvar MSG = require(\"../Foundation/Services/MessageBusService\");\nvar LocationDetailsAppender = require(\"../Foundation/LocationDetailsAppender\");\nvar locking = require(\"../Foundation/Lock\");\nvar NAV = require(\"../Foundation/Navigation/Nav\");\nvar CMN = require(\"../Foundation/Common\");\nvar TT = require(\"../Foundation/TabTouch\");\nvar ErrorController = require(\"../Foundation/Error\");\nvar PreferencesService = require(\"../Foundation/Services/Preferences/PreferencesService\");\nvar TupleSpace = require(\"../Foundation/TupleSpace\");\nvar raceReplay = require(\"../Betting-v1/RaceReplay\");\nvar blackbookAddViewBinding = require(\"../Foundation/Components/Blackbook/myblackbook-add-viewbinding\");\nvar blackbookAddViewController = require(\"../Foundation/Components/Blackbook/myblackbook-add-viewcontroller\");\nvar NOTE = require(\"../Foundation/Notification\");\nvar jQueryToDictionary = require(\"jquery-todictionary\");\n\nModels.namespace('Models.BetBuilder');\nModels.BetBuilder.BetSlip = function(overridePageProvider) {\n    var page = overridePageProvider || function() {\n        return {\n            totalBetSlipCost: jQuery('#totalBetSlipCost'),\n            numberOfBets: jQuery(\"#numberOfBets\"),\n            headerHelp: jQuery(\"#headerHelp\"),\n            headerNumberIndicator: jQuery(\"#betWalletndicator\"),\n            betBuilderItems: jQuery(\"#bet-builder-items\"),\n            clearButton: jQuery(\"#clearBetBuliderButton\"),\n            placeNowButton: jQuery('#placeBetSlipNow'),\n            confirmBetSlipNowButton: jQuery('#confirmBetSlipNow'),\n            deleteSingleButton: jQuery(\"#deleteSingleBetBuliderButton\"),\n            placeInStoreButton: jQuery(\"#placeInStoreButton\"),\n            infoButtons: jQuery(\".js-betbuilder-info-buttons\"),\n            betInfoPopupContainer: jQuery(\"#bet-information\"),\n            betInfoDetailWindows: jQuery(\"#bet-information .window>div\"),\n            infoPopupCloseButton: jQuery(\"#bet-information .window>.black-x\"),\n            proposeBackButton: jQuery(\"#backToEdit\"),\n            betSlipStatusContainer: jQuery('#betSlipStatusContainer'),\n            accountOrCashButtonGroup: jQuery('#accOrCashBtnGroup'),\n            betWithParagraph: jQuery('#betWithPara')\n        };\n    };\n    return page;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Betting-v1/betslip.legacy.js\n// module id = 287\n// module chunks = 5","/*** IMPORTS FROM imports-loader ***/\nvar jQuery = require(\"jquery\");\nvar _ = require(\"underscore\");\nvar legacyReturn = {};\nvar amplify = require(\"amplify\");\nvar cryptojsm5d = require(\"crypto-js/md5\");\nvar cryptojs = { MD5: cryptojsm5d };\nvar numeral = require(\"numeral\");\nvar swipe = require(\"swipe\");\nvar MSG = require(\"../Foundation/Services/MessageBusService\");\nvar LocationDetailsAppender = require(\"../Foundation/LocationDetailsAppender\");\nvar locking = require(\"../Foundation/Lock\");\nvar NAV = require(\"../Foundation/Navigation/Nav\");\nvar CMN = require(\"../Foundation/Common\");\nvar TT = require(\"../Foundation/TabTouch\");\nvar ErrorController = require(\"../Foundation/Error\");\nvar PreferencesService = require(\"../Foundation/Services/Preferences/PreferencesService\");\nvar TupleSpace = require(\"../Foundation/TupleSpace\");\nvar raceReplay = require(\"../Betting-v1/RaceReplay\");\nvar blackbookAddViewBinding = require(\"../Foundation/Components/Blackbook/myblackbook-add-viewbinding\");\nvar blackbookAddViewController = require(\"../Foundation/Components/Blackbook/myblackbook-add-viewcontroller\");\nvar NOTE = require(\"../Foundation/Notification\");\nvar jQueryToDictionary = require(\"jquery-todictionary\");\n\nlegacyReturn.BetSlipStore = window.BetSlipStore = function() {\n    var self = this;\n\n    var _storeKey = 'betSlip';\n    var _storeKeyBackup = 'betSlip.backup';\n\n    // give the user a separate bet slip in each tab or window\n    var _store = function () {\n        if (amplify.store.types.sessionStorage) {\n            return amplify.store.sessionStorage;\n        }\n        return amplify.store.memory;\n    } ();\n\n    self.clear = function () {\n        self.backup();\n        _store(_storeKey, null);\n    };\n\n    self.get = function () {\n        var result = {\n            Bets: [],\n            Tags: []\n        };\n\n        var betSlip = _store(_storeKey);\n\n        if (betSlip && _.isObject(betSlip)) {\n            result.Bets = betSlip.Bets || result.Bets;\n            result.Tags = betSlip.Tags || result.Tags;\n        }\n\n        return result;\n    };\n\n    self.set = function (betSlip) {\n        self.backup();\n        var data = {\n            Bets: betSlip.Bets,\n            Tags: [cryptojs.MD5(JSON.stringify(betSlip.Bets)).toString()]\n        };\n        _store(_storeKey, data);\n    };\n\n    self.backup = function () {\n        _store(_storeKeyBackup, _store(_storeKey));\n    };\n\n    /* restore the bet slip identified by tag - if available */\n    self.restore = function (tag) {\n        var backupData = _store(_storeKeyBackup);\n        if (backupData && _.indexOf(backupData.Tags,tag) >= 0) {\n            _store(_storeKey, backupData);\n            return true;\n        }\n        return false;\n    };\n\n    /* add a tag to the current bet slip version */\n    self.tag = function (tag) {\n        var data = self.get();\n        data.Tags.push(tag);\n        _store(_storeKey, data);\n    };\n\n    /* return list of available betslip tags */\n    self.history = function () {\n        var backupData = _store(_storeKeyBackup);\n        if (backupData && backupData.Tags) {\n            return backupData.Tags;\n        }\n        return [];\n    };\n};\n\n\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Betting-v1/betslipstore.legacy.js\n// module id = 288\n// module chunks = 5","/*** IMPORTS FROM imports-loader ***/\nvar jQuery = require(\"jquery\");\nvar _ = require(\"underscore\");\nvar legacyReturn = {};\nvar amplify = require(\"amplify\");\nvar cryptojsm5d = require(\"crypto-js/md5\");\nvar cryptojs = { MD5: cryptojsm5d };\nvar numeral = require(\"numeral\");\nvar swipe = require(\"swipe\");\nvar MSG = require(\"../Foundation/Services/MessageBusService\");\nvar LocationDetailsAppender = require(\"../Foundation/LocationDetailsAppender\");\nvar locking = require(\"../Foundation/Lock\");\nvar NAV = require(\"../Foundation/Navigation/Nav\");\nvar CMN = require(\"../Foundation/Common\");\nvar TT = require(\"../Foundation/TabTouch\");\nvar ErrorController = require(\"../Foundation/Error\");\nvar PreferencesService = require(\"../Foundation/Services/Preferences/PreferencesService\");\nvar TupleSpace = require(\"../Foundation/TupleSpace\");\nvar raceReplay = require(\"../Betting-v1/RaceReplay\");\nvar blackbookAddViewBinding = require(\"../Foundation/Components/Blackbook/myblackbook-add-viewbinding\");\nvar blackbookAddViewController = require(\"../Foundation/Components/Blackbook/myblackbook-add-viewcontroller\");\nvar NOTE = require(\"../Foundation/Notification\");\nvar jQueryToDictionary = require(\"jquery-todictionary\");\n\nlegacyReturn.BETWALLET = window.BETWALLET = (typeof (window.BETWALLET) != 'undefined') ? window.BETWALLET : new (function(betWalletService, betSlipService) {\n\n    var self = this;\n    var page = {};\n    var mySwipe = {};\n    self.currentCashBet = null;\n\n    self.pageProvider = function () {\n        return {\n            deleteSingleButton: jQuery('a[data-name=deleteThisBetSlip]'),\n            deleteAllButton: jQuery('a[data-name=deleteAllBetSlips]'),\n            confirmDeletePopup: jQuery('#confirmDeletePopup'),\n            slider: jQuery('#slider'),\n            betSlipId: jQuery('#betSlipId').val(),\n            betWalletContainer: jQuery('body'),\n            betSlipUrl: jQuery('#BetSlipUrl').val()\n        };\n    };\n\n    function initBetWalletPage(url, backText) {\n\n        TT.initCommon(url, backText);\n        page = self.pageProvider();\n\n        initBetSlips(function () {\n\n            initSliderDivs();\n\n            page.swipenext = jQuery('a[data-name=bet-wallet-slider-next]');\n            page.swipeprev = jQuery('a[data-name=bet-wallet-slider-prev]');\n\n            page.swipenext.click(swipeNextClick);\n            page.swipeprev.click(swipePrevClick);\n\n            TT.fixBackground();\n            jQuery('body').addClass('p-bet-wallet');\n\n            mySwipe = page.slider.Swipe({ callback: updateStatusCallback }).data('Swipe');\n            mySwipe.setup();\n            var betSlipSeqToShow = betWalletService.getLastBetSlip();\n            slideToBetSlip(betSlipSeqToShow, 1);\n            setSliderPageIndicator(betSlipSeqToShow);\n            //must register button events after registering swipe (swipe class will copy two extra node for only two nodes)\n            bindWalletContainerElements();\n\n            if (betWalletService.isBetWalletFull()) {\n                warningForFullWallet();\n            }\n        });\n    }\n\n    function addEmptyBetWallet(element) {\n        element.append(jQuery('#emptyBetWalletView').html());\n    }\n\n    function initBetSlips(success) {\n        var betGroupCount = getBetGroupCount();\n        var betWallet = jQuery(\".wallet\");\n        page = self.pageProvider();\n        if (betGroupCount) {\n            var betslipseqs = [betWalletService.getLastBetSlip()];\n            if (betGroupCount > 1) {\n                betslipseqs.push(betWalletService.nextOrFirstBetSlip(betslipseqs[0]));\n            }\n\n            if (betGroupCount > 2) {\n                betslipseqs.push(betWalletService.previousOrLastBetSlip(betslipseqs[0]));\n            }\n\n            NAV.ajaxPost(\n                '/betbuilder/betbuilder/getbetslips',\n                jQuery.param({ 'betslipseqs': betslipseqs }, true),\n                function (data) {\n                    if (data) {\n                        betWallet.append(data);\n                        success();\n                    }\n                });\n        } else {\n            addEmptyBetWallet(betWallet);\n            success();\n        }\n    }\n\n    function initSliderDivs() {\n        var prevElem = jQuery('#emptyBetWalletView');\n        var betGroupCount = getBetGroupCount();\n        if (betGroupCount > 1) {\n            prevElem = prevElem.after('<a class=\"previous-slide\" data-name=\"bet-wallet-slider-prev\"><span class=\"ui-matrix white previous\">Prev</span></a>');\n            prevElem = prevElem.after('<a class=\"next-slide\" data-name=\"bet-wallet-slider-next\"><span class=\"ui-matrix white next\">Next</span></a>');\n        }\n        if (betGroupCount) {\n            prevElem.after('<div class=\"slides\">Cash Bet <span class=\"slide-number\" slide-number=\"1\">1</span> of <span class=\"total-slides\">@(Model.BetSlips.Count)</span></div>');\n        }\n    }\n\n    function getBetGroupCount() {\n        return betWalletService.getBetWalletCount();\n    }\n\n    function deleteSingleClick(e) {\n        e.preventDefault();\n        self.currentCashBet = jQuery(this).attr('data-betslipid');\n        MSG.publish('popup.showPopUp', {\n            headerText: 'Do you want to delete this Cash Bet?',\n            buttonType: POPUP.BUTTONTYPE.CONFIRMCANCEL,\n            confirmCallback: confirmSingleDeleteCallback,\n            confirmButtonText: 'Yes',\n            cancelButtonText: 'No',\n            isWarning: true\n        });\n        return false;\n    }\n\n    function confirmSingleDeleteCallback () {\n\n        MSG.unsubscribe('popup.ConfirmClick', confirmSingleDeleteCallback);\n        confirmSingleDelete(self.currentCashBet);\n        MSG.publish('bet.cash.remove', { ticket: self.currentCashBet });\n    }\n\n    function confirmSingleDelete(betSlipId) {\n\n        var betslipItem = jQuery(\"div.ticket-container[data-betslipseq=\" + betSlipId + \"]\");\n        if (betslipItem.length > 0) {\n            var nextBetSlipToShow = betWalletService.previousOrLastBetSlip(betSlipId);\n            //special logic for deleting first bet slip, will new first bet slip instead of last bet slip\n            if (betSlipId == betWalletService.getFirstBetSlip()) {\n                nextBetSlipToShow = betWalletService.nextOrFirstBetSlip(betSlipId);\n            }\n\n            betWalletService.deleteBetSlip(betSlipId);\n            betslipItem.remove();\n\n            if (getBetGroupCount() == 0) {\n                var betWallet = jQuery(\".wallet\");\n                var slides = jQuery(\".slides\");\n                betWallet.empty();\n                slides.hide();\n                addEmptyBetWallet(betWallet);\n                return;\n            }\n\n            if (getBetGroupCount() == 1) {\n                jQuery(\".previous-slide\").hide();\n                jQuery(\".next-slide\").hide();\n                removeDuplicates();\n            }\n\n            mySwipe.kill();\n            mySwipe = page.slider.Swipe({ callback: updateStatusCallback }).data('Swipe');\n            mySwipe.setup(); //must do this, because two slides will need to be duplicated for smoothy swipe\n            slideToBetSlip(nextBetSlipToShow, 1);\n            setSliderPageIndicator(nextBetSlipToShow);\n\n            bindWalletContainerElements();\n        }\n    }\n\n    function removeDuplicates() {\n        var seen = {};\n        jQuery('.ticket-container').each(function () {\n            var betslip = jQuery(this).attr('data-betslipseq');\n            if (seen[betslip])\n                jQuery(this).remove();\n            else\n                seen[betslip] = true;\n        });\n    }\n\n    function bindWalletContainerElements() {\n\n        page.betWalletContainer.find('a[data-name=deleteThisBetSlip]').each(function () {\n            jQuery(this).off().on(\"touch click\", deleteSingleClick);\n        });\n\n        page.betWalletContainer.find('a[data-name=deleteAllBetSlips]').each(function () {\n            jQuery(this).off().on(\"touch click\", deleteAllClick);\n        });\n\n        page.deleteSingleButton.hide();\n        page.deleteAllButton.hide();\n        if (getBetGroupCount() > 0) {\n            page.deleteSingleButton.show();\n            page.deleteAllButton.show();\n        }\n\n        page.betWalletContainer.find('a[data-name=undoAddBetSlip]').each(function () {\n            jQuery(this).off().on(\"touch click\", undoAddBetSlipClick);\n            var restoreTag = 'wallet_' + jQuery(this).data('betslipseq');\n            jQuery(this).toggle(betSlipService.canUndoPlaceInStore(restoreTag));\n        });\n\n        page.betWalletContainer.find('span[data-name=barCodeSequence]').each(function () {\n            var elem = jQuery(this);\n            var url = elem.data('src');\n            var request = jQuery.get(url);\n            request.done(function (data) {\n                elem.html(data);\n            });\n        });\n    }\n\n    function setSliderPageIndicator(currBetSlipSeq) {\n        var currentSlideNumber = betWalletService.searchIndex(currBetSlipSeq);\n        jQuery('.slide-number').html(currentSlideNumber + 1);\n        jQuery('.total-slides').html(getBetGroupCount());\n    }\n\n    function slideToBetSlip(betSlipSeq, speed) {\n        var newSlidePos = parseInt(jQuery('.ticket-container[data-betslipseq=' + betSlipSeq + ']').attr('data-index'));\n        var currBetSlipSeq = jQuery('.ticket-container[data-index=' + mySwipe.getPos() + ']').attr('data-betslipseq');\n        if (currBetSlipSeq === betSlipSeq || isNaN(newSlidePos)) {\n            return; //currently showing is the one we want to slide to.\n        }\n        mySwipe.slide(newSlidePos, speed ? speed : 300);\n    }\n\n    function updateStatusCallback() {\n\n        var expectedPosition = mySwipe.getPos();  //start from 0\n        // Two reasons for doing this.\n        // 1. When there is only two items in the wallet the library duplicates the items to\n        //      so the slide appears continuous but this has caused a bug where getPos counts\n        //      the duplicates and can return 2 and 3 as positions.\n        // 2. When the last item is deleted the getPos still returns the deleted items position\n        //      which is out of bounds in the case of deleting the last item.\n        expectedPosition = expectedPosition % mySwipe.getNumSlides();\n\n        //currBetSlip is the one will be showing\n        var currBetSlipSeq = jQuery('.ticket-container[data-index=' + expectedPosition + ']').attr('data-betslipseq');\n        if (!currBetSlipSeq) return;\n        slideToBetSlip(currBetSlipSeq);\n        setSliderPageIndicator(currBetSlipSeq);\n        loadMoreBetSlips(currBetSlipSeq);\n    }\n\n    function loadMoreBetSlips(currBetSlipSeq) {\n        if (currBetSlipSeq) {\n            var currBetSlipNode = jQuery('.ticket-container[data-betslipseq=' + currBetSlipSeq + ']');\n\n            var prevBetSlipSeq = betWalletService.previousOrLastBetSlip(currBetSlipSeq);\n            var prevBetSlipDom = jQuery('.ticket-container[data-betslipseq=' + prevBetSlipSeq + ']');\n            if (prevBetSlipDom && prevBetSlipDom.length == 0 && prevBetSlipSeq) {\n                loadSingleBetWallet(prevBetSlipSeq, currBetSlipSeq, currBetSlipNode, currBetSlipNode.before);\n            }\n\n            var nextBetSlipSeq = betWalletService.nextOrFirstBetSlip(currBetSlipSeq);\n            var nextBetSlipDom = jQuery('.ticket-container[data-betslipseq=' + nextBetSlipSeq + ']');\n            if (nextBetSlipDom && nextBetSlipDom.length == 0 && nextBetSlipSeq) {\n                loadSingleBetWallet(nextBetSlipSeq, currBetSlipSeq, currBetSlipNode, currBetSlipNode.after);\n            }\n        }\n    }\n\n    function loadSingleBetWallet(betSlipSeq, currBetSlipSeq, currBetSlipNode, insertContent) {\n        NAV.ajaxPost(\n            '/betbuilder/betbuilder/getbetslip',\n            'betslipseq=' + betSlipSeq,\n            function (data) {\n                if (data) {\n                    insertContent.apply(currBetSlipNode, [data]);\n                    removeDuplicates();\n                    mySwipe.setup();\n                    slideToBetSlip(currBetSlipSeq, 1);\n                    bindWalletContainerElements();\n                }\n            });\n    }\n\n    function swipeNextClick(event) {\n        event.preventDefault();\n        mySwipe.next();\n    }\n\n    function swipePrevClick(event) {\n        event.preventDefault();\n        mySwipe.prev();\n    }\n\n    function deleteAllClick(event) {\n\n        event.preventDefault();\n        MSG.publish('popup.showPopUp', {\n            headerText: 'Are you sure you want to delete all Cash Bets?',\n            buttonType: POPUP.BUTTONTYPE.CONFIRMCANCEL,\n            confirmCallback: function () {\n                betWalletService.deleteAllbetSlips();\n                NAV.refresh();\n                MSG.publish('bet.cash.clear');\n            },\n            confirmButtonText: 'Delete',\n            cancelButtonText: 'Keep',\n            isWarning: true\n        });\n    }\n\n    function undoAddBetSlipClick(event) {\n        var betSlipSeq = jQuery(this).data('betslipseq');\n        var restoreTag = 'wallet_' + betSlipSeq;\n\n        if (betSlipService.canUndoPlaceInStore(restoreTag)) {\n            if (betSlipService.undoPlaceInStore(restoreTag)) {\n                confirmSingleDelete(betSlipSeq);\n                return NAV.nav(page.betSlipUrl);\n            }\n        }\n        ErrorController.showErrorPopup(\"The undo operation could not be completed\", null);\n        return false;\n    }\n\n    function warningForFullWallet() {\n        MSG.publish('popup.showPopUp', {\n            headerText: 'CAPACITY REACHED',\n            messageText: 'You have reached the maximum capacity of ' + betWalletService.maxNumOfBets() + ' saved cash bets. In order to continue adding more bets please delete unwanted barcodes.',\n            buttonType: POPUP.BUTTONTYPE.Ok,\n            cancelButtonText: \"OK\",\n            isError: true\n        });\n    }\n\n    this.initBetWalletPage = initBetWalletPage;\n\n})(new BetWalletService(), new BetSlipService(new BetSlipStore()));\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Betting-v1/betwallet.legacy.js\n// module id = 289\n// module chunks = 5","/*** IMPORTS FROM imports-loader ***/\nvar jQuery = require(\"jquery\");\nvar _ = require(\"underscore\");\nvar legacyReturn = {};\nvar amplify = require(\"amplify\");\nvar cryptojsm5d = require(\"crypto-js/md5\");\nvar cryptojs = { MD5: cryptojsm5d };\nvar numeral = require(\"numeral\");\nvar swipe = require(\"swipe\");\nvar MSG = require(\"../Foundation/Services/MessageBusService\");\nvar LocationDetailsAppender = require(\"../Foundation/LocationDetailsAppender\");\nvar locking = require(\"../Foundation/Lock\");\nvar NAV = require(\"../Foundation/Navigation/Nav\");\nvar CMN = require(\"../Foundation/Common\");\nvar TT = require(\"../Foundation/TabTouch\");\nvar ErrorController = require(\"../Foundation/Error\");\nvar PreferencesService = require(\"../Foundation/Services/Preferences/PreferencesService\");\nvar TupleSpace = require(\"../Foundation/TupleSpace\");\nvar raceReplay = require(\"../Betting-v1/RaceReplay\");\nvar blackbookAddViewBinding = require(\"../Foundation/Components/Blackbook/myblackbook-add-viewbinding\");\nvar blackbookAddViewController = require(\"../Foundation/Components/Blackbook/myblackbook-add-viewcontroller\");\nvar NOTE = require(\"../Foundation/Notification\");\nvar jQueryToDictionary = require(\"jquery-todictionary\");\n\nlegacyReturn.BETWALLETINDICATOR = window.BETWALLETINDICATOR = new function() {\n    var self = this;\n\n    self.page = null;\n    self.lastKnownBetCount = undefined;\n\n    self.pageProvider = function() {\n        return {\n            headerNumberIndicator: jQuery(\"#betWalletndicator\"),\n            walletNotificationPopup: jQuery('#header .notification-wallet')\n        };\n    };\n\n    self.init = function() {\n        self.page = self.pageProvider();\n        self.setHeaderBetCount(self.getBetCount());\n        MSG.subscribe('betwalletindicator.update', self.updateHeaderBetCount);\n        self.lastKnownBetCount = self.getBetCount();\n    };\n\n    self.betCountHasIncreased = function() {\n        return self.lastKnownBetCount < self.getBetCount();\n    };\n\n    self.showNotification = function() {\n        self.page.walletNotificationPopup.show(function() {\n            jQuery(this).animate({\n                opacity: 1,\n                top: '4.5em'\n            }).delay(1500).animate({\n                opacity: 0,\n                top: '5.5em'\n            }, function() { jQuery(this).hide(); });\n        });\n    };\n\n    self.setHeaderBetCount = function(betCount) {\n        var isAnyBets = betCount > 0;\n        self.page.headerNumberIndicator.html(isAnyBets ? betCount : \"\");\n        self.page.headerNumberIndicator.toggle(isAnyBets);\n\n        if (self.betCountHasIncreased()) {\n            self.showNotification();\n        }\n        self.lastKnownBetCount = self.getBetCount();\n    };\n\n    self.getBetCount = function() {\n        var betWalletService = new BetWalletService();\n        return betWalletService.getBetWalletCount();\n    };\n\n    self.updateHeaderBetCount = function() {\n        self.setHeaderBetCount(self.getBetCount());\n    };\n\n    return self;\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Betting-v1/betwalletindicator.legacy.js\n// module id = 290\n// module chunks = 5","/*** IMPORTS FROM imports-loader ***/\nvar jQuery = require(\"jquery\");\nvar _ = require(\"underscore\");\nvar legacyReturn = {};\nvar amplify = require(\"amplify\");\nvar cryptojsm5d = require(\"crypto-js/md5\");\nvar cryptojs = { MD5: cryptojsm5d };\nvar numeral = require(\"numeral\");\nvar swipe = require(\"swipe\");\nvar MSG = require(\"../Foundation/Services/MessageBusService\");\nvar LocationDetailsAppender = require(\"../Foundation/LocationDetailsAppender\");\nvar locking = require(\"../Foundation/Lock\");\nvar NAV = require(\"../Foundation/Navigation/Nav\");\nvar CMN = require(\"../Foundation/Common\");\nvar TT = require(\"../Foundation/TabTouch\");\nvar ErrorController = require(\"../Foundation/Error\");\nvar PreferencesService = require(\"../Foundation/Services/Preferences/PreferencesService\");\nvar TupleSpace = require(\"../Foundation/TupleSpace\");\nvar raceReplay = require(\"../Betting-v1/RaceReplay\");\nvar blackbookAddViewBinding = require(\"../Foundation/Components/Blackbook/myblackbook-add-viewbinding\");\nvar blackbookAddViewController = require(\"../Foundation/Components/Blackbook/myblackbook-add-viewcontroller\");\nvar NOTE = require(\"../Foundation/Notification\");\nvar jQueryToDictionary = require(\"jquery-todictionary\");\n\nlegacyReturn.BetWalletStore = window.BetWalletStore = function() {\n    var self = this;\n\n    var _storeKey = 'betbldr';\n\n    //\n    // the persistant store is shared across browser sessions and tabs per user-device\n    // and has a long life-time\n    //\n    var _localStore = amplify.store;\n\n    //\n    // memory store is temporary and renewed each full page load\n    //\n    var _memoryStore = amplify.store.memory;\n\n    //\n    // allow for possible future data-migration\n    //\n    var _version = \"1\";\n\n    // \n    // create a randomly generated guid - sufficiently unique for usage tracking\n    //\n    var _guid = (function () {\n        function s4() {\n            return Math.floor((1 + Math.random()) * 0x10000)\n               .toString(16)\n               .substring(1);\n        }\n        return function () {\n            return s4() + s4() + '-' + s4() + '-' + s4() + '-' +\n           s4() + '-' + s4() + s4() + s4();\n        };\n    })();\n\n\n    // \n    // get bet wallet data from persistent storage, substitute in any missing attributes to \n    // ensure the data is well-formed before returning. If the key is missing then\n    // initialise a new bet wallet, then write it to storage and return \n    //   \n    var _readStorage = function () {\n        var data = _localStore(_storeKey);\n        if(!data || !jQuery.isArray(data)) {\n            data = [];\n            var space = new TupleSpace(data);\n            space.put(\"Version\", _version);\n            space.put(\"VisitorTrackingId\", _guid());\n            _localStore(_storeKey, data);\n        }\n        return data;\n    };\n\n    //\n    // load in-memory copy of wallet, otherwise sync with persistent store\n    //\n    var _readMemory = function () {\n        var result = _memoryStore(_storeKey);\n        if (!result) {\n            result = _readStorage();\n            _memoryStore(_storeKey, result);\n        }\n        return result;\n    };\n\n    // \n    //  update wallet, writing-through updates to in-memory and persistent-storage,\n    //  which will keep data in sync without exposing the user to unexpected updates\n    //\n    var _updateStorage = function (operation, params) {\n        var localData = _readStorage();\n        var memData = _readMemory();\n\n        localData = operation(localData, params);\n        memData = operation(memData, params);\n\n        _localStore(_storeKey, localData);\n        _memoryStore(_storeKey, memData);\n    };\n\n    var _operations = {\n        clear: function (data, params) {\n            return null;\n        },\n        add: function (data, params) {\n            var space = new TupleSpace(data);\n            space.put(\"DraftBetGroup\", params.betSlipSeq);\n            return data;\n        },\n        remove: function (data, params) {\n            var space = new TupleSpace(data);\n            space.take_many(\"DraftBetGroup\", params.betSlipSeq);\n            return data;\n        },\n        remove_all: function (data, params) {\n            var space = new TupleSpace(data);\n            space.take_many(\"DraftBetGroup\");\n            return data;\n        },\n    };\n    \n    //\n    // blast away any wallet data\n    //\n    self.clear = function () {\n        _updateStorage(_operations.clear);\n    };\n\n    //\n    // read operations\n    //\n    self.get_bet_groups_count = function() {\n        var space = new TupleSpace(_readMemory());\n        return space.count(\"DraftBetGroup\");\n    };\n    \n    self.get_bet_groups = function() {\n        var space = new TupleSpace(_readMemory());\n        return jQuery.map(space.copy_many(\"DraftBetGroup\"), function(tuple) {\n            return { BetSlipSeq: tuple[1] };\n        });\n    };\n    \n    self.get_visitor_tracking_id = function() {\n        var space = new TupleSpace(_readMemory());\n        var tuple = space.copy(\"VisitorTrackingId\");\n        return tuple ? tuple[1] : null;\n    };\n\n    //\n    // update operations\n    //\n    self.add = function (betSlipSeq) {\n        _updateStorage(_operations.add, { betSlipSeq: betSlipSeq });\n    };\n    \n    self.remove = function (betSlipSeq) {\n        _updateStorage(_operations.remove, { betSlipSeq: betSlipSeq });\n    };\n\n    self.remove_all = function () {\n        _updateStorage(_operations.remove_all);\n    };\n};\n\n\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Betting-v1/betwalletstore.legacy.js\n// module id = 291\n// module chunks = 5","/*** IMPORTS FROM imports-loader ***/\nvar jQuery = require(\"jquery\");\nvar _ = require(\"underscore\");\nvar legacyReturn = {};\nvar amplify = require(\"amplify\");\nvar cryptojsm5d = require(\"crypto-js/md5\");\nvar cryptojs = { MD5: cryptojsm5d };\nvar numeral = require(\"numeral\");\nvar swipe = require(\"swipe\");\nvar MSG = require(\"../Foundation/Services/MessageBusService\");\nvar LocationDetailsAppender = require(\"../Foundation/LocationDetailsAppender\");\nvar locking = require(\"../Foundation/Lock\");\nvar NAV = require(\"../Foundation/Navigation/Nav\");\nvar CMN = require(\"../Foundation/Common\");\nvar TT = require(\"../Foundation/TabTouch\");\nvar ErrorController = require(\"../Foundation/Error\");\nvar PreferencesService = require(\"../Foundation/Services/Preferences/PreferencesService\");\nvar TupleSpace = require(\"../Foundation/TupleSpace\");\nvar raceReplay = require(\"../Betting-v1/RaceReplay\");\nvar blackbookAddViewBinding = require(\"../Foundation/Components/Blackbook/myblackbook-add-viewbinding\");\nvar blackbookAddViewController = require(\"../Foundation/Components/Blackbook/myblackbook-add-viewcontroller\");\nvar NOTE = require(\"../Foundation/Notification\");\nvar jQueryToDictionary = require(\"jquery-todictionary\");\n\nlegacyReturn.CASHUITOGGLER = window.CASHUITOGGLER = (function() {\n\n    function updateCashRelatedUI() {\n        //buttons in CalculatorButtons.chtml\n        var preferencesServiceLocal = PreferencesService;\n        var cashBettingEnabled = preferencesServiceLocal.cashBettingEnabled();\n        var placeInStoreButton = jQuery('#placeInStoreButton').not('.bettype-multi-accumulator');\n        jQuery('#bettingFormNext').not('.bettype-multi-accumulator').toggleClass('halfwidth', cashBettingEnabled);\n        jQuery('#bettingFormNext').not('.bettype-multi-accumulator').toggleClass('fullwidth', !cashBettingEnabled);\n        placeInStoreButton.toggle(cashBettingEnabled);\n\n        //In betslip\n        if (typeof BETB !== 'undefined') {\n            BETB.setButtonState();\n            BETB.updateWarningOrErrorMessageHead();\n        }\n\n        //Live betting message in FOB\n        if (FOB != undefined) {\n            FOB.updateLiveBettingForCash();\n        }\n    }\n\n    function onDynamicCashBettingFeatureOn() {\n        //unsubscribe first just in case if it is subscribed before. This can happen if try to publish \"DynamicCashBetting.On\" many places and which is happening at the moment!! \n        MSG.unsubscribe('preferences.cash', updateCashRelatedUI);\n        MSG.subscribe('preferences.cash', updateCashRelatedUI);\n    }\n\n    function onDynamicCachBettingFeatureOff() {\n        MSG.unsubscribe('preferences.cash', updateCashRelatedUI);\n    }\n\n    function setupDynamicCashBettingSubscription() {\n        MSG.subscribe('DynamicCashBetting.Off', onDynamicCachBettingFeatureOff);\n        MSG.subscribe('DynamicCashBetting.On', onDynamicCashBettingFeatureOn);\n    }\n\n    setupDynamicCashBettingSubscription();\n\n})();\n\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Betting-v1/cash-ui-toggler.legacy.js\n// module id = 292\n// module chunks = 5","/*** IMPORTS FROM imports-loader ***/\nvar jQuery = require(\"jquery\");\nvar _ = require(\"underscore\");\nvar legacyReturn = {};\nvar amplify = require(\"amplify\");\nvar cryptojsm5d = require(\"crypto-js/md5\");\nvar cryptojs = { MD5: cryptojsm5d };\nvar numeral = require(\"numeral\");\nvar swipe = require(\"swipe\");\nvar MSG = require(\"../Foundation/Services/MessageBusService\");\nvar LocationDetailsAppender = require(\"../Foundation/LocationDetailsAppender\");\nvar locking = require(\"../Foundation/Lock\");\nvar NAV = require(\"../Foundation/Navigation/Nav\");\nvar CMN = require(\"../Foundation/Common\");\nvar TT = require(\"../Foundation/TabTouch\");\nvar ErrorController = require(\"../Foundation/Error\");\nvar PreferencesService = require(\"../Foundation/Services/Preferences/PreferencesService\");\nvar TupleSpace = require(\"../Foundation/TupleSpace\");\nvar raceReplay = require(\"../Betting-v1/RaceReplay\");\nvar blackbookAddViewBinding = require(\"../Foundation/Components/Blackbook/myblackbook-add-viewbinding\");\nvar blackbookAddViewController = require(\"../Foundation/Components/Blackbook/myblackbook-add-viewcontroller\");\nvar NOTE = require(\"../Foundation/Notification\");\nvar jQueryToDictionary = require(\"jquery-todictionary\");\n\nwindow.collections = window.collections || {};\n\ncollections.set = function () {\n    var self = this;\n\n    self._members = {};\n\n    self.count = function (value) {\n        return +(self._members[value] != null);\n    };\n\n    self.insert = function (value) {\n        self._members[value] = 1;\n        return self;\n    };\n\n    self.erase = function (value) {\n        delete self._members[value];\n        return self;\n    };\n\n    self.clear = function () {\n        self._members = {};\n        return self;\n    };\n};\n\ncollections.set.withArray = function (values) {\n    var self = new collections.set();\n    for (var i = 0; i < values.length; ++i) {\n        self.insert(values[i]);\n    }\n    return self;\n};\n\ncollections.set.withDict = function (dict) {\n    var self = new collections.set();\n    for (var key in dict) {\n        self.insert(key);\n    }\n    return self;\n};\n\ncollections.multiset = function () {\n    var self = this;\n\n    self._members = {};\n\n    self.count = function (value) {\n        return self._members[value] || 0;\n    };\n\n    self.insert = function (value) {\n        self._members[value] = (self._members[value] || 0)+1;\n        return self;\n    };\n\n    self.erase = function (value) {\n        delete self._members[value];\n        return self;\n    };\n\n    self.clear = function () {\n        self._members = {};\n        return self;\n    };\n};\n\ncollections.multiset.withArray = function (values) {\n    var self = new collections.multiset();\n    for (var i = 0; i < values.length; ++i) {\n        self.insert(values[i]);\n    }\n    return self;\n};\n\ncollections.multiset.withDict = function (dict) {\n    var self = new collections.multiset();\n    for (var key in dict) {\n        self.insert(key);\n    }\n    return self;\n};\n\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Betting-v1/collections.legacy.js\n// module id = 293\n// module chunks = 5","/*** IMPORTS FROM imports-loader ***/\nvar jQuery = require(\"jquery\");\nvar _ = require(\"underscore\");\nvar legacyReturn = {};\nvar amplify = require(\"amplify\");\nvar cryptojsm5d = require(\"crypto-js/md5\");\nvar cryptojs = { MD5: cryptojsm5d };\nvar numeral = require(\"numeral\");\nvar swipe = require(\"swipe\");\nvar MSG = require(\"../Foundation/Services/MessageBusService\");\nvar LocationDetailsAppender = require(\"../Foundation/LocationDetailsAppender\");\nvar locking = require(\"../Foundation/Lock\");\nvar NAV = require(\"../Foundation/Navigation/Nav\");\nvar CMN = require(\"../Foundation/Common\");\nvar TT = require(\"../Foundation/TabTouch\");\nvar ErrorController = require(\"../Foundation/Error\");\nvar PreferencesService = require(\"../Foundation/Services/Preferences/PreferencesService\");\nvar TupleSpace = require(\"../Foundation/TupleSpace\");\nvar raceReplay = require(\"../Betting-v1/RaceReplay\");\nvar blackbookAddViewBinding = require(\"../Foundation/Components/Blackbook/myblackbook-add-viewbinding\");\nvar blackbookAddViewController = require(\"../Foundation/Components/Blackbook/myblackbook-add-viewcontroller\");\nvar NOTE = require(\"../Foundation/Notification\");\nvar jQueryToDictionary = require(\"jquery-todictionary\");\n\nlegacyReturn.ConfigurationService = window.ConfigurationService = function() {\n    var self = this;\n\n    self.MaxBetsPerCashWallet = jQuery('#MaxBetsPerCashWallet').val();\n    self.MaxBetsPerBetSlip = jQuery('#MaxBetsPerBetSlip').val();\n    \n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Betting-v1/configuration-service.legacy.js\n// module id = 294\n// module chunks = 5","/*** IMPORTS FROM imports-loader ***/\nvar jQuery = require(\"jquery\");\nvar _ = require(\"underscore\");\nvar legacyReturn = {};\nvar amplify = require(\"amplify\");\nvar cryptojsm5d = require(\"crypto-js/md5\");\nvar cryptojs = { MD5: cryptojsm5d };\nvar numeral = require(\"numeral\");\nvar swipe = require(\"swipe\");\nvar MSG = require(\"../Foundation/Services/MessageBusService\");\nvar LocationDetailsAppender = require(\"../Foundation/LocationDetailsAppender\");\nvar locking = require(\"../Foundation/Lock\");\nvar NAV = require(\"../Foundation/Navigation/Nav\");\nvar CMN = require(\"../Foundation/Common\");\nvar TT = require(\"../Foundation/TabTouch\");\nvar ErrorController = require(\"../Foundation/Error\");\nvar PreferencesService = require(\"../Foundation/Services/Preferences/PreferencesService\");\nvar TupleSpace = require(\"../Foundation/TupleSpace\");\nvar raceReplay = require(\"../Betting-v1/RaceReplay\");\nvar blackbookAddViewBinding = require(\"../Foundation/Components/Blackbook/myblackbook-add-viewbinding\");\nvar blackbookAddViewController = require(\"../Foundation/Components/Blackbook/myblackbook-add-viewcontroller\");\nvar NOTE = require(\"../Foundation/Notification\");\nvar jQueryToDictionary = require(\"jquery-todictionary\");\n\nlegacyReturn.confirmation = window.confirmation = window.confirmation || {};\n\nconfirmation.Dialog = function (jQuery,cmn) {\n    var self = this;\n    \n    self.show = function(msg, onConfirm, onCancel) {\n        var fadeOut = function() { jQuery('#confirmation-window').fadeOut('fast'); };\n        jQuery('#confirmation-message-list').html('<p>' + msg + '</p>');\n        jQuery('#confirmation-close').unbind('click').click(function() {\n            if (onCancel) {\n                onCancel();\n            }\n            fadeOut();\n        });\n        jQuery('#confirmation-cancel').unbind('click').click(function() {\n            if (onCancel) {\n                onCancel();\n            }\n            fadeOut();\n        });\n        jQuery('#confirmation-confirm').unbind('click').click(function() {\n            onConfirm();\n            fadeOut();\n        });\n        cmn.showPopup($('#confirmation-window'));\n    };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Betting-v1/confirmation.legacy.js\n// module id = 295\n// module chunks = 5","/*** IMPORTS FROM imports-loader ***/\nvar jQuery = require(\"jquery\");\nvar _ = require(\"underscore\");\nvar legacyReturn = {};\nvar amplify = require(\"amplify\");\nvar cryptojsm5d = require(\"crypto-js/md5\");\nvar cryptojs = { MD5: cryptojsm5d };\nvar numeral = require(\"numeral\");\nvar swipe = require(\"swipe\");\nvar MSG = require(\"../Foundation/Services/MessageBusService\");\nvar LocationDetailsAppender = require(\"../Foundation/LocationDetailsAppender\");\nvar locking = require(\"../Foundation/Lock\");\nvar NAV = require(\"../Foundation/Navigation/Nav\");\nvar CMN = require(\"../Foundation/Common\");\nvar TT = require(\"../Foundation/TabTouch\");\nvar ErrorController = require(\"../Foundation/Error\");\nvar PreferencesService = require(\"../Foundation/Services/Preferences/PreferencesService\");\nvar TupleSpace = require(\"../Foundation/TupleSpace\");\nvar raceReplay = require(\"../Betting-v1/RaceReplay\");\nvar blackbookAddViewBinding = require(\"../Foundation/Components/Blackbook/myblackbook-add-viewbinding\");\nvar blackbookAddViewController = require(\"../Foundation/Components/Blackbook/myblackbook-add-viewcontroller\");\nvar NOTE = require(\"../Foundation/Notification\");\nvar jQueryToDictionary = require(\"jquery-todictionary\");\n\nControllers.namespace('Controllers.BetBuilder');\nControllers.BetBuilder.AddBetSlip = function (betWalletService) {\n    var self = this;\n    self.lock = new locking.lock();\n\n    self.bindAddToWalletButtonClickHandler = function ($button, formData, beforeRequest) {\n        $button.off(\"click\");\n        $button.click(function (e) {\n            e.preventDefault();\n            if (jQuery(this).is('.disabled') === false) {\n                if (beforeRequest && !beforeRequest()) {\n                    return false;\n                } else {\n                    var requestCreate = function(url) {\n                        var data = formData();\n                        return getRequest(url, data);\n                    };\n                    return processBetWalletRequest(requestCreate, bindUrlConfig(this));\n                }\n            }\n            return false;\n        });\n    };\n\n    self.onAddToWalletButtonClick = function(jsonModel) {\n        var requestCreate = function(url) {\n            var data = jQuery.param(jsonModel, true);\n            return getRequest(url, data);\n        };\n        processBetWalletRequest(requestCreate, {\n            requestUrl: \"/BetBuilder/BetBuilder/AddToteRacingBetToBetWallet\",\n            betWalletUrl: \"/#betbuilder/betbuilder/getbetwallet\"\n        });\n    };\n\n    self.bindAddMultiToWalletButtonClickHandler = function ($button, continueAfterProcess) {\n        if (typeof continueAfterProcess === 'undefined') {\n            continueAfterProcess = false;\n        }\n\n        $button.click(function (e) {\n            e.preventDefault();\n            if (jQuery(this).is('.disabled') === false) {\n                var requestCreate = function(url) {\n                    var $legType = jQuery('#calculator-form input:radio[name=ReturnType]:checked');\n                    var formData = jQuery(\"#betting-form, #calculator-form\").serialize();\n                    setupPlaceInvestment($legType);\n                    return getRequest(url, formData);\n                };\n                var totalCost = jQuery('#TotalCost').text();\n                MSG.publish('bet.cash.selected', 'multi');\n                return processBetWalletRequest(requestCreate, bindUrlConfig(this), totalCost) || continueAfterProcess;\n            }\n        });\n    };\n\n    function getRequest(url, formData) {\n        var request = jQuery.ajax({\n            url: url,\n            data: formData + '&' + jQuery.param({ VisitorTrackingId: betWalletService.getVisitorTrackingId() }),\n            type: \"POST\"\n        });\n\n        return request;\n    }\n\n    function bindUrlConfig(elem) {\n        return {\n            requestUrl: jQuery(elem).attr('href'),\n            betWalletUrl: jQuery(elem).attr('data-betwalleturl')\n        };\n    }\n\n    function errorForFullWallet() {\n        MSG.publish('popup.showPopUp', {\n            headerText: 'CAPACITY REACHED',\n            messageText: 'You have reached the maximum capacity of ' + betWalletService.maxNumOfBets() + ' saved cash bets. In order to continue adding more bets please delete unwanted barcodes.',\n            buttonType: POPUP.BUTTONTYPE.Ok,\n            cancelButtonText: \"OK\",\n            isError: true\n        });\n    }\n\n    function processBetWalletRequest(requestCreate, urlConfig, totalCost) {\n        if (self.lock.trylock()) {\n\n            if (betWalletService.isBetWalletFull()) {\n                errorForFullWallet();\n                self.lock.unlock();\n                return false;\n            }\n\n            NAV.showLoading();\n\n            var request = requestCreate(urlConfig.requestUrl);\n\n            request.done(function (response, textStatus, http) {\n                if (http.status === 201) {\n\n                    betWalletService.addBetSlip(Number(response));\n                    NAV.navChange(urlConfig.betWalletUrl);\n                    MSG.publish('bet.cash.receipt', {ticket:Number(response),totalCost:totalCost});\n                } else {\n                    ErrorController.showGenericErrorPage();\n                }\n            });\n            request.fail(function (http) {\n                if (http.status === 400) {\n                    var caughtException = jQuery.parseJSON(http.responseText);\n                    ErrorController.showErrorPopup(caughtException.Message, caughtException.ExceptionMessage);\n                } else {\n                    NAV.ajaxError(http.status, http, false);\n                }\n            });\n            request.always(function () {\n                self.lock.unlock();\n            });\n        }\n        return false;\n    }\n\n    function setupPlaceInvestment(legType) {\n        if (legType.length > 0) {\n            var $investmentPlace = jQuery(\"#InvestmentPlace:input[type=hidden]\");\n            var $investmentWin = jQuery(\"#Investment\");\n            if (legType.val() === 'EachWay' && $investmentWin.length && $investmentPlace.length) {\n                $investmentPlace.val($investmentWin.val());\n            } else if ($investmentPlace.length) {\n                $investmentPlace.val(null);\n            }\n        }\n    }\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Betting-v1/controller-addbetslip.legacy.js\n// module id = 296\n// module chunks = 5","/*** IMPORTS FROM imports-loader ***/\nvar jQuery = require(\"jquery\");\nvar _ = require(\"underscore\");\nvar legacyReturn = {};\nvar amplify = require(\"amplify\");\nvar cryptojsm5d = require(\"crypto-js/md5\");\nvar cryptojs = { MD5: cryptojsm5d };\nvar numeral = require(\"numeral\");\nvar swipe = require(\"swipe\");\nvar MSG = require(\"../Foundation/Services/MessageBusService\");\nvar LocationDetailsAppender = require(\"../Foundation/LocationDetailsAppender\");\nvar locking = require(\"../Foundation/Lock\");\nvar NAV = require(\"../Foundation/Navigation/Nav\");\nvar CMN = require(\"../Foundation/Common\");\nvar TT = require(\"../Foundation/TabTouch\");\nvar ErrorController = require(\"../Foundation/Error\");\nvar PreferencesService = require(\"../Foundation/Services/Preferences/PreferencesService\");\nvar TupleSpace = require(\"../Foundation/TupleSpace\");\nvar raceReplay = require(\"../Betting-v1/RaceReplay\");\nvar blackbookAddViewBinding = require(\"../Foundation/Components/Blackbook/myblackbook-add-viewbinding\");\nvar blackbookAddViewController = require(\"../Foundation/Components/Blackbook/myblackbook-add-viewcontroller\");\nvar NOTE = require(\"../Foundation/Notification\");\nvar jQueryToDictionary = require(\"jquery-todictionary\");\n\nControllers.namespace('Controllers.BetBuilder');\nControllers.BetBuilder.BetSlip = function (betSlipModel, summaryPanelModel, betSlipService, betWalletService, preferencesService) {\n    var self = this;\n    var loadPage = betSlipModel;\n    self.page = betSlipModel();\n\n    function initBetSlipPage(url, backText) {\n        self.page = loadPage();\n        TT.initCommon(url, backText);\n        setButtonState();\n        var betSlipCount = betSlipService.getBetSlipCount();\n        setHeaderBetCount(betSlipCount);\n        attachButtonHandlers();\n        updateBetSlipIndexes();\n        updateWarningOrErrorMessageHead();\n        \n        //we need a design to convert this to MSG.publish to remove the dependence\n        if (jQuery('li a.information')) {\n            jQuery('li a.information').click(function (e) {\n                e.preventDefault();\n                jQuery('#content-container .popup#bet-information div#bet-info').html(jQuery(this).children('span').children().clone());\n                CMN.showPopup(jQuery('#bet-information'));\n            });\n        }\n\n        jQuery('.popup > .bet-information > .black-x').click(function () { jQuery('.popup').fadeOut('fast'); });\n\n        NAV.scrollTo('#top');\n\n        // Subscriptions\n        MSG.subscribe('betb.update', updateHeaderBetCount);\n        MSG.subscribe(\"lo.login\", reloadBetSlips);\n        MSG.subscribe(\"nav.nav\", cleanupSubscription);\n    }\n\n    function cleanupSubscription(url) {\n        MSG.unsubscribe(\"lo.login\", reloadBetSlips);\n        MSG.unsubscribe(\"nav.nav\", cleanupSubscription);\n    }\n\n    function reloadBetSlips() {\n        betSlipService.reloadBetSlips();\n    }\n\n    function updateBetSlipIndexes() {\n        var betSlipItems = jQuery(\"li[name=BetSlipItem]\");\n        jQuery.each(betSlipItems, function (index, value) {\n            jQuery(value).attr('data-index', index);\n        });\n    }\n\n    function setButtonState() {\n        var anyBets = betSlipService.getBetSlipCount() > 0;\n        var cashBettingEnabled = preferencesService.cashBettingEnabled();\n        var accountBettingEnabled = !betSlipService.hasLiveBettingBets();\n        var halfWidth = cashBettingEnabled;\n        self.page.clearButton.toggle(anyBets);\n\n        self.page.placeInStoreButton.toggle(cashBettingEnabled && anyBets);\n        self.page.placeInStoreButton.toggleClass('r-5', halfWidth);\n        self.page.placeInStoreButton.toggleClass('halfwidth', halfWidth);\n        self.page.placeInStoreButton.toggleClass('right', halfWidth);\n\n        self.page.placeNowButton.toggle(anyBets);\n        self.page.placeNowButton.toggleClass('l-5', halfWidth);\n        self.page.placeNowButton.toggleClass('halfwidth', halfWidth);\n        self.page.placeNowButton.toggleClass('disabled', !accountBettingEnabled);\n\n        self.page.accountOrCashButtonGroup.toggleClass('pl15', halfWidth);\n        self.page.accountOrCashButtonGroup.toggleClass('pr15', halfWidth);\n        self.page.betWithParagraph.toggleClass('l-5', halfWidth);        \n    }\n\n    function attachButtonHandlers() {\n        self.page.deleteSingleButton.click();\n        self.page.clearButton.click(clearBetSlipConfirmation);\n        self.page.infoPopupCloseButton.click(closePopupClickHandler);\n        self.page.infoButtons.click(infoButtonClickHandler);\n        self.page.placeNowButton.click(placeNowHandler);\n        self.page.confirmBetSlipNowButton.click(commitNowHandler);\n        self.page.placeInStoreButton.click(placeInStoreHandler);\n        self.page.proposeBackButton.click(proposeBackHandler);\n        jQuery(\"li[name=BetSlipItem] a[name=BetSlipItemRemove]\").on(\"click\", function (e) {\n            removeBetSlipItem(jQuery(this));\n        });\n    }\n\n    function removeBetSlipItem($element) {\n        var betSlipItem = $element.closest(\"li[name=BetSlipItem]\");\n        var betSlipItemIndex = betSlipItem.attr(\"data-index\");\n        betSlipService.removeBetSlipItem(betSlipItemIndex);\n        var numberOfBets = betSlipService.getBetSlipCount();\n        if (numberOfBets === 0) {\n            NAV.refresh();\n        } else {\n            betSlipService.reloadBetSlips();\n        }\n        MSG.publish('bet.betslip.remove');\n    }\n\n    function placeNowHandler(e) {\n        e.preventDefault();\n        if (!jQuery(this).hasClass('disabled')) {\n            betSlipService.placeBetSlipNow(self.page.placeNowButton.attr('href'), self.page.placeNowButton.attr('data-betslipurl'));\n        }\n    }\n\n    function commitNowHandler(e) {\n        e.preventDefault();\n        betSlipService.commitBetSlipNow(self.page.confirmBetSlipNowButton.attr('href'), self.page.confirmBetSlipNowButton.attr('data-betslipurl'));\n    }\n\n    function placeInStoreHandler(e) {\n        e.preventDefault();\n\n        if (!jQuery(this).hasClass('disabled')) {\n\n            NAV.showLoading();\n            if (betWalletService.isBetWalletFull()) {\n                MSG.publish('popup.showPopUp', {\n                    headerText: 'CAPACITY REACHED',\n                    messageText: 'You have reached the maximum capacity of ' + betWalletService.maxNumOfBets() + ' saved cash bets. In order to continue adding more bets please delete unwanted barcodes.',\n                    buttonType: POPUP.BUTTONTYPE.Ok,\n                    cancelButtonText: \"OK\",\n                    isError: true\n                });\n                NAV.hideLoading();\n                return;\n            }\n\n            MSG.publish('bet.betslip.cash.selected', 'single');\n            betSlipService.placeInStore(jQuery(this).attr('href'), jQuery(this).attr('data-betwalleturl'), betWalletService);\n        }\n    }\n\n    function proposeBackHandler(e) {\n        e.preventDefault();\n        NAV.nav(this.href);\n    }\n\n    function closePopupClickHandler(e) {\n        e.preventDefault();\n        self.page.betInfoPopupContainer.hide();\n    }\n\n    function infoButtonClickHandler(e) {\n        e.preventDefault();\n        self.page.betInfoDetailWindows.hide();\n        self.page.betInfoPopupContainer.show();\n        var draftBetSeq = jQuery(this).closest(\".js-draft-bet-container\").find(\".js-draft-bet-seq\").val();\n        self.page.betInfoDetailWindows.filter(\"#\" + draftBetSeq).show();\n    }\n\n    function setHeaderBetCount(betCount) {\n        var isAnyBets = betCount > 0;\n        self.page.headerNumberIndicator.html(isAnyBets ? betCount : \"\");\n        self.page.headerNumberIndicator.toggle(isAnyBets);\n    }\n\n    function updateHeaderBetCount(betCount) {\n        setHeaderBetCount(betCount);\n        showNotification();\n    }\n\n    function updateWarningOrErrorMessageHead() {\n        var warningMsg = jQuery('div#warningMsg');\n        if (warningMsg) {\n            var hasWarning = betSlipService.hasBetWarning();\n            if (!hasWarning) {\n                warningMsg.addClass('invisible');\n            } else {\n                warningMsg.removeClass('invisible');\n            }\n        }\n\n        var errorMsg = jQuery('div#errMsg');\n        if (errorMsg) {\n            var hasError = betSlipService.hasBetError();\n            if (!hasError) {\n                errorMsg.addClass('invisible');\n            } else {\n                errorMsg.removeClass('invisible');\n            }\n        }\n\n        var cashBettingEnabled = preferencesService.cashBettingEnabled();\n\n        var lbWarningMsg = jQuery('div#liveBettingWarningMsg');\n        if (lbWarningMsg) {\n            var liveBetting = betSlipService.hasLiveBettingBets();\n            if (!liveBetting || cashBettingEnabled) {\n                lbWarningMsg.addClass('invisible');\n            } else {\n                lbWarningMsg.removeClass('invisible');\n            }\n        }\n\n        var lblCashBonusBetMsg = jQuery('div#cashBonusBetMsg');\n        if (lblCashBonusBetMsg) {\n            if (!cashBettingEnabled) {\n                lblCashBonusBetMsg.addClass('invisible');\n            } else {\n                lblCashBonusBetMsg.removeClass('invisible');\n            }\n        }\n\n    }\n\n    function showNotification() {\n        jQuery('#header .notification-wallet').animate({\n            opacity: 1,\n            top: '4.5em'\n        }).delay(1500).animate({\n            opacity: 0,\n            top: '5.5em'\n        });\n    }\n\n    function clearBetSlipConfirmation() {\n        MSG.publish('popup.showPopUp', {\n            headerText: 'CLEAR BET SLIP',\n            messageText: 'You are about to permanently remove all the bets from the bet slip. Please Confirm?',\n            buttonType: POPUP.BUTTONTYPE.CONFIRMCANCEL,\n            confirmCallback: clearBetSlip,\n            confirmButtonText: 'Remove All',\n            cancelButtonText: 'Keep',\n            isWarning: true\n        });\n    }\n\n    function clearBetSlip() {\n        if (betSlipService.clearAll()) {\n            NAV.nav(self.page.clearButton.attr('data-betslipurl'));\n            MSG.publish('bet.betslip.clear');\n        }\n    }\n\n    self.initBetSlipPage = initBetSlipPage;\n    self.setHeaderBetCount = setHeaderBetCount;\n    self.clearBetSlip = clearBetSlip;\n    self.placeInStoreButton = self.placeInStoreButton;\n    self.loadBetSlips = betSlipService.loadBetSlips;\n    self.setButtonState = setButtonState;\n    self.updateWarningOrErrorMessageHead = updateWarningOrErrorMessageHead;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Betting-v1/controller-betslip.legacy.js\n// module id = 297\n// module chunks = 5","/*** IMPORTS FROM imports-loader ***/\nvar jQuery = require(\"jquery\");\nvar _ = require(\"underscore\");\nvar legacyReturn = {};\nvar amplify = require(\"amplify\");\nvar cryptojsm5d = require(\"crypto-js/md5\");\nvar cryptojs = { MD5: cryptojsm5d };\nvar numeral = require(\"numeral\");\nvar swipe = require(\"swipe\");\nvar MSG = require(\"../Foundation/Services/MessageBusService\");\nvar LocationDetailsAppender = require(\"../Foundation/LocationDetailsAppender\");\nvar locking = require(\"../Foundation/Lock\");\nvar NAV = require(\"../Foundation/Navigation/Nav\");\nvar CMN = require(\"../Foundation/Common\");\nvar TT = require(\"../Foundation/TabTouch\");\nvar ErrorController = require(\"../Foundation/Error\");\nvar PreferencesService = require(\"../Foundation/Services/Preferences/PreferencesService\");\nvar TupleSpace = require(\"../Foundation/TupleSpace\");\nvar raceReplay = require(\"../Betting-v1/RaceReplay\");\nvar blackbookAddViewBinding = require(\"../Foundation/Components/Blackbook/myblackbook-add-viewbinding\");\nvar blackbookAddViewController = require(\"../Foundation/Components/Blackbook/myblackbook-add-viewcontroller\");\nvar NOTE = require(\"../Foundation/Notification\");\nvar jQueryToDictionary = require(\"jquery-todictionary\");\n\nControllers.namespace('Controllers.Tote');\nControllers.Tote.Calculator = function () {\n    // Force new object\n    var self = this instanceof Controllers.Tote.Calculator\n            ? this\n            : Object.create(Controllers.Tote.Calculator.prototype);\n\n    // Binding Prototypes\n    self.activate = self.activate.bind(self);\n};\n\n// Prototype Properties\nControllers.Tote.Calculator.prototype = function (NAV, CALC, TOTESEL) {\n    var activate = function () {\n        var disabled = \"disabled\";\n        var nav = jQuery('.previous-race-button, .next-race-button, .page-heading .refresh-button');\n        var navInfoContainer = jQuery('#nav-info-container');\n        var betconfirm = '#bet-confirm';\n        var betcostbutton = jQuery('#betcost');\n\n        jQuery('.multi-options').hide();\n        nav.hide();\n        navInfoContainer.show();\n        jQuery(\"a#placeBetNow\").unbind('click');\n        jQuery(betconfirm).hide().html(\"\");\n        jQuery('#pool-type-container, #bet-content, .bet-amount-container, .prefill-options, .prov-divs, .sort-group, #fixed-bet-info, #int-rules, #special-info').hide();\n        jQuery('#race-details, .hidden-calculator, .my-selections').show();\n        //disable all starter inputs so they aren't submitted\n        jQuery('div.starter-tab input[name=\"starter\"]').prop(disabled, true);\n\n        var isWinPlace = jQuery('#BetType').val() === 'WinPlace';\n        if (isWinPlace) {\n            //hide show place calc as determined by the bet type.\n            var fixedSelected = (TOTESEL.getFixedToteType() === 'fixed');\n            //jQuery('.offers-info').toggle(!fixedSelected);\n            jQuery('div#place-calculator').toggle((fixedSelected ? (jQuery('#FixedPlacesPaying').val() > 1) : (jQuery('#IsPlaceAvailable').val() !== 'False')) && !TOTESEL.isSpecialFobPropositionSelected());\n            jQuery('span#pay-tote').toggle(!fixedSelected);\n            jQuery('span#pay-fixed').toggle(fixedSelected);\n            //hide show 50c amount buttons\n            jQuery('.calculator button[value=\".5\"]').toggle(!fixedSelected);\n            CALC.setBlurBehaviour(fixedSelected);\n        }\n\n        betcostbutton.toggle(isWinPlace).toggleClass('block', isWinPlace);\n\n        NAV.overrideBack(function () {\n            TOTE.changeToteStarterState(TOTE.states.none);\n            CALC.registerUpdateNotification(null);\n            jQuery(\".black-bubble .pay-wrap\").show();\n            return false;\n        });\n\n        if (jQuery('.odds-evens > span.selected').length > 0) {\n            jQuery(\".black-bubble .pay-wrap\").hide();\n        }\n        CALC.setCalcButtonState();\n    };\n    return {\n        activate: activate\n    };\n} (NAV, CALC, TOTESEL);\n\n//Singleton\nControllers.Tote.Calculator = new Controllers.Tote.Calculator();\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Betting-v1/controller-tote-calculator.legacy.js\n// module id = 298\n// module chunks = 5","/*** IMPORTS FROM imports-loader ***/\nvar jQuery = require(\"jquery\");\nvar _ = require(\"underscore\");\nvar legacyReturn = {};\nvar amplify = require(\"amplify\");\nvar cryptojsm5d = require(\"crypto-js/md5\");\nvar cryptojs = { MD5: cryptojsm5d };\nvar numeral = require(\"numeral\");\nvar swipe = require(\"swipe\");\nvar MSG = require(\"../Foundation/Services/MessageBusService\");\nvar LocationDetailsAppender = require(\"../Foundation/LocationDetailsAppender\");\nvar locking = require(\"../Foundation/Lock\");\nvar NAV = require(\"../Foundation/Navigation/Nav\");\nvar CMN = require(\"../Foundation/Common\");\nvar TT = require(\"../Foundation/TabTouch\");\nvar ErrorController = require(\"../Foundation/Error\");\nvar PreferencesService = require(\"../Foundation/Services/Preferences/PreferencesService\");\nvar TupleSpace = require(\"../Foundation/TupleSpace\");\nvar raceReplay = require(\"../Betting-v1/RaceReplay\");\nvar blackbookAddViewBinding = require(\"../Foundation/Components/Blackbook/myblackbook-add-viewbinding\");\nvar blackbookAddViewController = require(\"../Foundation/Components/Blackbook/myblackbook-add-viewcontroller\");\nvar NOTE = require(\"../Foundation/Notification\");\nvar jQueryToDictionary = require(\"jquery-todictionary\");\n\nlegacyReturn.Controllers = window.Controllers = window.Controllers || {};\nwindow.namespace(window.Controllers, \"Controllers\");\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Betting-v1/controllers.legacy.js\n// module id = 299\n// module chunks = 5","/*** IMPORTS FROM imports-loader ***/\nvar jQuery = require(\"jquery\");\nvar _ = require(\"underscore\");\nvar legacyReturn = {};\nvar amplify = require(\"amplify\");\nvar cryptojsm5d = require(\"crypto-js/md5\");\nvar cryptojs = { MD5: cryptojsm5d };\nvar numeral = require(\"numeral\");\nvar swipe = require(\"swipe\");\nvar MSG = require(\"../Foundation/Services/MessageBusService\");\nvar LocationDetailsAppender = require(\"../Foundation/LocationDetailsAppender\");\nvar locking = require(\"../Foundation/Lock\");\nvar NAV = require(\"../Foundation/Navigation/Nav\");\nvar CMN = require(\"../Foundation/Common\");\nvar TT = require(\"../Foundation/TabTouch\");\nvar ErrorController = require(\"../Foundation/Error\");\nvar PreferencesService = require(\"../Foundation/Services/Preferences/PreferencesService\");\nvar TupleSpace = require(\"../Foundation/TupleSpace\");\nvar raceReplay = require(\"../Betting-v1/RaceReplay\");\nvar blackbookAddViewBinding = require(\"../Foundation/Components/Blackbook/myblackbook-add-viewbinding\");\nvar blackbookAddViewController = require(\"../Foundation/Components/Blackbook/myblackbook-add-viewcontroller\");\nvar NOTE = require(\"../Foundation/Notification\");\nvar jQueryToDictionary = require(\"jquery-todictionary\");\n\n// NOTE: Now in webpack as a module.  This is only used by map.js.\n// Ideally refactor maps.js to not need this.\n\n/**\n * Possible source: https://searchcode.com/codesearch/view/39114143/\n */\n\n/**\n* Returns an XMLHttp instance to use for asynchronous\n* downloading. This method will never throw an exception, but will\n* return NULL if the browser does not support XmlHttp for any reason.\n* @return {XMLHttpRequest|Null}\n*/\nfunction createXmlHttpRequest() {\n try {\n   if (typeof ActiveXObject != 'undefined') {\n     return new ActiveXObject('Microsoft.XMLHTTP');\n   } else if (window[\"XMLHttpRequest\"]) {\n     return new XMLHttpRequest();\n   }\n } catch (e) {\n   changeStatus(e);\n }\n return null;\n};\n\n/**\n* This functions wraps XMLHttpRequest open/send function.\n* It lets you specify a URL and will call the callback if\n* it gets a status code of 200.\n* @param {String} url The URL to retrieve\n* @param {Function} callback The function to call once retrieved.\n*/\nexport function downloadUrl(url, callback) {\n var status = -1;\n var request = createXmlHttpRequest();\n if (!request) {\n   return false;\n }\n\n request.onreadystatechange = function() {\n   if (request.readyState == 4) {\n     try {\n       status = request.status;\n     } catch (e) {\n       // Usually indicates request timed out in FF.\n     }\n     if ((status == 200) || (status == 0)) {\n       callback(request.responseText, request.status);\n       request.onreadystatechange = function() {};\n     }\n   }\n }\n request.open('GET', url, true);\n try {\n   request.send(null);\n } catch (e) {\n   changeStatus(e);\n }\n};\n\n/**\n * Parses the given XML string and returns the parsed document in a\n * DOM data structure. This function will return an empty DOM node if\n * XML parsing is not supported in this browser.\n * @param {string} str XML string.\n * @return {Element|Document} DOM.\n */\nexport function xmlParse(str) {\n  if (typeof ActiveXObject != 'undefined' && typeof GetObject != 'undefined') {\n    var doc = new ActiveXObject('Microsoft.XMLDOM');\n    doc.loadXML(str);\n    return doc;\n  }\n\n  if (typeof DOMParser != 'undefined') {\n    return (new DOMParser()).parseFromString(str, 'text/xml');\n  }\n\n  return createElement('div', null);\n}\n\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Betting-v1/downloadXml.legacy.js\n// module id = 300\n// module chunks = 5","/*** IMPORTS FROM imports-loader ***/\nvar jQuery = require(\"jquery\");\nvar _ = require(\"underscore\");\nvar legacyReturn = {};\nvar amplify = require(\"amplify\");\nvar cryptojsm5d = require(\"crypto-js/md5\");\nvar cryptojs = { MD5: cryptojsm5d };\nvar numeral = require(\"numeral\");\nvar swipe = require(\"swipe\");\nvar MSG = require(\"../Foundation/Services/MessageBusService\");\nvar LocationDetailsAppender = require(\"../Foundation/LocationDetailsAppender\");\nvar locking = require(\"../Foundation/Lock\");\nvar NAV = require(\"../Foundation/Navigation/Nav\");\nvar CMN = require(\"../Foundation/Common\");\nvar TT = require(\"../Foundation/TabTouch\");\nvar ErrorController = require(\"../Foundation/Error\");\nvar PreferencesService = require(\"../Foundation/Services/Preferences/PreferencesService\");\nvar TupleSpace = require(\"../Foundation/TupleSpace\");\nvar raceReplay = require(\"../Betting-v1/RaceReplay\");\nvar blackbookAddViewBinding = require(\"../Foundation/Components/Blackbook/myblackbook-add-viewbinding\");\nvar blackbookAddViewController = require(\"../Foundation/Components/Blackbook/myblackbook-add-viewcontroller\");\nvar NOTE = require(\"../Foundation/Notification\");\nvar jQueryToDictionary = require(\"jquery-todictionary\");\n\nlegacyReturn.FAVNUM = window.FAVNUM = (function() {\n    var costArray = [0.50, 4.00, 18.00, 60.00, 165.00, 396.00, 858.00, 1716.00, 3217.00, 5720.00];\n    var selected = 'selected';\n    var currentPage;\n\n    var poolButtons;\n\n    var continueButton;\n    var navButtons;\n    var easyBetNavButton, potLuckNavButton;\n    var confirmationPanel;\n    var selectionsPanel;\n\n    var bodyData;\n    var showAllPoolsButton;\n    var refreshButton;\n\n\n    function initLocalVariables() {\n        poolButtons = jQuery('div.pick-dates button.poolButton').click(poolClicked);\n\n        continueButton = jQuery('#continueButton').click(continueClick);\n        navButtons = jQuery('.nav-fav-nos li');\n        easyBetNavButton = jQuery('#easyBetNavButton');\n        potLuckNavButton = jQuery('#potLuckNavButton');\n\n        confirmationPanel = jQuery('#confirmationPanel').hide();\n        selectionsPanel = jQuery('#selections');\n        bodyData = jQuery('body').data();\n        showAllPoolsButton = jQuery('#showAllPools');\n\n        refreshButton = jQuery('.refresh-button');\n    }\n\n    function initFavNum(url, backText, isRefresh) {\n        Number.prototype.formatMoney = function () {\n            var n = this,\n            c = 2, d = \".\", t = \",\",\n            s = n < 0 ? \"-\" : \"\",\n            i = parseInt(n = Math.abs(+n || 0).toFixed(c)) + \"\",\n            j = (j = i.length) > 3 ? j % 3 : 0;\n            return \"$\" + s + (j ? i.substr(0, j) + t : \"\") + i.substr(j).replace(/(\\d{3})(?=\\d)/g, \"$1\" + t) + (c ? d + Math.abs(n - i).toFixed(c).slice(2) : \"\");\n        };\n\n        TT.initCommon(url, backText);\n        NumbersResults.init(easyBetPage, potLuckPage);\n        easyBetPage.initEasyBetPage();\n        potLuckPage.initPotLuckPage();\n\n        initLocalVariables();\n\n        currentPage = easyBetPage;\n        hookUpConfirmBet();\n        showAllPoolsButton.click(showAllPoolsClicked);\n        easyBetNavButton.click(function (e) {\n            e.preventDefault();\n            clearCachedValues();\n            easyBetPage.showPage();\n            potLuckPage.hidePage();\n            continueButton.show();\n            NumbersResults.hidePage();\n        });\n\n        potLuckNavButton.click(function (e) {\n            e.preventDefault();\n            clearCachedValues();\n            potLuckPage.showPage();\n            easyBetPage.hidePage();\n            continueButton.show();\n            NumbersResults.hidePage();\n        });\n\n        jQuery('#confirmCancelButton').click(confirmPage.cancelConfirmClicked);\n\n        if (isRefresh === \"true\") {\n            refreshSelections();\n        } else {\n            clearSelections();\n        }\n\n        jQuery('#content').show();\n    }\n\n    function hookUpConfirmBet() {\n        locationDetailsAppender = new LocationDetailsAppender();\n        jQuery(\"a#confirmBetButton\").click(function (e) {\n            e.preventDefault();\n            if (jQuery(this).is('.disabled') === false) {\n                var features = '';\n\n                for (var i = 0; i < bodyData.poolDateSelections.length; i++) {\n                    features += '&Pools[' + i + '].PoolNumber=' + bodyData.poolNumberSelections[i];\n                    features += '&Pools[' + i + '].PoolDate=' + bodyData.poolDateSelections[i];\n                }\n\n                NAV.ajaxPost(jQuery(this).attr('href'),\n                                locationDetailsAppender.addToUrlEncodedData(\n                                \"Game1Selections=\" + bodyData.game1Selections.join(',') +\n                                \"&Game2Selections=\" + bodyData.game2Selections.join(',') +\n                                    features +\n                                \"&PotLuckNumberSelection=\" + bodyData.potLuckNumberSelection +\n                                \"&NumberOfBets=\" + bodyData.potLuckNumberOfBets +\n                                \"&BetIdentifier=\" + jQuery(\"#BetIdentifier\").val()),\n                                function (data) {\n                                    jQuery('#content').html(data);\n                                    if (jQuery('#transaction-details').length > 0) {\n                                        NAV.hideBack();\n                                        var singleTicket = jQuery('#transaction-details span.title:contains(\"Ticket\")').parent().find('span.data').html();\n                                        var tickets = '';\n                                        if (singleTicket) {\n                                            tickets = [{ ticketNumber: singleTicket }];\n                                        } else {\n                                            tickets = jQuery(\"#transaction-details h4:contains('Ticket')\").map(function () { return { ticketNumber: jQuery(this).html().replace('Ticket ', '') }; }).get();\n                                        }\n                                        var totalCost = jQuery('#transaction-details span.title:contains(\"Total Cost\")').parent().find('span.data').html();\n                                        MSG.publish('bet.favnumbers.receipt', { tickets: tickets, totalCost: totalCost });\n                                        \n                                    }\n                                },\n                                {\n                                    control: jQuery(this)\n                                }\n                            );\n            }\n        });\n    }\n\n    function clearSelections() {\n        clearCachedValues();\n\n        refreshSelections();\n    }\n\n    function clearCachedValues() {\n        bodyData.game1Selections = new Array();\n        bodyData.game2Selections = new Array();\n        bodyData.selectedGame = 1;\n        bodyData.potLuckNumberOfBets = 1;\n        bodyData.poolNumberSelections = new Array();\n        bodyData.poolDateSelections = new Array();\n        bodyData.poolNumberSelections.push(poolButtons.first().val());\n        bodyData.poolDateSelections.push(poolButtons.first().siblings('.poolDateTime').val());\n        bodyData.showAllPools = false;\n        bodyData.navSelected = (jQuery('#defaultToPotLuckPage').val() === \"True\") ? 2 : 1;\n        bodyData.potLuckNumberSelection = null;\n        clearGui();\n    }\n\n    function clearGui() {\n        easyBetPage.setSelectedGame(1);\n        easyBetPage.setNumberSelections(new Array());\n        potLuckPage.setNumberOfBets(1);\n        potLuckPage.setNumberSelection();\n        poolButtons.removeClass(selected);\n        poolButtons.first().addClass(selected);\n        hidePools();\n    }\n\n    function refreshSelections() {\n        easyBetPage.setSelectedGame(bodyData.selectedGame);\n\n        var selections = (bodyData.selectedGame == 1) ? bodyData.game1Selections : bodyData.game2Selections;\n        easyBetPage.setNumberSelections(selections);\n\n        if (bodyData.navSelected == 1) {\n            easyBetPage.showPage();\n            potLuckPage.hidePage();\n        } else if (bodyData.navSelected == 2) {\n            potLuckPage.showPage();\n            easyBetPage.hidePage();\n        } else {\n            NumbersResults.showPage();\n        }\n\n        potLuckPage.refreshButtons();\n\n        poolButtons.each(function () {\n            jQuery(this).toggleClass(selected, (jQuery.inArray(jQuery(this).val(), bodyData.poolNumberSelections) != -1));\n        });\n\n        // Only one pool selected and it is closed during a refresh.\n        if (poolButtons.filter('.selected').length == 0) {\n            poolButtons.first().addClass(selected);\n            bodyData.poolNumberSelections = [poolButtons.first().val()];\n            bodyData.poolDateSelections.push(poolButtons.first().siblings('.poolDateTime').val());\n        }\n\n        bodyData.showAllPools ? showAllPools() : hidePools();\n\n        setDateForFirstSelectedPoolDetails();\n        easyBetPage.setBetSummary();\n        setBetSummaryForDatesSelected(bodyData.poolNumberSelections.length);\n        potLuckPage.setBetSummary();\n    }\n\n    var confirmPage = {\n        cancelConfirmClicked:\n            function cancelConfirmClicked(e) {\n                e.preventDefault();\n                selectionsPanel.show();\n                refreshButton.show();\n                confirmationPanel.hide();\n                navButtons.show();\n                clearSelections();\n            }\n    };\n\n    function continueClick(e) {\n        e.preventDefault();\n        NAV.overrideBack(function (url,ev) {\n            NAV.resetBack('Home');\n\n            confirmationPanel.hide();\n            selectionsPanel.show();\n            refreshButton.show();\n            navButtons.show();\n            return false;\n        }, 'Back');\n\n        if (!jQuery(this).hasClass('disabled')) {\n            selectionsPanel.hide();\n            refreshButton.hide();\n            confirmationPanel.show();\n            navButtons.hide();\n            jQuery('#confirmBetType').text(easyBetPage.isVisible() ? 'Easy Bet' : 'Pot Luck');\n            currentPage.setConfirmPageFields();\n            MSG.publish('bet.favnumbers.selected');\n            MSG.publish('bet.favnumbers.review');\n        }\n    }\n\n    function buildDatesList() {\n        var dates = '';\n        poolButtons.filter(\".selected\").find('span.date').sort(function (a, b) {\n            if (new Date(jQuery(a).text()).getTime() > new Date(jQuery(b).text()).getTime()) {\n                return 1;\n            }\n            else {\n                return -1;\n            }\n        }).each(function () {\n            dates += jQuery(this).text() + \"<br/>\";\n        });\n\n        return dates;\n    }\n\n    function showAllPoolsClicked(e) {\n        e.preventDefault();\n\n        showAllPools();\n    }\n\n    function showAllPools() {\n        poolButtons.removeClass('no-display');\n        showAllPoolsButton.hide();\n        bodyData.showAllPools = true;\n    }\n\n    function hidePools() {\n        poolButtons.filter(':not(.jackpot-height)').addClass('no-display');\n        showAllPoolsButton.show();\n        bodyData.showAllPools = false;\n    }\n\n    function setBetSummaryForDatesSelected(numberOfDatesSelected) {\n        jQuery('#numberOfDates').text('x ' + numberOfDatesSelected);\n        jQuery('#potLuckNumberOfDates').text('x ' + numberOfDatesSelected);\n        easyBetPage.setBetSummaryBetCost();\n        potLuckPage.setBetSummaryBetCost();\n    }\n\n    function poolClicked(e) {\n        e.preventDefault();\n        var poolElement = jQuery(this);\n        setPoolSelection(poolElement);\n\n        setDateForFirstSelectedPoolDetails();\n        var selectedPools = poolButtons.filter('.selected');\n\n        bodyData.poolNumberSelections = new Array();\n        bodyData.poolDateSelections = new Array();\n        selectedPools.each(function () {\n            bodyData.poolNumberSelections.push(jQuery(this).val());\n            bodyData.poolDateSelections.push(jQuery(this).siblings('.poolDateTime').val());\n        });\n\n        setBetSummaryForDatesSelected(selectedPools.length);\n    }\n\n    function setPoolSelection(poolElement) {\n        poolElement.toggleClass(selected);\n\n        if (poolButtons.filter(\".selected\").length < 1) {\n            poolElement.addClass(selected);\n        }\n    }\n\n    function setDateForFirstSelectedPoolDetails() {\n        var date;\n        var closeDateDisplay;\n        var updatedDateTimeDisplay;\n\n        poolButtons.filter('.selected')\n            .each(function () {\n                var poolDate = new Date(jQuery(this).siblings('.poolCloseDateTime').val());\n\n                if (!date || poolDate < date) {\n                    date = poolDate;\n                    closeDateDisplay = jQuery(this).siblings('.poolCloseDateTimeDisplay').val();\n                    updatedDateTimeDisplay = jQuery(this).siblings('.updateAtDateTimeDisplay').val();\n                }\n            });\n\n        jQuery('#poolCloseDatePlaceHolder').text(closeDateDisplay);\n        jQuery('#poolUpdatedDatePlaceHolder').text(updatedDateTimeDisplay);\n    }\n\n    function setContinueButton() {\n        if (currentPage.isBetValid()) {\n            continueButton.removeAttr('disabled');\n            continueButton.removeClass('disabled');\n        } else {\n            continueButton.prop('disabled', true);\n            continueButton.addClass('disabled');\n        }\n    }\n\n\n    var potLuckPage = (function () {\n\n        var potLuckNumberButtons;\n        var potLuckNumberOfBetsButtons;\n        var potLuckPanels;\n\n        function initPotLuckPage() {\n            potLuckNumberButtons = jQuery('#potLuckSelectNumbersPanel button').click(potLuckNumberClicked);\n            potLuckNumberOfBetsButtons = jQuery('#potLuckNumberOfBetsPanel button').click(potLuckNumberOfBetsButtonClick);\n            potLuckPanels = jQuery('#potLuckSelectNumbersPanel,#potLuckBetSummaryPanel,#potLuckNumberOfBetsPanel,#confirmPotLuckSelections,#confirmPotLuckInvesment').hide();\n        }\n\n        function showPage() {\n            bodyData.navSelected = 2;\n            currentPage = potLuckPage;\n            potLuckPanels.show();\n            setContinueButton();\n            navButtons.removeClass('ui-state-active');\n            potLuckNavButton.parent().addClass('ui-state-active');\n        }\n\n        function hidePage() {\n            potLuckPanels.hide();\n            jQuery('#poolSelections').show();\n        }\n\n        function isBetValid() {\n            return potLuckPanels.is(':visible') &&\n                bodyData.potLuckNumberSelection;\n        }\n\n        function potLuckNumberClicked(e) {\n            e.preventDefault();\n\n            potLuckNumberButtons.removeClass(selected);\n            jQuery(this).addClass(selected);\n            bodyData.potLuckNumberSelection = jQuery(this).val();\n            setContinueButton();\n            setBetSummaryForPotLuckNumber();\n            setBetSummaryForPotLuckBetCost();\n        }\n\n        function potLuckNumberOfBetsButtonClick(e) {\n            e.preventDefault();\n            potLuckNumberOfBetsButtons.removeClass(selected);\n            jQuery(this).addClass(selected);\n            bodyData.potLuckNumberOfBets = jQuery(this).val();\n            setBetSummaryForNumberOfBets(bodyData.potLuckNumberOfBets);\n            setBetSummaryForPotLuckBetCost();\n        }\n\n        function setConfirmPageFields() {\n            var betCost = costArray[bodyData.potLuckNumberSelection - 7];\n            var temp = jQuery('#confirmPotLuckNumber');\n            temp.siblings(\".title\").html(bodyData.potLuckNumberSelection + ' Numbers');\n            temp.text(betCost.formatMoney());\n            jQuery('#confirmDatesPotLuckBetConfirm').html(buildDatesList());\n            jQuery('#confirmNumBetsPotLuckBetConfirm').text(bodyData.potLuckNumberOfBets);\n            jQuery('#confirmPotLuckBetCost').text(betCost.formatMoney());\n            var numberOfBets = bodyData.potLuckNumberOfBets * bodyData.poolNumberSelections.length;\n            jQuery('#confirmPotLuckTotalBets').text(numberOfBets);\n            jQuery('#confirmPotLuckTotalCost,#confirmTotalBetCost').text((numberOfBets * betCost).formatMoney());\n        }\n\n        function setBetSummaryForPotLuckNumber() {\n            jQuery('#potLuckNumbersTitle').text(((bodyData.potLuckNumberSelection) ? bodyData.potLuckNumberSelection : 0) + ' Numbers');\n            jQuery('#potLuckNumberSummary').text((bodyData.potLuckNumberSelection ? costArray[bodyData.potLuckNumberSelection - 7] : 0).formatMoney());\n        }\n\n        function setBetSummaryForNumberOfBets(numberOfBets) {\n            jQuery('#potLuckNumberOfBets').text('x ' + numberOfBets);\n        }\n\n        function setBetSummaryForPotLuckBetCost() {\n            //jQuery('#potLuckBetCost').text('$' + (bodyData.potLuckNumberSelection ? (costArray[bodyData.potLuckNumberSelection - 7] * bodyData.potLuckNumberOfBets * bodyData.poolNumberSelections.length) : 0).toFixed(2));\n            jQuery('#potLuckBetCost').text((bodyData.potLuckNumberSelection ? (costArray[bodyData.potLuckNumberSelection - 7] * bodyData.potLuckNumberOfBets * bodyData.poolNumberSelections.length) : 0).formatMoney());\n        }\n\n        function setBetSummary() {\n            setBetSummaryForPotLuckNumber();\n            setBetSummaryForNumberOfBets(bodyData.potLuckNumberOfBets);\n            setBetSummaryForPotLuckBetCost();\n        }\n\n        function setNumberOfBets(numberOfBets) {\n            jQuery('#potLuckNumberOfBetsPanel button').removeClass(selected);\n            jQuery('#numberOfBetsButton' + numberOfBets).addClass(selected);\n        }\n\n        function setNumberSelection(numberSelection) {\n            jQuery('#potLuckList button').removeClass('selected');\n\n            if (numberSelection) {\n                jQuery('#potLuckNumberButton' + numberSelection).addClass('selected');\n            }\n        }\n\n        function refreshButtons() {\n            potLuckNumberButtons\n            .removeClass(selected)\n            .filter('#potLuckNumberButton' + bodyData.potLuckNumberSelection).addClass(selected);\n            potLuckNumberOfBetsButtons\n                .removeClass(selected)\n                .filter('#numberOfBetsButton' + bodyData.potLuckNumberOfBets).addClass(selected);\n        }\n\n        return {\n            showPage: showPage,\n            hidePage: hidePage,\n            isBetValid: isBetValid,\n            initPotLuckPage: initPotLuckPage,\n            refreshButtons: refreshButtons,\n            setBetSummary: setBetSummary,\n            setBetSummaryBetCost: setBetSummaryForPotLuckBetCost,\n            setConfirmPageFields: setConfirmPageFields,\n            setNumberSelection: setNumberSelection,\n            setNumberOfBets: setNumberOfBets\n        };\n    })();\n\n    var easyBetPage = (function () {\n        var game1Button;\n        var easyBetPanels;\n        var easyBetNumberButtons;\n        var gameButtons;\n        var confirmSelectionGame1, confirmSelectionGame2;\n        var confirmGame1InvestmentDetails, confirmGame2InvestmentDetails;\n\n        function initEasyBetPage() {\n            game1Button = jQuery('#game1button');\n            easyBetPanels = jQuery('#easyBetSelectNumbersPanel,#easyBetSummaryPanel,#confirmEasyBetSelections,#confirmEasyBetInvesment');\n            easyBetNumberButtons = jQuery('#easyBetNumbers button').on(\"click\", easyBetNumberClick);\n            gameButtons = jQuery('div.select-games button').click(gameSelected);\n            confirmSelectionGame1 = jQuery('#confirmEasyBetGame1Sel');\n            confirmSelectionGame2 = jQuery('#confirmEasyBetGame2Sel');\n            confirmGame1InvestmentDetails = jQuery('#confirmEasyBetGame1Cost');\n            confirmGame2InvestmentDetails = jQuery('#confirmEasyBetGame2Cost');\n        }\n\n        function easyBetNumberClick(e) {\n            e.preventDefault();\n            jQuery(this).toggleClass(selected);\n            var selectedButtons = easyBetNumberButtons.filter('.selected');\n\n            var temp = new Array();\n            selectedButtons.each(function () {\n                temp.push(jQuery(this).val());\n            });\n\n            var selectedGame;\n\n            if (game1Button.hasClass(selected)) {\n                selectedGame = 1;\n                bodyData.game1Selections = temp;\n            } else {\n                selectedGame = 2;\n                bodyData.game2Selections = temp;\n            }\n\n            var numbersSelected = Math.min(selectedButtons.length, 16);\n            setBetSummaryForGame(selectedGame, numbersSelected);\n            setContinueButton();\n        }\n\n        function gameSelected(e) {\n            e.preventDefault();\n            if (!jQuery(this).hasClass(selected)) {\n                clearGames();\n                jQuery(this).addClass(selected);\n\n                easyBetNumberButtons.removeClass(selected);\n                var selectedNumbers = (jQuery(this).val() == 1) ? bodyData.game1Selections : bodyData.game2Selections;\n\n                jQuery(selectedNumbers).each(function () {\n                    jQuery('#numberButton' + this).addClass(selected);\n                });\n            }\n\n            bodyData.selectedGame = jQuery(this).val();\n        }\n\n        function showPage() {\n            bodyData.navSelected = 1;\n            currentPage = easyBetPage;\n            easyBetPanels.show();\n            setContinueButton();\n            navButtons.removeClass('ui-state-active');\n            easyBetNavButton.parent().addClass('ui-state-active');\n        }\n\n        function hidePage() {\n            easyBetPanels.hide();\n            jQuery('#poolSelections').show();\n        }\n\n        function setConfirmSelectionForGame(selectionElement, investmentDetailElement, cost, selections) {\n            if (selections.length > 0) {\n                selectionElement.html(selections.join('.&#8203;'));\n\n                investmentDetailElement.parent().removeClass('no-display');\n                selectionElement.parent().removeClass('no-display');\n                investmentDetailElement.text(cost.formatMoney());\n            } else {\n                investmentDetailElement.parent().addClass('no-display');\n                selectionElement.parent().addClass('no-display');\n            }\n        }\n\n        function setConfirmPageFields() {\n            var game1Cost = bodyData.game1Selections.length == 0 ? 0 : costArray[bodyData.game1Selections.length - 7];\n            var game2Cost = bodyData.game2Selections.length == 0 ? 0 : costArray[bodyData.game2Selections.length - 7];\n            setConfirmSelectionForGame(confirmSelectionGame1, confirmGame1InvestmentDetails, game1Cost, bodyData.game1Selections);\n            setConfirmSelectionForGame(confirmSelectionGame2, confirmGame2InvestmentDetails, game2Cost, bodyData.game2Selections);\n\n            jQuery('#confirmEasyBetDates').html(buildDatesList());\n            jQuery('#confirmEasyBetNoBets').text('x ' + bodyData.poolNumberSelections.length);\n            jQuery('#confirmationEasyBetTotalCost,#confirmTotalBetCost').text(((game1Cost + game2Cost) * bodyData.poolNumberSelections.length).formatMoney());\n\n            resetAltClass(jQuery('#confirmEasyBetSelections'));\n            resetAltClass(jQuery('#confirmEasyBetInvesment'));\n        }\n\n        function resetAltClass(ul) {\n            var visibleItems = ul.children('li:not(.no-display)');\n            visibleItems.removeClass('alt');\n            visibleItems.filter(':even').addClass('alt');\n        }\n\n        function isBetValid() {\n            return easyBetPage.isVisible() &&\n                (isGameSelectionValid(bodyData.game1Selections.length) || bodyData.game1Selections.length == 0) &&\n                (isGameSelectionValid(bodyData.game2Selections.length) || bodyData.game2Selections.length == 0) &&\n                (isGameSelectionValid(bodyData.game1Selections.length) || isGameSelectionValid(bodyData.game2Selections.length));\n        }\n\n        function isGameSelectionValid(numberOfSelections) {\n            return (numberOfSelections >= 7 && numberOfSelections <= 16);\n        }\n\n        function setBetSummaryForGame(selectedGame, numberOfNumberSelections) {\n            jQuery('#numbersTitleGame' + selectedGame).text('Game ' + selectedGame + ' - ' + numberOfNumberSelections + ' numbers');\n            var prefix = '';\n            if (selectedGame == 2) {\n                prefix = '+ ';\n            }\n            var cost = 0;\n            if (numberOfNumberSelections >= 7) {\n                cost = costArray[numberOfNumberSelections - 7];\n            }\n            jQuery('#costGame' + selectedGame).text(prefix + cost.formatMoney());\n\n            setBetSummaryBetCost();\n        }\n\n        function setBetSummaryBetCost() {\n            var numberOfSelGame1 = bodyData.game1Selections.length;\n            var game1Cost = 0, game2Cost = 0;\n            if (numberOfSelGame1 >= 7) {\n                game1Cost = costArray[Math.min(numberOfSelGame1, 16) - 7];\n            }\n\n            var numberOfSelGame2 = bodyData.game2Selections.length;\n            if (numberOfSelGame2 >= 7) {\n                game2Cost = costArray[Math.min(numberOfSelGame2, 16) - 7];\n            }\n\n            jQuery('#betCost').text(((game1Cost + game2Cost) * bodyData.poolNumberSelections.length).formatMoney());\n        }\n\n        function setBetSummary() {\n            setBetSummaryForGame(1, bodyData.game1Selections.length);\n            setBetSummaryForGame(2, bodyData.game2Selections.length);\n            setBetSummaryBetCost();\n        }\n\n        function clearGames() {\n            gameButtons.removeClass(selected);\n        }\n\n        function setSelectedGame(selectedGame) {\n            clearGames();\n            gameButtons.filter('#game' + selectedGame + 'button').addClass(selected);\n        }\n\n        function isVisible() {\n            return easyBetPanels.is(\":visible\");\n        }\n\n        function setNumberSelections(selections) {\n            easyBetNumberButtons.each(function () {\n                jQuery(this).toggleClass(selected, (jQuery.inArray(jQuery(this).val(), selections) != -1));\n            });\n        }\n\n        return {\n            setNumberSelections: setNumberSelections,\n            isVisible: isVisible,\n            showPage: showPage,\n            hidePage: hidePage,\n            setConfirmPageFields: setConfirmPageFields,\n            isBetValid: isBetValid,\n            setBetSummary: setBetSummary,\n            setBetSummaryBetCost: setBetSummaryBetCost,\n            initEasyBetPage: initEasyBetPage,\n            setSelectedGame: setSelectedGame\n        };\n    })();\n\n    function handleBetError(e) {\n        e.preventDefault();\n        NAV.hideErrorPopup();\n        confirmationPanel.hide();\n        selectionsPanel.show();\n        refreshButton.show();\n        navButtons.show();\n    }\n\n    return {\n        initFavNum: initFavNum,\n        easyBetPage: easyBetPage,\n        clearCachedValues: clearCachedValues,\n        handleBetError: handleBetError\n    };\n})();\n\n\nwindow.NumbersResults = (function () {\n\n    var easyBetPage, potLuckPage, resultsNavButton;\n    var panel;\n    var page, bodyData;\n    function init(eBetPage, plPage) {\n        bodyData = jQuery('body').data();\n        easyBetPage = eBetPage;\n        potLuckPage = plPage;\n        resultsNavButton = jQuery('#noResultsNavButton').click(navButtonClick);\n        jQuery('#prevPool').click(prevButtonClick);\n        jQuery('#nextPool').click(nextButtonClick);\n        panel = jQuery('#numbersAndResultsPanel').hide();\n\n        page = {\n            poolDateElement: jQuery('#poolDateResults'),\n            currentPoolDate:jQuery('#currentPoolDate'),\n            poolTotal: jQuery('#poolInfoResults').find('.jsPoolTotal'),\n            poolCloseDate: jQuery('#poolInfoResults').find('.jsPoolClose'),\n            poolCloseDateTitle: jQuery('#poolInfoResults').find('.jsPoolClosesTitle'),\n            poolJackpotIcon: jQuery('#poolInfoResults').find('.jackpot'),\n            poolJackpot: jQuery('#poolInfoResults').find('.jsJackpotAmount'),\n            nextPoolButton: jQuery('#nextPool'),\n            prevPoolButton: jQuery('#prevPool'),\n            notAllocated: jQuery('#notAllocated'),\n            resultsLegend: jQuery('#results-legend'),\n            carryover: jQuery('#carryover'),\n            winningEntries: jQuery('#winningEntries'),\n            dividendPayable: jQuery('#dividendPayable')\n        };\n\n        jQuery('#favnumberResultList').on(\"click\", \"button\", function (e) {\n            e.preventDefault();\n        });\n    }\n\n    function nextButtonClick(e) {\n        e.preventDefault();\n        if (!jQuery(this).hasClass('disabled')) {\n            getPool(jQuery(this).attr('href'));\n        }\n    }\n\n    function prevButtonClick(e) {\n        e.preventDefault();\n        if (!jQuery(this).hasClass('disabled')) {\n            getPool(jQuery(this).attr('href'));\n        }\n    }\n\n    function getPool(url) {\n        NAV.ajaxPost(url,\n            \"fromDate=\" + page.currentPoolDate.val(),\n            function (data) { loadPool(data); },\n            {\n                control: jQuery(this)\n            }\n        );\n    }\n\n    function navButtonClick(e) {\n        e.preventDefault();\n        showPage();\n    }\n\n    function showPage() {\n        NAV.ajaxPost(resultsNavButton.attr('href'),\n                                null,\n                                function (data) {\n                                    loadPool(data);\n                                    CMN.setDisableState(resultsNavButton, true);\n                                    panel.show();\n                                    easyBetPage.hidePage();\n                                    potLuckPage.hidePage();\n                                    jQuery('#poolSelections').hide();\n                                    FAVNUM.clearCachedValues();\n                                    bodyData.navSelected = 3;\n                                    jQuery('#continueButton').hide();\n                                    jQuery('#easyBetNavButton').parent().removeClass('ui-state-active');\n                                    jQuery('#potLuckNavButton').parent().removeClass('ui-state-active');\n                                    resultsNavButton.parent().addClass('ui-state-active');\n                                },\n                                {\n                                    control: resultsNavButton\n                                }\n                            );\n    }\n\n    function loadPool(pool) {\n        page.nextPoolButton.toggleClass('disabled', !pool.isNextAvailable);\n        page.prevPoolButton.toggleClass('disabled', !pool.isPreviousAvailable);\n        page.poolDateElement.html(pool.poolDate);\n        page.currentPoolDate.val(pool.poolDate);\n        page.poolTotal.html(pool.poolTotal);\n        page.poolCloseDate.html(pool.poolResultDispalyDate);\n        page.poolCloseDateTitle.html(pool.poolResultDisplayDateTitle);\n        page.poolJackpot.html(pool.jackpotAmount);\n        if (pool.jackpotAmount && pool.jackpotAmount.length > 0) {\n            page.poolJackpotIcon.removeClass('no-display');\n        } else {\n            page.poolJackpotIcon.addClass('no-display');\n        }\n\n        var legHtml = '';\n        if (pool.legs) {\n            for (var j = 0; j < 30; j++) {\n                var leg = pool.legs[j];\n                var favNum = j + 1;\n                var subText = leg.isSub ? \" (SUB)\" : \"\";\n                var cssClass = leg.isLive ? '' : leg.isWinner ? 'result-won' : 'result-lost';\n                legHtml += \"<li><button id='resultsButton\";\n                legHtml += favNum + \"' class='disabled \" + cssClass + \"' value='\" + favNum + \"'>\";\n                legHtml += favNum + \"<span class='code'>\" + leg.race + \"<br/> \" + subText + \"</span></button></li>\";\n            }\n\n            page.notAllocated.addClass('no-display');\n            page.resultsLegend.removeClass('no-display');\n        } else {\n            page.notAllocated.removeClass('no-display');\n            page.resultsLegend.addClass('no-display');\n        }\n\n        jQuery('#favnumberResultList').html(legHtml);\n\n        if (pool.dividendPayable && pool.dividendPayable.length > 0 && pool.numbersRequired) {\n            jQuery('#dividendPayable').html(pool.numbersRequired + \" numbers required for a dividend of \" + pool.dividendPayable + '.');\n\n            if (pool.winningEntries == 0) {\n                page.winningEntries.html(\"There are no winning entries.\");\n            } else if (pool.winningEntries == 1) {\n                page.winningEntries.html(\"There is 1 winning entry.\");\n            } else {\n                page.winningEntries.html('There are ' + pool.winningEntries + ' winning entries.');\n            }\n\n            page.dividendPayable.removeClass('no-display');\n            page.winningEntries.removeClass('no-display');\n        } else {\n            page.dividendPayable.addClass('no-display');\n            page.winningEntries.addClass('no-display');\n        }\n\n        page.carryover.toggleClass('no-display', !pool.carryover);\n\n        if (pool.carryover) {\n            page.carryover.html('There is a carryover of ' + pool.carryover + '.');\n        }\n    }\n\n    function hidePage() {\n        panel.hide();\n    }\n\n    return {\n        init: init,\n        loadPool: loadPool,\n        hidePage: hidePage,\n        showPage: showPage\n    };\n})();\n\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Betting-v1/favouritenumbers.legacy.js\n// module id = 301\n// module chunks = 5","/*** IMPORTS FROM imports-loader ***/\nvar jQuery = require(\"jquery\");\nvar _ = require(\"underscore\");\nvar legacyReturn = {};\nvar amplify = require(\"amplify\");\nvar cryptojsm5d = require(\"crypto-js/md5\");\nvar cryptojs = { MD5: cryptojsm5d };\nvar numeral = require(\"numeral\");\nvar swipe = require(\"swipe\");\nvar MSG = require(\"../Foundation/Services/MessageBusService\");\nvar LocationDetailsAppender = require(\"../Foundation/LocationDetailsAppender\");\nvar locking = require(\"../Foundation/Lock\");\nvar NAV = require(\"../Foundation/Navigation/Nav\");\nvar CMN = require(\"../Foundation/Common\");\nvar TT = require(\"../Foundation/TabTouch\");\nvar ErrorController = require(\"../Foundation/Error\");\nvar PreferencesService = require(\"../Foundation/Services/Preferences/PreferencesService\");\nvar TupleSpace = require(\"../Foundation/TupleSpace\");\nvar raceReplay = require(\"../Betting-v1/RaceReplay\");\nvar blackbookAddViewBinding = require(\"../Foundation/Components/Blackbook/myblackbook-add-viewbinding\");\nvar blackbookAddViewController = require(\"../Foundation/Components/Blackbook/myblackbook-add-viewcontroller\");\nvar NOTE = require(\"../Foundation/Notification\");\nvar jQueryToDictionary = require(\"jquery-todictionary\");\n\nwindow.rwwaFeatureDetection = window.rwwaFeatureDetection || {};\n\nwindow.rwwaFeatureDetection.Service = new function() {\n    var self = this;\n\n    self.isCookiesEnabled = function() {\n        // Quick test if browser has cookieEnabled host property\n        if (navigator.cookieEnabled) return true;\n        // Create cookie\n        document.cookie = \"cookietest=1\";\n        var ret = document.cookie.indexOf(\"cookietest=\") !== -1;\n        // Delete cookie\n        document.cookie = \"cookietest=1; expires=Thu, 01-Jan-1970 00:00:01 GMT\";\n        return ret;\n    };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Betting-v1/feature-detection-service.legacy.js\n// module id = 302\n// module chunks = 5","/*** IMPORTS FROM imports-loader ***/\nvar jQuery = require(\"jquery\");\nvar _ = require(\"underscore\");\nvar legacyReturn = {};\nvar amplify = require(\"amplify\");\nvar cryptojsm5d = require(\"crypto-js/md5\");\nvar cryptojs = { MD5: cryptojsm5d };\nvar numeral = require(\"numeral\");\nvar swipe = require(\"swipe\");\nvar MSG = require(\"../Foundation/Services/MessageBusService\");\nvar LocationDetailsAppender = require(\"../Foundation/LocationDetailsAppender\");\nvar locking = require(\"../Foundation/Lock\");\nvar NAV = require(\"../Foundation/Navigation/Nav\");\nvar CMN = require(\"../Foundation/Common\");\nvar TT = require(\"../Foundation/TabTouch\");\nvar ErrorController = require(\"../Foundation/Error\");\nvar PreferencesService = require(\"../Foundation/Services/Preferences/PreferencesService\");\nvar TupleSpace = require(\"../Foundation/TupleSpace\");\nvar raceReplay = require(\"../Betting-v1/RaceReplay\");\nvar blackbookAddViewBinding = require(\"../Foundation/Components/Blackbook/myblackbook-add-viewbinding\");\nvar blackbookAddViewController = require(\"../Foundation/Components/Blackbook/myblackbook-add-viewcontroller\");\nvar NOTE = require(\"../Foundation/Notification\");\nvar jQueryToDictionary = require(\"jquery-todictionary\");\n\nlegacyReturn.FlexiService = window.FlexiService = (function() {\n    var //\n        truncate = function (number) {\n            //The toFixed is to handle floating point issues \n            // e.g. 0.29 * 100 = 28.999999 in javascript, so we need to round it off before truncating it.\n            return Math.floor((number * 100).toFixed(3)) / 100;\n        },\n        calculate = function (combinations, investment) {\n            if (combinations === 0 || investment === 0) {\n                return 0;\n            }\n            return truncate((investment * 100.0) / combinations);\n        };\n    \n        return {\n            calculate: calculate\n        };\n})();\n\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Betting-v1/flexiservice.legacy.js\n// module id = 303\n// module chunks = 5","/*** IMPORTS FROM imports-loader ***/\nvar jQuery = require(\"jquery\");\nvar _ = require(\"underscore\");\nvar legacyReturn = {};\nvar amplify = require(\"amplify\");\nvar cryptojsm5d = require(\"crypto-js/md5\");\nvar cryptojs = { MD5: cryptojsm5d };\nvar numeral = require(\"numeral\");\nvar swipe = require(\"swipe\");\nvar MSG = require(\"../Foundation/Services/MessageBusService\");\nvar LocationDetailsAppender = require(\"../Foundation/LocationDetailsAppender\");\nvar locking = require(\"../Foundation/Lock\");\nvar NAV = require(\"../Foundation/Navigation/Nav\");\nvar CMN = require(\"../Foundation/Common\");\nvar TT = require(\"../Foundation/TabTouch\");\nvar ErrorController = require(\"../Foundation/Error\");\nvar PreferencesService = require(\"../Foundation/Services/Preferences/PreferencesService\");\nvar TupleSpace = require(\"../Foundation/TupleSpace\");\nvar raceReplay = require(\"../Betting-v1/RaceReplay\");\nvar blackbookAddViewBinding = require(\"../Foundation/Components/Blackbook/myblackbook-add-viewbinding\");\nvar blackbookAddViewController = require(\"../Foundation/Components/Blackbook/myblackbook-add-viewcontroller\");\nvar NOTE = require(\"../Foundation/Notification\");\nvar jQueryToDictionary = require(\"jquery-todictionary\");\n\nlegacyReturn.FOB = window.FOB = (function(addBetSlipController, betSlipService, preferencesService, locationDetailsAppender) {\n    var sel;\n    var activeClass = \"ui-state-active\";\n\n    function initPropositions(url, backText) {\n        TT.initCommon(url, backText);\n        updateButtonState();\n        CMN.initSlideToggleHandlers();\n\n        sel = '';\n        var props = jQuery('ul.proposition-list');\n        var radio = props.find('input[type=radio]');\n\n        props.find('li input:radio').click(function (e) {\n            setRadioState(jQuery(this));\n            e.stopPropagation();\n        });\n\n        //Code so clicking anywhere on the li element will select/unselect the radio button.\n        props.find('li').click(function () {\n            var input = jQuery(this).children('input:radio');\n            if (!input.is(':disabled')) {\n                setRadioState(input);\n            }\n        });\n\n        initPost(jQuery('.calc-single'),\n                 jQuery('form#propositions-form'),\n            function() {\n                NAV.navChange('#fob/single/calc');\n                MSG.publish('bet.single.selected', { type: 'fobsports' });\n            },\n                 false\n        );\n\n        //don't use initPost for following post \n        //directly post to server, no need to unbind('click') in initPost\n        jQuery('a.add-to-multi').click(function (e) {\n            e.preventDefault();\n            if (jQuery('#choose-win-place-leg-popup').length > 0 && props.find('input:checked').length > 0) {\n                CMN.showPopup(jQuery('#choose-win-place-leg-popup'));\n            }\n            else {\n                formPost(jQuery('a.add-to-multi'),\n                    jQuery('form#propositions-form'),\n                    processRedirectResponse,\n                    false);\n            }\n            return false;\n        });\n\n        jQuery('a.add-win-to-multi').click(function (e) {\n            e.preventDefault();\n            jQuery('#legType').val('win');\n            return formPost(jQuery('a.add-win-to-multi'),\n                    jQuery('form#propositions-form'),\n                    processRedirectResponse,\n                    false);\n        });\n\n        jQuery('a.add-place-to-multi').click(function (e) {s\n            e.preventDefault();\n            jQuery('#legType').val('place');\n            return formPost(jQuery('a.add-place-to-multi'),\n                    jQuery('form#propositions-form'),\n                    processRedirectResponse,\n                    false);\n        });\n\n        jQuery('a.confirm-win-leg').click(function (e) {\n            e.preventDefault();\n            jQuery('#legType').val('win');\n            return formPost(jQuery('a.confirm-win-leg'),\n                    jQuery('form#propositions-form'),\n                    processRedirectResponse,\n                    false);\n        });\n\n        jQuery('a.confirm-place-leg').click(function (e) {\n            e.preventDefault();\n            jQuery('#legType').val('place');\n            return formPost(jQuery('a.confirm-place-leg'),\n                    jQuery('form#propositions-form'),\n                    processRedirectResponse,\n                    false);\n        });\n\n        var popup = jQuery('.popup > .win-place-confirm > .black-x');\n        popup.click(function () {\n            jQuery('.popup').fadeOut('fast');\n        });\n\n        jQuery('div.black-bubble a.information').click(function (e) {\n            e.preventDefault();\n            //setting duration to 0 if there are more than 30 props to avoid weird visual issue on some phones.\n            CMN.scrollTo(jQuery(jQuery(this).attr('href')), (jQuery('#propslist').children().length > 30 ? 0 : 'slow'));\n        });\n\n        //set button texts (Start Multi) for preselected prop\n        if (props.find('input:checked').length > 0) {\n            setWiPlacePopupDisplayValue();\n        }\n\n        NAV.overrideRefresh(function () {\n            if (jQuery('input:radio').is(':checked')) {\n                formPost(jQuery('#hidden-refresh'), jQuery('form#propositions-form'), NAV.showContent);\n            }\n            else {\n                NAV.refresh();\n            }\n            return false;\n        });\n\n        updateLiveBettingForCash();\n    }\n\n    function updateLiveBettingForCash() {\n        var cashBettingEnabled = preferencesService.cashBettingEnabled();\n        var liveBettingDivs = jQuery('div .liveBettingButtonGroup');\n        if (liveBettingDivs.length > 0) {\n            liveBettingDivs.each(function () {\n                jQuery(this).toggle(cashBettingEnabled);\n            });\n\n            if (cashBettingEnabled) {\n                jQuery('div#data-infobox h5').text('Live betting is only available via TABtouch with Cash or telephone betting due to Federal legislation.');\n            } else {\n                jQuery('div#data-infobox h5').text('Live betting is not available online due to Federal legislation.');\n            }\n\n            jQuery('#propositions-form input:radio[name=sportsBetNumber]')\n                .each(function () {\n                    jQuery(this).prop('disabled', !cashBettingEnabled);\n                });\n        }\n    }\n\n    function processRedirectResponse(data) {\n        if (data && data.RedirectUrl) {\n            NAV.navChange(data.RedirectUrl);\n            MSG.publish('bet.multi.add');\n        }\n    }\n\n    function setRadioState(input) {\n        input.prop('checked', input.val() == sel ? false : true);\n        sel = input.val() == sel ? '' : input.val();\n        updateButtonState();\n        setWiPlacePopupDisplayValue();\n    }\n\n    function setWiPlacePopupDisplayValue() {\n\n        if (jQuery('#choose-win-place-leg-popup').length > 0) {\n\n            var description = jQuery('#bet-content .display-list').find('input:checked').attr('description');\n            var runnerno = jQuery('#bet-content .display-list').find('input:checked').attr('runnerno');\n\n            var winReturnDisplay = jQuery('#bet-content .display-list').find('input:checked').attr('win');\n            jQuery('#choose-win-place-leg-popup .confirm-win-leg').html('win<br/>' + winReturnDisplay);\n\n            var placeReturnDisplay = jQuery('#bet-content .display-list').find('input:checked').attr('place');\n            if (placeReturnDisplay) {\n                jQuery('#choose-win-place-leg-popup a.confirm-place-leg').html('place<br/>' + placeReturnDisplay);\n                jQuery('a.confirm-place-leg').removeClass('disabled');\n            }\n            else {\n                jQuery('#choose-win-place-leg-popup a.confirm-place-leg').html('place<br/><br/>');\n                jQuery('a.confirm-place-leg').addClass('disabled');\n            }\n\n            if (runnerno) {\n                jQuery('#choose-win-place-leg-popup .display-no').show();\n                jQuery('#choose-win-place-leg-popup .display-no').text(runnerno);\n            } else {\n                jQuery('#choose-win-place-leg-popup .display-no').hide();\n            }\n\n        }\n    }\n\n    function setupPlaceInvestment(legType) {\n        if (legType.length > 0) {\n            var $investmentPlace = jQuery(\"#InvestmentPlace:input[type=hidden]\");\n            var $investmentWin = jQuery(\"#Investment\");\n            if (legType.val() === 'EachWay' && $investmentWin.length && $investmentPlace.length) {\n                $investmentPlace.val($investmentWin.val());\n            } else if ($investmentPlace.length) {\n                $investmentPlace.val(null);\n            }\n        }\n    }\n\n    function initSingleCalculator(url, backText) {\n        TT.initCommon(url, backText);\n        OFFERS.initOffersHelp();\n        bindLabelForRadioButtons();\n        initCalculator();\n\n        updateSelectionState();\n        jQuery('ul.win-or-place-selector input').click(updateSelectionState);\n        initPost(jQuery('.propose-single'), jQuery('form#calculator-form'), function(data) {\n            NAV.showContent(data);\n            MSG.publish('bet.single.review');\n        });\n    \n\n        betSlipService.addBetSlipClickHandler(jQuery('#addToBetSlip'), function () {\n            setupPlaceInvestment(jQuery('#calculator-form input:radio[name=ReturnType]:checked'));\n            return jQuery(\"form#calculator-form, form#betting-form\").serialize();\n        });\n\n        updateBetWithButtonsForCash();\n\n    }\n\n    function updateBetWithButtonsForCash() {     \n        var cashBettingEnabled = preferencesService.cashBettingEnabled();\n\n        var accountBetButton = jQuery('#bettingFormNext');\n        if (accountBetButton) {\n            accountBetButton.toggleClass('halfwidth', cashBettingEnabled);\n            accountBetButton.toggleClass('fullwidth', !cashBettingEnabled);\n        }\n\n        var placeInStoreButton = jQuery('#placeInStoreButton');\n        addBetSlipController.bindAddToWalletButtonClickHandler(placeInStoreButton, function () {\n            var $legType = jQuery('#calculator-form input:radio[name=ReturnType]:checked');\n            setupPlaceInvestment($legType);\n            MSG.publish('bet.cash.selected', 'single');\n            return jQuery(\"form#calculator-form, form#betting-form\").serialize();\n        });\n        placeInStoreButton.toggle(cashBettingEnabled);\n        \n        var isLiveBetting = jQuery('#betting-form input:hidden[name=IsLiveBetting][value=True]');\n        if (isLiveBetting.length > 0 && !accountBetButton.length) {\n            placeInStoreButton.toggleClass('halfwidth', !cashBettingEnabled);\n            placeInStoreButton.toggleClass('fullwidth', cashBettingEnabled);\n            placeInStoreButton.toggleClass('left', !cashBettingEnabled);\n            placeInStoreButton.toggleClass('right', !cashBettingEnabled);\n            placeInStoreButton.toggleClass('l-5', cashBettingEnabled);\n        }\n        CALC.registerUpdateNotification(function () {\n            if (isLiveBetting.length > 0) {\n                accountBetButton.toggleClass('disabled', true);\n            }\n        });\n    }\n\n    function initSportsProposeSingle(url, backText) {\n        TT.initCommon(url, backText);\n        initProposeSingle();\n    }\n\n    function initProposeSingle() {\n\n        OFFERS.initOffersHelp();\n\n        NAV.overrideBack(function (backUrl) {\n            // note: use ajaxPost direct, so as not to disable the back button (could possibly be improved)\n            NAV.ajaxPost(backUrl,\n                        null,\n                        NAV.showContent\n                        );\n            return false;\n        });\n\n        initButton(jQuery('.place-bet'), function (data) {\n            noback(data);\n            MSG.publish('bet.single.receipt', {\n                betType: 'fobsports',\n                ticket: jQuery('ul').find(':contains(\"Ticket\")').find('span.data').html(),\n                fobWinValue: jQuery('ul').find(':contains(\"Win Bet Amount\")').find('span.data').html(),\n                fobPlaceValue: jQuery('ul').find(':contains(\"Place Bet Amount\")').find('span.data').html()\n            });\n        });\n\n        initPost(jQuery('.place-foo-bet'), jQuery('form#betting-form'), function (data) {\n            TOTE.changeToteStarterState(TOTE.states.receipt, data);\n            MSG.publish('bet.single.receipt', {\n                betType: 'fobracing',\n                ticket: jQuery('ul').find(':contains(\"Ticket\")').find('span.data').html(),\n                fobWinValue: jQuery('ul').find(':contains(\"Win Bet Amount\")').find('span.data').html(),\n                fobPlaceValue: jQuery('ul').find(':contains(\"Place Bet Amount\")').find('span.data').html()\n            });\n        });\n    }\n\n    function initMultiCalculator(url, backText) {\n        TT.initCommon(url, backText);\n        bindLabelForRadioButtons();\n        initCalculator();\n        initMultiLegDetail();\n\n        NAV.overrideBack(function (backUrl) {\n            // note: use ajaxPost direct, so as not to disable the back button (could possibly be improved)\n            NAV.ajaxPost('fob/multi/back',\n                        jQuery('form#calculator-form').serialize(),\n                        function () { NAV.navChange(backUrl); return false; },\n                        {\n                            hideOverlay: false\n                        }\n                        );\n            return false;\n        });\n\n        initPost(jQuery('.propose-multi'), jQuery('form#calculator-form'), NAV.showContent);\n        addBetSlipController.bindAddMultiToWalletButtonClickHandler(jQuery('#addFobBetToBetWallet'));\n    }\n\n    function initProposeMulti(url, backText) {\n        TT.initCommon(url, backText);\n        initMultiLegDetail();\n        initButton(jQuery('.place-bet'), noback);\n    }\n\n    function initMultiView(url, backText) {\n        TT.initCommon(url, backText);\n        var legs = jQuery('#multi-bet-list');\n        var href = '/fob/multi/mod';\n        legs.find('input').change(function () {\n            NAV.ajaxContent(href + '?sbno=' + jQuery(this).val());\n        }).click(function (e) { e.stopPropagation(); });\n\n        legs.find('label').click(function () {\n            var input = jQuery(this).children('input');\n            if (!input.is(':disabled')) {\n                input.prop('checked', true);\n                input.change();\n            }\n            return false;\n        });\n    }\n\n    function initMultiLeg(url, backText) {\n        TT.initCommon(url, backText);\n    }\n\n    //handles clicking on a race code tab on the meeting list page\n    function selectorTabSelect(a, listItem, override) {\n        var li = a.parent(\"li\");\n\n        if (override || !li.hasClass(activeClass)) {\n            NAV.ajaxGet(a.attr('href'), function (data) {\n                CMN.initDisplayListStyle(jQuery(listItem).html(data));\n            });\n\n            //change tab highlight\n            jQuery(\"div.nav-info li\").removeClass(activeClass);\n            li.addClass(activeClass);\n        }\n    }\n\n    function confirm(confDiv, subDiv, url) {\n        jQuery('.sub-div').hide();\n        jQuery(subDiv + ' .confirm-yes').attr('href', url);\n        CMN.setDisableState(jQuery(subDiv + ' .confirm-yes'), true);\n        jQuery(subDiv).show();\n        CMN.showPopup(jQuery(confDiv));\n    }\n\n    // ajax get followed by a redirect to another view via navigation url\n    // * u: get action link url\n    // * s: url to navigate to upon success\n    // * b: element to optionally disable\n    // * h: optionally suppress hiding the loading overlay (false)\n    function redirect(u, s, b, h) {\n        b = jQuery(b);\n        if (b.is('.disabled') === false) {\n            CMN.setDisableState(b, false);\n            NAV.ajaxGet(\n                u,\n                function () {\n                    NAV.navChange(s);\n                    return false;\n                },\n                { hideOverlay: (h === undefined) ? true : h }\n            );\n        }\n        return false;\n    }\n\n    // register a click event to perform an ajax post of a form\n    // * b: element that is clicked, has href to post to, will be disabled and re-enabled upon error\n    // * f: form element to serialise\n    // * s: success function, e.g. nav/navChange or showContent\n    // * h: optionally do not hide the progress indicator (to prevent some flicker)\n    function initPost(b, f, s, h) {\n        b.unbind('click').click(function () {\n            formPost(b, f, s, h);\n            return false;\n        });\n    }\n\n    // ajax post followed by a specific success action (e.g. redirect to another view)\n    // synopsis: see initPost()\n    function formPost(b, f, s, h) {\n        if (b.is('.disabled') === false) {\n            NAV.ajaxPost(\n                    b.attr('href'),\n                    locationDetailsAppender.addToUrlEncodedData(f.serialize()),\n                    s,\n                    {\n                        control: b,\n                        hideOverlay: (h === undefined) ? true : h\n                    }\n            );\n        }\n        return false;\n    }\n\n    function initProposeFobAccumulator(url, backText) {\n        TT.initCommon(url, backText);\n        OFFERS.initOffersHelp();\n        jQuery('.bet-amount').click(\n\t\t    function () {\n\t\t        placeAccumulator();\n\t\t        return false;\n\t\t    }\n\t    );\n\n\t\tNAV.overrideBack(function (backUrl) {\n\t\t    NAV.ajaxPost(backUrl,null,NAV.showContent);\n            return false;\n        }\n\t    );\n    }\n\n    function confirmAccumCancelMulti() {\n\n        if (jQuery('#hidden-currentMulti').length > 0) {\n            FOB.confirm('#confirm-cancel-multi', '#ccm', '');\n        }\n        else {\n            addAccumulator();\n        }\n\n        return false;\n    }\n\n    function initAccumulatorList(url, backText) {\n        TT.initCommon(url, backText);\n        initAccumulatorSelections();\n        CMN.initSlideToggleHandlers();\n\n        jQuery('a.cancel').click(function (e) {\n            if (jQuery(this).is('.disabled') === false) {\n                clearAccumulatorSelections();\n            }\n            return false;\n        });\n\n        jQuery('a.bet-amount').click(function (e) {\n            if (jQuery(this).is('.disabled') === false) {\n                confirmAccumCancelMulti();\n            }\n            return false;\n        });\n\n        NAV.overrideRefresh(function () {\n\n            NAV.ajaxPost(jQuery('#hidden-refresh').attr('href'),\n                 jQuery('form#betting-form').serialize(),\n                 NAV.showContent);\n\n            return false;\n        });\n\n        jQuery('div.black-bubble a.information').click(function (e) {\n            e.preventDefault();\n            CMN.scrollTo(jQuery(jQuery(this).attr('href')), 'slow');\n        });\n    }\n\n    function placeAccumulator() {\n        NAV.ajaxPost(jQuery('.bet-amount').attr('href'),\n                    locationDetailsAppender.addToUrlEncodedData(jQuery('form#betting-form').serialize()),\n                    function (data) {\n                        noback(data);\n\n                        MSG.publish('bet.accumulator.receipt', {\n                            betType: 'fobsports',\n                            ticket: jQuery('ul').find(':contains(\"Ticket\")').find('span.data').html(),\n                            cost: jQuery('ul').find(':contains(\"Bet Amount\")').find('span.data').html()\n                        });\n                        \n        });\n        return false;\n    }\n\n    function addAccumulator() {\n        NAV.ajaxPost(jQuery('.bet-amount').attr('href'),\n                     jQuery('form#betting-form').serialize(),\n                    function () {\n                        NAV.navChange('#fob/accumulator/calc');\n                        MSG.publish('bet.accumulator.selected');\n                        return false;\n                    });\n        return false;\n    }\n\n    function clearAccumulatorSelections() {\n        jQuery('#content .display-list').find('input:checked').attr(\"checked\", false);\n        updateAccumulatorButtonState();\n        updateLegCounter();\n        updateSelectedStyle();\n    }\n\n    function initAccumulatorCalculator(url, backText) {\n        TT.initCommon(url, backText);\n        initCalculator();\n        OFFERS.initOffersHelp();\n\n        jQuery('.bet-continue').click(\n\t\t    function () {\n\t\t        if (jQuery(this).is('.disabled') === false) {\n\t\t            proposeAccumulator();\n\t\t        }\n\t\t        return false;\n\t\t    });\n\n        NAV.overrideBack(function (backUrl) {\n            NAV.ajaxPost(jQuery('#hidden-back').attr('href'),\n                     jQuery('form#accum-calculator-form').serialize(),\n                     function () { NAV.navChange(backUrl); return false; });\n\n            return false;\n        });\n    }\n\n    function proposeAccumulator() {\n        NAV.ajaxPost(jQuery('.bet-continue').attr('href'),\n                     jQuery('form#accum-calculator-form').serialize(),\n                     function(data) {\n                         MSG.publish('bet.accumulator.review');\n                         NAV.showContent(data);\n                     });\n\n        return false;\n    }\n\n    function initAccumulatorSelections() {\n        var accums = jQuery('ul.accumulator-list');\n        accums.find('input[type=radio]').change(function () {\n            updateAccumulatorButtonState();\n            updateLegCounter();\n            updateSelectedStyle();\n        }).click(function (e) { e.stopPropagation(); });\n\n        updateAccumulatorButtonState();\n        updateLegCounter();\n        updateSelectedStyle();\n\n        //Code so clicking anywhere on the li element will select/unselect the checkbox.\n        accums.find('label').click(function () {\n            var input = jQuery(this).children('input[type=radio]');\n            if (!input.is(':disabled')) {\n                input.prop('checked', true);\n                input.change();\n            }\n        });\n    }\n\n    function updateSelectedStyle() {\n\n        jQuery('#content .display-list').find('input').not('checked').parent().removeClass('selected');\n        jQuery('#content .display-list').find('input:checked').parent().addClass('selected');\n    }\n\n    function updateLegCounter() {\n        var length = 0;\n        var total = 0;\n        length = jQuery('#content .display-list').find('input:checked').length;\n        jQuery('.number-of-legs').html(length + ' leg' + (length !== 1 ? 's' : ''));\n\n        if (length > 0) {\n            total = 1;\n            jQuery('#content .display-list').find('input:checked').siblings('input[name=\"Return\"]').each(\n                function () {\n                    total *= parseFloat(jQuery(this).val());\n                });\n        }\n\n        jQuery('.multi-price').html(total.toFixed(2));\n    }\n\n    function updateAccumulatorButtonState() {\n        var length = 0;\n\n        length = jQuery('#content .display-list').find('input:checked').length;\n\n        CMN.setDisableState(jQuery('a.bet-amount'), length > 1);\n        CMN.setDisableState(jQuery('a.cancel'), length > 0);\n    }\n\n    function initCalculator() {\n        CALC.initCommonCalculator(true);\n        CALC.registerUpdateNotification(null);\n        CALC.initCalculator('calculator1');\n        CALC.initCalculator('calculator2');\n        CALC.setCalcButtonState();\n    }\n\n    function initMultiLegDetail() {\n        var items = jQuery('ul.multi-selections a');\n        items.click(function () {\n            NAV.ajaxGet(\n                jQuery(this).attr('href'),\n                processMultiLegDetail);\n            return false;\n        });\n    }\n\n    function processMultiLegDetail(data) {\n        jQuery('#multi-leg-window #transaction-details').html(data);\n        CMN.initDisplayListStyle(jQuery('#multi-leg-window ul.display-list'));\n        jQuery('.popup').click(function () { jQuery('#multi-leg-window').fadeOut('fast'); });\n        CMN.showPopup(jQuery('#multi-leg-window'));\n    }\n\n    function initButton(b, s) {\n        b.unbind('click').click(function () {\n            NAV.ajaxPost(\n                b.attr('href'),\n                locationDetailsAppender.addToUrlEncodedData(null),\n                s);\n            return false;\n        });\n    }\n\n    // If a proposition radio button is currently checked, enable the relevant buttons\n    function updateButtonState() {\n\n        var enabled = false;\n        enabled = jQuery('#bet-content .display-list').find('input:checked').length;\n\n        CMN.setDisableState(jQuery('.calc-single'), enabled);\n        CMN.setDisableState(jQuery('.add-to-multi'), enabled);\n        CMN.setDisableState(jQuery('.add-win-to-multi'), enabled);\n\n        var placeEnabled = enabled && jQuery('#bet-content .display-list').find('input:checked').attr('place');\n        CMN.setDisableState(jQuery('.add-place-to-multi'), placeEnabled);\n\n        if (enabled) {\n            jQuery('.calc-multi,.to-single').hide();\n        }\n        else {\n            jQuery('.calc-multi,.to-single').show();\n        }\n    }\n\n    // Displays the return value corresponding to the currently selected Win/Place/Win&Place radio button\n    function updateSelectionState() {\n        var value = jQuery('ul.win-or-place-selector input:checked').val();\n        jQuery('div.my-selections li.win-return').toggle(value != 'Place');\n        jQuery('div.my-selections li.place-return').toggle(value != 'Win');\n    }\n\n\n    // display content but suppress the back button\n    function noback(data) {\n        NAV.hideBack();\n        NAV.showContent(data);\n    };\n\n    function bindLabelForRadioButtons() {\n        jQuery('label[for],input[type=\"radio\"]').bind('click', function (e) { e.stopPropagation(); });\n    }\n\n    // function for handling session errors on refresh. Will just do a standard refresh instead of a post.\n    function handleSessionError() {\n        NAV.hideErrorPopup();\n        NAV.refresh();\n        return false;\n    }\n\n    return {\n        initSingleCalculator: initSingleCalculator,\n        initPropositions: initPropositions,\n        initProposeSingle: initSportsProposeSingle,\n        initMultiCalculator: initMultiCalculator,\n        initMultiView: initMultiView,\n        initMultiLeg: initMultiLeg,\n        initProposeMulti: initProposeMulti,\n        initAccumulatorList: initAccumulatorList,\n        initAccumulatorCalculator: initAccumulatorCalculator,\n        initProposeFobAccumulator: initProposeFobAccumulator,\n        addAccumulator: addAccumulator,\n        confirm: confirm,\n        redirect: redirect,\n        initButton: initButton,\n        confirmAccumCancelMulti: confirmAccumCancelMulti,\n        handleSessionError: handleSessionError,\n        initRacingProposedSingle: initProposeSingle,\n        setupPlaceInvestment: setupPlaceInvestment,\n        updateLiveBettingForCash: updateLiveBettingForCash,\n        updateBetWithButtonsForCash: updateBetWithButtonsForCash,\n        initPost: initPost\n    };\n})(new Controllers.BetBuilder.AddBetSlip(new BetWalletService(Models.BetBuilder.BetWallet)), new BetSlipService(new BetSlipStore()), PreferencesService, new LocationDetailsAppender());\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Betting-v1/fob.legacy.js\n// module id = 304\n// module chunks = 5","/*** IMPORTS FROM imports-loader ***/\nvar jQuery = require(\"jquery\");\nvar _ = require(\"underscore\");\nvar legacyReturn = {};\nvar amplify = require(\"amplify\");\nvar cryptojsm5d = require(\"crypto-js/md5\");\nvar cryptojs = { MD5: cryptojsm5d };\nvar numeral = require(\"numeral\");\nvar swipe = require(\"swipe\");\nvar MSG = require(\"../Foundation/Services/MessageBusService\");\nvar LocationDetailsAppender = require(\"../Foundation/LocationDetailsAppender\");\nvar locking = require(\"../Foundation/Lock\");\nvar NAV = require(\"../Foundation/Navigation/Nav\");\nvar CMN = require(\"../Foundation/Common\");\nvar TT = require(\"../Foundation/TabTouch\");\nvar ErrorController = require(\"../Foundation/Error\");\nvar PreferencesService = require(\"../Foundation/Services/Preferences/PreferencesService\");\nvar TupleSpace = require(\"../Foundation/TupleSpace\");\nvar raceReplay = require(\"../Betting-v1/RaceReplay\");\nvar blackbookAddViewBinding = require(\"../Foundation/Components/Blackbook/myblackbook-add-viewbinding\");\nvar blackbookAddViewController = require(\"../Foundation/Components/Blackbook/myblackbook-add-viewcontroller\");\nvar NOTE = require(\"../Foundation/Notification\");\nvar jQueryToDictionary = require(\"jquery-todictionary\");\n\nlegacyReturn.fobRacingCalculator = window.fobRacingCalculator = (function() {\n    function initCalculator() {\n        \n    }\n\n    return {\n        initCalculator: initCalculator\n    };\n})();\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Betting-v1/fobracing-calculator.legacy.js\n// module id = 305\n// module chunks = 5","/*** IMPORTS FROM imports-loader ***/\nvar jQuery = require(\"jquery\");\nvar _ = require(\"underscore\");\nvar legacyReturn = {};\nvar amplify = require(\"amplify\");\nvar cryptojsm5d = require(\"crypto-js/md5\");\nvar cryptojs = { MD5: cryptojsm5d };\nvar numeral = require(\"numeral\");\nvar swipe = require(\"swipe\");\nvar MSG = require(\"../Foundation/Services/MessageBusService\");\nvar LocationDetailsAppender = require(\"../Foundation/LocationDetailsAppender\");\nvar locking = require(\"../Foundation/Lock\");\nvar NAV = require(\"../Foundation/Navigation/Nav\");\nvar CMN = require(\"../Foundation/Common\");\nvar TT = require(\"../Foundation/TabTouch\");\nvar ErrorController = require(\"../Foundation/Error\");\nvar PreferencesService = require(\"../Foundation/Services/Preferences/PreferencesService\");\nvar TupleSpace = require(\"../Foundation/TupleSpace\");\nvar raceReplay = require(\"../Betting-v1/RaceReplay\");\nvar blackbookAddViewBinding = require(\"../Foundation/Components/Blackbook/myblackbook-add-viewbinding\");\nvar blackbookAddViewController = require(\"../Foundation/Components/Blackbook/myblackbook-add-viewcontroller\");\nvar NOTE = require(\"../Foundation/Notification\");\nvar jQueryToDictionary = require(\"jquery-todictionary\");\n\nlegacyReturn.FOBR = window.FOBR = (function() {\n    var betSlipService = new BetSlipService(new BetSlipStore());\n    var preferencesService = PreferencesService;\n    var addBetSlipController = new Controllers.BetBuilder.AddBetSlip(new BetWalletService(Models.BetBuilder.BetWallet));\n    var locationDetailsAppender = new LocationDetailsAppender();\n\n    function preSelectProposition(propositionNumber) {\n        jQuery('#' + propositionNumber).trigger(\"click\");\n    }\n\n    function initFobRacingEventsPage(url, backText) {\n        TT.initCommon(url, backText);\n        jQuery(document).off('click', '.js-event-item')\n            .on('click', '.js-event-item', function (e) {\n                e.preventDefault();\n                NAV.navChange(this.href);\n            });\n    }\n\n    // ajax post followed by a specific success action (e.g. redirect to another view)\n    // synopsis: see initPost()\n    var formPost = function (button, form, success, hideProgressIndicator) {\n        if (button.is('.disabled') === false) {\n            NAV.ajaxPost(\n                button.attr('href'),\n                locationDetailsAppender.addToUrlEncodedData(form.serialize()),\n                success,\n                {\n                    control: button,\n                    hideOverlay: (hideProgressIndicator === undefined) ? true : hideProgressIndicator\n                }\n            );\n        }\n        return false;\n    };\n\n    var initCalculatorMarketSelection = function () {\n        jQuery('ul.win-or-place-selector input').click(function () {\n            var market = getMarket();\n            jQuery(\"#BetType\").val(market);\n        });\n    };\n\n    var initProposeBet = function () {\n        jQuery(\"a#bettingFormNext\").click(function () {\n            var $investmentPlace = jQuery(\"#InvestmentPlace:input[type=hidden]\");\n            var $investmentWin = jQuery(\"#Investment\");\n            if (isEachWay() && $investmentWin.length && $investmentPlace.length) {\n                $investmentPlace.val($investmentWin.val());\n            } else if ($investmentPlace.length) {\n                $investmentPlace.val(null);\n            }\n            TOTE.createBetProposal(this);\n            return false;\n        });\n\n    };\n    var getMarket = function () {\n        var market = jQuery('ul.win-or-place-selector input:checked').val();\n        return market;\n    };\n    var isEachWay = function () {\n        var market = getMarket();\n        return market === 'EachWay';\n    };\n\n    var initFobRacingStartersPage = function (url, backText) {\n        TT.initCommon(url, backText);\n\n        CALC.registerUpdateNotification(null);\n\n        TOTE.initButtons(false);\n        initCalculatorMarketSelection();\n        CALC.initCommonCalculator(false);\n        CALC.initCalculator('calculator1');\n        CALC.initCalculator('calculator2');\n        TOTE.initBetCostPopup();\n        initProposeBet();\n        TOTE.initMySelectionsSection();\n        TOTE.initFixedOddsSelectionButton();\n        CMN.initSlideToggleHandlers();\n        TOTE.initErrorWindow();\n        jQuery(\".hidden-calculator\").hide();\n        OFFERS.initOffersHelp();\n\n        var $addToBetSlip = jQuery('#addToBetSlip');\n        betSlipService.addBetSlipClickHandler(\n            $addToBetSlip,\n            function () {\n                FOB.setupPlaceInvestment(jQuery('#betting-form input:radio[name=ReturnType]:checked'));\n                return jQuery(\"form#betting-form\").serialize();\n            },\n            false,\n            function () {\n                if (jQuery(\"#PyosSelectedSpecial\\\\.SpecialSeq\").val()) {\n                    ErrorController.showErrorPopup(\"SuperPick is not available for Bet Slip.\", null);\n                    return false;\n                }\n                return true;\n            });\n\n        var cashBettingEnabled = preferencesService.cashBettingEnabled();\n        var placeInStoreButton = jQuery('#placeInStoreButton');\n        addBetSlipController.bindAddToWalletButtonClickHandler(\n            placeInStoreButton,\n            function () {\n                FOB.setupPlaceInvestment(jQuery('#betting-form input:radio[name=ReturnType]:checked'));\n                MSG.publish('bet.cash.selected', 'single');\n                return jQuery(\"form#betting-form\").serialize();\n            },\n            function () {\n                if (jQuery(\"#PyosSelectedSpecial\\\\.SpecialSeq\").val()) {\n                    ErrorController.showErrorPopup(\"SuperPick is not available for Cash Betting.\", null);\n                    return false;\n                }\n                return true;\n           });\n        jQuery('#bettingFormNext').toggleClass('halfwidth', cashBettingEnabled);\n        jQuery('#bettingFormNext').toggleClass('fullwidth', !cashBettingEnabled);        \n        placeInStoreButton.toggle(cashBettingEnabled);\n    };\n\n    return {\n        initFobRacingEventsPage: initFobRacingEventsPage,\n        initFobRacingStartersPage: initFobRacingStartersPage,\n        isEachWay: isEachWay,\n        preSelectProposition: preSelectProposition\n    };\n})();\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Betting-v1/fobracing.legacy.js\n// module id = 306\n// module chunks = 5","/*** IMPORTS FROM imports-loader ***/\nvar jQuery = require(\"jquery\");\nvar _ = require(\"underscore\");\nvar legacyReturn = {};\nvar amplify = require(\"amplify\");\nvar cryptojsm5d = require(\"crypto-js/md5\");\nvar cryptojs = { MD5: cryptojsm5d };\nvar numeral = require(\"numeral\");\nvar swipe = require(\"swipe\");\nvar MSG = require(\"../Foundation/Services/MessageBusService\");\nvar LocationDetailsAppender = require(\"../Foundation/LocationDetailsAppender\");\nvar locking = require(\"../Foundation/Lock\");\nvar NAV = require(\"../Foundation/Navigation/Nav\");\nvar CMN = require(\"../Foundation/Common\");\nvar TT = require(\"../Foundation/TabTouch\");\nvar ErrorController = require(\"../Foundation/Error\");\nvar PreferencesService = require(\"../Foundation/Services/Preferences/PreferencesService\");\nvar TupleSpace = require(\"../Foundation/TupleSpace\");\nvar raceReplay = require(\"../Betting-v1/RaceReplay\");\nvar blackbookAddViewBinding = require(\"../Foundation/Components/Blackbook/myblackbook-add-viewbinding\");\nvar blackbookAddViewController = require(\"../Foundation/Components/Blackbook/myblackbook-add-viewcontroller\");\nvar NOTE = require(\"../Foundation/Notification\");\nvar jQueryToDictionary = require(\"jquery-todictionary\");\n\nimport { xmlParse, downloadUrl } from './downloadXml.legacy'\n\nlegacyReturn.GOG = window.GOG = (function() {\n    var startLocationMarkerImageUrl = '../Images/Icons/blue-dot.png';\n\n    var introNotification;\n    var canCentreScreen;\n\n    var map = null;\n    var googleTabmarkers = [];\n    var googleMarkerIcons = [];\n\n    var directionsInfoWindowClassName = '.gm-iw';\n    var geocoder;\n    var directionsService;\n    var directionsDisplay;\n    var noViewBoundsChangeDirectionRenderer;\n    var distanceMatrixService;\n    var currentGeoLocation;\n    var currentDestination;\n    var infowindow;\n    var iconShadow;\n    var sl1CategoryCode = \"SL1\";\n    var sl2CategoryCode = \"SL2\";\n    var sl3CategoryCode = \"SL3\";\n    var currentLocationMarker;\n    var currentDestinationCategoryType;\n\n    var markerIconSize;\n    var markerAnchor;\n    var markerOrigin;\n\n    var nearbyTabsListLength = 10;\n    var domReadyListener;\n\n    var usersGeoLocation;\n    var defaultLocation = {\n        coords: {\n            latitude: -31.9554,\n            longitude: 115.85859\n        }\n    };\n    var mapsReady;\n\n    function addButton() {\n        var control = jQuery('#mapfullscreen');\n        control.click(function () {\n            var maximiseButton = jQuery('#mapfullscreen');\n            maximiseButton.toggleClass('goFullscreen');\n            maximiseButton.toggleClass('goMinimise');\n\n            var mapCanvas = jQuery(\"#map_container, #map_canvas\");\n            mapCanvas.toggleClass('fullscreen');\n            resizeGoogleMap();\n        });\n    }\n\n    function getCurrentLocation() {\n        return currentGeoLocation;\n    }\n\n    function setUsersGeoLocation(geoLocation) {\n        usersGeoLocation = geoLocation;\n    }\n\n    function initialize() {\n        markerIconSize = new google.maps.Size(15, 30);\n        markerAnchor = new google.maps.Point(9, 30);\n        markerOrigin = new google.maps.Point(0, 0);\n        canCentreScreen = false;\n        CMN.addWaterMark('address', 'Other Location');\n        currentDestination = null;\n        var position = defaultLocation;\n        if (usersGeoLocation) {\n            position = usersGeoLocation;\n        }\n        setCurrentLocation(position);\n        addToRadFunctionToNumber();\n        loadMarkerImages();\n        introNotification = NOTE.initTabLocatorNotification(GOG.pastInitialPopUp);\n\n        initGoogleMapObjects();\n        createGoogleMap();\n        initiateDirectionServices();\n        currentLocationMarker = createUsersLocationMarker();\n\n        getLocationsFromFile(\"../Content/tab-location.xml\");\n\n        addButton();\n\n        var latlng = new google.maps.LatLng(currentGeoLocation.latitude, currentGeoLocation.longitude);\n        map.setCenter(latlng);\n    }\n\n    function setCurrentLocation(position) {\n        if (position.coords) {\n            currentGeoLocation = position.coords;\n        } else if (position.lat) {\n            currentGeoLocation = {\n                latitude: position.lat(),\n                longitude: position.lng()\n            };\n        } else {\n            currentGeoLocation = position;\n        }\n\n    }\n\n    function loadMarkerImages() {\n        googleMarkerIcons[sl1CategoryCode] = getMarkerImage(getCssClassForCategory(sl1CategoryCode));\n        googleMarkerIcons[sl2CategoryCode] = getMarkerImage(getCssClassForCategory(sl2CategoryCode));\n        googleMarkerIcons[sl3CategoryCode] = getMarkerImage(getCssClassForCategory(sl3CategoryCode));\n    }\n\n    function addToRadFunctionToNumber() {\n        if (!Number.prototype.toRad) {\n            Number.prototype.toRad = function () {\n                return this * Math.PI / 180;\n            };\n        }\n    }\n\n    function createGoogleMap() {\n        var myOptions = {\n            panControl: false,\n            zoom: 12,\n            minZoom: 5,\n            maxZoom: 18,\n            center: new google.maps.LatLng(currentGeoLocation.latitude, currentGeoLocation.longitude),\n            mapTypeControl: false,\n            mapTypeControlOptions: {\n                style: google.maps.MapTypeControlStyle.DROPDOWN_MENU\n            },\n            streetViewControl: false,\n            navigationControl: true,\n            mapTypeId: google.maps.MapTypeId.ROADMAP,\n            zoomControl: true,\n            styles: [{ featureType: \"poi\", elementType: \"labels\", stylers: [{ visibility: \"off\"}]}] \n        };\n\n        var mapCanvas = jQuery(\"#map_canvas\");\n        map = new google.maps.Map(mapCanvas[0], myOptions);\n\n        google.maps.event.addListener(map, 'click', function () {\n            infowindow.close();\n        });\n\n        google.maps.event.addListenerOnce(map, 'tilesloaded', function () {\n            centreScreenOnMap();\n            introNotification.show();\n        });\n    }\n\n    function initiateDirectionServices() {\n        distanceMatrixService = new google.maps.DistanceMatrixService();\n        directionsService = new google.maps.DirectionsService();\n        noViewBoundsChangeDirectionRenderer = directionsDisplay = new google.maps.DirectionsRenderer({\n            suppressMarkers: true,\n            preserveViewport: true\n        });\n        directionsDisplay = new google.maps.DirectionsRenderer({\n            suppressMarkers: true,\n            preserveViewport: false\n        });\n\n        directionsDisplay.setPanel(jQuery('#directions')[0]);\n        noViewBoundsChangeDirectionRenderer.setPanel(jQuery('#directions')[0]);\n    }\n\n    function createUsersLocationMarker() {\n        return new google.maps.Marker({\n            position: new google.maps.LatLng(currentGeoLocation.latitude, currentGeoLocation.longitude),\n            icon: {\n                url: startLocationMarkerImageUrl,\n                anchor: new google.maps.Point(25, 25)\n            },\n            map: map,\n            title: name,\n            zIndex: 999900000\n        });\n    }\n\n    function getLocationsFromFile(file) {\n        downloadUrl(file, parseXmlFlieForLocations);\n    }\n\n    function parseXmlFlieForLocations(doc) {\n        var xmlDoc = xmlParse(doc);\n        var markers = xmlDoc.documentElement.getElementsByTagName(\"marker\");\n\n        googleTabmarkers = [];\n        for (var i = 0; i < markers.length; i++) {\n            var category = markers[i].getAttribute(\"category\");\n\n            var html = createTabLocationInfoHtml(markers[i]);\n\n            var lat = markers[i].getAttribute(\"lat\");\n            var lng = markers[i].getAttribute(\"lng\");\n            var point = new google.maps.LatLng(lat, lng);\n\n            googleTabmarkers.push(createMarker(point, markers[i].getAttribute(\"name\"), html, category));\n        }\n\n        showAllMarkers();\n\n        var orderedMarkers = orderedLocationsByDistance();\n        generateMarkerList(orderedMarkers, nearbyTabsListLength);\n\n        mapsReady = true;\n        jQuery('#viewList').show();\n    }\n\n    function createTabLocationInfoHtml(marker) {\n        var address = \"<div style='width:200px;'>\" + marker.getAttribute(\"address\") + \"</div>\";\n        var name = \"<div style='width:220px;'><strong><span class='left'>\" + marker.getAttribute(\"name\") + \"</span></strong></div><div style='line-height:1.5em'><span id='infoWindowDistance' class='dist loadingDistance'></span></div>\";\n        var currentLocation = \"<div class='ur_location'><input class='go_button button' type='button'  onclick='GOG.getDirectionsFromLocation(\" + marker.getAttribute(\"lat\") + \",\" + marker.getAttribute(\"lng\") + \", \\\"\" + marker.getAttribute(\"category\") + \"\\\", GOG.drawDirections)' value='Get Directions!'></div>\";\n        return \"<div id='infoWindowContent'>\" + name + address + currentLocation + \"</div>\";\n    }\n\n    function showAllMarkers() {\n        showMarkerForCategory(sl1CategoryCode);\n        showMarkerForCategory(sl2CategoryCode);\n        showMarkerForCategory(sl3CategoryCode);\n    }\n\n    function getMarkerImage(iconColor) {\n        if (!iconColor) {\n            iconColor = \"default\";\n        }\n        if (!googleMarkerIcons[iconColor]) {\n            googleMarkerIcons[iconColor] = new google.maps.MarkerImage(\"images/icons/\" + iconColor + \".png\",\n                markerIconSize,\n                markerOrigin,\n                markerAnchor);\n        }\n        return googleMarkerIcons[iconColor];\n    }\n\n    function getCssClassForCategory(category) {\n        switch (category) {\n            case sl2CategoryCode:\n                return \"sl2-yellow\";\n            case sl3CategoryCode:\n                return \"sl3-red\";\n            default:\n                return \"sl1-purple\";\n        }\n    }\n\n    function createMarker(latlng, name, html, category) {\n        var contentString = html;\n        var marker = new google.maps.Marker({\n            position: latlng,\n            icon: googleMarkerIcons[category],\n            shadow: iconShadow,\n            map: map,\n            title: name,\n            zIndex: getZindexForMarkerByLatitude(latlng.lat())\n        });\n        marker.mycategory = category;\n        marker.myname = name;\n\n        google.maps.event.addListener(marker, 'click', function () {\n            infowindow.close();\n            infowindow.setContent(contentString);\n            infowindow.open(map, marker);\n\n            if (jQuery(directionsInfoWindowClassName).length > 0) {\n                noViewBoundsChangeDirectionRenderer.setMap(noViewBoundsChangeDirectionRenderer.getMap());\n                directionsDisplay.setMap(directionsDisplay.getMap());\n            }\n\n\n            google.maps.event.removeListener(domReadyListener);\n            domReadyListener = google.maps.event.addListener(infowindow, 'domready', function () {\n                getDirectionsFromLocation(latlng.lat(), latlng.lng(), category, function (response) {\n                    var legs = response.routes[0].legs;\n                    var distanceMetres = 0;\n                    for (var j = 0; j < legs.length; j++) {\n                        distanceMetres += legs[j].distance.value;\n                    }\n\n                    var distance = Math.round(distanceMetres / 100) / 10;\n\n                    var span = jQuery('#infoWindowDistance');\n                    span.html('(' + distance + ' kms)');\n                    span.removeClass('loadingDistance');\n                    jQuery('#infoWindowContent br').remove();\n                });\n            });\n        });\n\n        return marker;\n    }\n\n    function getDirectionsFromLocation(slat, slong, tabType, callback) {\n        var lat = parseFloat(slat);\n        var lng = parseFloat(slong);\n        var destination = new google.maps.LatLng(lat, lng);\n        destination.category = tabType;\n        var origin = currentGeoLocation.latitude + ',' + currentGeoLocation.longitude;\n\n        var request = {\n            origin: origin,\n            destination: destination,\n            travelMode: google.maps.TravelMode['DRIVING']\n        };\n\n        directionsService.route(request, function (response, status) {\n            if (status == google.maps.DirectionsStatus.OK) {\n                callback(response, tabType, destination);\n            }\n        });\n    }\n\n    function drawDirections(response, tabType, destination, directionRenderService) {\n        clearDirections();\n        if (jQuery('#map_container').is(\":visible\")) {\n            jQuery('#viewDirectionButton').show();\n        }\n        if (!directionRenderService) {\n            directionRenderService = directionsDisplay;\n            infowindow.close();\n        }\n        directionRenderService.setMap(map);\n        directionRenderService.setDirections(response);\n\n        setTimeout(function () {\n            jQuery('#directions img:first').attr('src', startLocationMarkerImageUrl).css(\"width\", \"3em\").css(\"height\", \"3em\");\n            jQuery('#directions img:last').attr('src', \"images/icons/\" + getCssClassForCategory(tabType) + \".png\").css(\"width\", \"1.5em\").css(\"height\", \"3em\");\n        }, 500);\n\n\n\n        currentDestinationCategoryType = tabType;\n        currentDestination = destination;\n    }\n\n    function geocode(query) {\n        infowindow.close();\n        geocoder = new google.maps.Geocoder;\n        if (jQuery.trim(query).length > 0) {\n            var address = query + \", Western Australia, Australia\";\n\n            geocoder.geocode({\n                'address': address,\n                'partialmatch': true\n            }, processGeocodeResult);\n        }\n    }\n\n    function processGeocodeResult(results, status) {\n        if (status == 'OK' && results.length > 0) {\n            updateLocationOnMap(results[0].geometry.location);\n        }\n    }\n\n    function updateFromCurrentLocation(position, dontGoToMap, supressTabListUpdate) {\n        updateLocationOnMap(new google.maps.LatLng(position.coords.latitude, position.coords.longitude), dontGoToMap, supressTabListUpdate);\n    }\n\n    function updateLocationOnMap(latlng, dontGoToMap, supressTabListUpdate) {\n        setCurrentLocation(latlng);\n\n        currentLocationMarker.setPosition(latlng);\n\n        if (!supressTabListUpdate) {\n            generateMarkerList(orderedLocationsByDistance(), nearbyTabsListLength);\n        }\n\n        if (!dontGoToMap) {\n            clearDirections();\n            viewMap();\n            map.setCenter(latlng);\n        }\n        else if (currentDestination && (directionsDisplay.getMap() || noViewBoundsChangeDirectionRenderer.getMap()) && jQuery('#map_container').is(':visible') && jQuery(directionsInfoWindowClassName).length < 1) {\n            getDirectionsFromLocation(currentDestination.lat(), currentDestination.lng(), currentDestination.category, function (response, tabType, destination) {\n                drawDirections(response, tabType, destination, noViewBoundsChangeDirectionRenderer);\n                directionsDisplay.setMap(null);\n            });\n        }\n    }\n\n    function getZindexForMarkerByLatitude(lat) {\n        return Math.round(lat * -100000) << 5;\n    }\n\n    function viewMap(dontCentreOnMap) {\n        jQuery('#map_container, #tabTypeSelectionContainer').show();\n        jQuery('#directions, #viewMapButton').hide();\n        jQuery('#location_list').hide();\n        if (jQuery.trim(jQuery('#directions').html()).length > 0) {\n            jQuery('#viewDirectionButton').show();\n        }\n\n        resizeGoogleMap();\n        if (!dontCentreOnMap) {\n            centreScreenOnMap();\n        }\n    }\n\n    function centreScreenOnMap(complete) {\n        if (canCentreScreen) {\n            jQuery('html:not(:animated),body:not(:animated)').animate({ scrollTop: jQuery('#anchor').offset().top }, 'fast', null, complete);\n        }\n    }\n\n    function resizeGoogleMap() {\n        if (map) {\n            google.maps.event.trigger(map, 'resize');\n        }\n    }\n\n    function toggleVisible(category) {\n        var isVisible = false;\n\n        for (var i = 0; i < googleTabmarkers.length; i++) {\n            if (googleTabmarkers[i].mycategory === category) {\n                isVisible = (googleTabmarkers[i].getVisible()) === false;\n                googleTabmarkers[i].setVisible(isVisible);\n            }\n        }\n\n        if (!isVisible) {\n            if (jQuery('#map_container').is(':visible')) {\n                var mapContainer = jQuery('#map_container').hide();\n            }\n\n            setTimeout(function () {\n                if (mapContainer) {\n                    mapContainer.show();\n                }\n                centreScreenOnMap();\n            }, 100);\n        }\n\n        setCategoryCheckBox(category, isVisible);\n\n        return isVisible;\n    }\n\n    function showMarkerForCategory(category) {\n        for (var i = 0; i < googleTabmarkers.length; i++) {\n            if (googleTabmarkers[i].mycategory === category) {\n                googleTabmarkers[i].setVisible(true);\n            }\n        }\n\n        setCategoryCheckBox(category, true);\n    }\n\n    function setCategoryCheckBox(category, isChecked) {\n        jQuery('#' + category + 'box').prop('checked', isChecked);\n    }\n\n    function boxclick(category) {\n        if (!toggleVisible(category) && currentDestinationCategoryType === category) {\n            clearDirections();\n        }\n\n        infowindow.close();\n        generateMarkerList(orderedLocationsByDistance(), nearbyTabsListLength);\n    }\n\n    function loadLocationInfoBox(i) {\n        viewMap();\n        google.maps.event.trigger(googleTabmarkers[i], \"click\");\n    }\n\n    var googleMatrixDestinationCount = 0;\n\n    function canUpdateLocation() {\n        return googleMatrixDestinationCount < 80;\n    }\n\n    function generateMarkerList(orderedMarkers) {\n        if (orderedMarkers.length > 0) {\n\n            var elementCount = Math.min(nearbyTabsListLength + 10, orderedMarkers.length);\n\n            var destinations = new Array();\n            for (var i = 0; i < elementCount; i++) {\n                destinations.push(orderedMarkers[i].marker.getPosition());\n            }\n\n            var origins = new Array();\n            origins.push(new google.maps.LatLng(currentGeoLocation.latitude, currentGeoLocation.longitude));\n\n            googleMatrixDestinationCount += elementCount;\n\n            distanceMatrixService.getDistanceMatrix({\n                destinations: destinations,\n                origins: origins,\n                travelMode: google.maps.TravelMode['DRIVING']\n            },\n                function (response) {\n                    if (response) {\n                        setTimeout(function () {\n                            googleMatrixDestinationCount -= elementCount;\n                        }, 10000);\n\n                        var distances = response.rows[0].elements;\n                        var travellingDistanceOrder = new Array();\n                        for (var j = 0; j < distances.length; j++) {\n                            if (distances[j].status !== 'ZERO_RESULTS') {\n                                orderedMarkers[j].dist = Math.round(distances[j].distance.value / 100) / 10;\n                                addMarkerToOrderedList(travellingDistanceOrder, orderedMarkers[j]);\n                            }\n                        }\n\n                        populateList(travellingDistanceOrder);\n                    }\n                });\n        } else {\n            jQuery(\"#tab_list\").html('');\n        }\n    }\n\n    function populateList(markers) {\n        var elementCount = Math.min(nearbyTabsListLength, markers.length);\n        var tabList = jQuery(\"#tab_list\");\n        tabList.html('');\n        for (var i = 0; i < elementCount; i++) {\n            var cat = markers[i].marker.mycategory;\n            var cssClass = getCssClassForCategory(cat);\n\n\n            tabList.append('<a href=\"javascript:GOG.loadLocationInfoBox(' + markers[i].idx + ')\"><span class=\"' + cssClass + '\"><\\/span>' + markers[i].marker.myname + ' <span style=\"float:right\" >' + markers[i].dist + ' kms<\\/span><\\/a><br>');\n        }\n    }\n\n    function orderedLocationsByDistance() {\n        var showTabTypes = new Array();\n        jQuery('#tabTypeSelectionContainer input:checked').each(function () {\n            showTabTypes.push(jQuery(this).attr('id').substr(0, 3));\n        });\n\n        var orderedMarkers = new Array();\n        for (var i = 0; i < googleTabmarkers.length; i++) {\n            if (jQuery.inArray(googleTabmarkers[i].mycategory, showTabTypes) > -1) {\n                var markerLat = parseFloat(googleTabmarkers[i].getPosition().lat());\n                var markerLng = parseFloat(googleTabmarkers[i].getPosition().lng());\n\n                var dist = getDistanceBetweenGeoLocations(markerLat, markerLng, currentGeoLocation.latitude, currentGeoLocation.longitude);\n                var currentMarker = {\n                    dist: dist,\n                    marker: googleTabmarkers[i],\n                    idx: i\n                };\n\n                addMarkerToOrderedList(orderedMarkers, currentMarker);\n            }\n        }\n\n        return orderedMarkers;\n    }\n\n    function addMarkerToOrderedList(orderedMarkers, newMarker) {\n        var j = 0;\n        while (true) {\n            if (orderedMarkers[j] == undefined) {\n                orderedMarkers[j] = newMarker;\n                break;\n            } else if (orderedMarkers[j].dist > newMarker.dist) {\n                var temp = orderedMarkers[j];\n                orderedMarkers[j] = newMarker;\n                newMarker = temp;\n            }\n\n            j++;\n        }\n\n        return orderedMarkers;\n    }\n\n    function getDistanceBetweenGeoLocations(startLat, startLong, endLat, endLong) {\n        var radiusOfEarth = 6371; /* km */\n        var dLat = (endLat - startLat).toRad();\n        var dLon = (endLong - startLong).toRad();\n        startLat = startLat.toRad();\n        endLat = endLat.toRad();\n\n        var a = Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n            Math.sin(dLon / 2) * Math.sin(dLon / 2) * Math.cos(startLat) * Math.cos(endLat);\n        var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n        return Math.floor(radiusOfEarth * c * 100) / 100;\n    }\n\n    function clearDirections() {\n        noViewBoundsChangeDirectionRenderer.setMap(null);\n        directionsDisplay.setMap(null);\n        jQuery('#directions').html('');\n        jQuery('#viewDirectionButton').hide();\n    }\n\n    function initGoogleMapObjects() {\n        infowindow = new google.maps.InfoWindow({\n            maxWidth: 300\n        });\n\n        google.maps.event.addListener(infowindow, 'clickclose', function () {\n            infowindow.close();\n        });\n\n        googleMarkerIcons[\"default\"] = new google.maps.MarkerImage(\"images/icons/sl1-purple.png\",\n                        markerIconSize,\n                        markerOrigin,\n                        markerAnchor);\n        /* Marker sizes are expressed as a Size of X,Y\n        where the origin of the image (0,0) is located\n        in the top left of the image.\n\n        Origins, anchor positions and coordinates of the marker\n        increase in the X direction to the right and in\n        the Y direction down.*/\n\n        iconShadow = new google.maps.MarkerImage('images/icons/pin-shadow.png',\n        /* The shadow image is larger in the horizontal dimension\n        while the position and offset are the same as for the main image. */\n        new google.maps.Size(15, 20),\n        new google.maps.Point(0, 0),\n        new google.maps.Point(1, 15));\n        /* Shapes define the clickable region of the icon.\n        The type defines an HTML &lt;area&gt; element 'poly' which\n        traces out a polygon as a series of X,Y points. The final\n        coordinate closes the poly by connecting to the first\n        coordinate. */\n    }\n\n    function closeInfoWindow() {\n        infowindow.close();\n    }\n\n    function pastInitialPopUp() {\n        canCentreScreen = true;\n        centreScreenOnMap();\n    }\n\n    return {\n        setUsersGeoLocation: setUsersGeoLocation,\n        geocode: geocode,\n        boxclick: boxclick,\n        loadLocationInfoBox: loadLocationInfoBox,\n        initialise: initialize,\n        getDirectionsFromLocation: getDirectionsFromLocation,\n        viewMap: viewMap,\n        updateFromCurrentLocation: updateFromCurrentLocation,\n        drawDirections: drawDirections,\n        canUpdateLocation: canUpdateLocation,\n        getCurrentLocation: getCurrentLocation,\n        resizeGoogleMap: resizeGoogleMap,\n        getDistanceBetweenGeoLocations: getDistanceBetweenGeoLocations,\n        closeInfoWindow: closeInfoWindow,\n        pastInitialPopUp: pastInitialPopUp\n    };\n} ());\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Betting-v1/maps.legacy.js\n// module id = 307\n// module chunks = 5","/*** IMPORTS FROM imports-loader ***/\nvar jQuery = require(\"jquery\");\nvar _ = require(\"underscore\");\nvar legacyReturn = {};\nvar amplify = require(\"amplify\");\nvar cryptojsm5d = require(\"crypto-js/md5\");\nvar cryptojs = { MD5: cryptojsm5d };\nvar numeral = require(\"numeral\");\nvar swipe = require(\"swipe\");\nvar MSG = require(\"../Foundation/Services/MessageBusService\");\nvar LocationDetailsAppender = require(\"../Foundation/LocationDetailsAppender\");\nvar locking = require(\"../Foundation/Lock\");\nvar NAV = require(\"../Foundation/Navigation/Nav\");\nvar CMN = require(\"../Foundation/Common\");\nvar TT = require(\"../Foundation/TabTouch\");\nvar ErrorController = require(\"../Foundation/Error\");\nvar PreferencesService = require(\"../Foundation/Services/Preferences/PreferencesService\");\nvar TupleSpace = require(\"../Foundation/TupleSpace\");\nvar raceReplay = require(\"../Betting-v1/RaceReplay\");\nvar blackbookAddViewBinding = require(\"../Foundation/Components/Blackbook/myblackbook-add-viewbinding\");\nvar blackbookAddViewController = require(\"../Foundation/Components/Blackbook/myblackbook-add-viewcontroller\");\nvar NOTE = require(\"../Foundation/Notification\");\nvar jQueryToDictionary = require(\"jquery-todictionary\");\n\nvar requireExternal = require('requireExternal');\nvar defineExternal = require('defineExternal');\n\nrequire.ensure([], function() {\n    defineExternal('rx', function() { return require('rx'); });\n    defineExternal('react', function() { return require('react'); });\n    defineExternal('react-dom', function() { return require('react-dom'); });\n    defineExternal('rwwa-knockout', function() { return require('rwwa-knockout'); });\n    defineExternal('rwwa-native-interop', function() { return require('../AppUtils/Framework/NativeInterop/interop'); });\n    defineExternal('rwwa-rx-state-machine', function() { return require('rwwa-rx-state-machine'); });\n    defineExternal('rwwa-rest', function() { return require('rwwa-rest'); });\n    defineExternal('rwwa-host-signals', function() { return require('../AppUtils/Framework/Intent/index.js'); });\n    defineExternal('rwwa-analytics', function() { return require('../Foundation/Analytics/Analytics'); });\n}, 'extcomponents');\n\ndefineExternal('moment', function() { return require('moment'); });\ndefineExternal('immutable', function() { return require('immutable'); });\n\nfunction promiseRequire(url) {\n    return new Promise(function(resolve, reject) {\n        requireExternal([url], resolve, function(err) {  \n                requireExternal.undef(err.requireModules[0]);\n                reject(err);\n            }\n        );\n    });\n}\n\nlegacyReturn.ModalService = window.ModalService = {\n    deposit: function () {\n        var modal = require(\"../Foundation/Modal/Modal\");\n\n        var factory = function() {\n            return promiseRequire(\"/$_/accountDeposit/content/index.js\")\n                .then(function (module) {\n                    return function (el) {\n                        return module.run(el, {host: \"/$_/accountDeposit/\"});\n                    }\n                });\n        }\n\n        modal.open(\"Deposit\", { name: \"tt-remote\", params: { factory: factory }  });\n    },\n\n    accountActivity: function() {\n        var modal = require(\"../Foundation/Modal/Modal\");\n        modal.open();\n    },\n\n    raceForm: function (raceKey) {\n        var modal = require(\"../Foundation/Modal/Modal\");\n        var factory = function() {\n            return promiseRequire(\"/$_/racingform/content/index.js\")\n                .then(function(module) { return module.raceLevel(raceKey) });\n        }\n        modal.open(\"Giddy-Up\", { name: \"tt-remote\", params: { factory: factory } });\n    },\n\n    giddyUpGoodThings: function (date) {\n        var modal = require(\"../Foundation/Modal/Modal\");\n        var factory = function() {\n            return promiseRequire(\"/$_/racingform/content/index.js\")\n                .then(function(module) { return module.goodThings(date) });\n        }\n        modal.open(\"Giddy-Up Good Things\", { name: \"tt-remote\", params: { factory: factory } });\n    }\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Betting-v1/modal-service.legacy.js\n// module id = 308\n// module chunks = 5","/*** IMPORTS FROM imports-loader ***/\nvar jQuery = require(\"jquery\");\nvar _ = require(\"underscore\");\nvar legacyReturn = {};\nvar amplify = require(\"amplify\");\nvar cryptojsm5d = require(\"crypto-js/md5\");\nvar cryptojs = { MD5: cryptojsm5d };\nvar numeral = require(\"numeral\");\nvar swipe = require(\"swipe\");\nvar MSG = require(\"../Foundation/Services/MessageBusService\");\nvar LocationDetailsAppender = require(\"../Foundation/LocationDetailsAppender\");\nvar locking = require(\"../Foundation/Lock\");\nvar NAV = require(\"../Foundation/Navigation/Nav\");\nvar CMN = require(\"../Foundation/Common\");\nvar TT = require(\"../Foundation/TabTouch\");\nvar ErrorController = require(\"../Foundation/Error\");\nvar PreferencesService = require(\"../Foundation/Services/Preferences/PreferencesService\");\nvar TupleSpace = require(\"../Foundation/TupleSpace\");\nvar raceReplay = require(\"../Betting-v1/RaceReplay\");\nvar blackbookAddViewBinding = require(\"../Foundation/Components/Blackbook/myblackbook-add-viewbinding\");\nvar blackbookAddViewController = require(\"../Foundation/Components/Blackbook/myblackbook-add-viewcontroller\");\nvar NOTE = require(\"../Foundation/Notification\");\nvar jQueryToDictionary = require(\"jquery-todictionary\");\n\nlegacyReturn.Models = window.Models = window.Models || {};\nwindow.namespace(window.Models, \"Models\");\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Betting-v1/models.legacy.js\n// module id = 309\n// module chunks = 5","/*** IMPORTS FROM imports-loader ***/\nvar jQuery = require(\"jquery\");\nvar _ = require(\"underscore\");\nvar legacyReturn = {};\nvar amplify = require(\"amplify\");\nvar cryptojsm5d = require(\"crypto-js/md5\");\nvar cryptojs = { MD5: cryptojsm5d };\nvar numeral = require(\"numeral\");\nvar swipe = require(\"swipe\");\nvar MSG = require(\"../Foundation/Services/MessageBusService\");\nvar LocationDetailsAppender = require(\"../Foundation/LocationDetailsAppender\");\nvar locking = require(\"../Foundation/Lock\");\nvar NAV = require(\"../Foundation/Navigation/Nav\");\nvar CMN = require(\"../Foundation/Common\");\nvar TT = require(\"../Foundation/TabTouch\");\nvar ErrorController = require(\"../Foundation/Error\");\nvar PreferencesService = require(\"../Foundation/Services/Preferences/PreferencesService\");\nvar TupleSpace = require(\"../Foundation/TupleSpace\");\nvar raceReplay = require(\"../Betting-v1/RaceReplay\");\nvar blackbookAddViewBinding = require(\"../Foundation/Components/Blackbook/myblackbook-add-viewbinding\");\nvar blackbookAddViewController = require(\"../Foundation/Components/Blackbook/myblackbook-add-viewcontroller\");\nvar NOTE = require(\"../Foundation/Notification\");\nvar jQueryToDictionary = require(\"jquery-todictionary\");\n\nwindow.namespace = function (obj, parentName) {\n    var addNamespace = function (namespaceName) {\n        var parts = namespaceName.split('.'),\n        parent = obj,\n        iterator;\n\n        // strip redundant leading global\n        if (parts[0] === parentName) {\n            parts = parts.slice(1);\n        }\n\n        for (iterator = 0; iterator < parts.length; iterator += 1) {\n            // create a property if it doesn't exist\n            if (typeof parent[parts[iterator]] === \"undefined\") {\n                parent[parts[iterator]] = {};\n            }\n            parent = parent[parts[iterator]];\n        }\n        return parent;\n    };\n    obj.namespace = addNamespace;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Betting-v1/namespace.legacy.js\n// module id = 310\n// module chunks = 5","/*** IMPORTS FROM imports-loader ***/\nvar jQuery = require(\"jquery\");\nvar _ = require(\"underscore\");\nvar legacyReturn = {};\nvar amplify = require(\"amplify\");\nvar cryptojsm5d = require(\"crypto-js/md5\");\nvar cryptojs = { MD5: cryptojsm5d };\nvar numeral = require(\"numeral\");\nvar swipe = require(\"swipe\");\nvar MSG = require(\"../Foundation/Services/MessageBusService\");\nvar LocationDetailsAppender = require(\"../Foundation/LocationDetailsAppender\");\nvar locking = require(\"../Foundation/Lock\");\nvar NAV = require(\"../Foundation/Navigation/Nav\");\nvar CMN = require(\"../Foundation/Common\");\nvar TT = require(\"../Foundation/TabTouch\");\nvar ErrorController = require(\"../Foundation/Error\");\nvar PreferencesService = require(\"../Foundation/Services/Preferences/PreferencesService\");\nvar TupleSpace = require(\"../Foundation/TupleSpace\");\nvar raceReplay = require(\"../Betting-v1/RaceReplay\");\nvar blackbookAddViewBinding = require(\"../Foundation/Components/Blackbook/myblackbook-add-viewbinding\");\nvar blackbookAddViewController = require(\"../Foundation/Components/Blackbook/myblackbook-add-viewcontroller\");\nvar NOTE = require(\"../Foundation/Notification\");\nvar jQueryToDictionary = require(\"jquery-todictionary\");\n\nlegacyReturn.OFFERS = window.OFFERS = (function() {\n    function initOffersHelp() {\n        var buttonClass = \".js-offers-button\";\n        var offersPopup = jQuery('.js-offers-popup');\n        jQuery(document).off(\"click\", buttonClass)\n                    .on(\"click\", buttonClass, function (e) {\n            e.preventDefault();\n            CMN.showPopup(offersPopup);\n        });\n\n        offersPopup.click(function ()\n        {\n            offersPopup.fadeOut('fast');\n        });\n    }\n\n    return { initOffersHelp: initOffersHelp };\n})();\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Betting-v1/offers.legacy.js\n// module id = 311\n// module chunks = 5","/*** IMPORTS FROM imports-loader ***/\nvar jQuery = require(\"jquery\");\nvar _ = require(\"underscore\");\nvar legacyReturn = {};\nvar amplify = require(\"amplify\");\nvar cryptojsm5d = require(\"crypto-js/md5\");\nvar cryptojs = { MD5: cryptojsm5d };\nvar numeral = require(\"numeral\");\nvar swipe = require(\"swipe\");\nvar MSG = require(\"../Foundation/Services/MessageBusService\");\nvar LocationDetailsAppender = require(\"../Foundation/LocationDetailsAppender\");\nvar locking = require(\"../Foundation/Lock\");\nvar NAV = require(\"../Foundation/Navigation/Nav\");\nvar CMN = require(\"../Foundation/Common\");\nvar TT = require(\"../Foundation/TabTouch\");\nvar ErrorController = require(\"../Foundation/Error\");\nvar PreferencesService = require(\"../Foundation/Services/Preferences/PreferencesService\");\nvar TupleSpace = require(\"../Foundation/TupleSpace\");\nvar raceReplay = require(\"../Betting-v1/RaceReplay\");\nvar blackbookAddViewBinding = require(\"../Foundation/Components/Blackbook/myblackbook-add-viewbinding\");\nvar blackbookAddViewController = require(\"../Foundation/Components/Blackbook/myblackbook-add-viewcontroller\");\nvar NOTE = require(\"../Foundation/Notification\");\nvar jQueryToDictionary = require(\"jquery-todictionary\");\n\nlegacyReturn.POPUP = window.POPUP = new (function() {\n    var self = this;\n\n    var popupConfirmMsg = 'popup.ConfirmClick';\n    var popupCancelMsg = 'popup.CancelClick';\n    self.BUTTONTYPE = {\n        CONFIRMCANCEL: \"confirmCancel\",\n        Ok: \"ok\",\n        NONE: \"none\"\n    };\n\n    self.pageProvider = function() {\n        return {\n            popUpWindow: jQuery('#popup-window'),\n            confirmCancelButtonGroup: jQuery('#confirm-cancel-button-group'),\n            OkButtonGroup: jQuery('#okButtonGroup'),\n            closeButton: jQuery('#popup-window .close'),\n            confirmButton: jQuery('#confirmCancelButtonGroup').find('#popup-confirm-button'),\n            cancelButton: jQuery('#confirmCancelButtonGroup').find('#popup-cancel-button'),\n            confirmOkButton: jQuery('#okButtonGroup .close'),\n            popupHeaderElement: jQuery('#popup-header-text'),\n            popupMessageElement: jQuery('#popup-message-text'),\n            popupIconErrorElement: jQuery('#popup-icon-error'),\n            popupIconWarningElement: jQuery('#popup-icon-warning'),\n            buttonGroups: jQuery('.popup-button-group'),\n            messageContainer: jQuery('#messageContainer')\n        };\n    };\n\n    self.init = function() {\n        var page = self.pageProvider();\n        page.closeButton.click(function() {\n            page.popUpWindow.fadeOut('fast');\n            page.buttonGroups.hide();\n        });\n\n        page.confirmButton.click(function(e) {\n            e.preventDefault();\n            MSG.publish(popupConfirmMsg);\n            page.OkButtonGroup.hide();\n            page.confirmCancelButtonGroup.hide();\n        });\n\n        page.cancelButton.click(function() {\n            MSG.publish(popupCancelMsg);\n            page.OkButtonGroup.hide();\n            page.confirmCancelButtonGroup.hide();\n        });\n    };\n\n    MSG.subscribe('popup.showPopUp', function(data) {\n        if (data) {\n            show(data);\n        }\n    });\n\n    function show(data) {\n        var page = self.pageProvider();\n        page.buttonGroups.hide();\n        page.popupIconErrorElement.hide();\n        page.popupIconWarningElement.hide();\n\n        data.confirmButtonText && page.confirmButton.html(data.confirmButtonText);\n        data.cancelButtonText && page.cancelButton.html(data.cancelButtonText);\n\n        page.popupHeaderElement.html(data.headerText || '');\n        page.popupMessageElement.html(data.messageText || '');\n        (data.isError === true) && page.popupIconErrorElement.show();\n        (data.isWarning === true) && page.popupIconWarningElement.show();\n\n        if (data.buttonType !== self.BUTTONTYPE.NONE) {\n            jQuery('#' + data.buttonType + 'ButtonGroup').show();\n        }\n\n        CMN.showPopup(page.popUpWindow);\n\n        data.confirmCallback && MSG.subscribe(popupConfirmMsg, data.confirmCallback);\n    }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Betting-v1/popupservice.legacy.js\n// module id = 312\n// module chunks = 5","/*** IMPORTS FROM imports-loader ***/\nvar jQuery = require(\"jquery\");\nvar _ = require(\"underscore\");\nvar legacyReturn = {};\nvar amplify = require(\"amplify\");\nvar cryptojsm5d = require(\"crypto-js/md5\");\nvar cryptojs = { MD5: cryptojsm5d };\nvar numeral = require(\"numeral\");\nvar swipe = require(\"swipe\");\nvar MSG = require(\"../Foundation/Services/MessageBusService\");\nvar LocationDetailsAppender = require(\"../Foundation/LocationDetailsAppender\");\nvar locking = require(\"../Foundation/Lock\");\nvar NAV = require(\"../Foundation/Navigation/Nav\");\nvar CMN = require(\"../Foundation/Common\");\nvar TT = require(\"../Foundation/TabTouch\");\nvar ErrorController = require(\"../Foundation/Error\");\nvar PreferencesService = require(\"../Foundation/Services/Preferences/PreferencesService\");\nvar TupleSpace = require(\"../Foundation/TupleSpace\");\nvar raceReplay = require(\"../Betting-v1/RaceReplay\");\nvar blackbookAddViewBinding = require(\"../Foundation/Components/Blackbook/myblackbook-add-viewbinding\");\nvar blackbookAddViewController = require(\"../Foundation/Components/Blackbook/myblackbook-add-viewcontroller\");\nvar NOTE = require(\"../Foundation/Notification\");\nvar jQueryToDictionary = require(\"jquery-todictionary\");\n\n/**\n * Dependencies:\n *      [\"jQuery\", \"Nav\", \"Router\", \"LocationDetailsAppender\"]\n */\nlegacyReturn.SPECIALS = window.SPECIALS = (function(locationDetailsAppender) {\n    var sel = '';\n    var activeClass = \"ui-state-active\";\n\n    var narrowScreenMode = false;\n\n    function scrollToElement(element, scrollOffset) {\n        var elementOffset = element.offset().top;\n        var scrollTo = elementOffset + scrollOffset;\n        jQuery('html,body').animate({ scrollTop: scrollTo }, 500);\n\n        return false;\n    }\n\n    function getWidth() {\n        if (self.innerWidth) {\n            return self.innerWidth;\n        }\n\n        if (document.documentElement && document.documentElement.clientWidth) {\n            return document.documentElement.clientWidth;\n        }\n\n        if (document.body) {\n            return document.body.clientWidth;\n        }\n    }\n\n    function isNarrowScreen() {\n        var windowWidth = getWidth();\n        return windowWidth < 768;\n    }\n\n    function hideAllDetails() {\n        // Hide all offer details.\n        jQuery('.special-offer .terms').hide();\n        jQuery('.offer-details').hide();\n    }\n\n    // ajax post followed by a specific success action (e.g. redirect to another view)\n    // synopsis: see initPost()\n    function formPost(b, f, s, h) {\n        if (b.is('.disabled') === false) {\n            NAV.ajaxPost(\n                    b.attr('href'),\n                    locationDetailsAppender.addToUrlEncodedData(f.serialize()),\n                    s,\n                    {\n                        control: b,\n                        hideOverlay: (h === undefined) ? true : h\n                    }\n            );\n        }\n        return false;\n    }\n\n    function processRedirectResponse(data) {\n        if (data && data.RedirectUrl) {\n            window.location.hash = data.RedirectUrl.replace(\"/#\", \"#\");\n        }\n    }\n\n    //handles clicking on a race code tab on the meeting list page\n    function selectorTabSelect(a, listItem, override) {\n        var li = a.parent(\"li\");\n\n        if (override || !li.hasClass(activeClass)) {\n            NAV.ajaxGet(a.attr('href'), function (data) {\n                CMN.initDisplayListStyle(jQuery(listItem).html(data));\n            });\n\n            //change tab highlight\n            jQuery(\"div.nav-info li\").removeClass(activeClass);\n            li.addClass(activeClass);\n        }\n    }\n\n    function matchHeightsOfOffersOnRow() {\n        var $offerRow = jQuery('.special-offer-row');\n        $offerRow.each(function () {\n            var $this = jQuery(this),\n                maxH4Height = -1,\n                maxPHeight = -1,\n                maxIconHeight = -1;\n\n            $this.find('.special-offer h4').each(function(i) {\n                var $this = jQuery(this);\n                if (maxH4Height < $this.height()) {\n                    maxH4Height = $this.height();\n                }\n            });\n            $this.find('.special-offer h4').height(maxH4Height);\n\n            $this.find('.special-offer > p').each(function (i) {\n                var $this = jQuery(this);\n                if (maxPHeight < $this.height()) {\n                    maxPHeight = $this.height();\n                }\n            });\n            $this.find('.special-offer > p').height(maxPHeight);\n\n            $this.find('.special-offer .offer-icon').each(function (i) {\n                var $this = jQuery(this);\n                if (maxIconHeight < $this.height()) {\n                    maxIconHeight = $this.height();\n                }\n            });\n            $this.find('.special-offer .offer-icon').height(maxIconHeight);\n        });\n    }\n\n    function autoHeightOffersOnRow() {\n        jQuery('.special-offer h4').height('auto');\n        jQuery('.special-offer > p').height('auto');\n        jQuery('.special-offer .offer-icon').height('auto');\n    }\n\n    function initNextSpecials(url, backText) {\n        var listItem = 'div#next-specials-list';\n        var sel = \"#nextspecials-class-tabs li.ui-state-active a\";\n        TT.initCommon(url, backText);\n\n        jQuery(\"#nextspecials-class-tabs a\").click(function (e) {\n            NAV.navChange(jQuery(this).data('hash-url'));\n            return false;\n        });\n\n        jQuery('a.special-bet-now').click(function (e) {\n            e.preventDefault();\n            return formPost(jQuery('a.special-bet-now'),\n                    jQuery('form#next-specials-form'),\n                    processRedirectResponse,\n                    false);\n        });\n\n        selectorTabSelect(jQuery(sel), listItem, true);\n    }\n\n    function initSpecialsList(url, backText) {\n        narrowScreenMode = isNarrowScreen();\n        hideAllDetails();\n\n        if (narrowScreenMode === true) {\n            autoHeightOffersOnRow();\n        } else {\n            matchHeightsOfOffersOnRow();\n        }\n\n        jQuery('a.special-bet-now').click(function (e) {\n            e.preventDefault();\n\n            jQuery('#bet-now-sequence').val(jQuery(this).data('special-seq'));\n\n            formPost(jQuery('a.special-bet-now'),\n                    jQuery('form#next-specials-form'),\n                    processRedirectResponse,\n                    false);\n            return false;\n        });\n\n        jQuery('.special-offer').on('click', '.button.ghost.white', function (e) {\n\n            if (this.id === \"powerplay-terms-button\") {\n                //don't do anything for SuperPick\n                return;\n            }\n            e.preventDefault();\n\n            var $this = jQuery(this);\n            var scrollOffset = 0;\n            var openingOfferDetails = false;\n\n            // Are we narrow screen?\n            if (narrowScreenMode === true) {\n                // Yes. Get the relevent offer terms.\n                var $offerTerms = $this.closest('.list-options').next('.terms');\n\n                // Set the opening flag.\n                openingOfferDetails = !$offerTerms.is(':visible');\n\n                // Toggle the terms.\n                $offerTerms.slideToggle();\n            } else {\n                // No. Get the relevent offer.\n                var $clickedOfferDetails = jQuery('#offerid-' + $this.data('offerid'));\n\n                // Are there any visible siblings?\n                var $visibleSiblings = $clickedOfferDetails.siblings(':visible');\n                if ($visibleSiblings.length > 0) {\n                    // Yes, hide them and show this one.\n                    $visibleSiblings.hide();\n                    $clickedOfferDetails.show();\n                } else {\n                    // No. Are we opening this one?\n                    openingOfferDetails = !$clickedOfferDetails.is(':visible');\n                    if (openingOfferDetails === true) {\n                        // Yes. Get the top of next special divider.\n                        var $nextVisibleTop = $clickedOfferDetails.parent().next('.special-divider').offset().top;\n\n                        // Iterate through all the open terms (there should be zero or one, but this will rectify any errors)\n                        jQuery('.offer-details:visible').each(function () {\n                            var $element = jQuery(this);\n\n                            // If this open term is higher on page than the one we're opening, store its offset so we scroll to the correct position.\n                            if ($element.offset().top < $nextVisibleTop) {\n                                scrollOffset -= $element.height();\n                            }\n                            $element.slideUp();\n                        });\n                    }\n\n                    // Toggle the selected details.\n                    $clickedOfferDetails.slideToggle();\n                }\n            }\n\n            // Are we opening?\n            if (openingOfferDetails === true) {\n                // Yes. Scroll to the special offer.\n                var $specialOffer = $this.closest('.special-offer');\n                scrollToElement($specialOffer, scrollOffset);\n            }\n        });\n    }\n\n    jQuery(window).resize(function () {\n        var isNarrow = isNarrowScreen();\n        if (isNarrow === true && narrowScreenMode === false) {\n            hideAllDetails();\n            autoHeightOffersOnRow();\n            narrowScreenMode = true;\n        } else if (isNarrow === false && narrowScreenMode === true) {\n            matchHeightsOfOffersOnRow();\n            narrowScreenMode = false;\n        }\n    });\n\n    return {\n        initNextSpecials: initNextSpecials,\n        initSpecialsList: initSpecialsList\n    };\n})(new LocationDetailsAppender());\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Betting-v1/specials.legacy.js\n// module id = 313\n// module chunks = 5","/*** IMPORTS FROM imports-loader ***/\nvar jQuery = require(\"jquery\");\nvar _ = require(\"underscore\");\nvar legacyReturn = {};\nvar amplify = require(\"amplify\");\nvar cryptojsm5d = require(\"crypto-js/md5\");\nvar cryptojs = { MD5: cryptojsm5d };\nvar numeral = require(\"numeral\");\nvar swipe = require(\"swipe\");\nvar MSG = require(\"../Foundation/Services/MessageBusService\");\nvar LocationDetailsAppender = require(\"../Foundation/LocationDetailsAppender\");\nvar locking = require(\"../Foundation/Lock\");\nvar NAV = require(\"../Foundation/Navigation/Nav\");\nvar CMN = require(\"../Foundation/Common\");\nvar TT = require(\"../Foundation/TabTouch\");\nvar ErrorController = require(\"../Foundation/Error\");\nvar PreferencesService = require(\"../Foundation/Services/Preferences/PreferencesService\");\nvar TupleSpace = require(\"../Foundation/TupleSpace\");\nvar raceReplay = require(\"../Betting-v1/RaceReplay\");\nvar blackbookAddViewBinding = require(\"../Foundation/Components/Blackbook/myblackbook-add-viewbinding\");\nvar blackbookAddViewController = require(\"../Foundation/Components/Blackbook/myblackbook-add-viewcontroller\");\nvar NOTE = require(\"../Foundation/Notification\");\nvar jQueryToDictionary = require(\"jquery-todictionary\");\n\nModels.namespace('Models.BetSlip');\nModels.BetSlip.SummaryPanel = (function () {\n    \"use strict\";\n    //Selectors\n    var numberOfBetsSelector = '#numberOfBets',\n        totalCostSelector = '#totalBetSlipCost';\n\n    //Accessors\n    var setNumberOfBets = function(numberOfBets) {\n        jQuery(numberOfBetsSelector).text(numberOfBets + \" Bet\" + (numberOfBets == 1 ? \"\" : \"s\"));\n    },\n\n    setTotalCost = function (totalCost) {\n        if (_.isNumber(totalCost)) {\n            jQuery(totalCostSelector).text('$' + totalCost.toFixed(2));\n        }\n    };\n\n    return {\n        setNumberOfBets: setNumberOfBets,\n        setTotalCost: setTotalCost\n    };\n})();\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Betting-v1/summarypanel.legacy.js\n// module id = 314\n// module chunks = 5","/*** IMPORTS FROM imports-loader ***/\nvar jQuery = require(\"jquery\");\nvar _ = require(\"underscore\");\nvar legacyReturn = {};\nvar amplify = require(\"amplify\");\nvar cryptojsm5d = require(\"crypto-js/md5\");\nvar cryptojs = { MD5: cryptojsm5d };\nvar numeral = require(\"numeral\");\nvar swipe = require(\"swipe\");\nvar MSG = require(\"../Foundation/Services/MessageBusService\");\nvar LocationDetailsAppender = require(\"../Foundation/LocationDetailsAppender\");\nvar locking = require(\"../Foundation/Lock\");\nvar NAV = require(\"../Foundation/Navigation/Nav\");\nvar CMN = require(\"../Foundation/Common\");\nvar TT = require(\"../Foundation/TabTouch\");\nvar ErrorController = require(\"../Foundation/Error\");\nvar PreferencesService = require(\"../Foundation/Services/Preferences/PreferencesService\");\nvar TupleSpace = require(\"../Foundation/TupleSpace\");\nvar raceReplay = require(\"../Betting-v1/RaceReplay\");\nvar blackbookAddViewBinding = require(\"../Foundation/Components/Blackbook/myblackbook-add-viewbinding\");\nvar blackbookAddViewController = require(\"../Foundation/Components/Blackbook/myblackbook-add-viewcontroller\");\nvar NOTE = require(\"../Foundation/Notification\");\nvar jQueryToDictionary = require(\"jquery-todictionary\");\n\nimport * as requireExternal from 'requireExternal'\n\nlegacyReturn.TOTE = window.TOTE = (function(requireExternal, addBetSlipController, calculatorModel, errorController, toteBettingService, calculatorController, betSlipService, preferencesService, locationDetailsAppender) {\n\n    var states = { none: \"\", allup: \"allup\", calc: \"calc\", confirm: \"confirm\", receipt: \"receipt\" };\n\n    //common strings\n    var disabled = \"disabled\", selected = \"selected\", checked = \"checked\", activeClass = \"ui-state-active\", startersFormValueExpanded = \"\";\n\n    var showClosedMeetings = true;\n    var selectorClosedMeetings = '#meetings-list .finished';\n\n    function getTotePyos() {\n        return new Promise(function(resolve) {\n            require(['../Foundation/ViewModels/TotePyosViewModel'], function(viewModel) {\n                resolve(viewModel);\n            });\n        });\n    }\n\n    function initToteMeetings(url, backText) {\n        var listItem = 'div#meetings-list';\n        var sel = \"#race-class-tabs li.ui-state-active a\";\n        TT.initCommon(url, backText);\n\n        jQuery(\"#meetings-list\").on(\"click\", \".meetings-list li\", function (e) {\n            e.preventDefault();\n            NAV.navChange(jQuery(this).children(\"a.meeting-info\").attr(\"href\"));\n        });\n\n        jQuery(\"#race-class-tabs a\").click(function(e) {\n            NAV.navChange(jQuery(this).data('hash-url'));\n            return false;\n        });\n\n        jQuery(\"div.date-selector a\").click(function() {\n            NAV.navChange(jQuery(this).attr('href'));\n            return false;\n        });\n\n        updateShowHideMeetings();\n        jQuery('.button-group a.button.hide-closed')\n            .click(function(e) {\n                e.preventDefault();\n                if (jQuery(this).is('.disabled') === false) {\n                    showClosedMeetings = !showClosedMeetings;\n                    updateShowHideMeetings();\n                    if (showClosedMeetings) {\n                        jQuery(selectorClosedMeetings).slideDown();\n                    } else {\n                        jQuery(selectorClosedMeetings).slideUp();\n                    }\n                }\n            });\n\n        selectorTabSelect(jQuery(sel), listItem, true);\n    }\n\n    function updateShowHideMeetings() {\n        CMN.setDisableState(jQuery(\".button-group a.button.hide-closed#show-closed\"), !showClosedMeetings);\n        CMN.setDisableState(jQuery(\".button-group a.button.hide-closed#hide-closed\"), showClosedMeetings);\n    }\n\n    function initNextEvents(url, backText) {\n        var listItem = 'ul#next-events-list';\n        var sel = \"#nextevents-class-tabs li.ui-state-active a\";\n        TT.initCommon(url, backText);\n\n        jQuery(\"#nextevents-class-tabs a\").click(function(e) {\n            e.preventDefault();\n            selectorTabSelect(jQuery(this), listItem);\n            return false;\n        });\n\n        selectorTabSelect(jQuery(sel), listItem, true);\n    }\n\n    function refreshToteStarterList(url, backText, isQuinella) {\n        initToteStarterList(url, backText, isQuinella, false, true);\n    }\n\n    function initToteStarterList(url, backText, isQuinella, isAllUp, isRefresh) {\n        if (!isRefresh) {\n            TT.initCommon(url, backText);\n        }\n        initPoolSelector();\n        initPoolSelection();\n        initBetTypeChange(isQuinella, isAllUp);\n        OFFERS.initOffersHelp();\n        initDrawerOption();\n        showborder();\n        CMN.initSlideToggleHandlers();\n        initErrorWindow();\n    }\n\n    function initErrorWindow() {\n        jQuery('#error-window').on('click', '.refresh-starters', {}, function(e) {\n            e.preventDefault();\n            refreshStarters();\n        });\n    }\n\n    function initShortformToggle() {\n        jQuery(\".form-button\").click(onClickSilk);\n        jQuery(\".form-button\").each(function() {\n            if (jQuery(this).siblings(\".shortform\").children().length > 0) {\n                jQuery(this).css('cursor', 'pointer');\n            } else {\n                jQuery(this).removeClass('form-button');\n            }\n        });\n\n        jQuery('.form-long .formlist').hide();\n        jQuery('.form-long h6').click(function() {\n            jQuery(this).toggleClass('expanded');\n            jQuery(this).next('.formlist').slideToggle();\n        });\n    }\n\n    function onClickSilk(e) {\n        e.stopPropagation();\n        if (jQuery(this).siblings(\".shortform\").children().length > 0) {\n            jQuery(this).siblings(\".shortform\").slideToggle(400, showborder);\n            if (jQuery(this).is(':visible')) {\n                CMN.redrawFix(jQuery(this));\n            }\n            closeDrawer();\n        }\n    }\n\n    function initDrawerOption() {\n        jQuery('body').click(function() {\n            closeDrawer();\n        });\n        jQuery('.drawer-options li:last').addClass('last');\n\n\n        jQuery('a.drawer').click(function(e) {\n            e.preventDefault();\n\n            if (jQuery(this).is(\":hidden\")) {\n                return;\n            }\n\n            jQuery(this).toggleClass('open');\n\n            if (jQuery(this).hasClass('open')) {\n                jQuery(\".drawer-options\").slideDown('fast');\n            } else {\n                jQuery(\".drawer-options\").slideUp('fast');\n            }\n\n            e.stopPropagation();\n\n            var p = jQuery(\".pools\");\n            if (p.is(\":visible\")) {\n                p.slideUp('fast');\n            }\n        });\n\n        jQuery('a.drawer-button').click(function(e) {\n            e.preventDefault();\n            jQuery(\".drawer-options\").delay(1500).slideUp(300);\n            jQuery('a.drawer').toggleClass('open');\n        });\n\n        jQuery('a.drawer-button.quaddie-prov-divs').click(function(e) {\n            e.preventDefault();\n            jQuery('a.drawer-button.quaddie-prov-divs').toggleClass('active-option');\n        });\n\n        jQuery('a.drawer-button.double-prov-divs').click(function(e) {\n            e.preventDefault();\n            jQuery('a.drawer-button.double-prov-divs').toggleClass('active-option');\n        });\n\n        jQuery('a.drawer-button.all-form').click(function(e) {\n            e.preventDefault();\n            jQuery('a.drawer-button.all-form').toggleClass('active-option');\n        });\n\n        jQuery(function() {\n            jQuery(\".all-form\").click(function(e) {\n                e.preventDefault();\n                var button = jQuery(this);\n                starterSlideToggle('.shortform', button);\n            });\n\n            jQuery(\".double-prov-divs\").click(function(e) {\n                e.preventDefault();\n                var button = jQuery(this);\n                starterSlideToggle('.provisional-dividends-double', button);\n            });\n\n            jQuery(\".quaddie-prov-divs\").click(function(e) {\n                e.preventDefault();\n                var button = jQuery(this);\n                starterSlideToggle('.provisional-dividends-quaddie', button);\n            });\n        });\n\n    }\n\n    function starterSlideToggle(slideClass, button) {\n        if (button.hasClass('active-option')) {\n            jQuery(slideClass).show();\n            if (button.hasClass('bottom')) {\n                jQuery('html:not(:animated),body:not(:animated)').animate({ scrollTop: 50000 }, 2, null);\n            }\n\n        } else {\n            jQuery(slideClass).hide();\n        }\n\n        jQuery(slideClass).each(function() { showborder(jQuery(this)); });\n    }\n\n    function setAllForm() {\n        if ((jQuery(\".shortform:visible\").length < jQuery(\".shortform\").length) || (jQuery(\".shortform\").length == 0)) {\n            jQuery('a.drawer-button.all-form').removeClass(\"active-option\");\n        } else {\n            jQuery('a.drawer-button.all-form').addClass(\"active-option\");\n        }\n    }\n\n    function showborder(shortform) {\n        if (!shortform) {\n            shortform = jQuery(this);\n        }\n\n        if (shortform.is(':visible')) {\n            CMN.redrawFix(shortform);\n        }\n\n        setAllForm();\n\n        shortform.parent().children('.bottom-border').removeClass('visible');\n        shortform.parent().children(\".ex-option\").each(function() {\n            if (jQuery(this).parent().children(\".ex-option\").is(\":visible\")) {\n                jQuery(this).parent().children('.bottom-border').addClass('visible');\n            }\n        });\n\n    };\n\n    function closeDrawer() {\n        jQuery(\".drawer-options\").slideUp('fast');\n        jQuery(\"a.drawer\").removeClass('open');\n    }\n\n    function initToteMystery(url, backText, isForCustomise) {\n        TT.initCommon(url, backText);\n        initMysteryCalculator();\n        OFFERS.initOffersHelp();\n        jQuery(\".calculator-buttons\").removeAttr(\"style\");\n        jQuery(\"a#bettingFormNext\").click(function(e) {\n            e.preventDefault();\n            if (jQuery(this).is('.disabled') === false) {\n                NAV.ajaxPost(jQuery(this).attr('href'),\n                    jQuery('form#mystery').serialize(),\n                    processMysteryResponse,\n                    {\n                        control: jQuery('#mystery-bet')\n                    }\n                );\n            }\n            return false;\n        });\n\n\n        jQuery(\"#addToBetSlip\").click(function(e) {\n            e.preventDefault();\n            if (jQuery(this).is('.disabled') === false) {\n                var numberOfBets;\n                if (isForCustomise == undefined || isForCustomise === false) {\n                    numberOfBets = jQuery(\"#NumberOfBets\").val();\n                } else {\n                    numberOfBets = jQuery(\"#numberOfBets\").val();\n                }\n                var $addToBetSlip = jQuery('#addToBetSlip');\n                betSlipService.addBatchBetsToBetSlip(numberOfBets, $addToBetSlip.attr('href'), jQuery(\"form#mystery\").serialize(), $addToBetSlip.attr('data-betslipurl'));\n            }\n        });\n\n        updateBetWithButtonsForCash();\n    }\n\n    function updateBetWithButtonsForCash() {\n        var cashBettingEnabled = preferencesService.cashBettingEnabled();\n        var placeInStoreButton = jQuery('#placeInStoreButton');\n        addBetSlipController.bindAddToWalletButtonClickHandler(placeInStoreButton, function() {\n            MSG.publish('bet.cash.selected', 'single');\n            return jQuery(\"form#mystery\").serialize();\n        });\n        jQuery('#bettingFormNext').toggleClass('halfwidth', cashBettingEnabled);\n        jQuery('#bettingFormNext').toggleClass('fullwidth', !cashBettingEnabled);\n        placeInStoreButton.toggle(cashBettingEnabled);\n    }\n\n    //handles clicking on a race code tab on the meeting list page\n    function selectorTabSelect(a, listItem, override) {\n        var li = a.parent(\"li\");\n\n        if (override || !li.hasClass(activeClass)) {\n            NAV.ajaxGet(a.attr('href'), function(data) {\n                CMN.initDisplayListStyle(jQuery(listItem).html(data));\n            });\n\n            //change tab highlight\n            jQuery(\"div.nav-info li\").removeClass(activeClass);\n            li.addClass(activeClass);\n        }\n    }\n\n    function changeToteStarterState(newState, data) {\n        var nav = jQuery('.previous-race-button, .next-race-button, .page-heading .refresh-button');\n        var navInfoContainer = jQuery('#nav-info-container');\n        var betconfirm = '#bet-confirm';\n\n        switch (newState) {\n        case states.calc:\n            var operation = getTotePyos()\n                .then(function (pyos) {\n                    return pyos.initBetSelection();\n                }).then(function() {\n                    calculatorController.activate();\n                    jQuery(window).scrollTop(0);\n                });\n            NAV.pushLoadingFor(operation);\n            break;\n\n        case states.confirm:\n            jQuery('.multi-options').hide();\n            nav.hide();\n            jQuery('#race-details, form#betting-form > div').hide();\n            jQuery(betconfirm).html(data).show();\n\n            OFFERS.initOffersHelp();\n            initPlaceBetNow();\n\n            NAV.overrideBack(function() {\n                changeToteStarterState(states.calc);\n                return false;\n            });\n            navInfoContainer.hide();\n            if (jQuery('#specialOffersFaultMessage').length) {\n                getTotePyos().then(function (pyos) {\n                    pyos.clearErrorMessage();\n                });\n            }\n            jQuery(window).scrollTop(0);\n            break;\n\n        case states.receipt:\n            jQuery('.multi-options').hide();\n            nav.hide();\n            jQuery(betconfirm).html(data).show();\n            CMN.initDisplayListStyle(jQuery('#bet-confirm ul.display-list'));\n            NAV.hideBack();\n            navInfoContainer.hide();\n            getTotePyos().then(function (pyos) {\n                pyos.clear();\n            });\n            jQuery(window).scrollTop(0);\n            break;\n\n        case states.allup:\n            nav.hide();\n            jQuery('#race-details, form#betting-form > div, .bet-amount-container, .sort-group').hide();\n            jQuery('#pool-type-container').html(data);\n            getTotePyos().then(function (pyos) {\n                pyos.clear();\n            });\n            jQuery(window).scrollTop(0);\n            break;\n\n        case states.none:\n            jQuery('.multi-options').show();\n            nav.show();\n            navInfoContainer.show();\n            jQuery('.hidden-calculator').hide();\n            jQuery('#race-details, #pool-type-container, #bet-content, .my-selections, .bet-amount-container, .prefill-options, .prov-divs, .sort-group, #fixed-bet-info, span#pay-tote, span#pay-fixed, #int-rules, #special-info').show();\n            jQuery(betconfirm).hide().html(\"\");\n            TOTESEL.changeToTab(jQuery(\"input#SelectedTab\").val());\n            NAV.resetBack(\"Back\");\n            getTotePyos().then(function (pyos) {\n                pyos.clear();\n            });\n            jQuery(window).scrollTop(0);\n            break;\n\n        default:\n            break;\n        }\n    }\n\n    //Returns the bet to a new state after an error has occurred\n    //only supported states are none and calculator (which don't require data).\n    function handleBetError(newState, refresh) {\n        NAV.hideErrorPopup();\n        if (refresh) {\n            refreshStarters(null, newState, true);\n        } else {\n            changeToteStarterState(newState);\n        }\n        return false;\n    }\n\n    function changeToteMysteryState(newState, data) {\n        var title = '.page-heading .refresh-button',\n            confirm = '#mystery-confirm';\n\n        switch (newState) {\n        case states.confirm:\n            jQuery(title).hide();\n            jQuery('#mystery-selections').hide();\n            jQuery(confirm).html(data).show();\n            CMN.initDisplayListStyle(jQuery('#mystery-confirm ul.display-list'));\n            OFFERS.initOffersHelp();\n            NAV.overrideBack(function() {\n                changeToteMysteryState(states.none);\n                return false;\n            });\n            break;\n\n        case states.receipt:\n            jQuery(title).hide();\n            jQuery(confirm).hide();\n            jQuery('#mystery-receipt').html(data).show();\n            CMN.initDisplayListStyle(jQuery('#mystery-receipt ul.display-list'));\n            NAV.hideBack();\n            break;\n\n        default:\n            jQuery(title).show();\n            jQuery(confirm).hide();\n            jQuery('#mystery-receipt').hide();\n            jQuery('#mystery-selections').show();\n            NAV.resetBack(\"Tote\");\n            updateMysteryCalculator();\n            break;\n        }\n\n        //always scroll back to the top on a screen change.\n        jQuery(window).scrollTop(0);\n    }\n\n    //Returns to the start of the mystery bet after an error has occurred\n    function handleMysteryError() {\n        NAV.hideErrorPopup();\n        changeToteMysteryState(states.none);\n        return false;\n    }\n\n    /* ---------------------\n    Betting Start\n    --------------------- */\n\n    function initProposeBet() {\n        jQuery(\"a#bettingFormNext\").click(function() {\n            createBetProposal(this);\n            return false;\n        });\n    }\n\n    function createBetProposal(element) {\n        if (jQuery(element).is('.disabled') === false) {\n            getTotePyos().then(function(pyos) {\n                return pyos.validate();\n            }).then(function () {\n                NAV.ajaxPost(jQuery(element).attr('href'),\n                    jQuery('form#betting-form').serialize(),\n                    processProposeBetResponse);\n            }).catch(function () {\n                NAV.scrollTo('#content');\n            });\n        }\n    }\n\n    function setFobMarketConditionsRules() {\n        if (TOTESEL.isSpecialFobPropositionSelected()) {\n            var bettingConditions = '';\n            var bettingRules = '';\n            if (TOTESEL.isInsideOutsideSelected()) {\n                bettingConditions = jQuery('p#inside-outside-bet-conditions').clone().children().remove().end().text();\n                bettingRules = jQuery('p#inside-outside-bet-rules').clone().children().remove().end().text();\n            } else if (TOTESEL.isOddsEvensSelected()) {\n                bettingConditions = jQuery('p#odds-evens-bet-conditions').clone().children().remove().end().text();\n                bettingRules = jQuery('p#odds-evens-bet-rules').clone().children().remove().end().text();\n            }\n            jQuery('#FixedMarketConditions').val(bettingConditions);\n            jQuery('#FixedMarketRules').val(bettingRules);\n        }\n    }\n\n    function initAddToteRacingToBetSlip() {\n        var $addToBetSlip = jQuery('#addToBetSlip');\n        betSlipService.addBetSlipClickHandler(\n            $addToBetSlip,\n            function() {\n                setFobMarketConditionsRules();\n                return jQuery(\"form#betting-form\").serialize();\n            },\n            false,\n            function() {\n                if (jQuery(\"#PyosSelectedSpecial\\\\.SpecialSeq\").val()) {\n                    errorController.showErrorPopup(\"SuperPick is not available for Bet Slip.\", null);\n                    return false;\n                }\n                return true;\n            });\n        var cashBettingEnabled = preferencesService.cashBettingEnabled();\n        var placeInStoreButton = jQuery('#placeInStoreButton');\n        addBetSlipController.bindAddToWalletButtonClickHandler(placeInStoreButton, function() {\n            MSG.publish('bet.cash.selected', 'single');\n            return jQuery(\"form#betting-form\").serialize();\n        }, function() {\n            if (jQuery(\"#PyosSelectedSpecial\\\\.SpecialSeq\").val()) {\n                errorController.showErrorPopup(\"SuperPick is not available for Cash Betting.\", null);\n                return false;\n            }\n            return true;\n        });\n        jQuery('#bettingFormNext').toggleClass('halfwidth', cashBettingEnabled);\n        jQuery('#bettingFormNext').toggleClass('fullwidth', !cashBettingEnabled);\n        placeInStoreButton.toggle(cashBettingEnabled);\n    }\n\n    function processProposeBetResponse(data) {\n        changeToteStarterState(states.confirm, data);\n        MSG.publish('bet.single.review');\n        //update the display of selections, unless the server has written something\n        if (jQuery('ul.proposed-selections li').length == 0) {\n            jQuery('ul.proposed-selections').empty().append(TOTESEL.getAllSelections());\n        }\n\n        //copy the updated fixed odds places paying data over, if it exists\n        if (jQuery('#EnquiryPlacesPaying').length) {\n            jQuery('#FixedPlacesPaying').val(jQuery('#EnquiryPlacesPaying').val());\n\n            //and also copy the betting conditions etc over.\n            var refreshedBetInfo = jQuery(\"#fixed-odds-info-refresh\").html();\n            if (!refreshedBetInfo) {\n                refreshedBetInfo = jQuery('#fixed-bet-info-prop .bet-info').html();\n            }\n            jQuery('#fixed-win-bet-info .bet-info').html(refreshedBetInfo);\n        }\n\n        CMN.initDisplayListStyle(jQuery('#bet-confirm ul.display-list'));\n    }\n\n    function initPlaceBetNow() {\n        jQuery(\"a#placeBetNow\").click(function() {\n            if (jQuery(this).is('.disabled') === false) {\n                NAV.ajaxPost(jQuery(this).attr('href'),\n                    locationDetailsAppender.addToUrlEncodedData(jQuery('form#betting-form').serialize()),\n                    processBetPlacedResponse,\n                    {\n                        control: jQuery(this)\n                    }\n                );\n            }\n            return false;\n        });\n    }\n\n    function processBetPlacedResponse(data) {\n        changeToteStarterState(states.receipt, data);\n\n        var ticket = jQuery('ul').find(':contains(\"Ticket\")').find('span.data').html();\n        var toteBetValue = jQuery('ul').find(':contains(\"Total Cost\")').find('span.data').html();\n        var fobWinValue = jQuery('ul').find(':contains(\"Win Bet Amount\")').find('span.data').html();\n        var fobPlaceValue = jQuery('ul').find(':contains(\"Place Bet Amount\")').find('span.data').html();\n        var specialOffer = jQuery('[data-key=\"special-offer-title\"]').html();\n        var betType = (toteBetValue) ? 'toteracing' : 'fobracing';\n\n        MSG.publish('bet.single.receipt', {\n            betType: betType,\n            ticket: ticket,\n            toteBetValue: toteBetValue,\n            fobWinValue: fobWinValue,\n            fobPlaceValue: fobPlaceValue,\n            specialOffer: jQuery.trim(specialOffer)\n        });\n    }\n\n    /* ---------------------\n    Betting Finish\n    --------------------- */\n\n    function initAllUpRaceSelectionPopup() {\n        jQuery(\"a.edit-box\").click(function() {\n            if (jQuery(this).is('.disabled') === false) {\n\n                NAV.ajaxPost(jQuery(this).attr('href'),\n                    jQuery('form#betting-form').serialize(),\n                    processAllUpRaceSelectionResponse,\n                    {\n                        control: jQuery(this)\n                    }\n                );\n            }\n\n            return false;\n        });\n    }\n\n    function processAllUpRaceSelectionResponse(data) {\n        CMN.showPopup(jQuery('#allup-window').html(data));\n\n        jQuery('#allup-window a.black-x').click(function() {\n            jQuery('#allup-window').fadeOut('fast');\n            CMN.setDisableState(jQuery(\"a.edit-box\"), true);\n            return false;\n        });\n\n        jQuery('#allup-window a.allup-cancel').click(function() {\n            jQuery('#allup-window').fadeOut('fast');\n            CMN.setDisableState(jQuery(\"a.edit-box\"), true);\n            return false;\n        });\n\n        jQuery('div#allup-window span').click(function() {\n            var numSel = jQuery('div#allup-window span.selected').length;\n            if (jQuery(this).hasClass(selected)) {\n                numSel--;\n                jQuery(this).removeClass(selected);\n            } else {\n                if (numSel < 6) {\n                    numSel++;\n                    jQuery(this).addClass(selected);\n                }\n            }\n\n            CMN.setDisableState(jQuery('a.allup-ok'), (numSel > 1));\n            return false;\n        });\n\n        jQuery('div#allup-window a.allup-ok').click(function() {\n            refreshAllUpRaces();\n            return false;\n        });\n    }\n\n    function refreshAllUpRaces() {\n        var selRaces = jQuery('div#allup-window  span.selected');\n        var numSel = selRaces.length;\n        var newRaceSelection = -1;\n        var prevRaceIndex = jQuery(\"input#SelectedTab\").val();\n        var currentRaceIndex = -1;\n\n        if (numSel > 1 && numSel < 7) {\n            var selectedRaces = [];\n            var i = 0;\n\n            selRaces.each(function() {\n                selectedRaces[i++] = jQuery(this).text().replace('R', '');\n            });\n\n            var currentRaces = jQuery(\"#RaceSelections\").val().split(',');\n\n            var tab = TOTESEL.getRaceTabByIndex(jQuery(\"input#SelectedTab\").val());\n\n            var currentTabExist = false;\n\n            for (i = 0; i < selectedRaces.length; i++) {\n\n                if (selectedRaces[i] == tab.getRaceNumber()) {\n                    currentTabExist = true;\n                    currentRaceIndex = i;\n                }\n\n                var raceExists = false;\n\n                for (var j = 0; j < currentRaces.length; j++) {\n\n                    if (selectedRaces[i] == currentRaces[j]) {\n                        raceExists = true;\n                        break;\n                    }\n                }\n\n                //Must be a new race, exist on the first one found\n                if (raceExists == false) {\n                    newRaceSelection = i;\n                    break;\n                }\n            }\n\n            //no new race and current selected race is gone     :     select next race\n            //races the same or some removed but current selected race present:     status quo\n            //new races selected, select first of those new races.\n            if (newRaceSelection == -1) {\n                if (currentTabExist == false) {\n                    if (prevRaceIndex > selectedRaces.length - 1) {\n                        newRaceSelection = selectedRaces.length - 1;\n                    } else {\n                        newRaceSelection = prevRaceIndex;\n                    }\n\n                } else {\n                    newRaceSelection = currentRaceIndex;\n                }\n            }\n\n            //Override selected tabs\n            jQuery(\"#RaceSelections\").val(selectedRaces.join());\n\n            TOTESEL.saveSelections();\n\n            //Select new/old tab based on rules above\n            jQuery(\"input#SelectedTab\").val(newRaceSelection);\n\n            resyncAllUpRaceTabs();\n\n            refreshStarters(null, null, false);\n        }\n    }\n\n    function resyncAllUpRaceTabs() {\n        var selRaces = jQuery('div#allup-window  span.selected');\n        var newTabSelectionsArray = [];\n\n        for (var i = 0; i < selRaces.length; i++) {\n\n            var race = selRaces[i];\n\n            var title = race.textContent;\n\n            if (selRaces.length <= 3) {\n                title = race.textContent.replace('R', 'Race ');\n            }\n\n            var tab = TOTESEL.getRaceTabByRaceNumber(race.textContent.replace('R', ''));\n\n            if (tab == null) {\n                tab = TOTESEL.createRaceTab(race.textContent.replace('R', ''), false, 0, false, title, false);\n            }\n\n            newTabSelectionsArray.push(tab);\n        }\n\n        TOTESEL.replaceRaceTabs(newTabSelectionsArray);\n    }\n\n    /* ---------------------\n    Calculator Start\n    --------------------- */\n    function initBetCostPopup() {\n        jQuery(\"a#betcost\").click(function() {\n            if (jQuery(this).is('.disabled') === false) {\n\n                NAV.ajaxPost(jQuery(this).attr('href'),\n                    jQuery('form#betting-form').serialize(),\n                    processBetCostResponse,\n                    {\n                        control: jQuery(this)\n                    }\n                );\n            }\n\n            return false;\n        });\n    }\n\n    function processBetCostResponse(data) {\n        CMN.showPopup(jQuery('#how-much').html(data));\n\n        jQuery('#how-much').click(function() {\n            jQuery(this).fadeOut('fast', function() {\n                CMN.setDisableState(jQuery(\"a#betcost\"), true);\n            });\n        });\n    }\n\n    function initMysteryCalculator() {\n        jQuery('#mystery-confirm').hide();\n        jQuery('#mystery-receipt').hide();\n\n        jQuery(\"button#reset\").click(function() {\n            jQuery(\"span.mystery-bet-quantity\").text(\"0\");\n            jQuery('div.calculator ul li button').removeClass(selected);\n            updateMysteryCalculator();\n        });\n        jQuery(\"form#mystery ul.mystery-bets li a\").click(function() {\n            if (!jQuery(this).parent('li').hasClass(disabled)) {\n                jQuery(\"form#mystery ul.mystery-bets li\").removeClass(selected);\n                jQuery(this).parent(\"li\").addClass(selected);\n                jQuery(\"input#MysteryKey\").val(jQuery(this).children(\"input.key\").val());\n                jQuery(\"span.mystery-bet-cost\").text(jQuery(this).children(\"input.cost\").val());\n                updateMysteryCalculator();\n            }\n        });\n        jQuery(\"div.calculator ul li button\").not(\"#reset\").click(function() {\n            jQuery(\"span.mystery-bet-quantity\").text(jQuery(this).val());\n            jQuery('div.calculator ul li button').removeClass(selected);\n            jQuery(this).addClass(selected);\n            updateMysteryCalculator();\n        });\n    }\n\n    function processMysteryResponse(data) {\n        changeToteMysteryState(states.confirm, data);\n\n        MSG.publish('bet.mystery.selected');\n        MSG.publish('bet.mystery.review');\n        jQuery('#commit-mystery').click(function() {\n            NAV.ajaxPost(jQuery('form#mystery-confirm').attr('action'),\n                locationDetailsAppender.addToUrlEncodedData(jQuery('form#mystery-confirm').serialize()),\n                processMysteryCommit,\n                {\n                    control: jQuery(\"#commit-mystery\")\n                }\n            );\n            return false;\n        });\n    }\n\n    function processMysteryCommit(data) {\n        changeToteMysteryState(states.receipt, data);\n        var singleTicket = jQuery('#mystery-receipt span.title:contains(\"Ticket\")').parent().find('span.data').html();\n        var tickets = '';\n        if (singleTicket) {\n            tickets = [{ ticketNumber: singleTicket }];\n        } else {\n            tickets = jQuery(\"#mystery-receipt h4:contains('Ticket')\").map(function() { return { ticketNumber: jQuery(this).html().replace('Ticket ', '') }; }).get();\n        }\n        var totalCost = jQuery('#mystery-receipt span.title:contains(\"Total Cost\")').parent().find('span.data').html();\n        MSG.publish('bet.mystery.receipt', { tickets: tickets, totalCost: totalCost });\n    }\n\n    function updateMysteryCalculator() {\n        var quantity = jQuery(\"span.mystery-bet-quantity\").text();\n        jQuery(\"input#NumberOfBets\").val(quantity);\n        var cost = parseInt(jQuery(\"span.mystery-bet-cost\").text()) * parseInt(quantity);\n        jQuery(\"span.mystery-bet-total\").text(cost);\n        if (isNaN(cost) || cost <= 0) { //if customise mystery then above cost will not be there!!! I know what you mean! ToDo: remove this when we have bet buttons as component.\n            cost = parseFloat(jQuery(\"span.customise-mystery-bet-total\").text().replace('$', ''));\n        }\n        var enabledButtons = (cost > 0);\n        CMN.setDisableState(jQuery('div.calculator-buttons a'), enabledButtons);\n        CMN.setDisableState(jQuery('#mystery-bet'), enabledButtons);\n    }\n\n    /* ---------------------\n    Calculator Finish\n    --------------------- */\n\n    /* ---------------------\n    Starters Start\n    --------------------- */\n\n    function initPoolSelector() {\n        jQuery(\".pool-type-selector .selector\").click(function(e) {\n            jQuery(\".pools\").slideToggle('fast');\n\n            e.stopPropagation();\n\n            //to close the drawer button - called here because of stopPropagation\n            closeDrawer();\n        });\n\n        jQuery('body').click(function() {\n            var p = jQuery(\".pools\");\n            if (p.is(\":visible\")) {\n                p.slideUp('fast');\n            }\n        });\n        jQuery('.pools li:last').addClass('last');\n    }\n\n    function restoreFormExpansion(formExpansionPattern) {\n        if (formExpansionPattern == \"\")\n            return true;\n\n        var starters = formExpansionPattern.split('/');\n\n        jQuery(\".shortform\").each(function() {\n            var sNo = jQuery(this).siblings('span.starter-runner-number').children('span.number').html();\n            var shortFormElement = jQuery(this).siblings('span.starter-runner-number');\n            jQuery.each(starters, function(key, starter) {\n                var parts = starter.split('-');\n                if (sNo == parts[0]) {\n                    if (parts[1] == \"1\") {\n                        shortFormElement.click();\n                    }\n                    return false;\n                }\n            });\n        });\n    }\n\n    // When the user selects a new option in the bet type select on the race detail page\n    function initBetTypeChange(isQuinella, isAllUp) {\n\n        CALC.registerUpdateNotification(null);\n\n        initButtons(isAllUp);\n\n        CALC.initCommonCalculator(false);\n        CALC.initCalculator('calculator1');\n        CALC.initCalculator('calculator2');\n        initFieldButton();\n        initOddsEvens();\n        initRovingBankerButton();\n        initBetCostPopup();\n        initAllUpRaceSelectionPopup();\n        initProposeBet();\n        initAddToteRacingToBetSlip();\n        initSelections();\n        initAllUpBetType();\n        initSButtons();\n        initProvDivButtons();\n        if (isQuinella == true) {\n            LEGIN.InitQuinellaLegIn();\n        }\n    }\n\n    function initButtons(isAllUp) {\n        initSingleBetButton(isAllUp);\n        initSortButtons();\n        initMultiBetButtons();\n    }\n\n    function allBetLinesAreAllways(betLineCostCollection) {\n        var isAllways = true;\n        betLineCostCollection.forEach(function(betLineCost) {\n            if (betLineCost.IsAllways === false) {\n                isAllways = false;\n            }\n        });\n        return isAllways;\n    }\n\n    function initSingleBetButton(isAllUp) {\n        jQuery('.bet-amount, .place-single').click(\n            function() {\n                if (!!jQuery(\"#race-replay-video\").length && !!jQuery(\"#race-replay-video\")[0].pause) {\n                    jQuery(\"#race-replay-video\")[0].pause();\n                }\n\n                TOTESEL.saveSelections();\n\n                getTotePyos().then(function(pyos) {\n                    pyos.clear();\n                });\n\n                if (isAllUp) {\n                    NAV.ajaxPost(jQuery(this).attr('href'),\n                        jQuery('form#betting-form').serialize(),\n                        processAllUpProposeBetResponse);\n                } else {\n\n                    calculatorModel.setHasInvestment(false);\n\n                    if (TOTESEL.isFixedOddsRacing() || TOTESEL.isValidFixedoddsBet()) {\n                        changeToteStarterState(states.calc);\n                        MSG.publish('bet.single.selected', { type: 'fobracing' });\n                    } else {\n                        var operation = toteBettingService.enquiry().done(function(response) {\n                                calculatorModel.setNumberOfCombinations(response.TotalCombinations);\n                                calculatorModel.setHasInvestment(true);\n                                if (response.BetLineCostCollection != null && response.BetLineCostCollection.length > 0) {\n                                    calculatorModel.setIsAllways(allBetLinesAreAllways(response.BetLineCostCollection));\n                                }\n                                changeToteStarterState(states.calc);\n                                MSG.publish('bet.single.selected', { type: 'toteracing' });\n                            })\n                            .fail(function(http) {\n                                if (http.status === 400) {\n                                    var caughtException = jQuery.parseJSON(http.responseText);\n\n                                    MSG.publish('popup.showPopUp', {\n                                        headerText: caughtException.Message,\n                                        messageText: caughtException.ExceptionMessage,\n                                        buttonType: POPUP.BUTTONTYPE.Ok,\n                                        cancelButtonText: \"OK\",\n                                        isError: true\n                                    });\n\n                                } else {\n                                    errorController.showGenericErrorPage();\n                                }\n                            });\n\n                        NAV.pushLoading(function (hide) {\n                            operation.always(function() {\n                                    hide();\n                                });\n                        });\n                    }\n                }\n            }\n        );\n    }\n\n    function initSortButtons() {\n        jQuery('.sort:not(.disabled)').click(\n            function(e) {\n\n                startersFormValueExpanded = \"\";\n\n                jQuery(\".shortform\").each(function() {\n\n                    var sNo = jQuery(this).siblings('span.starter-runner-number').children('span.number').html();\n                    startersFormValueExpanded += sNo + \"-\";\n                    if (jQuery(this).is(\":visible\")) {\n                        startersFormValueExpanded += \"1/\";\n                    } else {\n                        startersFormValueExpanded += \"0/\";\n                    }\n                });\n                var sortOrder = 'Number';\n                e.stopPropagation();\n\n                closeDrawer();\n\n                if (jQuery(this).hasClass('name')) {\n                    sortOrder = 'Name';\n                } else if (jQuery(this).hasClass('fixed')) {\n                    sortOrder = 'FixedPrice';\n                } else if (jQuery(this).hasClass('tote') || jQuery(this).hasClass('right')) {\n                    sortOrder = 'Price';\n                }\n                refreshStarters(sortOrder, null, true);\n            }\n        );\n    }\n\n    function initMultiBetButtons() {\n        jQuery('a.start-multi').click(\n            function(e) {\n                e.preventDefault();\n                setFobRacingSelectedProposition();\n                if (!jQuery(this).hasClass('disabled')) {\n                    TOTESEL.saveSelections();\n\n                    if (jQuery('#choose-win-place-leg-popup').length > 0 && jQuery('.odds-evens span.selected').length === 0) {\n                        setWinPlacePopupDisplayValue();\n\n                        var popup = jQuery('.popup > .win-place-confirm > .black-x');\n                        popup.click(function() {\n                            jQuery('.popup').fadeOut('fast');\n                        });\n\n                        CMN.showPopup(jQuery('#choose-win-place-leg-popup'));\n                    } else {\n                        NAV.ajaxPost(jQuery(this).attr('href'),\n                            jQuery('form#betting-form').serialize(),\n                            function(data) {\n                                if (data && data.RedirectUrl) {\n                                    NAV.navChange(data.RedirectUrl);\n                                }\n                            },\n                            {\n                                hideOverlay: false\n                            }\n                        );\n                    }\n                }\n            }\n        );\n\n        jQuery('a.add-to-multi').click(function(e) {\n            e.preventDefault();\n            setFobRacingSelectedProposition();\n            if (jQuery('#choose-win-place-leg-popup').length > 0 && props.find('input:checked').length > 0) {\n                CMN.showPopup(jQuery('#choose-win-place-leg-popup'));\n            } else {\n                formPost(jQuery('a.add-to-multi'),\n                    jQuery('form#betting-form'),\n                    processRedirectResponse,\n                    false);\n            }\n            return false;\n        });\n\n        jQuery('a.add-win-to-multi').click(function(e) {\n            e.preventDefault();\n            setFobRacingSelectedProposition();\n            jQuery('#legType').val('win');\n            return formPost(jQuery('a.add-win-to-multi'),\n                jQuery('form#betting-form'),\n                processRedirectResponse,\n                false);\n        });\n\n        jQuery('a.add-place-to-multi').click(function(e) {\n            e.preventDefault();\n            setFobRacingSelectedProposition();\n            jQuery('#legType').val('place');\n            return formPost(jQuery('a.add-place-to-multi'),\n                jQuery('form#betting-form'),\n                processRedirectResponse,\n                false);\n        });\n\n        jQuery('a.confirm-win-leg').click(function(e) {\n            e.preventDefault();\n            setFobRacingSelectedProposition();\n            jQuery('#legType').val('win');\n            return formPost(jQuery('a.confirm-win-leg'),\n                jQuery('form#betting-form'),\n                processRedirectResponse,\n                false);\n        });\n\n        jQuery('a.confirm-place-leg').click(function(e) {\n            e.preventDefault();\n            setFobRacingSelectedProposition();\n            jQuery('#legType').val('place');\n            return formPost(jQuery('a.confirm-place-leg'),\n                jQuery('form#betting-form'),\n                processRedirectResponse,\n                false);\n        });\n    }\n\n    function setFobRacingSelectedProposition() {\n        if (jQuery('#isFobRacing').length) {\n            var selectedStarter = jQuery('ul.runners-list a.fixed.selected');\n            var selectedPropNumber = selectedStarter.children('input[name=\"prop-num\"]').val();\n\n            jQuery('#sportsBetNumber').val(selectedPropNumber);\n        }\n    }\n\n    function setWinPlacePopupDisplayValue() {\n\n        if (jQuery('#choose-win-place-leg-popup').length > 0) {\n\n            var selectedDivs = jQuery('#bet-content .display-list').find('a.selected');\n\n            var selectedli = jQuery('#bet-content .display-list').find('a.selected').parent().parent();\n\n            var selectionInfo = jQuery('#bet-content .display-list').find('a.selected').parent().parent().children('.selection-info').children();\n\n            var description = selectionInfo.filter('span.selection-name').text();\n            var runnerno = selectedli.children('span.runner-number').children('span.number').text();\n            var selectedStarterNumber = jQuery(\"#selectedStarterNumber\").val();\n            var winReturnDisplay = selectedDivs.children('input[name=\"fixed-win\"]').val();\n            jQuery('#choose-win-place-leg-popup .confirm-win-leg').html('win<br/>' + winReturnDisplay);\n\n            var placeReturnDisplay = selectedDivs.children('input[name=\"fixed-place\"]').val();\n            if (placeReturnDisplay) {\n                jQuery('#choose-win-place-leg-popup a.confirm-place-leg').html('place<br/>' + placeReturnDisplay);\n                jQuery('a.confirm-place-leg').removeClass('disabled');\n            } else {\n                jQuery('#choose-win-place-leg-popup a.confirm-place-leg').html('place<br/><br/>');\n                jQuery('a.confirm-place-leg').addClass('disabled');\n            }\n            if (runnerno) {\n                jQuery('#choose-win-place-leg-popup .display-no').show();\n                jQuery('#choose-win-place-leg-popup .display-no').text(runnerno);\n            } else if (selectedStarterNumber) {\n                jQuery('#choose-win-place-leg-popup .display-no').show();\n                jQuery('#choose-win-place-leg-popup .display-no').text(selectedStarterNumber);\n            } else {\n                jQuery('#choose-win-place-leg-popup .display-no').hide();\n            }\n            jQuery('#choose-win-place-leg-popup .display-text').text(description);\n        }\n    }\n\n    function processRedirectResponse(data) {\n        if (data && data.RedirectUrl) {\n            NAV.navChange(data.RedirectUrl);\n            MSG.publish('bet.multi.add');\n        }\n    }\n\n    function formPost(b, f, s, h) {\n        if (b.is('.disabled') === false) {\n            NAV.ajaxPost(\n                b.attr('href'),\n                f.serialize(),\n                s,\n                {\n                    control: b,\n                    hideOverlay: (h === undefined) ? true : h\n                }\n            );\n        }\n        return false;\n    }\n\n    function processAllUpProposeBetResponse(data) {\n\n        jQuery('.allup-formula').html(data);\n        jQuery('.allup-formula li').children('button').children('span.combination').hide();\n\n        jQuery('.allup-formula li').click(function() {\n            jQuery(this).children('button').toggleClass('selected').children('span.combination').toggle();\n            //This will in turn give us a call back.\n            CALC.setCalcButtonState();\n        });\n\n        jQuery('h3.toggle').click(function() {\n            jQuery('.hidden-calculator div.info-expand').slideToggle();\n            jQuery('h3.toggle').toggleClass('open');\n            jQuery('#FormulaExpanded').val(jQuery('h3.toggle').hasClass('open'));\n        });\n\n        var prevFormula = TOTESEL.getAllUpFormula();\n        var defaultFormula = TOTESEL.getDefaultFormula();\n\n        if (prevFormula) {\n\n            var currentFormula = prevFormula.split(',');\n\n            for (var i = 0; i < currentFormula.length; i++) {\n\n                if (currentFormula[i] != defaultFormula) {\n                    jQuery('.allup-formula li button[value=' + currentFormula[i] + ']').toggleClass('selected').children('span.combination').toggle();\n                }\n            }\n\n            if (defaultFormula && !jQuery('.allup-formula li button').last().hasClass('selected')) {\n                jQuery('.allup-formula li button').last().toggleClass('selected').children('span.combination').toggle();\n            }\n\n            if (Boolean(jQuery('#FormulaExpanded').val() == 'true')) {\n                jQuery('.hidden-calculator div.info-expand').show();\n            } else {\n                jQuery('.hidden-calculator div.info-expand').hide();\n            }\n\n        } else {\n            jQuery('.allup-formula li button').last().toggleClass('selected').children('span.combination').toggle();\n            jQuery('.hidden-calculator div.info-expand').hide();\n        }\n\n        updateAllupDetails();\n\n        CALC.registerUpdateNotification(function() {\n            updateAllupDetails();\n        });\n\n        changeToteStarterState(states.calc);\n        MSG.publish('bet.single.selected', { type: 'toteracing' });\n    }\n\n    function initPoolSelection() {\n        jQuery(\"ul.pools li\").not(\".abandoned\").click(function() {\n            var betType = jQuery(this).children(\"input[name='bet-type']\").val();\n            if (betType === \"Mystery\") {\n                NAV.navChange(jQuery(this).children(\"input#mystery-href\").val());\n            } else if (betType === \"AllUp\") {\n                NAV.ajaxGet(jQuery(this).children(\"input#all-up-href\").val(), processAllUpSelection);\n            } else {\n                var href = jQuery(\"#change-bet-href\").val();\n                href = href + ((href.indexOf(\"?\") > 0) ? \"&\" : \"?\");\n                NAV.ajaxContent(href + \"betType=\" + betType);\n            }\n            initDrawerDisplay('visibility');\n        });\n    }\n\n    function initProvDivButtons() {\n        jQuery('.toggle-quaddie-prov-divs, .toggle-double-prov-divs').click(function() { jQuery(this).toggleClass('selected'); });\n        jQuery('.toggle-quaddie-prov-divs').click(function() { jQuery('.prov-div-qd').toggle(); });\n        jQuery('.toggle-double-prov-divs').click(function() { jQuery('.prov-div-d').toggle(); });\n    }\n\n    function processAllUpSelection(data) {\n        changeToteStarterState(states.allup, data);\n        initPoolSelector();\n        initPoolSelection();\n        initDrawerDisplay('visibility');\n    }\n\n    function initAllUpRaces() {\n        jQuery('a.next').click(function(e) {\n            e.preventDefault();\n            var selRaces = jQuery('div#all-up-race-selector span.selected');\n            var numSel = selRaces.length;\n            if (numSel > 1 && numSel < 7) {\n                var selectedRaces = [];\n                var i = 0;\n                selRaces.each(function() {\n                    selectedRaces[i++] = jQuery(this).text().replace('R', '');\n                });\n                jQuery(\"#RaceSelections\").val(selectedRaces.join());\n                NAV.ajaxPost(jQuery('form#all-up-race-form').attr('action'),\n                    jQuery('form#all-up-race-form').serialize(),\n                    function(data) { jQuery('#main-container').html(data); });\n\n            }\n            return false;\n        });\n        jQuery('div#all-up-race-selector span').click(function() {\n            var numSel = jQuery('div#all-up-race-selector span.selected').length;\n            if (jQuery(this).hasClass(selected)) {\n                numSel--;\n                jQuery(this).removeClass(selected);\n            } else {\n                if (numSel < 6) {\n                    numSel++;\n                    jQuery(this).addClass(selected);\n                }\n            }\n\n            CMN.setDisableState(jQuery('a.next'), (numSel > 1));\n        });\n    }\n\n    function initDrawerDisplay(selector) {\n\n        if (selector === 'visibility') {\n            var isForms = jQuery(\".form-button\").is(':visible').length > 0;\n            var isDouble = jQuery(\".prov-div-d\").is(':visible').length > 0;\n            var isQuaddie = jQuery(\".prov-div-qd\").is(':visible').length > 0;\n        } else {\n            var isForms = jQuery(\".form-button\").length > 0;\n            var isDouble = jQuery(\".prov-div-d\").length > 0;\n            var isQuaddie = jQuery(\".prov-div-qd\").length > 0;\n        }\n\n        if (!isForms) {\n            jQuery('a.drawer-button.all-form').hide();\n        } else {\n            jQuery('a.drawer-button.all-form').show();\n            setAllForm();\n        }\n\n        if (!isQuaddie) {\n            jQuery('a.drawer-button.quaddie-prov-divs').hide();\n        } else {\n            jQuery('a.drawer-button.quaddie-prov-divs').show();\n        }\n\n        if (!isDouble) {\n            jQuery('a.drawer-button.double-prov-divs').hide();\n        } else {\n            jQuery('a.drawer-button.double-prov-divs').show();\n        }\n\n        //if ((jQuery('div.drawer-options a.drawer-button').length > 1) || (isForms)) {\n        if (isForms || isDouble || isQuaddie) {\n            //jQuery('a.drawer').removeClass('drawer-disabled');\n            jQuery('a.drawer').show();\n            jQuery('.pool-type-selector .selector').addClass('withDrawer');\n            jQuery('.pool-type-selector .pools').addClass('withDrawer');\n            jQuery('div.bottom-allforms.prov-divs').show();\n        } else {\n            //jQuery('a.drawer').addClass('drawer-disabled');\n            jQuery('a.drawer').hide();\n            jQuery('.pool-type-selector .selector').removeClass('withDrawer');\n            jQuery('.pool-type-selector .pools').removeClass('withDrawer');\n            jQuery('div.bottom-allforms.prov-divs').hide();\n        }\n    }\n\n    function initSelections() {\n\n        initShortformToggle();\n        raceReplay.initRaceReplayLinks();\n        initBlackbookAddEntry();\n        initDrawerDisplay();\n\n        initMySelectionsSection();\n\n        //handling for win/place tote.\n        jQuery('ul.runners-list a.tote').click(function(e) {\n            e.stopPropagation();\n\n            //to close the drawer button - called here because of stopPropagation\n            closeDrawer();\n\n            //to close the pool drop down - called here because of stopPropagation\n            var p = jQuery(\".pools\");\n            if (p.is(\":visible\")) {\n                p.slideUp('fast');\n            }\n\n            if (!jQuery(this).hasClass(disabled)) {\n                var input = jQuery(this).children('input');\n                var newValue = !input.prop('checked');\n                //toggle the hidden input field.\n                input.prop('checked', newValue);\n                jQuery(this).toggleClass(selected, newValue);\n\n                //clear all current FOB selections\n                clearFobSelections();\n\n                //force the change event so standard behaviour occurs\n                input.change();\n            }\n        });\n\n        initFixedOddsSelectionButton();\n\n        //Code so clicking anywhere on the li element will select/unselect the checkbox.\n        //Doesn't apply to win/place bets with tote/fixed stuff.\n        if (jQuery('#BetType').val() !== 'WinPlace') {\n\n            jQuery('.runners-list li').click(function(e) {\n                var input = jQuery(this).children('input:enabled');\n\n                if (input.length > 0) {\n                    if (input.is(':checked')) {\n                        input.removeAttr(checked);\n                    } else {\n                        input.prop(checked, true);\n                    }\n                    input.change();\n                }\n            });\n        }\n    }\n\n    function initMySelectionsSection() {\n        // update 'my selections' and bet amount button state on any change of checkbox state\n        jQuery('ul.runners-list input').change(function() {\n            if (!jQuery(this).hasClass('leginselection') || jQuery(this).is(':visible')) {\n                //Make sure field is off if we unselect any checkboxes\n                if (!jQuery(this).is(':checked')) {\n                    jQuery('.totebet-field-button').removeClass(selected);\n                }\n\n                updateStartersState(true);\n            }\n        }).click(function(e) {\n            e.stopPropagation();\n            closeDrawer();\n        });\n    }\n\n    function initFixedOddsSelectionButton() {\n        //handling for win/place fixed.\n        jQuery('ul.runners-list a.fixed').click(function(e) {\n            e.stopPropagation();\n            closeDrawer();\n\n            if (!jQuery(this).hasClass(disabled)) {\n                var newValue = !jQuery(this).hasClass(selected);\n                //clear all current FOB selections\n                clearFobSelections();\n\n                jQuery(this).toggleClass(selected, newValue);\n\n                //clear all tote selections\n                clearToteSelections();\n\n                updateStartersState(true);\n            }\n        });\n    }\n\n    function clearToteSelections() {\n        jQuery('ul.runners-list a.tote').removeClass(selected);\n        jQuery('.totebet-field-button').removeClass(selected);\n        jQuery('ul.runners-list input[name=\"starter\"]').removeAttr(checked);\n    }\n\n    function clearFobSelections() {\n        jQuery('ul.runners-list a.fixed').removeClass(selected);\n        jQuery('div.odds-evens span').removeClass(selected);\n    }\n\n    function initFieldButton() {\n        jQuery('.totebet-field-button').click(function() {\n            if (!jQuery(this).hasClass(disabled)) {\n                var sel = !jQuery(this).hasClass(selected);\n                jQuery(this).toggleClass(selected);\n\n                if (sel) {\n                    jQuery('span.s-button').removeClass(selected); //unselect all sbuttons.\n\n                    //Dont clear disabled fields for RB or Leg-In\n                    if (!jQuery('.rb-box').hasClass(selected) && !jQuery('.legin-box').hasClass(selected)) {\n                        jQuery(\"ul.runners-list input:disabled\").removeAttr(disabled);\n                    }\n                    jQuery('div.starter-tab input').prop(checked, true);\n                    jQuery('ul.runners-list a.tote').addClass(selected);\n                } else {\n                    jQuery('div.starter-tab input:enabled').removeAttr(checked);\n                    jQuery('ul.runners-list a.tote').removeClass(selected);\n                }\n                //clear all current FOB selections\n                jQuery('ul.runners-list a.fixed').removeClass(selected);\n                jQuery('div.odds-evens span').removeClass(selected);\n\n                updateStartersState(true);\n            }\n        });\n    }\n\n    function initOddsEvens() {\n        jQuery('span.inside,span.outside,span.odds,span.evens').click(function() {\n            if (!jQuery(this).hasClass(disabled)) {\n                var newValue = !jQuery(this).hasClass(selected);\n                clearToteSelections();\n                clearFobSelections();\n                jQuery(this).toggleClass(selected, newValue);\n                updateStartersState(true);\n            }\n        });\n    }\n\n    function initRovingBankerButton() {\n        jQuery('.rb-box').click(function() {\n            if (!jQuery(this).hasClass(disabled)) {\n                var sel = !jQuery(this).hasClass(selected);\n                jQuery(this).toggleClass(selected);\n                jQuery('.rb-box em').text(sel ? 'ON' : 'OFF');\n                updateRaceTabs(sel);\n                TOTESEL.setSelectedTab(0);\n                //clear all current selections\n                jQuery('ul.runners-list a.fixed').removeClass(selected);\n\n                updateStartersState(true);\n            }\n        });\n    }\n\n    function initSButtons() {\n        jQuery('div.prefill-options span.s-button').click(function() {\n            jQuery(this).toggleClass(selected);\n            var filter, sclass = [];\n\n            //remove the field class, if it's present\n            if (jQuery(this).hasClass(selected)) {\n                jQuery('.totebet-field-button').removeClass(selected);\n            }\n\n            //make selector for all selected S buttons (including recursive ones)\n            jQuery('span.s-button.selected').each(function() { sclass.push(jQuery(this).text()); });\n            filter = TOTESEL.getFullSClasses(sclass);\n\n            //need to disable any enabled input that is now in the selection list\n            jQuery(\"ul.runners-list input:enabled\").filter(filter).prop(disabled, true).prop(checked, true);\n\n            //need to enable any disabled input that is not in the selection list\n            jQuery(\"ul.runners-list input:disabled:not(.leginselection)\").not(filter).removeAttr(disabled).removeAttr(checked);\n\n            updateStartersState(true);\n        });\n    }\n\n    function toggleRovingBankerTabs(rbOn, selectedTabIdx) {\n        var toptabs = jQuery('#race-tabs ul.top li');\n        var bottomtabs = jQuery('#race-tabs ul.bottom li');\n\n        if (!selectedTabIdx) {\n            selectedTabIdx = 0;\n        }\n\n        var rbButton = jQuery('.rb-box');\n        if (rbOn) {\n            rbButton.addClass(selected);\n            jQuery('.rb-box em').text('ON');\n\n            toptabs.filter('.rb').children('a').show().end().eq(selectedTabIdx).addClass('ui-state-active');\n            toptabs.not('.rb').children('a').hide().end().removeClass('ui-state-active');\n\n            bottomtabs.filter('.rb').children('a').show().end().eq(selectedTabIdx).addClass('ui-state-active');\n            bottomtabs.not('.rb').children('a').hide().end().removeClass('ui-state-active');\n        } else {\n            rbButton.removeClass(selected);\n            jQuery('.rb-box em').text('OFF');\n\n            toptabs.filter('.rb').children('a').hide().end().removeClass('ui-state-active');\n            toptabs.not('.rb').children('a').show().end().eq(selectedTabIdx).addClass('ui-state-active');\n\n            bottomtabs.filter('.rb').children('a').hide().end().removeClass('ui-state-active');\n            bottomtabs.not('.rb').children('a').show().end().eq(selectedTabIdx).addClass('ui-state-active');\n        }\n    }\n\n    function updateRaceTabs(rbOn) {\n        toggleRovingBankerTabs(rbOn);\n\n        TOTESEL.clearAllSelections();\n        TOTESEL.changeToTab(0);\n    }\n\n    // displays the current selections and toggles the bet amount button\n    function updateStartersState(save) {\n        if (save) {\n            TOTESEL.saveSelections();\n        }\n\n        var selectionsHtml = TOTESEL.getAllSelections();\n        jQuery('div.my-selections ul.display-list').empty().append(selectionsHtml);\n\n        //extra stuff we need to do for enhanced FOB\n        if (jQuery('#BetType').val() === 'WinPlace') {\n\n            updateWinPlaceButtonState();\n\n            var product = TOTESEL.getFixedToteType();\n            var selectionTitle = \"My Selections\";\n\n            if (product === 'fixed') {\n                var subHeader = TOTESEL.getSubProductTypeHeaderText();\n\n\n                if (subHeader.length > 0) {\n                    //jQuery('.hidden-calculator > h3').html(subHeader);\n                    selectionTitle += \" - \" + subHeader;\n                } else {\n                    // jQuery('.hidden-calculator > h3').html(\"WIN\");\n                }\n\n                selectionTitle += \" - FIXED\";\n            }\n\n            if (product === 'tote') {\n                selectionTitle += \" - Tote\";\n            }\n\n            jQuery('div.my-selections h3').html(selectionTitle);\n        } else {\n            CMN.setDisableState(jQuery('button.bet-amount'), TOTESEL.isValidBet());\n        }\n    }\n\n    function updateWinPlaceButtonState() {\n        var singleLineText = jQuery(\".js-single-line\");\n        var twoLineTextAddMulti = jQuery(\".js-two-lines\");\n        var addPlaceToMultiButton = jQuery('a.add-place-to-multi');\n\n        if (jQuery('div.multi-options').length) {\n            addPlaceToMultiButton.hide();\n            singleLineText.hide();\n            twoLineTextAddMulti.hide();\n            if (TOTESEL.isValidFixedoddsBet() || TOTESEL.isFixedOddsRacing()) {\n                jQuery('button.bet-amount').hide();\n\n                if (jQuery('.odds-evens span.selected').length > 0) {\n                    singleLineText.show();\n                } else {\n                    addPlaceToMultiButton.show();\n                    twoLineTextAddMulti.show();\n                }\n\n                jQuery('a.add-win-to-multi').show();\n                jQuery('a.add-to-multi').show();\n\n            } else {\n                jQuery('button.bet-amount').show();\n                jQuery('a.add-win-to-multi').hide();\n                jQuery('a.add-to-multi').hide();\n            }\n        } else {\n            if (TOTESEL.isValidFixedoddsBet() || TOTESEL.isFixedOddsRacing()) {\n                jQuery('button.bet-amount').hide();\n                jQuery('button.place-single').show();\n                jQuery('a.start-multi').show();\n            } else {\n                jQuery('button.bet-amount').show();\n                jQuery('button.place-single').hide();\n                jQuery('a.start-multi').hide();\n            }\n        }\n\n        CMN.setDisableState(jQuery('button.bet-amount'), TOTESEL.isValidBet());\n        CMN.setDisableState(jQuery('a.start-multi'), TOTESEL.isValidFixedoddsBet());\n        CMN.setDisableState(jQuery('a.add-win-to-multi'), TOTESEL.isValidFixedoddsBet());\n        CMN.setDisableState(addPlaceToMultiButton, TOTESEL.isValidFixedoddsBet());\n        CMN.setDisableState(jQuery('a.add-to-multi'), TOTESEL.isValidFixedoddsBet());\n        CMN.setDisableState(jQuery('button.place-single'), TOTESEL.isValidFixedoddsBet());\n    }\n\n    function refreshStarters(newSortMode, newState, saveState) {\n        // Clearing the login-form so that on the off chance that a user changes from 3G to bunbury wifi or vice versa\n        // They get or don't get the buttons in the right circumstances.\n        jQuery('form#login-form').remove();\n\n        if (saveState) {\n            TOTESEL.saveSelections();\n        }\n\n        TOTESEL.clearCache();\n\n        //update the sort mode if it's passed in\n        if (newSortMode) {\n            jQuery('input#SortOrder').val(newSortMode);\n        }\n\n        //disable all starter inputs so they aren't submitted\n        jQuery('div.starter-tab input').prop(disabled, true);\n\n        var refreshoverride = jQuery('#refresh-override-href').val();\n\n        var refreshhref = jQuery('.refresh-button').attr('href');\n\n        if (refreshoverride) {\n            refreshhref = refreshoverride;\n        }\n\n        NAV.ajaxPost(refreshhref,\n            jQuery('form#betting-form').serialize(),\n            function(data) {\n                jQuery('#main-container').html(data);\n\n                //test for existence of input#SelectedTab -- it won't be there if the race has jumped.\n                if (jQuery(\"input#SelectedTab\").length) {\n                    TOTESEL.changeToTab(jQuery(\"input#SelectedTab\").val(), null, function () { startersRefreshed(); });\n\n                    if (newSortMode != undefined) {\n                        restoreFormExpansion(startersFormValueExpanded);\n                    } else {\n                        startersFormValueExpanded = \"\";\n                    }\n\n                    if (newState && newState === states.calc && TOTESEL.isValidBet()) {\n                        changeToteStarterState(newState);\n                    }\n                }\n            });\n    }\n\n    function startersRefreshed() {\n        //need to resave starters here so any scratching gets picked up.\n        updateStartersState(true);\n        TOTESEL.refreshHiddenFields();\n    }\n\n    function rovingBankerTabSelect() {\n\n        jQuery(\"ul.tabs.top li.ui-state-active\").removeClass('ui-state-active');\n        jQuery(\"ul.tabs.top li.roving-banker-tab\").addClass('ui-state-active');\n\n        jQuery(\"ul.tabs.bottom li.ui-state-active\").removeClass('ui-state-active');\n        jQuery(\"ul.tabs.bottom li.roving-banker-tab\").addClass('ui-state-active');\n\n        TOTESEL.changeToTab(0);\n\n        jQuery(\"input#SelectedTab\").val(0);\n\n        return false;\n    }\n\n    function rovingBankerWithSelect() {\n\n        jQuery(\"ul.tabs.top li.ui-state-active\").removeClass('ui-state-active');\n        jQuery(\"ul.tabs.top li.roving-banker-with\").addClass('ui-state-active');\n\n        jQuery(\"ul.tabs.bottom li.ui-state-active\").removeClass('ui-state-active');\n        jQuery(\"ul.tabs.bottom li.roving-banker-with\").addClass('ui-state-active');\n\n        TOTESEL.changeToTab(1);\n\n        jQuery(\"input#SelectedTab\").val(1);\n\n        return false;\n    }\n\n    //'a' parameter is obsolete and should be removed in a future release (keeping it in for now to not cause errors on initial update).\n    function starterTabSelect(a, newIndex) {\n\n        var li = jQuery(\"ul.tabs.top li\").eq(newIndex);\n\n        if (!li.hasClass(activeClass)) {\n            //save selections from this tab\n            TOTESEL.saveSelections();\n\n            //load starters for new tab (if necessary)\n            TOTESEL.changeToTab(newIndex, li.children(\"a\").attr(\"href\"));\n\n            jQuery(\"input#SelectedTab\").val(newIndex);\n\n            //change tab highlight - first remove it from all classes\n            jQuery(\"ul.tabs li\").removeClass(activeClass);\n            li.addClass(activeClass);\n            jQuery(\"ul.tabs.bottom li\").eq(newIndex).addClass(activeClass); //add to bottom bar\n        }\n\n        return false;\n    }\n\n    /* ---------------------\n    Starters Finish\n    --------------------- */\n\n    /* ---------------------\n    Starter Results Start\n    --------------------- */\n    function initStarterResults(url, backText) {\n        TT.initCommon(url, backText);\n        raceReplay.initRaceReplayLinks();\n\n        CMN.initSlideToggleHandlers();\n\n        initShortformToggle();\n        initBlackbookAddEntry();\n    }\n\n    /* ---------------------\n    Starter Results Finish\n    --------------------- */\n\n    function initToteMeetingsList() {\n        jQuery('ul.meetings-list a.meeting-race').click(function (e) {\n            e.stopPropagation();\n            closeDrawer();\n        });\n\n        jQuery(selectorClosedMeetings).toggle(showClosedMeetings);\n    }\n\n    function initNextEventsList() {\n        jQuery('ul.next-to-jump-list a.clearfix').click(function (e) {\n            e.stopPropagation();\n            closeDrawer();\n        });\n\n        jQuery(selectorClosedMeetings).toggle(showClosedMeetings);\n    }\n\n    function resetMeetingFilters() {\n        showClosedMeetings = true;\n    }\n\n    function initAllUpBetType() {\n        jQuery('.allup-group li').click(function () {\n            jQuery(this).children('input').prop('checked', true);\n            updateStartersState(true);\n        });\n    }\n\n    function updateAllupDetails() {\n\n        var selectedFormula = []; var i = 0;\n\n        var $allUpFormulas = jQuery('#AllUpFormulas').html('');\n\n        jQuery('.allup-formula li button.selected').each(function (i) {\n            var $button = jQuery(this);\n\n            selectedFormula[i] = $button.val();\n\n            jQuery('<input/>', {\n                name: 'AllUpFormulas[' + i + '].Number',\n                type: 'hidden',\n                value: $button.val()\n            }).appendTo($allUpFormulas);\n\n            jQuery('<input/>', {\n                name: 'AllUpFormulas[' + i + '].Combinations',\n                type: 'hidden',\n                value: $button.attr('data-combinations')\n            }).appendTo($allUpFormulas);\n        });\n\n        TOTESEL.setAllUpFormula(selectedFormula.join());\n\n        if (jQuery('.allup-formula li button').last().hasClass('selected')) {\n            TOTESEL.setDefaultFormula(jQuery('.allup-formula li button').last().val());\n        } else {\n            TOTESEL.setDefaultFormula('');\n        }\n\n        var combinations = calculateCombinations();\n\n        jQuery('#allup-combinations').html('Combinations: ' + combinations);\n        jQuery('#calculator-allup-combinations').html(combinations);\n\n        var investment = parseFloat(jQuery('#Investment1').val());\n\n        jQuery('#calculator-allup-totalcost').html(numeral(investment * combinations).format('$0,0.00'));\n\n        if (jQuery('.allup-formula li button.selected').length == 0) {\n            jQuery('div.calculator-buttons a, a.calculator-buttons').toggleClass('disabled', true);\n        }\n    }\n\n    function calculateCombinations() {\n\n        var totalcombinations = 0;\n\n        if (jQuery('.allup-formula li button[value=1]').hasClass('selected')) {\n            totalcombinations += Number(jQuery('#SingleCombinations').val());\n        }\n        if (jQuery('.allup-formula li button[value=2]').hasClass('selected')) {\n            totalcombinations += Number(jQuery('#DoubleCombinations').val());\n        }\n        if (jQuery('.allup-formula li button[value=3]').hasClass('selected')) {\n            totalcombinations += Number(jQuery('#TrebleCombinations').val());\n        }\n        if (jQuery('.allup-formula li button[value=4]').hasClass('selected')) {\n            totalcombinations += Number(jQuery('#FoursCombinations').val());\n        }\n        if (jQuery('.allup-formula li button[value=5]').hasClass('selected')) {\n            totalcombinations += Number(jQuery('#FivesCombinations').val());\n        }\n        if (jQuery('.allup-formula li button[value=6]').hasClass('selected')) {\n            totalcombinations += Number(jQuery('#SixCombinations').val());\n        }\n\n        return totalcombinations;\n    }\n\n    function initBlackbookAddEntry() {\n        var viewController = new blackbookAddViewController();\n        blackbookAddViewBinding.bind(viewController, document.getElementById(\"main-container\"));\n        viewController.init();\n    }\n\n    //Preselect is called if there are preselections when first loading the starter page.\n    function preselect(newState) {\n        updateStartersState(false);\n\n        if (newState) {\n            changeToteStarterState(newState);\n        }\n    }\n\n    //handles clicking on a race code tab on the meeting list page\n    function getFobMeetings(url, listItem) {\n        NAV.ajaxGet(url, function (data) {\n            CMN.initDisplayListStyle(jQuery(listItem).html(data));\n        });\n    }\n\n    return {\n        states: states,\n        initToteMeetings: initToteMeetings,\n        initNextEvents: initNextEvents,\n        initToteStarterList: initToteStarterList,\n        refreshToteStarterList: refreshToteStarterList,\n        initToteMystery: initToteMystery,\n        handleBetError: handleBetError,\n        handleMysteryError: handleMysteryError,\n        initAllUpRaces: initAllUpRaces,\n        refreshStarters: refreshStarters,\n        initSelections: initSelections,\n        starterTabSelect: starterTabSelect,\n        initStarterResults: initStarterResults,\n        initToteMeetingsList: initToteMeetingsList,\n        initNextEventsList: initNextEventsList,\n        rovingBankerTabSelect: rovingBankerTabSelect,\n        rovingBankerWithSelect: rovingBankerWithSelect,\n        updateStartersState: updateStartersState,\n        toggleRovingBankerTabs: toggleRovingBankerTabs,\n        resetMeetingFilters: resetMeetingFilters,\n        preselect: preselect,\n        initButtons: initButtons,\n        initBetCostPopup: initBetCostPopup,\n        initProposeBet: initProposeBet,\n        initFixedOddsSelectionButton: initFixedOddsSelectionButton,\n        initMySelectionsSection: initMySelectionsSection,\n        initErrorWindow: initErrorWindow,\n        changeToteStarterState: changeToteStarterState,\n        createBetProposal: createBetProposal,\n        initAddToteRacingToBetSlip: initAddToteRacingToBetSlip,\n        updateBetWithButtonsForCash: updateBetWithButtonsForCash,\n        processBetCostResponse: processBetCostResponse\n};\n\n})(requireExternal,new Controllers.BetBuilder.AddBetSlip(new BetWalletService(Models.BetBuilder.BetWallet)), Models.Tote.Calculator, ErrorController, ToteBettingService, Controllers.Tote.Calculator, new BetSlipService(new BetSlipStore()), PreferencesService, new LocationDetailsAppender(null));\n\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Betting-v1/tote.legacy.js\n// module id = 315\n// module chunks = 5","/*** IMPORTS FROM imports-loader ***/\nvar jQuery = require(\"jquery\");\nvar _ = require(\"underscore\");\nvar legacyReturn = {};\nvar amplify = require(\"amplify\");\nvar cryptojsm5d = require(\"crypto-js/md5\");\nvar cryptojs = { MD5: cryptojsm5d };\nvar numeral = require(\"numeral\");\nvar swipe = require(\"swipe\");\nvar MSG = require(\"../Foundation/Services/MessageBusService\");\nvar LocationDetailsAppender = require(\"../Foundation/LocationDetailsAppender\");\nvar locking = require(\"../Foundation/Lock\");\nvar NAV = require(\"../Foundation/Navigation/Nav\");\nvar CMN = require(\"../Foundation/Common\");\nvar TT = require(\"../Foundation/TabTouch\");\nvar ErrorController = require(\"../Foundation/Error\");\nvar PreferencesService = require(\"../Foundation/Services/Preferences/PreferencesService\");\nvar TupleSpace = require(\"../Foundation/TupleSpace\");\nvar raceReplay = require(\"../Betting-v1/RaceReplay\");\nvar blackbookAddViewBinding = require(\"../Foundation/Components/Blackbook/myblackbook-add-viewbinding\");\nvar blackbookAddViewController = require(\"../Foundation/Components/Blackbook/myblackbook-add-viewcontroller\");\nvar NOTE = require(\"../Foundation/Notification\");\nvar jQueryToDictionary = require(\"jquery-todictionary\");\n\nlegacyReturn.ToteBettingService = window.ToteBettingService = (function() {\n    var enquiry = function (data) {\n        data = data || jQuery('form#betting-form').serialize();\n        var request = jQuery.ajax({\n            url: '/api/totebet/betcost',\n            data: data,\n            type: \"POST\"\n        });\n        return request;\n    };\n\n    return {\n        enquiry: enquiry\n    };\n})();\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Betting-v1/totebettingservice.legacy.js\n// module id = 316\n// module chunks = 5","/*** IMPORTS FROM imports-loader ***/\nvar jQuery = require(\"jquery\");\nvar _ = require(\"underscore\");\nvar legacyReturn = {};\nvar amplify = require(\"amplify\");\nvar cryptojsm5d = require(\"crypto-js/md5\");\nvar cryptojs = { MD5: cryptojsm5d };\nvar numeral = require(\"numeral\");\nvar swipe = require(\"swipe\");\nvar MSG = require(\"../Foundation/Services/MessageBusService\");\nvar LocationDetailsAppender = require(\"../Foundation/LocationDetailsAppender\");\nvar locking = require(\"../Foundation/Lock\");\nvar NAV = require(\"../Foundation/Navigation/Nav\");\nvar CMN = require(\"../Foundation/Common\");\nvar TT = require(\"../Foundation/TabTouch\");\nvar ErrorController = require(\"../Foundation/Error\");\nvar PreferencesService = require(\"../Foundation/Services/Preferences/PreferencesService\");\nvar TupleSpace = require(\"../Foundation/TupleSpace\");\nvar raceReplay = require(\"../Betting-v1/RaceReplay\");\nvar blackbookAddViewBinding = require(\"../Foundation/Components/Blackbook/myblackbook-add-viewbinding\");\nvar blackbookAddViewController = require(\"../Foundation/Components/Blackbook/myblackbook-add-viewcontroller\");\nvar NOTE = require(\"../Foundation/Notification\");\nvar jQueryToDictionary = require(\"jquery-todictionary\");\n\nModels.namespace('Models.Tote');\nModels.Tote.Calculator = (function () {\n    \"use strict\";\n    //Selectors\n    var numberOfCombinationsSelector = '#NumberOfCombinations';\n    var flexiTextSelector = '.flexi-box em';\n    var hasInvestmentSelector = '#HasInvestment';\n    var isAlwaysSelector = '#IsAllWays';\n\n    //Accessors\n    var getNumberOfCombinations = function() {\n        return jQuery(numberOfCombinationsSelector).val();\n    };\n    var setNumberOfCombinations = function (combinations) {\n        jQuery(numberOfCombinationsSelector).val(combinations);\n    };\n    var setFlexiText = function (flexiAmount) {\n        jQuery(flexiTextSelector).text(flexiAmount + '%');\n    };\n    var setHasInvestment = function (hasInvestment) {\n        jQuery(hasInvestmentSelector).val(hasInvestment);\n    };\n    var setIsAllways = function (isAllways) {\n        jQuery(isAlwaysSelector).val(isAllways);\n    };\n    return {\n        getNumberOfCombinations: getNumberOfCombinations,\n        setNumberOfCombinations: setNumberOfCombinations,\n        setFlexiText: setFlexiText,\n        setHasInvestment: setHasInvestment,\n        setIsAllways: setIsAllways,\n    };\n})();\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Betting-v1/totecalculator.legacy.js\n// module id = 317\n// module chunks = 5","/*** IMPORTS FROM imports-loader ***/\nvar jQuery = require(\"jquery\");\nvar _ = require(\"underscore\");\nvar legacyReturn = {};\nvar amplify = require(\"amplify\");\nvar cryptojsm5d = require(\"crypto-js/md5\");\nvar cryptojs = { MD5: cryptojsm5d };\nvar numeral = require(\"numeral\");\nvar swipe = require(\"swipe\");\nvar MSG = require(\"../Foundation/Services/MessageBusService\");\nvar LocationDetailsAppender = require(\"../Foundation/LocationDetailsAppender\");\nvar locking = require(\"../Foundation/Lock\");\nvar NAV = require(\"../Foundation/Navigation/Nav\");\nvar CMN = require(\"../Foundation/Common\");\nvar TT = require(\"../Foundation/TabTouch\");\nvar ErrorController = require(\"../Foundation/Error\");\nvar PreferencesService = require(\"../Foundation/Services/Preferences/PreferencesService\");\nvar TupleSpace = require(\"../Foundation/TupleSpace\");\nvar raceReplay = require(\"../Betting-v1/RaceReplay\");\nvar blackbookAddViewBinding = require(\"../Foundation/Components/Blackbook/myblackbook-add-viewbinding\");\nvar blackbookAddViewController = require(\"../Foundation/Components/Blackbook/myblackbook-add-viewcontroller\");\nvar NOTE = require(\"../Foundation/Notification\");\nvar jQueryToDictionary = require(\"jquery-todictionary\");\n\n// Namespace for managing tote selection data\nlegacyReturn.TOTESEL = window.TOTESEL = (function() {\n    var tabSelectionsArray = [];\n    var isMultiRace = false;\n    var isAllUpBetType = false;\n    var isSNotationAvailable = false;\n    var allUpFormula = \"\";\n    var defaultFormula = \"\";\n    //common strings\n    var selected = \"selected\", checked = \"checked\", disabled = \"disabled\";\n\n    //Creates an object to represent the selections for a tab.\n    function tabSelections(raceNo, supportsField, sCount, title, isQuinella) {\n        \n        var self = this;\n        this.isQuinella = isQuinella;\n        this.raceNo = raceNo;\n        this.supportsField = supportsField;\n        this.sCount = sCount;\n        this.title = title || \"Race \" + raceNo;\n        this.starterName = \"\";\n        this.sName = \"S\" + (sCount + 1);\n        this.starters = [];\n        this.sButtons = []; //S Buttons selected for this tab\n        this.isField = false;\n        this.isFixed = false;\n        this.fixedPrice = \"\";\n        this.propNum = \"0\";\n        this.cache = null;\n        this.hasMinSelections = hasMinSelections;\n        this.hasMinAllUpSelections = hasMinAllUpSelections;\n        this.hasNoSelections = hasNoSelections;\n        this.getSelections = getSelections;\n        this.selectionCount = selectionCount;\n        this.getAllUpBetType = getAllUpBetType;\n        this.getRaceNumber = getRaceNumber;\n        self.isRacingFormat = false;\n        this.isRovingBanker = false;\n        this.allUpBetType = \"Win\";\n\n        function hasMinSelections(min) {\n            return (this.starters.length >= min) || this.isField;\n        }\n\n        function hasMinAllUpSelections() {\n\n            if (this.allUpBetType == \"Quinella\") {\n                return (this.starters.length >= 2) || this.isField;\n            }\n\n            return (this.starters.length >= 1) || this.isField;\n        }\n\n        function hasNoSelections() {\n            return this.starters.length == 0 && this.sButtons.length == 0 && !this.isField;\n        }\n\n        function getSelections() {\n            var seln = \"\";\n\n            if (this.isField) {\n                return \"FD\";\n            }\n\n            if (this.sButtons.length > 0) {\n                //\\u200B is a zero-width space so the string will break over multiple lines\n                seln = this.sButtons.join(\".\\u200B\");\n            }\n\n            if (this.starters.length > 0) {\n                if (seln !== \"\") {\n                    seln += \".\"; //add a dot if we already have sButtons in there\n                }\n\n                seln += this.starters.join(\".\\u200B\");\n\n\n                if (this.starters.length == 1 && this.starterName) {\n                    if (seln) {\n                        seln += \" - \";\n                    }\n\n                    seln += this.starterName;\n                }\n            }\n\n            return seln;\n        }\n\n        function selectionCount() {\n            return this.starters.length;\n        }\n\n        function getAllUpBetType() {\n            return this.allUpBetType;\n        }\n\n        function getRaceNumber() {\n            return this.raceNo;\n        }\n    }\n\n    function clearAllSelections() {\n\n        var tabData;\n        for (var i = 0; i < tabSelectionsArray.length; i++) {\n\n            tabData = tabSelectionsArray[i];\n\n            tabData.sButtons = [];\n            tabData.starters = [];\n            tabData.propNum = 0;\n            tabData.isFixed = false;\n            tabData.isField = false;\n            tabData.isRovingBanker = false;\n            tabData.isPlaceAvailable = false;\n            tabData.isQuinellaAvailable = false;\n            tabData.allUpBetType = \"Win\";\n            var prefix = 'input[name=\"Tabs[' + i + '].';\n\n            jQuery(prefix + 'Sel\"]').val(tabData.starters.join(\".\"));\n            jQuery(prefix + 'IsField\"]').val(tabData.isField);\n            jQuery(prefix + 'SButt\"]').val(tabData.sButtons.join(\".\"));\n            jQuery(prefix + 'AllUpBetType\"]').val(tabData.allUpBetType);\n            jQuery(prefix + 'RaceNo\"]').val(tabData.raceNo);\n        }\n    }\n\n    //Saves the current selections into the tabSelectionArray\n    function saveSelections() {\n\n        var index = jQuery(\"input#SelectedTab\").length ? jQuery(\"input#SelectedTab\").val() : 0;\n\n        if (jQuery(\"ul.tabs.top li.ui-state-active\").hasClass('roving-banker-tab')) {\n            index = 0;\n        }\n\n        if (jQuery(\"ul.tabs.top li.ui-state-active\").hasClass('roving-banker-with')) {\n            index = 1;\n        }\n\n        var tabData = tabSelectionsArray[index],\n            prefix = 'input[name=\"Tabs[' + index + '].',\n            fixedSeln = jQuery('ul.runners-list a.fixed.selected'),\n            fixedWin = 0,\n            fixedPlace = 0;\n\n\n        tabData.sButtons = [];\n        tabData.starters = [];\n        tabData.propNum = 0;\n        tabData.isFixed = false;\n        tabData.isField = false;\n        tabData.isRovingBanker = false;\n\n        var oddsAndEvensSelectedButton = jQuery('.odds-evens span.selected');\n        var fobPropositionType = jQuery('#fobPropositionType');\n        var winPriceHidden = jQuery('#FixedWinPrice');\n\n        tabData.specialFobBet = null;\n        fobPropositionType.val(null);\n        if (oddsAndEvensSelectedButton.length > 0) {\n            tabData.specialFobBet = oddsAndEvensSelectedButton.children('.js-propType').val();\n            fobPropositionType.val(tabData.specialFobBet);\n            winPriceHidden.val(oddsAndEvensSelectedButton.children('[name=\"fixed-win\"]').val());\n            var propNum = oddsAndEvensSelectedButton.children(\"[name=prop-num]\").val();\n            tabData.propNum = propNum;\n            var propNumHidden = jQuery('#PropositionNumber');\n            if (propNumHidden.length > 0) {\n                propNumHidden.val(propNum);\n            }\n        }\n        else if (fixedSeln.length) {\n            tabData.isFixed = true;\n            tabData.propNum = fixedSeln.children('input[name=\"prop-num\"]').val();\n            tabData.propSeq = fixedSeln.children('input[name=\"prop-seq\"]').val();\n            jQuery('#selectedStarterNumber').val(fixedSeln.children('input[name=\"fixed-num\"]').val());\n            tabData.starters.push(fixedSeln.children('input[name=\"fixed-num\"]').val());\n            tabData.starterName = fixedSeln.parents('li').find(\".selection-name\").text();\n            jQuery('#selectedStarterName').val(tabData.starterName);\n            tabData.fixedPrice = fixedSeln.find('div.fixed-pay').html();\n            fixedWin = fixedSeln.children('input[name=\"fixed-win\"]').val();\n            fixedPlace = fixedSeln.children('input[name=\"fixed-place\"]').val();\n\n            if (jQuery('#PropositionNumber').length > 0) {\n                jQuery('#PropositionNumber').val(tabData.propNum);\n            }\n\n            if (jQuery('#PropositionSequence').length > 0) {\n                jQuery('#PropositionSequence').val(tabData.propSeq);\n            }\n\n            if (jQuery('#MultiPropositionNumber').length > 0) {\n                jQuery('#MultiPropositionNumber').val(tabData.propNum);\n            }\n\n            if (jQuery('#FixedWinPrice').length > 0) {\n                jQuery('#FixedWinPrice').val(fixedWin).change();\n            }\n\n            if (jQuery('#FixedPlacePrice').length > 0) {\n                jQuery('#FixedPlacePrice').val(fixedPlace).change();\n            }\n        } else {\n            if (jQuery('#PropositionNumber').length > 0) {\n                jQuery('#PropositionNumber').val(0);\n            }\n\n            if (jQuery('#PropositionSequence').length > 0) {\n                jQuery('#PropositionSequence').val(0);\n            }\n\n            if (jQuery('#MultiPropositionNumber').length > 0) {\n                jQuery('#MultiPropositionNumber').val(0);\n            }\n\n            tabData.isField = jQuery('.totebet-field-button').hasClass(selected);\n            tabData.isRovingBanker = jQuery('.rb-box').hasClass(selected);\n            tabData.isLegin = jQuery('.legin-box').hasClass(selected);\n            if (jQuery('.allup-group input[name=\"allup\"]:checked:enabled').length > 0) {\n                tabData.allUpBetType = jQuery('.allup-group input[name=\"allup\"]:checked:enabled').val();\n            }\n\n            if (!tabData.isField) {\n                var checkedStarters = jQuery('div.starter-tab input[name=\"starter\"]:checked:enabled');\n                checkedStarters.each(function () {\n                    if (jQuery.inArray(jQuery(this).val(), tabData.starters) == -1) {\n                        tabData.starters.push(jQuery(this).val());\n                    }\n                });\n\n                if (tabData.isQuinella && tabSelectionsArray.length > 1 && index == 0) {\n                    removeStarterSelectionFromTab(checkedStarters.val(), 1);\n                }\n\n                if (tabData.isRovingBanker && tabSelectionsArray.length > 1 && index == 0) {\n\n                    checkedStarters.each(function () { removeStarterSelectionFromTab(jQuery(this).val(), 1); });\n                }\n\n                //if starters are not sorted by number, we need to convert back to starter order\n                if (jQuery('input#SortOrder').val() !== 'Number') {\n                    tabData.starters.sort(function (a, b) {\n                        return a - b;\n                    });\n                }\n\n                //if only one starter, save the name for the display\n                if (tabData.starters.length == 1) {\n                    tabData.starterName = checkedStarters.parents('li').find(\".selection-name\").text();\n                }\n                else {\n                    tabData.starterName = \"\";\n                }\n            }\n\n            if (isSNotationAvailable) {\n                jQuery('span.s-button.selected').each(function () { tabData.sButtons.push(jQuery(this).text()); });\n\n                //mark each input with a class to make disabling easier.\n                jQuery('ul.runners-list input').each(function () {\n                    jQuery(this).toggleClass(tabData.sName, jQuery(this).is(':checked:enabled'));\n                });\n            }\n        }\n\n        //update hidden fields so data is submitted.\n        if (jQuery('#IsRovingBanker').length > 0) {\n            jQuery('#IsRovingBanker').val(tabData.isRovingBanker);\n        }\n        jQuery(prefix + 'Sel\"]').val(tabData.starters.join(\".\"));\n        jQuery(prefix + 'IsField\"]').val(tabData.isField);\n        jQuery(prefix + 'SButt\"]').val(tabData.sButtons.join(\".\"));\n        jQuery(prefix + 'AllUpBetType\"]').val(tabData.allUpBetType);\n        jQuery(prefix + 'RaceNo\"]').val(tabData.raceNo);\n\n    }\n\n    function removeStarterSelectionFromTab(starterNumber, tabIndex) {\n        var tabData = tabSelectionsArray[tabIndex];\n        var tempArray = new Array();\n\n        var startersLen = tabData.starters.length;\n        for (var i = 0; i < startersLen; i++) {\n            if (tabData.starters[i] != starterNumber) {\n                tempArray.push(tabData.starters[i]);\n            }\n        }\n\n        tabData.starters = tempArray;\n\n        if (tabData.starters.length == 1) {\n            tabData.starterName = jQuery('div.starter-tab input[name=\"starter\"][value=\"' + tabData.starters[0] + '\"]').parents('li').find(\".selection-name\").text();\n        }\n    }\n\n    //loads the starters from either the cache or the server\n    function loadNewStarters(newIndex, url, callback) {\n        var newTabData = tabSelectionsArray[newIndex];\n\n        if (newTabData == null) {\n            newTabData = null;\n        }\n        if (newTabData.cache) {\n            displayNewStarters(newTabData.cache, newIndex, callback);\n        } else {\n            NAV.ajaxGet(url, function (data) {\n                newTabData.cache = data;\n                displayNewStarters(data, newIndex, callback);\n            });\n        }\n    }\n\n    //updates the displayed starters\n    function displayNewStarters(data, newIndex, callback) {\n        jQuery('div.starter-tab').html(data);\n        CMN.initDisplayListStyle(jQuery('div.starter-tab ul:not(.silkforms)'));\n        reloadSelections(newIndex);\n        TOTE.initSelections();\n        if (callback) {\n            callback();\n        }\n    }\n\n    //repopulates the selections into the input fields\n    function reloadSelections(index, callback) {\n        var tabData = tabSelectionsArray[index];\n        var starterCheckBoxes = jQuery('div.starter-tab input[name=\"starter\"]:not(.leginselection)');\n\n        //clear selections first and remove disabled element for S-selections.\n        starterCheckBoxes.removeAttr(checked).removeAttr(disabled);\n        jQuery('span.field, span.s-button').removeClass(selected);\n        jQuery('ul.runners-list a.tote').removeClass(selected);\n        jQuery('ul.runners-list a.fixed').removeClass(selected);\n\n        if (tabData.specialFobBet) {\n            var fobPropButton = jQuery('.js-propType[value=\"' + tabData.specialFobBet + '\"]').parent();\n            if (!fobPropButton.hasClass(disabled)) {\n                fobPropButton.addClass(selected);\n            }\n        }\n\n        if (tabData.isQuinella) {\n            jQuery('div.starter-tab input[type=\"radio\"]').prop('disabled', true);\n        }\n\n        if (tabData.isLegin) {\n            LEGIN.toggleOn();\n        }\n\n        if (tabData.isRovingBanker) {\n            TOTE.toggleRovingBankerTabs(true, index);\n        }\n\n        //show/hide appropriate s-buttons\n\n        if (!jQuery('.rb-box').hasClass(selected)) {\n            jQuery('span.s-button').each(function () {\n                jQuery(this).toggle(jQuery(this).index() < tabData.sCount);\n                if (jQuery.inArray(jQuery(this).text(), tabData.sButtons) != -1) {\n                    jQuery(this).addClass(selected);\n                }\n            });\n\n            jQuery('.totebet-field-button').show();\n        }\n        else {\n            if (jQuery(\"ul.tabs.top li.roving-banker-tab\").hasClass('ui-state-active')) {\n\n                jQuery('span.s-button').each(function () {\n                    jQuery(this).hide();\n                });\n\n                jQuery('.totebet-field-button').hide();\n            }\n            else {\n                jQuery('.totebet-field-button').show();\n\n                disabledMatchingRovingBankers();\n            }\n        }\n\n        //Samsung Galaxy III does not correctly redraw the S-buttons if they are not on-screen.\n        CMN.redrawFix(jQuery('div.prefill-options'));\n\n        //pre-select and disable anything selected by the s-buttons\n        if (tabData.sButtons.length > 0) {\n            var sbucket = tabData.sButtons.slice(0), //make a copy because the getFullSClasses modifies the argument\n                filter = getFullSClasses(sbucket);\n\n            starterCheckBoxes.filter(filter).prop(disabled, true).prop(checked, true);\n        }\n\n        //now reselect starters\n        if (tabData.isField) {\n            jQuery('.totebet-field-button').addClass(selected);\n            starterCheckBoxes.prop(checked, true);\n            jQuery('ul.runners-list a.tote').not('.disabled').addClass(selected);\n        }\n        else {\n            if (tabData.isFixed) {\n                jQuery('ul.runners-list input[name=\"prop-num\"][value=\"' + tabData.propNum + '\"]').parent('.fixed').not('.disabled').addClass(selected);\n            } else {\n                starterCheckBoxes.each(function () {\n                    if (jQuery.inArray(jQuery(this).val(), tabData.starters) != -1) {\n                        jQuery(this).prop(checked, true);\n                        jQuery(this).parent('.tote').addClass(selected);\n                    }\n                });\n            }\n        }\n\n        var prefix = 'input[name=\"Tabs[' + index + '].';\n\n        if (jQuery(prefix + 'IsPlaceAllUpAvailable\"]').length > 0) {\n            jQuery('.allup-group input[value=\"Place\"]').parent('li').show();\n            jQuery('.allup-group input[value=\"Eachway\"]').parent('li').show();\n        } else {\n            jQuery('.allup-group input[value=\"Place\"]').parent('li').hide();\n            jQuery('.allup-group input[value=\"Eachway\"]').parent('li').hide();\n        }\n\n        if (jQuery(prefix + 'IsQuinellaAllUpAvailable\"]').length > 0) {\n            jQuery('.allup-group input[value=\"Quinella\"]').parent('li').show();\n        } else {\n            jQuery('.allup-group input[value=\"Quinella\"]').parent('li').hide();\n        }\n\n        jQuery('.allup-group input[value=\"' + tabData.allUpBetType + '\"]').prop('checked', true); ;\n\n        if (callback) {\n            callback();\n        }\n    }\n\n    ///Performs basic checks to see if the bet is legal\n    // * For Win/Place, at least one selection is made\n    // * For quinella, at least two selections.\n    // * For exacta/trifecta/First4 at least 2/3/4 selections in the first leg (allways) or one in each leg.\n    // * For double/quaddie/all up at least one selection in each leg.\n    // S-Buttons count as selections for this logic.\n    function isValidBet() {\n        var enabled = false,\n            allLegs = true,\n            onlyFirst = true;\n\n        //If there's a fixed odds selection it's automatically valid.\n        if ((tabSelectionsArray.length > 0 && tabSelectionsArray[0].isFixed) || tabSelectionsArray[0].specialFobBet) {\n            return true;\n        }\n\n        if (jQuery('#BetType').val() === 'AllUp') {\n\n            var validAllUpLegs = true;\n            for (var j = 0; j < tabSelectionsArray.length; j++) {\n                if (tabSelectionsArray[j].hasNoSelections()) {\n                    validAllUpLegs = false;\n                } else if (tabSelectionsArray[j].hasMinAllUpSelections() == false) {\n                    validAllUpLegs = false;\n                }\n            }\n\n            enabled = validAllUpLegs;\n\n        } else {\n            for (var i = 0; i < tabSelectionsArray.length; i++) {\n                if (tabSelectionsArray[i].hasNoSelections()) {\n                    allLegs = false;\n                } else if (i != 0) {\n                    onlyFirst = false;\n                }\n            }\n\n            //first do a special case check for quinella\n            if (jQuery('#BetType').val() === 'Quinella') {\n                if (jQuery('#quinellalegin-toggle').hasClass('selected')) {\n                    enabled = tabSelectionsArray[0].starters.length == 1 && tabSelectionsArray[1].hasMinSelections(2);\n                } else {\n                    enabled = tabSelectionsArray[0].hasMinSelections(2);\n                }\n            } else if (jQuery('.rb-box').hasClass(selected)) {\n\n                var minSelections = 0;\n\n                if (jQuery('#BetType').val() === 'Exacta') {\n                    minSelections = 2;\n                }\n                if (jQuery('#BetType').val() === 'Trifecta') {\n                    minSelections = 3;\n                } else if (jQuery('#BetType').val() === 'First4') {\n                    minSelections = 4;\n                }\n\n                enabled = hasMinimumRbSelections(minSelections);\n            }\n            else {\n                //all other bet types are good if there's one selection in each leg\n                enabled = allLegs;\n\n                //last case to check is for an allways bet\n                if (!enabled && onlyFirst && jQuery('#BetType').is('.allways')) {\n                    enabled = tabSelectionsArray[0].hasMinSelections(tabSelectionsArray.length);\n                }\n            }\n        }\n\n        return enabled;\n    }\n\n    function isValidFixedoddsBet() {\n        if ((tabSelectionsArray.length > 0 && tabSelectionsArray[0].isFixed) || tabSelectionsArray[0].specialFobBet) {\n            return true;\n        }\n\n        return false;\n    }\n    function isFixedOddsRacing() {\n        return jQuery(\"#isFobRacing\").val() === \"true\";\n    }\n    function getAllSelections() {\n        var selections = \"\";\n        var title = \"\";\n\n        for (var i = 0; i < tabSelectionsArray.length; i++) {\n            if (!tabSelectionsArray[i].hasNoSelections()) {\n                if (tabSelectionsArray[i].isFixed) {\n                    if (typeof self.isRacingFormat === 'undefined' || self.isRacingFormat === true) {\n                        selections += \"<li class='clearfix'><span class='position-name right-10'>W\" + ((jQuery('#FixedPlacesPaying').val() > 1) ? \"<br/>P\" : \"\") + \"</span><span class='position-value'>\" + jQuery('#FixedWinPrice').val() + ((jQuery('#FixedPlacesPaying').val() > 1) ? (\"<br/>\" + jQuery('#FixedPlacePrice').val()) : \"\") + \"</span><span class='data left-10'>\" + tabSelectionsArray[i].getSelections() + \"</span></li>\";\n                    } else {\n                        selections += \"<li><span class='title'>Seln No.</span><span class='data'>\" + jQuery('#PropositionNumber').val() + \"</span></li>\";\n                        selections += \"<li><span class='title'>Selection</span><span class='data'>\" + jQuery(\"#selectedStarterName\").val() + \"</span></li>\";\n                        selections += \"<li class='win-return'><span class='title'>Win Return</span><span class='data'>$\" + jQuery(\"#FixedWinPrice\").val() + \"</span></li>\";\n                        if (jQuery(\"#IsEachWayAvailable\").val() === 'True') {\n                            selections += \"<li class='place-return'><span class='title'>Plc Return</span><span class='data'>$\"\n                                + jQuery(\"#FixedPlacePrice\").val() + \"</span></li>\";\n                        }\n                    }\n\n                } else {\n\n                    if (jQuery('.rb-box').hasClass(selected)) {\n\n                        title = 'WITH';\n                        if (i === 0) {\n                            title = 'RB';\n                        }\n\n                        selections += \"<li><span class='title'>\" + title + \"</span><span class='data'>\" + tabSelectionsArray[i].getSelections() + \"</span></li>\";\n                    }\n                    else {\n\n                        if (isAllUpBetType) {\n                            title = \"Race \" + tabSelectionsArray[i].raceNo;\n\n                            selections += \"<li><span class='title'>\" + title + \"</span><span class='data'>\" + '(' + tabSelectionsArray[i].getAllUpBetType() + ')' + '&nbsp' + tabSelectionsArray[i].getSelections() + \"</span></li>\";\n                        } else {\n                            title = tabSelectionsArray[i].title;\n                            if (tabSelectionsArray[i].isQuinella && !LEGIN.isLeginSelected()) {\n                                title = \"Race \" + tabSelectionsArray[i].raceNo;\n                            }\n\n                            selections += \"<li><span class='title'>\" + title + \"</span><span class='data'>\" + tabSelectionsArray[i].getSelections() + \"</span></li>\";\n                        }\n\n                    }\n                }\n            } else if (tabSelectionsArray[i].specialFobBet) {\n                selections = \"<li class='clearfix'><span class='position-name right-10'>W\" + \"</span><span class='position-value'>\" + jQuery('.odds-evens span.selected').children('span').first().html() + \"</span><span class='data left-10'>\" + tabSelectionsArray[i].specialFobBet + \"</span></li>\";\n            }\n        }\n\n        return selections;\n    }\n\n    //Returns \"fixed\" if the user has selected a fixed bet, \"tote\" for a tote bet, \"none\" for no selections.\n    //Only checks the first tab, so only valid for win/place bets.\n    function getFixedToteType() {\n        if (tabSelectionsArray[0].isFixed || tabSelectionsArray[0].specialFobBet) {\n            return \"fixed\";\n        }\n\n        if (tabSelectionsArray[0].hasNoSelections()) {\n            return \"none\";\n        }\n\n        return \"tote\";\n    }\n\n    function getSubProductTypeHeaderText() {\n        var spFobBet = tabSelectionsArray[0].specialFobBet;\n        if (spFobBet === \"Odds\" || spFobBet === \"Evens\") {\n            return \"ODDS <span class='text-lower'>vs</span> EVENS\";\n        }\n        if (spFobBet === \"Inside\" || spFobBet === \"Outside\") {\n            return \"INSIDE <span class='text-lower'>vs</span> OUTSIDE\";\n        }\n\n        return \"\";\n    }\n\n    //returns a jquery selector that will cover all inputs that correspond to a given set of Sbutton selections\n    //sourceArray is the list of the selected buttons. It will be modified by this function.\n    function getFullSClasses(sourceArray) {\n        var targetData;\n\n        if (sourceArray.length == 0) {\n            return \"\";\n        }\n\n        for (var index = tabSelectionsArray.length - 1; index >= 0; index--) {\n            targetData = tabSelectionsArray[index];\n\n            //if this index is referenced by the current tab\n            if (jQuery.inArray(targetData.sName, sourceArray) != -1) {\n                for (var sfields = 0; sfields < targetData.sButtons.length; sfields++) {\n                    //find any s references in this tab and add them to the bucket (if not already there)\n                    if (jQuery.inArray(targetData.sButtons[sfields], sourceArray) == -1) {\n                        sourceArray.push(targetData.sButtons[sfields]);\n                    }\n                }\n            }\n        }\n\n        return \".\" + sourceArray.join(\",.\");\n    }\n\n    function disabledMatchingRovingBankers() {\n\n        jQuery('div.starter-tab input[name=\"starter\"]').filter('.S1').prop(disabled, true).prop(checked, true);\n    }\n\n    function clearCache() {\n        for (var i = 0; i < tabSelectionsArray.length; i++) {\n            tabSelectionsArray[i].cache = null;\n        }\n    }\n\n    // Sets up the global array that keeps track of the user's selections\n    function initTabArray(tabCount, races, supportsField, supportsSNotation, isMulti, isQuinella, isAllUp, isPreselect, isRacingFormat) {\n        tabSelectionsArray = [];\n        isMultiRace = isMulti;\n        isSNotationAvailable = supportsSNotation;\n        isAllUpBetType = isAllUp;\n        allUpFormula = \"\";\n        defaultFormula = \"\";\n        self.isRacingFormat = isRacingFormat;\n        for (var i = 0; i < tabCount; i++) {\n            tabSelectionsArray.push(new tabSelections(races[i], supportsField, supportsSNotation ? i : 0, jQuery(\"ul.tabs.top a\").eq(i).text(), isQuinella, isRacingFormat));\n        }\n\n        //if isPreselect is true it means there are some selections in the HTML that we need to maintain.\n        //Only coded/tested for FOB pre-selections so far.\n        if (isPreselect) {\n            saveSelections();\n        }\n\n        changeToTab(0);\n    }\n\n    //changes to a new TAB\n    function changeToTab(newIndex, url, callback) {\n        if (isMultiRace) {\n            // if it's multi-race we'll have to load the starters from either the cache or server\n            url = url ? url : jQuery(\"ul.tabs.top li.ui-state-active a\").attr(\"href\");\n            loadNewStarters(newIndex, url, callback);\n        }\n        else {\n            reloadSelections(newIndex, callback);\n        }\n    }\n\n    function hasMinimumRbSelections(minSelections) {\n\n        var hasMinimum = false;\n        var noOfSelections = 0;\n        var allLegs = false;\n\n        if (tabSelectionsArray.length > 1) {\n\n            allLegs = tabSelectionsArray[0].hasMinSelections(1) && tabSelectionsArray[1].hasMinSelections(1);\n\n            noOfSelections += tabSelectionsArray[0].selectionCount() + tabSelectionsArray[1].selectionCount();\n\n            if (allLegs) {\n                // Doesnt include field\n                if (noOfSelections >= minSelections) {\n                    hasMinimum = true;\n                } else {\n                    if (tabSelectionsArray[0].hasMinSelections(1) && tabSelectionsArray[1].isField) {\n                        hasMinimum = true;\n                    }\n\n                }\n            }\n        }\n\n        return hasMinimum;\n    }\n\n    function getRaceTabByRaceNumber(raceNumber) {\n        var raceTab = null;\n\n        for (var index = 0; index < tabSelectionsArray.length; index++) {\n\n            if (tabSelectionsArray[index].raceNo == raceNumber) {\n                raceTab = tabSelectionsArray[index];\n                break;\n            }\n        }\n\n        return raceTab;\n    }\n\n    function getRaceTabByIndex(index) {\n        var raceTab = null;\n\n        if (index >= 0 && index < tabSelectionsArray.length) {\n            raceTab = tabSelectionsArray[index];\n        }\n\n        return raceTab;\n    }\n\n    function createRaceTab(raceNumber, supportsField, sCount, isMulti, title, isQuinella) {\n        return new tabSelections(raceNumber, supportsField, sCount, title, isQuinella);\n    }\n\n    function replaceRaceTabs(newRaceTabs) {\n        tabSelectionsArray = newRaceTabs;\n    }\n\n    function tabExists(index) {\n        var newTabData = tabSelectionsArray[index];\n\n        if (newTabData) {\n            return true;\n        }\n\n        return false;\n    }\n\n    function getSelections(index) {\n\n        return tabSelectionsArray[index].starters;\n    }\n\n    function refreshHiddenFields() {\n\n        for (var index = 0; index < tabSelectionsArray.length; index++) {\n            var tabData = tabSelectionsArray[index],\n                prefix = 'input[name=\"Tabs[' + index + '].';\n\n            //update hidden fields so data is submitted.\n            if (jQuery('#IsRovingBanker').length > 0) {\n                jQuery('#IsRovingBanker').val(tabData.isRovingBanker);\n            }\n            jQuery(prefix + 'Sel\"]').val(tabData.starters.join(\".\"));\n            jQuery(prefix + 'IsField\"]').val(tabData.isField);\n            jQuery(prefix + 'SButt\"]').val(tabData.sButtons.join(\".\"));\n            jQuery(prefix + 'AllUpBetType\"]').val(tabData.allUpBetType);\n            jQuery(prefix + 'RaceNo\"]').val(tabData.raceNo);\n        }\n    }\n\n    function setAllUpFormula(formula) {\n        allUpFormula = formula;\n    }\n\n    function getAllUpFormula() {\n        return allUpFormula;\n    }\n\n    function setDefaultFormula(option) {\n        defaultFormula = option;\n    }\n\n    function getDefaultFormula() {\n        return defaultFormula;\n    }\n\n    function isSpecialFobPropositionSelected() {\n        return getRaceTabByIndex(0).specialFobBet && getRaceTabByIndex(0).specialFobBet.length > 0;\n    }\n\n    function isInsideOutsideSelected() {\n        return  getRaceTabByIndex(0).specialFobBet.toUpperCase() === 'INSIDE' ||\n                getRaceTabByIndex(0).specialFobBet.toUpperCase() === 'OUTSIDE';\n    }\n\n    function isOddsEvensSelected() {\n        return  getRaceTabByIndex(0).specialFobBet.toUpperCase() === 'ODDS' ||\n                getRaceTabByIndex(0).specialFobBet.toUpperCase() === 'EVENS';\n    }\n\n    function setSelectedTab(tabId) {\n        jQuery(\"#SelectedTab\").val(tabId);\n    }\n\n    return {\n        saveSelections: saveSelections,\n        getFullSClasses: getFullSClasses,\n        changeToTab: changeToTab,\n        clearCache: clearCache,\n        isValidBet: isValidBet,\n        getAllSelections: getAllSelections,\n        getSelections: getSelections,\n        getFixedToteType: getFixedToteType,\n        initTabArray: initTabArray,\n        clearAllSelections: clearAllSelections,\n        getRaceTabByIndex: getRaceTabByIndex,\n        getRaceTabByRaceNumber: getRaceTabByRaceNumber,\n        replaceRaceTabs: replaceRaceTabs,\n        tabExists: tabExists,\n        createRaceTab: createRaceTab,\n        refreshHiddenFields: refreshHiddenFields,\n        setAllUpFormula: setAllUpFormula,\n        getAllUpFormula: getAllUpFormula,\n        setDefaultFormula: setDefaultFormula,\n        getDefaultFormula: getDefaultFormula,\n        isValidFixedoddsBet: isValidFixedoddsBet,\n        isFixedOddsRacing: isFixedOddsRacing,\n        getSubProductTypeHeaderText: getSubProductTypeHeaderText,\n        isSpecialFobPropositionSelected: isSpecialFobPropositionSelected,\n        isInsideOutsideSelected: isInsideOutsideSelected,\n        isOddsEvensSelected: isOddsEvensSelected,\n        setSelectedTab : setSelectedTab\n    };\n\n})();\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Betting-v1/toteselections.legacy.js\n// module id = 318\n// module chunks = 5","module.exports = \"<form data-bind=\\\"submit: attemptChangePassword\\\">\\n\\n    <!-- ko if: !!errorMessage() -->\\n    <span class=\\\"big-14-10 field__error bottom-spacing\\\" data-bind=\\\"text: errorMessage\\\"></span>\\n    <!-- /ko -->\\n    <span class=\\\"field field--text field-plain-text-password\\\" data-bind=\\\"css: { 'has-content': !!plaintextPassword(), 'has-focus': plaintextPasswordFocused() }\\\">\\n        <span class=\\\"field__input\\\">\\n            <input id=\\\"plain-text-password-input\\\" required=\\\"required\\\" tabindex=\\\"100\\\" autofocus=\\\"autofocus\\\" data-bind=\\\"textInput: plaintextPassword, hasFocus: plaintextPasswordFocused, attr: { type: passwordInputType }\\\" />\\n        </span>\\n        <span class=\\\"field__label\\\">\\n            <label for=\\\"plain-text-password-input\\\">Enter a new password</label>\\n        </span>\\n    </span>\\n    <span class=\\\"field-toggle\\\">\\n        <span class=\\\"field field--check field-display-password\\\">\\n            <span class=\\\"field__input\\\">\\n                <input id=\\\"display-password-input\\\" type=\\\"checkbox\\\" tabindex=\\\"101\\\" autofocus=\\\"autofocus\\\" data-bind=\\\"checked: displayPassword\\\" />\\n            </span><!--\\n            --><span class=\\\"field__label\\\">\\n                <div class=\\\"onoffswitch\\\">\\n                    <input type=\\\"checkbox\\\" name=\\\"onoffswitch\\\" data-bind=\\\"checked: displayPassword\\\" class=\\\"onoffswitch-checkbox\\\" id=\\\"myonoffswitch\\\" checked>\\n                    <label class=\\\"onoffswitch-label\\\" for=\\\"myonoffswitch\\\">\\n                        <span class=\\\"onoffswitch-inner\\\"></span>\\n                        <span class=\\\"onoffswitch-switch\\\"></span>\\n                    </label>\\n                </div>\\n            </span>\\n        </span>\\n    </span>\\n    <section class=\\\"info info--validations info--validations--password\\\">\\n        <span class=\\\"info__validation info__validation--numbers-only\\\" data-bind=\\\" css: {'is-met': conditionNumbersOnly, 'is-not-met': !conditionNumbersOnly()}\\\">\\n            <span class=\\\"check-icon\\\" data-bind=\\\" css: {'is-met': conditionNumbersOnly, 'is-not-met': !conditionNumbersOnly()}\\\"></span>\\n            <span class=\\\"valign-validation-text left-spacing\\\">Numbers only</span>\\n        </span><!--\\n        --><span class=\\\"info__validation info__validation--length\\\" data-bind=\\\" css: {'is-met': conditionLength, 'is-not-met': !conditionLength()}\\\">\\n            <span class=\\\"check-icon\\\" data-bind=\\\" css: {'is-met': conditionLength, 'is-not-met': !conditionLength()}\\\"></span>\\n            <span class=\\\"valign-validation-text left-spacing\\\">4 - 8 numbers</span>\\n        </span><!--\\n        --><span class=\\\"info__validation info__validation--not-account-number\\\" data-bind=\\\" css: {'is-met': conditionNotEqualToAccountNumber, 'is-not-met': !conditionNotEqualToAccountNumber()}\\\">\\n            <span class=\\\"check-icon\\\" data-bind=\\\" css: {'is-met': conditionNotEqualToAccountNumber, 'is-not-met': !conditionNotEqualToAccountNumber()}\\\"></span>\\n            <span class=\\\"valign-validation-text left-spacing\\\">Different from your account number</span>\\n        </span><!--\\n        --><span class=\\\"info__validation info__validation--non-repeating\\\" data-bind=\\\" css: {'is-met': conditionRepeatingDigits, 'is-not-met': !conditionRepeatingDigits()}\\\">\\n            <span class=\\\"check-icon\\\" data-bind=\\\" css: {'is-met': conditionRepeatingDigits, 'is-not-met': !conditionRepeatingDigits()}\\\"></span>\\n            <span class=\\\"valign-validation-text left-spacing\\\">Should not contain the same digit more than twice in succession</span>\\n        </span>\\n    </section><!--\\n    --><section class=\\\"info info-reuse-notice top-spacing\\\">\\n        <span class=\\\"validation-note\\\">\\n            <span><strong>Note:</strong></span>\\n            <span class=\\\"left-spacing\\\">The new password must not be the same as the last four passwords used</span>\\n        </span>\\n    </section><!--\\n    --><span class=\\\"field field--submit field-next\\\" data-bind=\\\"css: {'is-disabled': !isValid()}\\\">\\n        <span class=\\\"field__input\\\">\\n            <button id=\\\"submit-next\\\" tabindex=\\\"201\\\" data-bind=\\\"enable: isValid\\\">Next</button>\\n        </span>\\n    </span>\\n</form>\\n\\n<footer>\\n    <span class=\\\"field field--link field-call\\\">\\n        <a href=\\\"tel:1300363688\\\" tabindex=\\\"301\\\">\\n            <span>\\n                <span class=\\\"phone-text\\\">\\n                    <span>For assistance,</span>\\n                    <span>please call</span>\\n                </span>\\n                <span class=\\\"call-icon\\\"></span>\\n            </span>\\n            <span class=\\\"phone-number\\\">\\n                1300 36 36 88\\n            </span>\\n        </a>\\n    </span>\\n</footer>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/text-loader!./Scripts/src/Foundation/Components/Authentication/ChangePassword/ChangePassword.tpl.html\n// module id = 350\n// module chunks = 5","module.exports = \"<form data-bind=\\\"submit: attemptLogin\\\">\\n    <span class=\\\"field field--text field-account-number\\\" data-bind=\\\"css: { 'has-content': !!accountNumber(), 'has-focus': accountNumberFocused(), 'has-error': !!errorMessage() }\\\">\\n\\t    <!--ko if: !!errorMessage()-->\\n        <span class=\\\"field__error\\\" data-bind=\\\" text: errorMessage()\\\"></span><!--/ko\\n        --><span class=\\\"field__input\\\">\\n            <input id=\\\"account-number-input\\\" type=\\\"tel\\\" tabindex=\\\"200\\\" data-bind=\\\"textInput: accountNumber, hasFocus: accountNumberFocused\\\" maxlength=\\\"8\\\" data-tid-login-account=\\\"\\\" />\\n        </span>\\n        <span class=\\\"field__label\\\">\\n            <label for=\\\"account-number-input\\\">Account Number</label>\\n        </span>\\n        <a href=\\\"#\\\" class=\\\"field__rel-link\\\" tabindex=\\\"300\\\" data-bind=\\\"click: beginRecoverAccountNumber\\\">Forgot account number</a>\\n    </span><!-- This comment allows us to put the spans on different lines without introducing whitespace between them.\\n    If we didn't two `50%` width spans would not fit next to each other.\\n    --><span class=\\\"field field--text field-account-password\\\" data-bind=\\\"css: { 'has-content': !!password(), 'has-focus': passwordFocused() }\\\">\\n        <span class=\\\" field__input\\\">\\n            <input id=\\\"password-input\\\" type=\\\"password\\\" tabindex=\\\"201\\\" data-bind=\\\"textInput: password, hasFocus: passwordFocused\\\" maxlength=\\\"8\\\" data-tid-login-password=\\\"\\\" />\\n        </span>\\n        <span class=\\\"field__label\\\">\\n            <label for=\\\"password-input\\\">Password</label>\\n        </span>\\n        <a href=\\\"#\\\" class=\\\"field__rel-link\\\" tabindex=\\\"301\\\" data-bind=\\\"click: beginRecoverPassword\\\">Forgot password</a>\\n    </span><!--\\n    --><span class=\\\"field field--check field-remember-user top-spacing\\\" data-bind=\\\" css: {'checkbox-has-focus': rememberUserFocused() }\\\">\\n    <span class=\\\" field__input\\\">\\n        <input id=\\\"remember-input\\\" tabindex=\\\"202\\\" type=\\\"checkbox\\\" data-bind=\\\"checked: rememberUser, hasFocus:rememberUserFocused\\\" />\\n    </span>\\n    <span class=\\\"field__label\\\">\\n        <label for=\\\"remember-input\\\">Remember me</label>\\n    </span>\\n</span><!--\\n    --><span class=\\\"field field--submit field-login top-spacing\\\" data-bind=\\\"css: {'is-disabled': !isValid()}\\\">\\n    <span class=\\\"field__input\\\">\\n        <button id=\\\"submit-login\\\" data-bind=\\\"enable: isValid()\\\" tabindex=\\\" 203\\\" data-tid-login-submit=\\\"\\\">Login</button>\\n    </span>\\n</span>\\n</form>\\n<footer>\\n    <span class=\\\"field field--link field-call\\\">\\n        <a href=\\\"tel:1300363688\\\" tabindex=\\\"301\\\">\\n            <span>\\n                <span class=\\\"phone-text\\\">\\n                    <span>For assistance,</span>\\n                    <span>please call</span>\\n                </span>\\n                <span class=\\\"call-icon\\\"></span>\\n            </span>\\n            <span class=\\\"phone-number\\\">\\n                1300 36 36 88\\n            </span>\\n        </a>\\n    </span><!--\\n    --><span class=\\\"field field--submit field-sign-up\\\" data-bind=\\\"click: signUp\\\">\\n    <span>\\n        Don&#8217;t have an account?\\n    </span>\\n    <button id=\\\"submit-signup\\\" class=\\\"btn orange-button\\\" tabindex=\\\"302\\\">Sign up now</button>\\n</span>\\n</footer>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/text-loader!./Scripts/src/Foundation/Components/Authentication/Logon/Logon.tpl.html\n// module id = 351\n// module chunks = 5","module.exports = \"<div class=\\\"neo\\\" data-bind=\\\"css: { 'logon': showLogon, 'recover-password': showRecoverPassword}\\\">\\n    <header>\\n        <!-- ko if: !!backHandler() -->\\n        <a href=\\\"#\\\" class=\\\"button button--back\\\" tabindex=\\\"500\\\" data-bind=\\\"click: backHandler()\\\">\\n            <span class=\\\"visuallyhidden\\\">Back</span>\\n        </a>\\n        <!-- /ko -->\\n        <h4 data-bind=\\\"text: heading\\\"></h4>\\n        <a href=\\\"#\\\" class=\\\"button button--close\\\" tabindex=\\\"501\\\" data-bind=\\\"click: close\\\">\\n            <span class=\\\"visuallyhidden\\\">Close dialog</span>\\n        </a>\\n    </header>\\n\\n    <tt-progress-steps params=\\\"delegate: progressDelegate\\\"></tt-progress-steps>\\n\\n    <!-- ko if: showLogon -->\\n    <tt-logon params=\\\"delegate: logonDelegate, logonUrl: logonUrl\\\"></tt-logon>\\n    <!-- /ko -->\\n\\n    <!-- ko if: showRecoverPassword -->\\n    <tt-recover-password params=\\\"delegate: recoverPasswordDelegate\\\"></tt-recover-password>\\n    <!-- /ko -->\\n    \\n    <!-- ko if: showRecoverAccountNumber -->\\n    <tt-recover-account-number params=\\\"delegate: recoverAccountNumberDelegate\\\"></tt-recover-account-number>\\n    <!-- /ko -->\\n\\n    <!-- ko if: showChangePassword -->\\n    <tt-logon-change-password params=\\\"delegate: changePasswordDelegate, changePasswordUrl: changePasswordUrl\\\"></tt-logon-change-password>\\n    <!-- /ko -->\\n</div>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/text-loader!./Scripts/src/Foundation/Components/Authentication/Neo/Neo.tpl.html\n// module id = 352\n// module chunks = 5","module.exports = \"<span class=\\\"progress-indicator\\\" data-bind=\\\"foreach: steps()\\\">\\n    <span class=\\\"circle\\\" data-bind=\\\"css: {'selected': $parent.isCurrentStep($index)}\\\"></span>\\n</span>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/text-loader!./Scripts/src/Foundation/Components/Authentication/Progress/Progress.tpl.html\n// module id = 353\n// module chunks = 5","module.exports = \"<!-- ko if: remoteComponentLoadedWithoutError -->\\n    <rwwa-identity-recover-account-number params=\\\"delegate: delegate\\\"></rwwa-identity-recover-account-number>\\n<!-- /ko -->\\n\\n<!-- ko if: errorLoadingRemote -->\\n<p class=\\\"fg-gray-lightest\\\">\\n    Account number recovery service is currently unavailable.\\n</p>\\n<span class=\\\"field field--link field-call\\\">\\n    <span class=\\\"center-text\\\">\\n        <a href=\\\"tel:1300363688\\\" tabindex=\\\"301\\\">\\n            <span class=\\\"phone-text\\\">\\n                <span>For assistance, please call</span>\\n                <span class=\\\"phone-number\\\">1300 36 36 88</span>\\n            </span>\\n            <span class=\\\"call-icon2\\\"></span>\\n        </a>\\n    </span>\\n</span>\\n<!-- /ko -->\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/text-loader!./Scripts/src/Foundation/Components/Authentication/RecoverAccountNumber/RecoverAccountNumber.tpl.html\n// module id = 354\n// module chunks = 5","module.exports = \"<!-- ko if: remoteComponentLoadedWithoutError -->\\n    <rwwa-identity-recover-password params=\\\"delegate: delegate\\\"></rwwa-identity-recover-password>\\n<!-- /ko -->\\n\\n<!-- ko if: errorLoadingRemote -->\\n<p class=\\\"fg-gray-lightest\\\">\\n    Password recovery service is currently unavailable.\\n</p>\\n<span class=\\\"field field--link field-call\\\">\\n    <span class=\\\"center-text\\\">\\n        <a href=\\\"tel:1300363688\\\" tabindex=\\\"301\\\">\\n            <span class=\\\"phone-text\\\">\\n                <span>For assistance, please call</span>\\n                <span class=\\\"phone-number\\\">1300 36 36 88</span>\\n            </span>\\n            <span class=\\\"call-icon2\\\"></span>\\n        </a>\\n    </span>\\n</span>\\n<!-- /ko -->\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/text-loader!./Scripts/src/Foundation/Components/Authentication/RecoverPassword/RecoverPassword.tpl.html\n// module id = 355\n// module chunks = 5","module.exports = \"<input type=\\\"number\\\" class=\\\"numpad-replaceable\\\" data-bind=\\\"textInput: Amount\\\" style=\\\"display: none\\\" />\\n<span data-key=\\\"calcDisplay\\\" class=\\\"numpad-finput\\\" data-bind=\\\"css : {'finput-focus': IsNumberPadVisible()}, text: AmountString, click: ShowNumberPad\\\"></span>\\n<a data-key=\\\"calcDisplayClear\\\" class=\\\"tticon tticon-cross finput-clear\\\" data-bind=\\\"click: ClearAmount\\\"><span class=\\\"accessible\\\">Clear</span></a>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/text-loader!./Scripts/src/Foundation/Components/Calculator/View/amountinput.tmpl.html\n// module id = 356\n// module chunks = 5","module.exports = \"<div class=\\\"inputbar\\\" data-bind='component: { name: \\\"amountinput\\\", params: BetAmount }'></div>\\n<div data-bind='component: { name: \\\"numberpad\\\", params: Calculator }, visible: BetAmount.IsNumberPadVisible'></div>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/text-loader!./Scripts/src/Foundation/Components/Calculator/View/calculator.tmpl.html\n// module id = 357\n// module chunks = 5","module.exports = \"<!--<div >-->\\n    <div class=\\\"numpad\\\">\\n        <div class=\\\"row clearfix r0 l0\\\">\\n            <div class=\\\"col-xs-2 pr0 pl0\\\"><a data-key=\\\"calc50c\\\" class=\\\"quickpick\\\" data-bind=\\\"css: {disabled: (Calculator.BetAmount.Step() != 0.5)}, click: function(data,event){ UpdateAmount(.5); return false;}, clickBubble: false\\\">50c</a></div>\\n            <div class=\\\"col-xs-2 pr0 pl0\\\"><a data-key=\\\"calc1d\\\" class=\\\"quickpick\\\" data-bind=\\\"click: function(data,event){ UpdateAmount(1); return false;}, clickBubble: false\\\">$1</a></div>\\n            <div class=\\\"col-xs-2 pr0 pl0\\\"><a data-key=\\\"calc5d\\\" class=\\\"quickpick\\\" data-bind=\\\"click: function(data,event){ UpdateAmount(5); return false;}, clickBubble: false\\\">$5</a></div>\\n            <div class=\\\"col-xs-2 pr0 pl0\\\"><a data-key=\\\"calc10d\\\" class=\\\"quickpick\\\" data-bind=\\\"click: function(data,event){ UpdateAmount(10); return false;}, clickBubble: false\\\">$10</a></div>\\n            <div class=\\\"col-xs-2 pr0 pl0\\\"><a data-key=\\\"calc50d\\\" class=\\\"quickpick\\\" data-bind=\\\"click: function(data,event){ UpdateAmount(50); return false;}, clickBubble: false\\\">$50</a></div>\\n            <div class=\\\"col-xs-2 pr0 pl0\\\"><a data-key=\\\"calc100d\\\" class=\\\"quickpick\\\" data-bind=\\\"click: function(data,event){ UpdateAmount(100); return false;}, clickBubble: false\\\">$100</a></div>\\n        </div>\\n        <div class=\\\"row clearfix r0 l0\\\">\\n            <div class=\\\"col-xs-2 pr0 pl0\\\"><a data-key=\\\"calc1n\\\" data-bind=\\\"click: function(data,event){ AppendAmount('1'); return false;}, clickBubble: false\\\">1</a></div>\\n            <div class=\\\"col-xs-2 pr0 pl0\\\"><a data-key=\\\"calc2n\\\" data-bind=\\\"click: function(data,event){ AppendAmount('2'); return false;}, clickBubble: false\\\">2</a></div>\\n            <div class=\\\"col-xs-2 pr0 pl0\\\"><a data-key=\\\"calc3n\\\" data-bind=\\\"click: function(data,event){ AppendAmount('3'); return false;}, clickBubble: false\\\">3</a></div>\\n            <div class=\\\"col-xs-2 pr0 pl0\\\"><a data-key=\\\"calc4n\\\" data-bind=\\\"click: function(data,event){ AppendAmount('4'); return false;}, clickBubble: false\\\">4</a></div>\\n            <div class=\\\"col-xs-2 pr0 pl0\\\"><a data-key=\\\"calc5n\\\" data-bind=\\\"click: function(data,event){ AppendAmount('5'); return false;}, clickBubble: false\\\">5</a></div>\\n            <div class=\\\"col-xs-2 pr0 pl0\\\"><a data-key=\\\"calcdn\\\" class=\\\"key-decimal\\\" data-bind=\\\"css: {disabled: (Calculator.BetAmount.Step() != 0.5)}, click: function(data,event){ AppendAmount('.'); return false;}, clickBubble: false\\\">.</a></div>\\n        </div>\\n        <div class=\\\"row clearfix r0 l0\\\">\\n            <div class=\\\"col-xs-2 pr0 pl0\\\"><a data-key=\\\"calc6n\\\" data-bind=\\\"click: function(data,event){ AppendAmount('6'); return false;}, clickBubble: false\\\">6</a></div>\\n            <div class=\\\"col-xs-2 pr0 pl0\\\"><a data-key=\\\"calc7n\\\" data-bind=\\\"click: function(data,event){ AppendAmount('7'); return false;}, clickBubble: false\\\">7</a></div>\\n            <div class=\\\"col-xs-2 pr0 pl0\\\"><a data-key=\\\"calc8n\\\" data-bind=\\\"click: function(data,event){ AppendAmount('8'); return false;}, clickBubble: false\\\">8</a></div>\\n            <div class=\\\"col-xs-2 pr0 pl0\\\"><a data-key=\\\"calc9n\\\" data-bind=\\\"click: function(data,event){ AppendAmount('9'); return false;}, clickBubble: false\\\">9</a></div>\\n            <div class=\\\"col-xs-2 pr0 pl0\\\"><a data-key=\\\"calc0n\\\" data-bind=\\\"click: function(data,event){ AppendAmount('0'); return false;}, clickBubble: false\\\">0</a></div>\\n            <div class=\\\"col-xs-2 pr0 pl0\\\"><a data-key=\\\"calcBS\\\" class=\\\"key-backspace\\\" data-bind=\\\"click: function(data,event){ BackSpaceAmount(); return false;}, clickBubble: false\\\"><span class=\\\"tticon tticon-backspace\\\"><span class=\\\"accessible\\\">Backspace</span></span></a></div>\\n        </div>\\n    </div>\\n<!--</div>-->\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/text-loader!./Scripts/src/Foundation/Components/Calculator/View/numberpad.tmpl.html\n// module id = 358\n// module chunks = 5","module.exports = \"<div class=\\\"mystery-pool-type-container\\\">\\n    <div class=\\\"mystery-pool-type clearfix\\\" data-bind=\\\"foreach: BetTypes\\\">\\n        <div class=\\\"mystery-pool-type-item\\\" data-bind=\\\"css : {'selected': IsActive(), 'disabled': IsDisabled}, click: function(data,event){ $parent.UpdateActiveBetType(data); return false;}\\\">\\n            <a><span class=\\\"mystery-type pool-type\\\" data-bind=\\\"text: Name, css: Type.toLowerCase()\\\"></span></a>\\n        </div>\\n    </div>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/text-loader!./Scripts/src/Foundation/Components/MysteryBet/View/bettype.tmpl.html\n// module id = 359\n// module chunks = 5","module.exports = \"<span data-bind='component: { name: \\\"mysterybet-bettypes\\\", params: BetTypesComponentViewModel }'></span>\\n<h3 class=\\\"mystery-number-of-bets\\\">Option</h3>\\n<span data-bind='component: { name: \\\"mysterybet-options\\\", params: OptionsComponentViewModel }'></span>\\n<h3 class=\\\"mystery-number-of-bets\\\">Number of bets</h3>\\n<span data-bind='component: { name: \\\"mysterybet-numberofbets\\\", params: NumberOfBetsComponentViewModel }'></span>\\n<h3 class=\\\"mystery-number-of-bets\\\">Spend per bet</h3>\\n<div class=\\\"mystery-flexi\\\" data-bind='visible: BetTypesComponentViewModel.ActiveBetType().Type !== \\\"WinPlace\\\" && BetTypesComponentViewModel.ActiveBetType().Type !== \\\"Combo\\\"'>\\n    <div class=\\\"mystery-flexi-container\\\">\\n        <span class=\\\"mystery-flexi-label\\\">\\n            Flexi\\n            <span class=\\\"mystery-flexi-percent\\\" data-bind=\\\"html: FlexiPercent\\\"></span>\\n        </span>\\n        <span data-bind='component: { name: \\\"calculator\\\", params: BetAmountViewModelForFourBetType}, click: function(){ ActivateCalculator(BetAmountViewModelForFourBetType); return false;}, clickBubble: false'></span>\\n    </div>\\n</div>\\n<div class=\\\"mystery-win-place-amount-container\\\" data-bind='visible: BetTypesComponentViewModel.ActiveBetType().Type === \\\"WinPlace\\\"'>\\n    <div class=\\\"mystery-win-place-amount\\\">\\n        <label>Win (Tote)</label>\\n        <span data-bind='component: { name: \\\"calculator\\\", params: BetAmountViewModelForWin}, click: function(){ ActivateCalculator(BetAmountViewModelForWin); return false;}, clickBubble: false'></span>\\n        <label>Place (Tote)</label>\\n        <span data-bind='component: { name: \\\"calculator\\\", params: BetAmountViewModelForPlace}, click: function(){ ActivateCalculator(BetAmountViewModelForPlace); return false;}, clickBubble: false'></span>\\n    </div>\\n</div>\\n<div class=\\\"mystery-combo-amount-container\\\" data-bind='visible: BetTypesComponentViewModel.ActiveBetType().Type === \\\"Combo\\\"'>\\n    <div class=\\\"mystery-combo-amount\\\">\\n        <span data-bind='component: { name: \\\"calculator\\\", params: BetAmountViewModelForCombo}, click: function(){ ActivateCalculator(BetAmountViewModelForCombo); return false;}, clickBubble: false'></span>\\n    </div>\\n</div>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/text-loader!./Scripts/src/Foundation/Components/MysteryBet/View/customisebetpage.tmpl.html\n// module id = 360\n// module chunks = 5","module.exports = \"<div class=\\\"mystery-calculator-container\\\">\\n    <div class=\\\"mystery-calculator\\\">\\n        <div class=\\\"mystery-calculator-list\\\" data-bind=\\\"foreach: NumberOfBetsViewModels\\\">\\n            <div class=\\\"mystery-calculator-list-item\\\" data-bind=\\\"css : {'selected': IsActive()}, text: Value, click: function(data,event){ $parent.UpdateActiveNumberOfBets(data); return false;}\\\">\\n            </div>\\n        </div>\\n    </div>\\n</div>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/text-loader!./Scripts/src/Foundation/Components/MysteryBet/View/numberofbets.tmpl.html\n// module id = 361\n// module chunks = 5","module.exports = \"<div class=\\\"mystery-combination-container\\\">\\n    <div class=\\\"mystery-combination clearfix\\\" data-bind=\\\"foreach: OptionViewModels\\\">\\n        <div class=\\\"mystery-combination-item\\\" data-bind=\\\"css : {'selected': IsActive()}, click: function(data,event){ $parent.UpdateActiveOption(data); return false;}\\\">\\n            <span class=\\\"combination-large\\\" data-bind=\\\"text: OptionNumber\\\"></span>\\n            <span class=\\\"combination-small\\\" data-bind=\\\"text: NumberOfCombinations\\\"></span>\\n            <span data-bind=\\\"text: Description\\\"></span>\\n        </div>\\n    </div>\\n</div>\\n<div class=\\\"mystery-bet-explanation-container\\\">\\n    <div class=\\\"mystery-bet-explanation-message\\\">\\n        <span class=\\\"mystery-bet-exclaim tticon tticon-infoinvertround\\\"></span>\\n        <span data-bind=\\\"text: ActiveOption().BetExplanation\\\"></span>\\n    </div>\\n</div>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/text-loader!./Scripts/src/Foundation/Components/MysteryBet/View/options.tmpl.html\n// module id = 362\n// module chunks = 5","module.exports = \"<div class=\\\"mystery-bet-type-container\\\">\\n\\n    <div class=\\\"mystery-bet-type clearfix\\\" data-bind=\\\"foreach: QuickPicks\\\">\\n\\n        <div class=\\\"mystery-bet-type-item\\\" data-bind=\\\"css : {'selected': IsActive(), 'disabled': IsDisabled}, click: function(data,event){ $parent.UpdateActiveQuickPick(data); return false;}, clickBubble: false\\\">\\n            <a>\\n                <span class=\\\"mystery-amount\\\" data-bind=\\\"text: CostString\\\"></span> <span class=\\\"mystery-type\\\" data-bind=\\\"text: Name\\\"></span>\\n            </a>\\n        </div>\\n    </div>\\n\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/text-loader!./Scripts/src/Foundation/Components/MysteryBet/View/quickpick.tmpl.html\n// module id = 363\n// module chunks = 5","module.exports = \"<span data-bind='component: { name: \\\"mysterybet-quickpicks\\\", params: QuickPicksComponentViewModel }'></span>\\n<h3 class=\\\"mystery-number-of-bets\\\">Number of bets</h3>\\n<span data-bind='component: { name: \\\"mysterybet-numberofbets\\\", params: NumberOfBetsComponentViewModel }'></span>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/text-loader!./Scripts/src/Foundation/Components/MysteryBet/View/quickpickpage.tmpl.html\n// module id = 364\n// module chunks = 5","module.exports = \"<div class=\\\"mystery-tabs-container\\\">\\n    <div class=\\\"mystery-tabs\\\" data-bind=\\\"foreach: TabViewModels\\\">\\n        <div class=\\\"mystery-tabs-item\\\" data-bind=\\\"css : {'selected': IsActive()}, text: Name, click: function(data,event){ $parent.UpdateActiveTab(data); return false;}, clickBubble: false\\\"></div>\\n    </div>\\n</div>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/text-loader!./Scripts/src/Foundation/Components/MysteryBet/View/tabs.tmpl.html\n// module id = 365\n// module chunks = 5","module.exports = \"<div id=\\\"modal-container\\\" class=\\\"popup\\\"  data-bind=\\\"style: {display : isOpen()? 'block' : 'none'}\\\">\\n    <header class=\\\"modal__header\\\">\\n\\n        <!-- ko if: showBackButton -->\\n        <a href=\\\"#\\\" class=\\\"button button--back\\\" tabindex=\\\"500\\\" data-bind=\\\"click: back\\\">\\n            <span class=\\\"visuallyhidden\\\">Back</span>\\n        </a>\\n        <!-- /ko -->\\n\\n        <h4 class=\\\"fz-21\\\" data-bind=\\\"text: title\\\"></h4>\\n        <a href=\\\"#\\\" class=\\\"button button--close\\\" tabindex=\\\"501\\\" data-bind=\\\"click: close\\\">\\n            <span class=\\\"visuallyhidden\\\">Close dialog</span>\\n        </a>\\n    </header>\\n\\n    <!-- ko if: displayComponent -->\\n\\n    <div data-bind=\\\"component: { name: component().name, params: component().params }\\\"></div>\\n    <!--<tt-remote params=\\\"{factory: factory(), title: title()}\\\"></tt-remote>-->\\n    <!-- /ko -->\\n\\n</div> \"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/text-loader!./Scripts/src/Foundation/Modal/modal-template.html\n// module id = 366\n// module chunks = 5","module.exports = \"<div>\\n    <div class=\\\"remote-app-host\\\">\\n        <div data-bind=\\\"visible: isLoading\\\" class=\\\"modalSection m1em pb70 pt70\\\">\\n            <div class=\\\"center-text\\\">\\n                <div class=\\\"spinner spinner-purple fz-24\\\" style=\\\"display: block; margin: auto;\\\"></div>\\n            </div>\\n        </div>\\n\\n        <div data-bind=\\\"visible: isError\\\" class=\\\"modalSection m1em text-center fadein\\\">\\n            <span class=\\\"alertBox__icon alertBox__icon--confirm\\\"></span>\\n            <div class=\\\"pb5 pt10 fz-16 faux-strong\\\" data-bind=\\\"text: title\\\">\\n                Deposits are not enabled for this account\\n            </div>\\n            <div class=\\\"alertBox__text\\\"\\n                 data-tid-alertboxmessage=\\\"\\\">\\n                Service is currently unavailable.<br/>\\n                Please contact our Customer Service Centre on <a href=\\\"tel:1300363688\\\">1300 36 36 88</a> for more information.\\n            </div>\\n            <div class=\\\"l-faux-table l-table-fixed w100\\\">\\n                <div class=\\\"l-faux-row\\\">\\n                    <div class=\\\"l-faux-cell p1em\\\">\\n                        <button class=\\\"button modalSection__button flat ls0 w100 fz-14 greenwhite\\\" data-bind=\\\"click: retry\\\">Try again</button>\\n                    </div>\\n                </div>\\n            </div>\\n        </div>\\n    </div>\\n</div>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/text-loader!./Scripts/src/Foundation/Modal/remote-template.html\n// module id = 367\n// module chunks = 5","module.exports = \"<div class=\\\"projected-pay\\\"  data-bind=\\\"visible:isVisible()\\\">\\n    <ul class=\\\"display-list\\\">\\n        <li><span class=\\\"title\\\">Projected Pay</span><span class=\\\"position-value\\\" data-bind=\\\"text:'$'+projectedPay()\\\"></span></li>\\n    </ul>\\n</div>\\n \"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/text-loader!./Scripts/src/Specials/Components/ProjectedPay/projected-pay.tmpl.html\n// module id = 369\n// module chunks = 5","module.exports = \"<div class=\\\"card-old fz-12 r10 l10\\\" data-bind=\\\"visible:isVisible()\\\">\\n    <span class=\\\"l-faux-cell cell-icon text-center alignmid pt5 pb5\\\"><span class=\\\"tticon tticon-exclaiminvert fz-24 fg-ui-warn\\\"></span></span>\\n    <span class=\\\"l-faux-cell alignmid\\\" data-bind=\\\"text:messageText()\\\"></span>\\n</div>\\n\\n \"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/text-loader!./Scripts/src/Specials/Components/PyosMessage/pyos-message.tmpl.html\n// module id = 370\n// module chunks = 5","module.exports = \"<div id=\\\"power-play\\\" class=\\\"superPick\\\" data-bind=\\\"visible: isVisible(), css: { selected: selectedSpecial() }\\\">\\n    <!-- ko with: selectedSpecial() -->\\n    <!-- This is required for non - bpr to support posting of form-->\\n    <input type=\\\"hidden\\\" data-bind=\\\"attr: { id: $parent.formFieldId()+'.SpecialSeq', name: $parent.formFieldId()+'.SpecialSeq' }, value: SpecialSeq\\\"/>\\n    <input type=\\\"hidden\\\" data-bind=\\\"attr: { id: $parent.formFieldId()+'.TokenId', name: $parent.formFieldId()+'.TokenId' }, value:TokenId\\\"/>\\n    <!-- /ko -->\\n    <div class=\\\"l-faux-table w100 cardHeader\\\">\\n        <div class=\\\"l-faux-cell alignmid pthalfem pbhalfem pl1em cell-icon\\\">\\n            <div class=\\\"tticon fz-21 tticon-special\\\"></div>\\n        </div>\\n        <div class=\\\"l-faux-cell alignmid pthalfem pbhalfem plhalfem pr1em\\\">\\n            <div class=\\\"l-faux-table w100 l-table-fixed\\\">\\n                <div class=\\\"l-faux-cell\\\">\\n                    <div class=\\\"fz-12 faux-strong text-ellipsis\\\">\\n                        <span>SuperPick</span>\\n                    </div>\\n                </div>\\n            </div>\\n        </div>\\n        <div class=\\\"l-faux-cell alignmid pthalfem pbhalfem pr1em cell-icon text-right\\\">\\n            <div class=\\\"fz-12 faux-strong superPick-reward\\\" data-bind=\\\"text: projectedReward(selectedSpecial(), true)\\\"></div>\\n        </div>\\n    </div>\\n    <div class=\\\"pthalfem pbhalfem\\\">\\n        <!-- ko foreach: specialOffers() -->\\n        <div class=\\\"l-faux-table l-table-fixed w100 text-center l-table-spaced plhalfem prhalfem\\\">\\n            <!-- ko foreach: $data -->\\n            <!-- ko if: !$parents[1].isObjectEmptyObject($data) -->\\n            <div class=\\\"l-faux-cell alignmid superPick-offer\\\" data-bind=\\\"css: { selected: $parents[1].isSelectedSpecialSeq($data)}\\\">\\n                <div class=\\\"l-faux-table w100 l-table-spaced-none\\\">\\n                    <div class=\\\"l-faux-row\\\">\\n                        <div class=\\\"l-faux-cell alignmid btn-superpick phalfem\\\" data-bind=\\\"click: $parents[1].setSelectedSpecial\\\">\\n                            <div class=\\\"fz-12\\\" data-bind=\\\"text: $data.Title ? $data.Title.split('-')[0] : ''\\\"></div>\\n                            <div class=\\\"fz-12 faux-strong\\\" data-bind=\\\"text: $data.Title? $data.Title.split('-')[1] : ''\\\"></div>\\n                        </div>\\n                    </div>\\n                    <div class=\\\"l-faux-row\\\">\\n                        <div class=\\\"l-faux-cell alignmid\\\">\\n                            <div class=\\\"fz-12 text-reward\\\">\\n                                <span class=\\\"faux-strong\\\" data-bind=\\\"text:  $parents[1].projectedReward($data)\\\"></span>\\n                                <span class=\\\"\\\" data-bind=\\\"text:  $data.MaxReward ? ' up to $' +  $data.MaxReward : ''\\\"></span>\\n                            </div>\\n                        </div>\\n                    </div>\\n                </div>\\n            </div>\\n            <!-- /ko -->\\n            <!-- ko if: $parents[1].isObjectEmptyObject($data) -->\\n            <div class=\\\"l-faux-cell alignmid\\\"></div>\\n            <!-- /ko -->\\n            <!-- /ko -->\\n        </div>\\n        <!-- /ko -->\\n    </div>\\n</div>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/text-loader!./Scripts/src/Specials/Components/PyosSelect/pyosselect.tmpl.html\n// module id = 371\n// module chunks = 5","define([\"require\", \"exports\", \"knockout\", \"jquery\"], function (require, exports, ko, jQuery) {\r\n    \"use strict\";\r\n    ko.bindingHandlers[\"slideVisible\"] = {\r\n        init: function (element, valueAccessor) {\r\n            var value = valueAccessor();\r\n            jQuery(element).toggle(ko.unwrap(value));\r\n        },\r\n        update: function (element, valueAccessor) {\r\n            var value = valueAccessor();\r\n            ko.unwrap(value) ? jQuery(element).slideDown('fast') : jQuery(element).slideUp('fast');\r\n        }\r\n    };\r\n});\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/AppUtils/Framework/CustomBindings/slideVisible.ts\n// module id = 372\n// module chunks = 5","define([\"require\", \"exports\"], function (require, exports) {\r\n    \"use strict\";\r\n    var InvariantFailureException = (function () {\r\n        function InvariantFailureException(message) {\r\n            this.message = message;\r\n        }\r\n        return InvariantFailureException;\r\n    }());\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    exports.default = InvariantFailureException;\r\n});\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/AppUtils/Framework/Exceptions/InvariantFailureException.ts\n// module id = 373\n// module chunks = 5","define([\"require\", \"exports\", \"inversify\", \"./services.config\", \"underscore\"], function (require, exports, inversify_1, services_config_1, underscore) {\r\n    \"use strict\";\r\n    var initialiseKernel = underscore.once(function () {\r\n        var kernel = new inversify_1.Kernel();\r\n        kernel.load(services_config_1.default);\r\n        return kernel;\r\n    });\r\n    var rootKernel = initialiseKernel();\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    exports.default = rootKernel;\r\n});\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/AppUtils/Framework/IOC/inversify.config.ts\n// module id = 374\n// module chunks = 5","define([\"require\", \"exports\", \"inversify\", \"../Messaging/EventAggregator\", \"../ProgressIndicator/ProgressIndicator\", \"../WindowManagement/AppWindow\", \"../Timers/CountdownTimer\", \"../Utils/LogInHelper\", \"../Utils/PreferencesServiceWrapper\"], function (require, exports, inversify_1, EventAggregator_1, ProgressIndicator_1, AppWindow_1, CountdownTimer_1, LogInHelper_1, PreferencesServiceWrapper_1) {\r\n    \"use strict\";\r\n    var services = new inversify_1.KernelModule(function (bind) {\r\n        bind(\"IEventAggregator\").to(EventAggregator_1.default).inSingletonScope();\r\n        bind(\"IPreferencesServiceWrapper\").to(PreferencesServiceWrapper_1.PreferencesServiceWrapper).inSingletonScope();\r\n        bind(\"IAppWindow\").to(AppWindow_1.default).inSingletonScope();\r\n        bind(\"ICountdownTimer\").to(CountdownTimer_1.default);\r\n        bind(\"IProgressIndicator\").to(ProgressIndicator_1.default);\r\n        bind(\"ILoginHelper\").to(LogInHelper_1.LogInHelper);\r\n    });\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    exports.default = services;\r\n});\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/AppUtils/Framework/IOC/services.config.ts\n// module id = 375\n// module chunks = 5","define([\"require\", \"exports\"], function (require, exports) {\r\n    \"use strict\";\r\n    var Lock = (function () {\r\n        function Lock() {\r\n            this._value = 0;\r\n        }\r\n        Lock.prototype.trylock = function () {\r\n            if (this._value) {\r\n                return false;\r\n            }\r\n            this._value = 1;\r\n            return true;\r\n        };\r\n        Lock.prototype.unlock = function () {\r\n            this._value = 0;\r\n        };\r\n        Lock.prototype.count = function () {\r\n            return this._value;\r\n        };\r\n        return Lock;\r\n    }());\r\n    exports.Lock = Lock;\r\n});\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/AppUtils/Framework/Lock.ts\n// module id = 376\n// module chunks = 5","define([\"require\", \"exports\", \"tslib\", \"knockout\", \"inversify\"], function (require, exports, tslib_1, ko, inversify_1) {\r\n    \"use strict\";\r\n    var ProgressIndicatorBase = (function () {\r\n        function ProgressIndicatorBase() {\r\n            this.serviceCallCompleted = ko.observable(false);\r\n        }\r\n        ProgressIndicatorBase.prototype.beginning = function () {\r\n            this.setServiceCallCompleted(false);\r\n        };\r\n        ProgressIndicatorBase.prototype.finished = function () {\r\n            this.setServiceCallCompleted(true);\r\n        };\r\n        ProgressIndicatorBase.prototype.displayFor = function (_) {\r\n            throw new Error(\"must override this operation\");\r\n        };\r\n        ProgressIndicatorBase.prototype.setServiceCallCompleted = function (isRunning) {\r\n            this.serviceCallCompleted(isRunning);\r\n            this.serviceCallCompleted.valueHasMutated();\r\n        };\r\n        return ProgressIndicatorBase;\r\n    }());\r\n    ProgressIndicatorBase = tslib_1.__decorate([\r\n        inversify_1.injectable(),\r\n        tslib_1.__metadata(\"design:paramtypes\", [])\r\n    ], ProgressIndicatorBase);\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    exports.default = ProgressIndicatorBase;\r\n});\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/AppUtils/Framework/ProgressIndicator/ProgressIndicatorBase.ts\n// module id = 377\n// module chunks = 5","define([\"require\", \"exports\", \"tslib\", \"decimal-js\", \"../../Store/PyosStore\", \"inversify\"], function (require, exports, tslib_1, Decimal, PyosStore_1, inversify_1) {\r\n    \"use strict\";\r\n    var ProjectedPayViewModel = (function () {\r\n        function ProjectedPayViewModel(store) {\r\n            this._store = store;\r\n            this._maxProjectedPay = new Decimal(\"999999999.99\");\r\n        }\r\n        ProjectedPayViewModel.prototype.isVisible = function () {\r\n            return !!(this._store.stake() && this._store.priceDetails());\r\n        };\r\n        ProjectedPayViewModel.prototype.projectedPay = function () {\r\n            var projectedPay = new Decimal(0);\r\n            if (this._store.stake() && this._store.priceDetails()) {\r\n                var winPay = this._store.stake().Win.times(this._store.priceDetails().Win.DollarReturn);\r\n                var placePay = this._store.stake().Place.times(this._store.priceDetails().Place.DollarReturn);\r\n                projectedPay = winPay.plus(placePay);\r\n                projectedPay = Decimal.min(projectedPay, this._maxProjectedPay);\r\n                projectedPay = Decimal.max(projectedPay, 0);\r\n            }\r\n            return projectedPay.toFixed(2, Decimal.ROUND_FLOOR);\r\n        };\r\n        return ProjectedPayViewModel;\r\n    }());\r\n    ProjectedPayViewModel = tslib_1.__decorate([\r\n        inversify_1.injectable(),\r\n        tslib_1.__param(0, inversify_1.inject(\"PyosStore\")),\r\n        tslib_1.__metadata(\"design:paramtypes\", [PyosStore_1.PyosStore])\r\n    ], ProjectedPayViewModel);\r\n    exports.ProjectedPayViewModel = ProjectedPayViewModel;\r\n});\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Specials/Components/ProjectedPay/ProjectedPayViewModel.ts\n// module id = 378\n// module chunks = 5","define([\"require\", \"exports\", \"tslib\", \"../../Store/PyosStore\", \"inversify\"], function (require, exports, tslib_1, PyosStore_1, inversify_1) {\r\n    \"use strict\";\r\n    var PyosMessageViewModel = (function () {\r\n        function PyosMessageViewModel(store) {\r\n            this._store = store;\r\n        }\r\n        PyosMessageViewModel.prototype.isVisible = function () {\r\n            return !!this._store.errorMessage();\r\n        };\r\n        PyosMessageViewModel.prototype.messageText = function () {\r\n            return this._store.errorMessage();\r\n        };\r\n        return PyosMessageViewModel;\r\n    }());\r\n    PyosMessageViewModel = tslib_1.__decorate([\r\n        inversify_1.injectable(),\r\n        tslib_1.__param(0, inversify_1.inject(\"PyosStore\")),\r\n        tslib_1.__metadata(\"design:paramtypes\", [PyosStore_1.PyosStore])\r\n    ], PyosMessageViewModel);\r\n    exports.PyosMessageViewModel = PyosMessageViewModel;\r\n});\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Specials/Components/PyosMessage/PyosMessageViewModel.ts\n// module id = 379\n// module chunks = 5","define([\"require\", \"exports\", \"tslib\", \"../../Store/PyosStore\", \"inversify\", \"../../../AppUtils/Utils/CurrencyConverter\", \"../../../AppUtils/Framework/CustomBindings/slideVisible\"], function (require, exports, tslib_1, PyosStore_1, inversify_1, CurrencyConverter_1) {\r\n    \"use strict\";\r\n    var PyosSelectViewModel = (function () {\r\n        function PyosSelectViewModel(params, store) {\r\n            var _this = this;\r\n            this.isSelectedSpecialSeq = function (specialOffer) {\r\n                var selectedSpecialSeq = _this._store.selectedSpecialSeq();\r\n                return selectedSpecialSeq === specialOffer.SpecialSeq;\r\n            };\r\n            this.projectedReward = function (specialOffer, isHeader) {\r\n                if (isHeader === void 0) { isHeader = false; }\r\n                if (specialOffer) {\r\n                    var reward = _this._store.projectedReward(specialOffer);\r\n                    if (reward.greaterThan(0)) {\r\n                        if (reward.isInt()) {\r\n                            return _this._currencyConverter.toMoney(Number(reward), 0);\r\n                        }\r\n                        return _this._currencyConverter.toMoney(Number(reward), 2);\r\n                    }\r\n                    else {\r\n                        return isHeader ? \"$0\" : \"\";\r\n                    }\r\n                }\r\n                return null;\r\n            };\r\n            this.setSelectedSpecial = function (specialOffer) {\r\n                _this._store.setSelectedSpecial(specialOffer);\r\n            };\r\n            this.isObjectEmptyObject = function (specialOffer) {\r\n                return Object.getOwnPropertyNames(specialOffer).length === 0;\r\n            };\r\n            this._formFieldId = params.formFieldId;\r\n            this._store = store;\r\n            this._currencyConverter = new CurrencyConverter_1.CurrencyConverter();\r\n        }\r\n        PyosSelectViewModel.prototype.formFieldId = function () {\r\n            return this._formFieldId;\r\n        };\r\n        PyosSelectViewModel.prototype.loading = function () {\r\n            return this._store.loading();\r\n        };\r\n        PyosSelectViewModel.prototype.specialOffers = function () {\r\n            var offers = this._store.specialOffers();\r\n            var numberOfRows = Math.ceil(offers.length / 3);\r\n            var numberOfColoumns = numberOfRows * 3;\r\n            var tableRows = [];\r\n            for (var i = 0; i < numberOfRows; i++) {\r\n                tableRows.push([]);\r\n            }\r\n            var row = 0;\r\n            for (var cell = 0; cell < numberOfColoumns; cell++) {\r\n                if (offers.length <= 3 && cell < offers.length) {\r\n                    tableRows[row].push(offers[cell]);\r\n                }\r\n                else if (offers.length === 4 && cell < offers.length) {\r\n                    tableRows[row].push(offers[cell]);\r\n                    if (cell === 1) {\r\n                        row++;\r\n                    }\r\n                }\r\n                else if (offers.length >= 5) {\r\n                    tableRows[row].push(cell >= offers.length ? {} : offers[cell]);\r\n                    if ((cell + 1) % 3 === 0) {\r\n                        row++;\r\n                    }\r\n                }\r\n            }\r\n            return tableRows;\r\n        };\r\n        PyosSelectViewModel.prototype.selectedSpecialSeq = function () {\r\n            return this._store.selectedSpecialSeq();\r\n        };\r\n        PyosSelectViewModel.prototype.isExpanded = function () {\r\n            return this._store.isExpanded();\r\n        };\r\n        PyosSelectViewModel.prototype.isVisible = function () {\r\n            return this._store.isVisible();\r\n        };\r\n        PyosSelectViewModel.prototype.selectedSpecial = function () {\r\n            return this._store.selectedSpecial();\r\n        };\r\n        PyosSelectViewModel.prototype.primaryAction = function () {\r\n            this._store.primaryAction();\r\n        };\r\n        PyosSelectViewModel.prototype.clearSelectedSpecial = function () {\r\n            this._store.clearSelectedSpecial();\r\n        };\r\n        return PyosSelectViewModel;\r\n    }());\r\n    PyosSelectViewModel = tslib_1.__decorate([\r\n        inversify_1.injectable(),\r\n        tslib_1.__param(0, inversify_1.inject(\"$params\")),\r\n        tslib_1.__param(1, inversify_1.inject(\"PyosStore\")),\r\n        tslib_1.__metadata(\"design:paramtypes\", [Object, PyosStore_1.PyosStore])\r\n    ], PyosSelectViewModel);\r\n    exports.PyosSelectViewModel = PyosSelectViewModel;\r\n});\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Specials/Components/PyosSelect/PyosSelectViewModel.ts\n// module id = 380\n// module chunks = 5","define([\"require\", \"exports\", \"tslib\", \"inversify\", \"knockout\", \"../../../AppUtils/Framework/Disposable/Disposable\"], function (require, exports, tslib_1, inversify_1, ko, Disposable_1) {\r\n    \"use strict\";\r\n    var FobSpecialTokensViewModel = (function (_super) {\r\n        tslib_1.__extends(FobSpecialTokensViewModel, _super);\r\n        function FobSpecialTokensViewModel(eventAggregator, pyosService, loginHelper, tokensMapper, appWindow) {\r\n            var _this = _super.call(this, eventAggregator, appWindow) || this;\r\n            _this.pyosService = pyosService;\r\n            _this.loginHelper = loginHelper;\r\n            _this.tokensMapper = tokensMapper;\r\n            _this.appWindow = appWindow;\r\n            return _this;\r\n        }\r\n        FobSpecialTokensViewModel.prototype.init = function () {\r\n            var _this = this;\r\n            this.isBusy = ko.observable(false);\r\n            this.isUserAuthenticated = ko.observable(this.loginHelper.isUserLoggedIn());\r\n            this.isExpandedView = ko.observable(false);\r\n            this.standardPowerPlaysTokenId = ko.observable();\r\n            this.bonusTokens = ko.observableArray([]);\r\n            this.numberOfStandardPowerPlayBets = ko.observable(0);\r\n            this.numberOfBonusPowerPlayBets = ko.observable(0);\r\n            this.totalNumberOfBets = ko.observable(0);\r\n            this.emptyTokensReason = ko.observable(null);\r\n            this.shouldDisplayEmptyTokensReason = ko.observable(false);\r\n            this.safeSubscribe('nav.menu', function (state) {\r\n                if (state === \"open\" && _this.isUserAuthenticated()) {\r\n                    _this.getSpecialTokens();\r\n                }\r\n            });\r\n            this.safeSubscribe('lo.login', function (_) {\r\n                _this.isUserAuthenticated(true);\r\n            });\r\n            this.safeSubscribe('lo.logout', function (_) {\r\n                _this.clearData();\r\n                _this.isUserAuthenticated(false);\r\n            });\r\n            return this;\r\n        };\r\n        FobSpecialTokensViewModel.prototype.toggleView = function () {\r\n            var newState = !this.isExpandedView();\r\n            this.isExpandedView(newState);\r\n            if (newState) {\r\n                this.getSpecialTokens();\r\n            }\r\n        };\r\n        FobSpecialTokensViewModel.prototype.navigateToOffer = function (tokenId) {\r\n            var _this = this;\r\n            if (tokenId) {\r\n                this.isBusy(true);\r\n                var promise = this.pyosService.getSpecialUrl(tokenId);\r\n                promise.then(function (result) {\r\n                    if (result != undefined && result.success) {\r\n                        if (result.data.SpecialUrl != undefined && result.data.SpecialUrl.length > 0) {\r\n                            _this.evtAggregator.publish(\"menu.shouldClose\");\r\n                            _this.appWindow.redirectTo(result.data.SpecialUrl);\r\n                        }\r\n                        else {\r\n                            _this.getSpecialTokens();\r\n                        }\r\n                    }\r\n                    _this.isBusy(false);\r\n                })\r\n                    .catch(function (_) {\r\n                    _this.isBusy(false);\r\n                });\r\n            }\r\n        };\r\n        FobSpecialTokensViewModel.prototype.getSpecialTokens = function () {\r\n            var _this = this;\r\n            this.isBusy(true);\r\n            var promise = this.pyosService.retrieveFobSpecialTokens();\r\n            promise.then(function (result) {\r\n                if (result != undefined) {\r\n                    if (result.success) {\r\n                        _this.updateData(result);\r\n                        if (!_this.isUserAuthenticated()) {\r\n                            _this.isUserAuthenticated(true);\r\n                        }\r\n                    }\r\n                    else if (result.errorCode === 403) {\r\n                        _this.clearData();\r\n                        if (_this.isUserAuthenticated()) {\r\n                            _this.isUserAuthenticated(false);\r\n                        }\r\n                    }\r\n                }\r\n                _this.isBusy(false);\r\n            })\r\n                .catch(function (_) {\r\n                _this.clearData();\r\n                _this.isBusy(false);\r\n            });\r\n        };\r\n        FobSpecialTokensViewModel.prototype.updateData = function (dto) {\r\n            var _this = this;\r\n            var totalNoOfBonusBets = 0;\r\n            var totalNoOfStandardBets = 0;\r\n            var bonusTokens = [];\r\n            this.standardPowerPlaysTokenId(null);\r\n            dto.data.Tokens.forEach(function (token) {\r\n                if (token.IsBonusToken) {\r\n                    bonusTokens.push(token);\r\n                    totalNoOfBonusBets = totalNoOfBonusBets + token.BetsAvailable;\r\n                }\r\n                else {\r\n                    totalNoOfStandardBets = totalNoOfStandardBets + token.BetsAvailable;\r\n                    _this.standardPowerPlaysTokenId(token.TokenId);\r\n                }\r\n            });\r\n            this.numberOfBonusPowerPlayBets(totalNoOfBonusBets);\r\n            this.numberOfStandardPowerPlayBets(totalNoOfStandardBets);\r\n            this.totalNumberOfBets(totalNoOfBonusBets + totalNoOfStandardBets);\r\n            this.tokensMapper.mapTokens(this.bonusTokens, bonusTokens);\r\n            this.emptyTokensReason(dto.data.TokensFault ? dto.data.TokensFault.Message : null);\r\n            this.shouldDisplayEmptyTokensReason((dto.data.Tokens.length <= 0 && dto.data.TokensFault != null && dto.data.TokensFault.Message.length > 0));\r\n        };\r\n        FobSpecialTokensViewModel.prototype.clearData = function () {\r\n            this.standardPowerPlaysTokenId(null);\r\n            this.numberOfBonusPowerPlayBets(0);\r\n            this.numberOfStandardPowerPlayBets(0);\r\n            this.totalNumberOfBets(0);\r\n            this.bonusTokens.removeAll();\r\n            this.isExpandedView(false);\r\n            this.emptyTokensReason(null);\r\n            this.shouldDisplayEmptyTokensReason(false);\r\n        };\r\n        return FobSpecialTokensViewModel;\r\n    }(Disposable_1.Disposable));\r\n    FobSpecialTokensViewModel = tslib_1.__decorate([\r\n        inversify_1.injectable(),\r\n        tslib_1.__param(0, inversify_1.inject(\"IEventAggregator\")),\r\n        tslib_1.__param(1, inversify_1.inject(\"IPyosService\")),\r\n        tslib_1.__param(2, inversify_1.inject(\"ILoginHelper\")),\r\n        tslib_1.__param(3, inversify_1.inject(\"ITokensMapper\")),\r\n        tslib_1.__param(4, inversify_1.inject(\"IAppWindow\")),\r\n        tslib_1.__metadata(\"design:paramtypes\", [Object, Object, Object, Object, Object])\r\n    ], FobSpecialTokensViewModel);\r\n    exports.FobSpecialTokensViewModel = FobSpecialTokensViewModel;\r\n});\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Specials/Components/Tokens/FobSpecialTokensViewModel.ts\n// module id = 381\n// module chunks = 5","define([\"require\", \"exports\", \"tslib\", \"inversify\", \"../../Model/SpecialTokenModel\"], function (require, exports, tslib_1, inversify_1, SpecialTokenModel_1) {\r\n    \"use strict\";\r\n    var TokensMapper = (function () {\r\n        function TokensMapper() {\r\n        }\r\n        TokensMapper.prototype.mapTokens = function (oldTokens, newTokens) {\r\n            if (oldTokens() == undefined || newTokens == undefined) {\r\n                return;\r\n            }\r\n            this.updateExisting(oldTokens, newTokens);\r\n            this.addNewOnes(oldTokens, newTokens);\r\n            this.removeOldOnes(oldTokens, newTokens);\r\n        };\r\n        TokensMapper.prototype.updateExisting = function (oldTokens, newTokens) {\r\n            newTokens.forEach(function (newTokenDto) {\r\n                oldTokens().forEach(function (oldToken) {\r\n                    if (newTokenDto.TokenId === oldToken.id) {\r\n                        oldToken.name(newTokenDto.TokenName);\r\n                        oldToken.betsAvailable(newTokenDto.BetsAvailable);\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        TokensMapper.prototype.addNewOnes = function (oldTokens, newTokens) {\r\n            newTokens.forEach(function (newTokenDto) {\r\n                var alreadyExists = oldTokens().some(function (oldToken) { return oldToken.id === newTokenDto.TokenId; });\r\n                if (!alreadyExists) {\r\n                    oldTokens.push(new SpecialTokenModel_1.SpecialTokenModel(newTokenDto.TokenId, newTokenDto.TokenName, newTokenDto.BetsAvailable));\r\n                }\r\n            });\r\n        };\r\n        TokensMapper.prototype.removeOldOnes = function (oldTokens, newTokens) {\r\n            var needsRemovingTokenIds = [];\r\n            oldTokens().forEach(function (oldToken) {\r\n                var alreadyExists = newTokens.some(function (newTokenDto) { return newTokenDto.TokenId === oldToken.id; });\r\n                if (!alreadyExists) {\r\n                    needsRemovingTokenIds.push(oldToken.id);\r\n                }\r\n            });\r\n            needsRemovingTokenIds.forEach(function (oldTokenId) {\r\n                oldTokens.remove(function (token) {\r\n                    return token.id === oldTokenId;\r\n                });\r\n            });\r\n        };\r\n        return TokensMapper;\r\n    }());\r\n    TokensMapper = tslib_1.__decorate([\r\n        inversify_1.injectable(),\r\n        tslib_1.__metadata(\"design:paramtypes\", [])\r\n    ], TokensMapper);\r\n    exports.TokensMapper = TokensMapper;\r\n});\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Specials/Components/Tokens/TokensMapper.ts\n// module id = 382\n// module chunks = 5","define([\"require\", \"exports\", \"tslib\"], function (require, exports, tslib_1) {\r\n    \"use strict\";\r\n    var EnquirySelectionDto = (function () {\r\n        function EnquirySelectionDto() {\r\n        }\r\n        return EnquirySelectionDto;\r\n    }());\r\n    exports.EnquirySelectionDto = EnquirySelectionDto;\r\n    var RacingEnquirySelectionDto = (function (_super) {\r\n        tslib_1.__extends(RacingEnquirySelectionDto, _super);\r\n        function RacingEnquirySelectionDto() {\r\n            return _super.apply(this, arguments) || this;\r\n        }\r\n        return RacingEnquirySelectionDto;\r\n    }(EnquirySelectionDto));\r\n    exports.RacingEnquirySelectionDto = RacingEnquirySelectionDto;\r\n    var SportsEnquirySelectionExDto = (function (_super) {\r\n        tslib_1.__extends(SportsEnquirySelectionExDto, _super);\r\n        function SportsEnquirySelectionExDto() {\r\n            return _super.apply(this, arguments) || this;\r\n        }\r\n        return SportsEnquirySelectionExDto;\r\n    }(EnquirySelectionDto));\r\n    exports.SportsEnquirySelectionExDto = SportsEnquirySelectionExDto;\r\n    var FobBetPreEnquiryRequestDto = (function () {\r\n        function FobBetPreEnquiryRequestDto() {\r\n        }\r\n        return FobBetPreEnquiryRequestDto;\r\n    }());\r\n    exports.FobBetPreEnquiryRequestDto = FobBetPreEnquiryRequestDto;\r\n    function isRacingEnquirySelectionDto(sel) {\r\n        var r = sel;\r\n        return (r.FixtureId !== undefined\r\n            && r.FixtureDateTime !== undefined\r\n            && r.RaceNumber !== undefined);\r\n    }\r\n    exports.isRacingEnquirySelectionDto = isRacingEnquirySelectionDto;\r\n    function isSportsEnquirySelectionExDto(sel) {\r\n        var s = sel;\r\n        return s.PropositionSeq !== undefined;\r\n    }\r\n    exports.isSportsEnquirySelectionExDto = isSportsEnquirySelectionExDto;\r\n});\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Specials/Dtos/PyosServiceRequestDto.ts\n// module id = 383\n// module chunks = 5","define([\"require\", \"exports\", \"inversify\", \"../Services/PyosService\", \"../Utils/SpecialsUrlProvider\", \"../Components/Tokens/TokensMapper\", \"../Store/PyosRewardCalculator\", \"../Store/PyosExtensions\", \"../Store/PyosStore\"], function (require, exports, inversify_1, PyosService_1, SpecialsUrlProvider_1, TokensMapper_1, PyosRewardCalculator_1, PyosExtensions_1, PyosStore_1) {\r\n    \"use strict\";\r\n    var services = new inversify_1.KernelModule(function (bind) {\r\n        bind(\"IPyosService\").to(PyosService_1.PyosService).inSingletonScope();\r\n        bind(\"ISpecialsUrlProvider\").to(SpecialsUrlProvider_1.SpecialsUrlProvider);\r\n        bind(\"IPyosRewardCalculator\").to(PyosRewardCalculator_1.PyosRewardCalculator).inSingletonScope();\r\n        bind(\"PyosExtensions\").to(PyosExtensions_1.PyosExtensions).inSingletonScope();\r\n        bind(\"PyosStore\").to(PyosStore_1.PyosStore).inSingletonScope();\r\n        bind(\"ITokensMapper\").to(TokensMapper_1.TokensMapper);\r\n    });\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    exports.default = services;\r\n});\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Specials/IOC/services.config.ts\n// module id = 384\n// module chunks = 5","define([\"require\", \"exports\", \"inversify\", \"../Components/Tokens/FobSpecialTokensViewModel\", \"../Components/ProjectedPay/ProjectedPayViewModel\", \"../Components/PyosMessage/PyosMessageViewModel\", \"../Components/PyosSelect/PyosSelectViewModel\"], function (require, exports, inversify_1, FobSpecialTokensViewModel_1, ProjectedPayViewModel_1, PyosMessageViewModel_1, PyosSelectViewModel_1) {\r\n    \"use strict\";\r\n    var viewmodels = new inversify_1.KernelModule(function (bind) {\r\n        bind(\"IFobSpecialTokensViewModel\").to(FobSpecialTokensViewModel_1.FobSpecialTokensViewModel);\r\n        bind(\"ProjectedPayViewModel\").to(ProjectedPayViewModel_1.ProjectedPayViewModel);\r\n        bind(\"PyosMessageViewModel\").to(PyosMessageViewModel_1.PyosMessageViewModel);\r\n        bind(\"PyosSelectViewModel\").to(PyosSelectViewModel_1.PyosSelectViewModel);\r\n    });\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    exports.default = viewmodels;\r\n});\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Specials/IOC/viewmodels.config.ts\n// module id = 385\n// module chunks = 5","define([\"require\", \"exports\", \"decimal-js\"], function (require, exports, Decimal) {\r\n    \"use strict\";\r\n    var BetSpecialOffer = (function () {\r\n        function BetSpecialOffer() {\r\n        }\r\n        BetSpecialOffer._toDecimal = function (value) {\r\n            return value ? new Decimal(value) : new Decimal(0);\r\n        };\r\n        BetSpecialOffer.normalise = function (bso) {\r\n            return {\r\n                SpecialSeq: bso.SpecialSeq,\r\n                Description: bso.Description,\r\n                Title: bso.Title,\r\n                LegTypeCode: bso.LegTypeCode,\r\n                ShortDescription: bso.ShortDescription,\r\n                SpecialType: bso.SpecialType,\r\n                IsExclusiveLegType: bso.IsExclusiveLegType,\r\n                MaxReward: BetSpecialOffer._toDecimal(bso.MaxReward),\r\n                ProfitMultiplier: BetSpecialOffer._toDecimal(bso.ProfitMultiplier),\r\n                StakeMultiplier: BetSpecialOffer._toDecimal(bso.StakeMultiplier),\r\n                ProjectedReward: BetSpecialOffer._toDecimal(bso.ProjectedReward),\r\n                IsTemplatedSpecial: bso.IsTemplatedSpecial,\r\n                TokenId: bso.TokenId\r\n            };\r\n        };\r\n        return BetSpecialOffer;\r\n    }());\r\n    exports.BetSpecialOffer = BetSpecialOffer;\r\n});\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Specials/Model/BetSpecialOffer.ts\n// module id = 386\n// module chunks = 5","define([\"require\", \"exports\", \"knockout\"], function (require, exports, ko) {\r\n    \"use strict\";\r\n    var SpecialTokenModel = (function () {\r\n        function SpecialTokenModel(id, name, betsAvailable) {\r\n            this.id = id;\r\n            this.name = ko.observable(name);\r\n            this.betsAvailable = ko.observable(betsAvailable);\r\n        }\r\n        return SpecialTokenModel;\r\n    }());\r\n    exports.SpecialTokenModel = SpecialTokenModel;\r\n});\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Specials/Model/SpecialTokenModel.ts\n// module id = 387\n// module chunks = 5","define([\"require\", \"exports\", \"tslib\", \"inversify\"], function (require, exports, tslib_1, inversify_1) {\r\n    \"use strict\";\r\n    var PyosService = (function () {\r\n        function PyosService(appWindow, urlProvider) {\r\n            this.urlProvider = urlProvider;\r\n            this.appWindow = appWindow;\r\n        }\r\n        PyosService.prototype.request = function (url) {\r\n            return this.appWindow.fetch(url, true);\r\n        };\r\n        PyosService.prototype.retrieveFobSpecialTokens = function () {\r\n            var url = this.urlProvider.retrieveFobSpecialTokensUrl;\r\n            var promise = this.request(url);\r\n            return promise.then();\r\n        };\r\n        PyosService.prototype.getSpecialUrl = function (tokenId) {\r\n            var url = this.urlProvider.getSpecialUrl(tokenId);\r\n            var promise = this.request(url);\r\n            return promise.then();\r\n        };\r\n        PyosService.prototype.fobBetPreEnquiry = function (request) {\r\n            var url = this.urlProvider.fobBetPreEnquiryUrl;\r\n            return this.appWindow\r\n                .post(url, request, true)\r\n                .then();\r\n        };\r\n        return PyosService;\r\n    }());\r\n    PyosService = tslib_1.__decorate([\r\n        inversify_1.injectable(),\r\n        tslib_1.__param(0, inversify_1.inject(\"IAppWindow\")),\r\n        tslib_1.__param(1, inversify_1.inject(\"ISpecialsUrlProvider\")),\r\n        tslib_1.__metadata(\"design:paramtypes\", [Object, Object])\r\n    ], PyosService);\r\n    exports.PyosService = PyosService;\r\n});\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Specials/Services/PyosService.ts\n// module id = 388\n// module chunks = 5","define([\"require\", \"exports\", \"tslib\", \"decimal-js\", \"inversify\", \"../Model/Stake\", \"../Model/PriceDetails\", \"../Model/LegTypeCode\"], function (require, exports, tslib_1, Decimal, inversify_1, Stake_1, PriceDetails_1, LegTypeCode_1) {\r\n    \"use strict\";\r\n    var PyosRewardCalculator = (function () {\r\n        function PyosRewardCalculator() {\r\n        }\r\n        PyosRewardCalculator.prototype.legTypeIsEligible = function (offerlegTypeCode, legTypeCode) {\r\n            return ((offerlegTypeCode === LegTypeCode_1.LegTypeCode.WinPlace) || (offerlegTypeCode === legTypeCode));\r\n        };\r\n        PyosRewardCalculator.prototype.calculateLegReward = function (specialOffer, offerlegTypeCode, individualStake, dollarReturn, legTypeCode) {\r\n            if (this.legTypeIsEligible(offerlegTypeCode, legTypeCode)) {\r\n                var profit = new Decimal(dollarReturn).plus(-1.0);\r\n                var actualProfitMultiplier = new Decimal(profit).times(specialOffer.ProfitMultiplier || 0);\r\n                var combinedMultiplier = new Decimal(actualProfitMultiplier).plus(specialOffer.StakeMultiplier || 0);\r\n                return new Decimal(individualStake).times(combinedMultiplier);\r\n            }\r\n            return new Decimal(0);\r\n        };\r\n        PyosRewardCalculator.prototype.checkEligible = function (specialOffer, stake) {\r\n            stake = Stake_1.Stake.normalise(stake);\r\n            if (specialOffer.IsExclusiveLegType) {\r\n                return ((specialOffer.LegTypeCode === LegTypeCode_1.LegTypeCode.Win && stake.Place.isZero())\r\n                    || (specialOffer.LegTypeCode === LegTypeCode_1.LegTypeCode.Place && stake.Win.isZero())\r\n                    || (specialOffer.LegTypeCode === LegTypeCode_1.LegTypeCode.WinPlace && (stake.Win.isZero() || stake.Place.isZero())));\r\n            }\r\n            else {\r\n                return ((specialOffer.LegTypeCode === LegTypeCode_1.LegTypeCode.Win && (!stake.Win.isZero() || stake.Place.isZero()))\r\n                    || (specialOffer.LegTypeCode === LegTypeCode_1.LegTypeCode.Place && (stake.Win.isZero() || !stake.Place.isZero()))\r\n                    || (specialOffer.LegTypeCode === LegTypeCode_1.LegTypeCode.WinPlace));\r\n            }\r\n        };\r\n        PyosRewardCalculator.prototype.calculateProjectedReward = function (specialOffer, stake, priceDetails) {\r\n            stake = Stake_1.Stake.normalise(stake);\r\n            priceDetails = PriceDetails_1.PriceDetails.normalise(priceDetails);\r\n            if (this.checkEligible(specialOffer, stake)) {\r\n                var winReward = this.calculateLegReward(specialOffer, specialOffer.LegTypeCode, stake.Win, priceDetails.Win.DollarReturn, LegTypeCode_1.LegTypeCode.Win);\r\n                var placeReward = this.calculateLegReward(specialOffer, specialOffer.LegTypeCode, stake.Place, priceDetails.Place.DollarReturn, LegTypeCode_1.LegTypeCode.Place);\r\n                var totalReward = Decimal(winReward).plus(placeReward);\r\n                return new Decimal(Decimal.min(specialOffer.MaxReward, totalReward).toFixed(2, Decimal.ROUND_FLOOR));\r\n            }\r\n            return Decimal(0);\r\n        };\r\n        return PyosRewardCalculator;\r\n    }());\r\n    PyosRewardCalculator = tslib_1.__decorate([\r\n        inversify_1.injectable(),\r\n        tslib_1.__metadata(\"design:paramtypes\", [])\r\n    ], PyosRewardCalculator);\r\n    exports.PyosRewardCalculator = PyosRewardCalculator;\r\n});\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Specials/Store/PyosRewardCalculator.ts\n// module id = 389\n// module chunks = 5","define([\"require\", \"exports\", \"tslib\", \"inversify\"], function (require, exports, tslib_1, inversify_1) {\r\n    \"use strict\";\r\n    var SpecialsUrlProvider = (function () {\r\n        function SpecialsUrlProvider() {\r\n            this.initialise();\r\n        }\r\n        SpecialsUrlProvider.prototype.initialise = function () {\r\n            this.retrieveFobSpecialTokensUrl = \"/api/pyos/RetrieveFobSpecialTokens\";\r\n            this.fobBetPreEnquiryUrl = \"/api/pyos/fobbetpreenquiry\";\r\n            this.specialUrl = \"/api/pyos/SpecialUrl\";\r\n        };\r\n        SpecialsUrlProvider.prototype.getSpecialUrl = function (tokenId) {\r\n            var url = this.specialUrl + \"/\" + tokenId;\r\n            return url;\r\n        };\r\n        return SpecialsUrlProvider;\r\n    }());\r\n    SpecialsUrlProvider = tslib_1.__decorate([\r\n        inversify_1.injectable(),\r\n        tslib_1.__metadata(\"design:paramtypes\", [])\r\n    ], SpecialsUrlProvider);\r\n    exports.SpecialsUrlProvider = SpecialsUrlProvider;\r\n});\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/Specials/Utils/SpecialsUrlProvider.ts\n// module id = 390\n// module chunks = 5","require(\"./entry-require.js\");\n\nvar ko = require(\"knockout\");\nvar jQuery = require(\"jquery\");\nvar tabtouch = require(\"./Foundation/TabTouch\");\nvar router = require(\"./Foundation/Router\");\nvar raceBettingPageHandler = require(\"./Foundation/RaceBettingPageRouteHandler\");\nvar nav = require(\"./Foundation/Navigation/Nav\");\nvar common = require(\"./Foundation/Common\");\nvar logon = require(\"./Foundation/Logon\");\nvar legacy = require(\"./include-legacy\");\nvar rightMenu = require(\"./Foundation/ViewModels/PrimaryMenuViewModel-Extension\");\nvar rightMenuViewModel = require(\"./Foundation/ViewModels/PrimaryMenuViewModel\");\nvar featureService = require(\"./Foundation/Services/FeatureService\");\nvar msgBusService = require(\"./Foundation/Services/MessageBusService\");\nvar accountMonitoringService = require(\"./Foundation/Services/AccountMonitoringService\");\nvar deviceIdentificationService = require(\"./Foundation/Services/Device/DeviceIdentificationService\");\nvar analyticsService = require(\"./Foundation/Analytics/AnalyticsService\");\nvar jockeyJsMessageService = require(\"./Foundation/JockeyJS/JockeyJSMessageService\");\nvar checkInService = require(\"./Foundation/Services/Location/CheckInService\");\nvar locationProvider = require(\"./Foundation/Services/Location/LocationProvider\");\nvar modal = require(\"./Foundation/Modal/Modal\");\nvar appDyn = require(\"./Foundation/AppDynamics\");\nvar analyticsDataLayer = require(\"./Foundation/Analytics/AnalyticsDataLayer\");\nvar errorController = require(\"./Foundation/Error\");\nvar inlineRequireDef = require(\"./Foundation/InlineRequireDefinitions\");\nvar bettingInlineRequireDef = require(\"./Betting-v1/InlineRequireDefinitions\");\nvar cookies = require(\"js-cookie\");\nvar cms = require(\"./Foundation/ContentManagementSystem\");\n\nfunction defer(func) {\n    setTimeout(func, 0 );\n}\n\nko.options.deferUpdates = true;\n\nko.onError = function (error) {\n    console.error(\"Knockout Error: \\n\" + error.message);\n    throw error;\n}\n\nwindow.AnalyticsDataLayer = analyticsDataLayer;\n\ndefer( function() {\n    rightMenu.init();    \n\n    defer( function() {\n        ko.applyBindings(rightMenuViewModel, document.getElementById('settings'));\n        ko.applyBindings({}, document.getElementById('myBetsAndOffers'));\n\n        rightMenuViewModel.initView();\n    });\n});\n\ndefer( function() {\n    setupLoginRefresh();\n    setupJockeyJs();\n});\n\ndefer(function() {\n    checkFeatures();\n});\n\ndefer(function() {\n    modal.init();\n});\n\ndefer(function() {\n    errorController.init();\n    tabtouch.init();\n});\n\nnav.setRaceBettingPageHandler(raceBettingPageHandler.handle);\n\n//Hook in Google Analytics\nmsgBusService.subscribe(\"nav.content.shown\", function(url) {\n    //Google Analytics\n    if (window._gaq != null) {\n        window._gaq.push(['_trackPageview', url]);\n    }\n});\n\n//Init app dynamics\nappDyn.init();\n\n//Init nav\nnav.init();\nnav.initHomeUrl(window.tabtouchhomeurl);\n\n//Default route\nrouter.addRoute(\"^.*$\", \"^.*$\", nav.nav);\n\n//Start navigation\nrouter.follow(window.location.hash);\n\n//Preload BPR bundle           \nrequire.ensure([], function() {\n    require('./include-betting-v2');\n    console.log(\"betting-v2 has been preloaded\");\n},'betting-v2');\n\n//Hide URL bar\ndefer(common.hideURLbar);\n\nif (cookies.get('ShowDepositModal')) {\n    cookies.remove('ShowDepositModal', { path: '/' });\n    ModalService.deposit();\n}\n\nfunction setupJockeyJs() {\n    jockeyJsMessageService.start();\n}\n\nfunction setupLoginRefresh() {\n    msgBusService.subscribe('lo.login', function () {\n        featureService.clear();\n        checkFeatures();\n    });\n    msgBusService.subscribe('lo.logout', function () {\n        featureService.clear();\n        checkFeatures();\n    });\n};\n\nfunction checkFeatures() {\n    featureService.isActive(\"Analytics\")\n        .then(function (active) {\n            if (active) {\n                analyticsService.start();\n            } else {\n                analyticsService.stop();\n            }\n        });\n    featureService.isActive(\"DynamicCashBetting\")\n        .then(function (active) {\n            if (active) {\n                msgBusService.publish('DynamicCashBetting.On');\n            } else {\n                msgBusService.publish('DynamicCashBetting.Off');\n            }\n        });\n    featureService.isActive(\"LocationBasedServices\")\n        .then(function (active) {\n            if (active) {\n                var checkedInLocationId = checkInService.checkedInLocationId();\n                if (checkedInLocationId !== '') {\n                    locationProvider.start();\n                } else {\n                    locationProvider.stop();\n                }\n            } else {\n                locationProvider.stop();\n            }\n        });\n}\n\n//TEMP - iOS app expects LO to be global (no other code expects it so safe to remove once iOS app is updated)\nwindow.LO = logon;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Scripts/src/entry-main.js\n// module id = 393\n// module chunks = 5"],"sourceRoot":""}